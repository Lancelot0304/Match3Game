window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"1ac16pHWR5IiqnHMRYn6oFB","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioInfo=void 0;var n=function(){return function(){this.MusicId=-1,this.Music="",this.Volume=0,this.Loop=!1}}();o.AudioInfo=n;var i=function(){function t(){this._AudioBGM=null,this._AUdioRunTime={},this._AudioBGM=new n}return t.prototype.play=function(t,e,o,n,i){void 0===e&&(e=1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=null);var r=0,a=cc.loader.getRes(t);a?(r=this._playAudio(a,e,o,n),i&&i(r)):cc.loader.loadRes(t,function(s,c){s||(a=cc.loader.getRes(t),r=this._playAudio(a,e,o,n),i&&i(r))}.bind(this))},t.prototype._playAudio=function(t,e,o,n){void 0===e&&(e=1),void 0===o&&(o=!1);var i=0;if(n)this._shopBGM(),i=cc.audioEngine.play(t,o,e),this._AudioBGM.MusicId=i,this._AudioBGM.Volume=e,this._AudioBGM.Music=t,this._AudioBGM.Loop=o;else{if(!this._checkPlay(t))return i;i=cc.audioEngine.play(t,o,e)}return i},t.prototype.stopBGM=function(){this._shopBGM()},t.prototype._shopBGM=function(){return!(this._AudioBGM.MusicId<0)&&(this.stop(this._AudioBGM.MusicId),this._AudioBGM.MusicId=-1,this._AudioBGM.Music="",this._AudioBGM.Loop=!1,this._AudioBGM.Volume=0,!0)},t.prototype.resumeBGM=function(){if(this._AudioBGM.MusicId<0)return!1;cc.audioEngine.resume(this._AudioBGM.MusicId)},t.prototype.setLoop=function(t,e){return cc.audioEngine.setLoop(t,e),!0},t.prototype.setVolume=function(t,e){return cc.audioEngine.setVolume(t,e),!0},t.prototype.stop=function(t){return cc.audioEngine.stop(t),!0},t.prototype.stopAll=function(){return cc.audioEngine.stopAll(),this._AUdioRunTime={},!0},t.prototype._checkPlay=function(t){return!(this._AUdioRunTime[t]+100>=(new Date).getTime())&&(this._AUdioRunTime[t]=(new Date).getTime(),!0)},t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.instance=null,t}();o.default=i,cc._RF.pop()},{}],AvailableSwapInfo:[function(t,e,o){"use strict";cc._RF.push(e,"7ceb3Iv0qhJ853GvO8jl3WW","AvailableSwapInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.AvailableSwapBaseValue=void 0;var n=t("../../../../base/Pair"),i=t("../../../../extend/utils/GameMath");(function(t){t[t.None=0]="None",t[t.MatchColor=2e7]="MatchColor",t[t.MergerBomb=3e7]="MergerBomb",t[t.MatchBomb=1e7]="MatchBomb"})(o.AvailableSwapBaseValue||(o.AvailableSwapBaseValue={}));var r=function(){function t(){this.swapPair=new n.Pair(i.default.INVALID_LOGICAL_POSITION,i.default.INVALID_LOGICAL_POSITION),this.linkedPositions=[],this.value=0}return t.create=function(){return new t},t}();o.default=r,cc._RF.pop()},{"../../../../base/Pair":"Pair","../../../../extend/utils/GameMath":"GameMath"}],BehaviourDefines:[function(t,e,o){"use strict";cc._RF.push(e,"462f4mCAYhNl5k1zhuiH9fQ","BehaviourDefines");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.BehaviourEvent=void 0;var i=function(t){function e(){var o=t.call(this,e.BehaviourEventName,!0)||this;return o.behaviourName="",o}return n(e,t),e.create=function(t){var o=new e;return o.behaviourName=t,o},e.BehaviourEventName="BehaviourEventName",e}(cc.Event.EventCustom);o.BehaviourEvent=i;var r=function(){function t(){}return t.GuideTapAnyWhere="GuideTapAnyWhere",t.GuideFinish="GuideFinish",t.EnterMainSceneBegin="EnterMainSceneBegin",t.EnterMainSceneEnd="EnterMainSceneEnd",t.PetHouseOpenBegin="PetHouseOpenBegin",t.PetHouseOpenEnd="PetHouseOpenEnd",t.PetHouseCloseBegin="PetHouseCloseBegin",t.PetHouseCloseEnd="PetHouseCloseEnd",t.PrepareGameBegin="PrepareGameBegin",t.PrepareGameEnd="PrepareGameEnd",t.SelectedBeignLine="SelectedBeignLine",t.SelectedBeginRange="SelectedBeginRange",t.SelectedBeginRainbow="SelectedBeginRainbow",t.StartGameBegin="StartGameBegin",t.StartGameEnd="StartGameEnd",t.EnterFeedSceneBegin="EnterFeedSceneBegin",t.EnterFeedSceneEnd="EnterFeedSceneEnd",t.QuitFeedScene="QuitFeedScene",t.EnterBathSceneBegin="EnterBathSceneBegin",t.EnterBathSceneEnd="EnterBathSceneEnd",t.QuitBathScene="QuitBathScene",t.EnterSleepSceneBegin="EnterSleepSceneBegin",t.EnterSleepSceneEnd="EnterSleepSceneEnd",t.QuitSleepScene="QuitSleepScene",t.EnterDigGoldSceneBegin="EnterDigGoldSceneBegin",t.EnterDigGoldSceneEnd="EnterDigGoldSceneEnd",t.DigGoldSelectDogBegin="DigGoldSelectDogBegin",t.DigGoldSelectDogEnd="DigGoldSelectDogEnd",t.DigGoldBegin="DigGoldBegin",t.DigGoldEnd="DigGoldEnd",t.DigGoldRewardPanelOpenBegin="DigGoldRewardPanelOpenBegin",t.DigGoldRewardPanelOpenEnd="DigGoldRewardPanelOpenEnd",t.DigGoldRewardPanelCloseBegin="DigGoldRewardPanelCloseBegin",t.DigGoldRewardPanelCloseEnd="DigGoldRewardPanelCloseEnd",t.QuitDigGoldScene="QuitDigGoldScene",t.UpgradePanelOpenBegin="UpgradePanelOpenBegin",t.UpgradePanelOpenEnd="UpgradePanelOpenEnd",t.UpgradePanelCloseBegin="UpgradePanelCloseBegin",t.UpgradePanelCloseEnd="UpgradePanelCloseEnd",t.GameSwapItemsBegin="GameSwapItemsBegin",t.GameSwapItemsEnd="GameSwapItemsEnd",t.GameUseHammerBegin="GameUseHammerBegin",t.GameUseHammerEnd="GameUseHammerEnd",t.GameUseBombBegin="GameUseBombBegin",t.GameUseBombEnd="GameUseBombEnd",t.GameUseSwapBegin="GameUseSwapBegin",t.GameUseSwapSelectFirst="GameUseSwapSelectFirst",t.GameUseSwapEnd="GameUseSwapEnd",t}();o.default=r,cc._RF.pop()},{}],CFGTripleLevelGrass:[function(t,e,o){"use strict";cc._RF.push(e,"dfa6enUDNpGeJL9chjmQBoL","CFGTripleLevelGrass"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleLevelGrass=void 0;var n=function(){function t(){this.cfgPath="CFGTripleLevelGrass",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.prototype.getCongfigByLevelID=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.LevelID==t)return n}return null},t}();o.CFGTripleLevelGrass=n,cc._RF.pop()},{}],CFGTripleLevelOrder:[function(t,e,o){"use strict";cc._RF.push(e,"acea1gLIq9FupEQr+sWp/YW","CFGTripleLevelOrder"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleLevelOrder=void 0;var n=function(){function t(){this.cfgPath="CFGTripleLevelOrder",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.prototype.getCongfigByLevelID=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.LevelID==t)return n}return null},t}();o.CFGTripleLevelOrder=n,cc._RF.pop()},{}],CFGTripleLevelPath:[function(t,e,o){"use strict";cc._RF.push(e,"9bfe5BaFHpPOIs33y77oxjM","CFGTripleLevelPath"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleLevelPath=void 0;var n=function(){function t(){this.cfgPath="CFGTripleLevelPath",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.prototype.getCongfigByLevelID=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.LevelID==t)return n}return null},t}();o.CFGTripleLevelPath=n,cc._RF.pop()},{}],CFGTripleLevelPopsicles:[function(t,e,o){"use strict";cc._RF.push(e,"db582KmYy5PrLv5P7/jEXmk","CFGTripleLevelPopsicles"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleLevelPopsicles=void 0;var n=function(){function t(){this.cfgPath="CFGTripleLevelPopsicles",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.prototype.getCongfigByLevelID=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.LevelID==t)return n}return null},t}();o.CFGTripleLevelPopsicles=n,cc._RF.pop()},{}],CFGTripleLevel:[function(t,e,o){"use strict";cc._RF.push(e,"02ac1Nk+AVKz61fHb+Mf8Fu","CFGTripleLevel"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleLevel=void 0;var n=function(){function t(){this.cfgPath="CFGTripleLevel",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getCongfigByLevelNum=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.LevelNum==t)return n}return null},t.instance=null,t}();o.CFGTripleLevel=n,cc._RF.pop()},{}],CFGTripleMapTileset:[function(t,e,o){"use strict";cc._RF.push(e,"ffb5809hitMeaIbv3b2MTuD","CFGTripleMapTileset"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleMapTileset=void 0;var n=function(){function t(){this.cfgPath="CFGTripleMapTileset",this.cfgObj=[];var t=cc.loader.getRes("data/"+this.cfgPath,cc.JsonAsset);t&&(this.cfgObj=t.json)}return t.prototype.getTilesetByName=function(t){for(var e=0,o=this.cfgObj;e<o.length;e++){var n=o[e];if(n.TilesetName==t)return n}return null},t}();o.CFGTripleMapTileset=n,cc._RF.pop()},{}],CFGTripleMap:[function(t,e,o){"use strict";cc._RF.push(e,"5ebe7x3EbROf6zU9r80ItFe","CFGTripleMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.CFGTripleMap=void 0;var n=function(){function t(){this.cfgPath="CFGTripleMap"}return t.prototype.getMapDataByMapId=function(t){var e="",o=cc.loader.getRes("data/"+this.cfgPath+t,cc.JsonAsset);o&&(e=o.json.MapData);return e},t}();o.CFGTripleMap=n,cc._RF.pop()},{}],CellBase:[function(t,e,o){"use strict";cc._RF.push(e,"1e76atfjXRFs6pgsRP71D7m","CellBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GenerateType=o.CellType=void 0;var r,a,s=t("../../../../extend/utils/GameMath"),c=t("../../commond/GridCommand"),l=t("../../defines/EntityGroupID"),p=t("../../defines/EntityID"),u=t("../../defines/IdentifierManager"),y=t("../../defines/TMXConfigInfoKeys"),h=t("../EntityBase");(function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Conveyer=2]="Conveyer",t[t.MovablePlate=3]="MovablePlate"})(r=o.CellType||(o.CellType={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Probabilistic=2]="Probabilistic",t[t.List=3]="List"}(a=o.GenerateType||(o.GenerateType={}));var m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cellType=r.None,e._crystalAttackPriority=999,e._isBoneCollector=!1,e._needGrass=!1,e._generateType=a.None,e._generateCount=0,e._dropEntityMap={},e._dropList=[],e._dropIndex=0,e._isWormholeEntrance=!1,e._wormholeDestination=cc.Vec2.ZERO,e._isWormholeExit=!1,e._wormholeSource=cc.Vec2.ZERO,e}return n(e,t),e.prototype.getCellType=function(){return this._cellType},e.prototype.getCrystalAttackPriority=function(){return this._crystalAttackPriority},e.prototype.setCrystalAttackPriority=function(t){this._crystalAttackPriority=t},e.prototype.getIsBoneCollector=function(){return this._isBoneCollector},e.prototype.setIsBoneCollector=function(t){this._isBoneCollector=t},e.prototype.getNeedGrass=function(){return this._needGrass},e.prototype.setNeedGrass=function(t){this._needGrass=t},e.prototype.getGenerateType=function(){return this._generateType},e.prototype.setGenerateType=function(t){this._generateType=t},e.prototype.getGenerateCount=function(){return this._generateCount},e.prototype.setGenerateCount=function(t){this._generateCount=t},e.prototype.canGenerateItem=function(){switch(this._generateType){case a.Default:case a.Probabilistic:case a.List:return!0}return!1},e.prototype.nextItemID=function(){var t=p.EntityID.None;switch(this._generateType){case a.Default:t=this.getGrid().getGlobalRandomEntityID();break;case a.Probabilistic:var e=this.getGrid();t=e.getRandomEntityID(this._dropEntityMap,e.getLimitedEntityMap(),e.getLimitedGroupMap()),this._generateCount>0&&(this._generateCount--,this._generateCount<=0&&(this._generateType=a.Default));break;case a.List:if(this._dropIndex<this._dropList.length){var o=this._dropList[this._dropIndex],n=u.default.getInstance().getEntityIDFromString(o);if(n!=p.EntityID.None)t=n;else{var i=u.default.getInstance().getEntityGroupIDFromString(o);if(i!=l.EntityGroupID.None){for(var r=this.getGrid().getDropEntityMap(),c=0,y=0,h=u.default.getInstance().getEntityIDsFromEntityGroupID(l.EntityGroupID.ItemNormal);y<h.length;y++){(I=r[h[y]])&&(c+=I)}for(var m=u.default.getInstance().getEntityIDsFromEntityGroupID(i),f=s.default.randomInt(0,c),d=0,_=0,g=m;_<g.length;_++){var I,C=g[_];if((I=r[u.default.getInstance().getCorrespondingNormlaEntityID(C)])&&f<=(d+=I)){t=C;break}}}}t!=p.EntityID.None&&(this._dropIndex=(this._dropIndex+1)%this._dropList.length,this._generateCount>0&&(this._generateCount--,this._generateCount<=0&&(this._generateType=a.Default)))}}return t},e.prototype.getDropEntityMap=function(){return this._dropEntityMap},e.prototype.setDropEntityMap=function(t){this._dropEntityMap=t},e.prototype.getDropList=function(){return this._dropList},e.prototype.setDropList=function(t){this._dropList=t},e.prototype.getDropIndex=function(){return this._dropIndex},e.prototype.setDropIndex=function(t){this._dropIndex=t},e.prototype.getIsWormholeEntrance=function(){return this._isWormholeEntrance},e.prototype.setIsWormholeEntrance=function(t){this._isWormholeEntrance=t},e.prototype.getWormholeDestination=function(){return this._wormholeDestination},e.prototype.setWormholeDestination=function(t){this._wormholeDestination=t},e.prototype.getIsWormholeExit=function(){return this._isWormholeExit},e.prototype.setIsWormholeExit=function(t){this._isWormholeExit=t},e.prototype.getWormholeSource=function(){return this._wormholeSource},e.prototype.setWormholeSource=function(t){this._wormholeSource=t},e.prototype.canHoldItem=function(){return!0},e.prototype.canPassThrough=function(){return!1},e.prototype.initDropEntityMap=function(t,e){this._dropEntityMap={};var o=u.default.getInstance().phraseKeyValuePairs(t,e);for(var n in o){var i=Number(o[n]);(f=u.default.getInstance().getEntityIDFromString(n))!=p.EntityID.None&&(this._dropEntityMap[f]=100*i)}for(var r=this.getGrid().getDropEntityMap(),a=0,s=0,c=u.default.getInstance().getEntityIDsFromEntityGroupID(l.EntityGroupID.ItemNormal);s<c.length;s++){(i=r[f=c[s]])&&(a+=i)}for(var n in o){i=100*Number(o[n]);var y=u.default.getInstance().getEntityGroupIDFromString(n);if(y!=l.EntityGroupID.None)for(var h=0,m=u.default.getInstance().getEntityIDsFromEntityGroupID(y);h<m.length;h++){var f=m[h],d=r[u.default.getInstance().getCorrespondingNormlaEntityID(f)];d&&(this._dropEntityMap[f]=i*(d/a))}}},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e);var o=e[y.default.CFG_MATIC_CRYSTAL_ATK_POINT];o&&this.setCrystalAttackPriority(Number(o));var n=e[y.default.CFG_DROP_KEY_TYPE];if(n){if(n==y.default.CFG_DROP_VALUE_TYPE_DEFAULT)this._generateType=a.Default;else if(n==y.default.CFG_DROP_VALUE_TYPE_NOT)this._generateType=a.None;else if(n==y.default.CFG_DROP_VALUE_TYPE_PROB){this._generateType=a.Probabilistic;var i=e[y.default.CFG_DROP_KEY_BOX],r=e[y.default.CFG_DROP_KEY_PROB];i&&r&&this.initDropEntityMap(i,r),(d=e[y.default.CFG_DROP_KEY_NUM])&&(this._generateCount=Number(d)),s.default.isEmptyObject(this._dropEntityMap)&&(this._generateType=a.Default)}else if(n==y.default.CFG_DROP_VALUE_TYPE_LIST){this._generateType=a.List,this._dropIndex=0,s.default.clearArray(this._dropList);var c=e[y.default.CFG_DROP_KEY_BOX];if(c){for(var h=0,m=i=u.default.getInstance().phraseTokens(c);h<m.length;h++){var f=m[h];if(u.default.getInstance().getEntityIDFromString(f)!=p.EntityID.None)this._dropList.push(f);else u.default.getInstance().getEntityGroupIDFromString(f)!=l.EntityGroupID.None&&this._dropList.push(f)}var d;s.default.isEmptyObject(this._dropList)&&(this._generateType=a.Default),(d=e[y.default.CFG_DROP_KEY_NUM])&&(this._generateCount=Number(d))}}}else e[y.default.CFG_DROP_KEY_IS_TOP]&&(this._generateType=a.Default);var _=e[y.default.CFG_MARK_BONE_COLLECTOR_KEY_TYPE];_&&_==y.default.CFG_MARK_BONE_COLLECTOR_VALUE_DEFAULT&&this.setIsBoneCollector(!0);var g=e[y.default.CFG_WORMHOLE_KEY_TYPE];if(g)if(g==y.default.CFG_WORMHOLE_VALUE_ENTRANCE)(I=e[y.default.CFG_WORMHOLE_POSTAL_KEY_TYPE])&&(C=s.default.getVec2FromConfigString(I))&&(this.setWormholeDestination(C),this.setIsWormholeEntrance(!0));else if(g==y.default.CFG_WORMHOLE_VALUE_EXIT){var I,C;if(I=e[y.default.CFG_WORMHOLE_POSTAL_KEY_TYPE])(C=s.default.getVec2FromConfigString(I))&&(this.setWormholeSource(C),this.setIsWormholeExit(!0),this.setGenerateType(a.None))}else g==y.default.CFG_WORMHOLE_VALUE_NONE&&(this.setIsWormholeEntrance(!1),this.setWormholeDestination(s.default.INVALID_LOGICAL_POSITION),this.setIsWormholeExit(!1),this.setWormholeSource(s.default.INVALID_LOGICAL_POSITION))},e.prototype.onConvey=function(){return s.default.INVALID_LOGICAL_POSITION},e.prototype.canExcuteCommand=function(t){switch(t.type){case c.GridCommandType.LayoutGrass:return this.canLayoutGrass();case c.GridCommandType.BombClean:return this.canCleanByBomb(t.cleanColor)}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case c.GridCommandType.LayoutGrass:var e=p.EntityCleanOption.create(p.EntityCleanType.LayoutGrass,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass);this.onClean(e)}},e.prototype.onClean=function(t){this._onClean(t),this.setImmuneDamage(!0)},e.prototype._onClean=function(t){},e.prototype.canCleanByBomb=function(t){return!this.getImmuneDamage()&&this._canCleanByBomb(t)},e.prototype._canCleanByBomb=function(t){return!1},e.prototype.canLayoutGrass=function(){return!this.getImmuneDamage()&&this._canLayoutGrass()},e.prototype._canLayoutGrass=function(){return!1},e.prototype.initCell=function(e,o){t.prototype.initEntity.call(this,e,p.EntityType.Cell),this._cellType=o,this._crystalAttackPriority=999,this._isBoneCollector=!1,this._needGrass=!1,this._generateType=a.None,this._generateCount=0,this._dropEntityMap={},this._dropList.length=0,this._dropIndex=0,this._isWormholeEntrance=!1,this._wormholeDestination=cc.Vec2.ZERO,this._isWormholeExit=!1,this._wormholeSource=cc.Vec2.ZERO},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._dropEntityMap=null,this._dropList=null,this._wormholeDestination=null,this._wormholeSource=null},e=i([f],e)}(h.default));o.default=d,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityGroupID":"EntityGroupID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../EntityBase":"EntityBase"}],CellConveyer:[function(t,e,o){"use strict";cc._RF.push(e,"32e20Y7o/VAb6JnIIAsEY5X","CellConveyer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CellConveyerDirection=void 0;var r,a=t("../../../../extend/utils/GameMath"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../../defines/TMXConfigInfoKeys"),p=t("../EntityPrefabNodePool"),u=t("./CellBase"),y=t("./CellNormal");(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=3]="Up",t[t.Down=4]="Down"})(r=o.CellConveyerDirection||(o.CellConveyerDirection={}));var h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._inDirection=r.None,e._outDirection=r.None,e._postalPos=a.default.INVALID_LOGICAL_POSITION.clone(),e}return n(e,t),e.prototype.getCollectionID=function(){return s.CollectionID.CellConveyer},e.prototype.getEntityID=function(){var t=c.EntityID.None;switch(this._inDirection){case r.Left:switch(this._outDirection){case r.Right:t=c.EntityID.CellConveyerL2R;break;case r.Up:t=c.EntityID.CellConveyerL2U;break;case r.Down:t=c.EntityID.CellConveyerL2D}break;case r.Right:switch(this._outDirection){case r.Left:t=c.EntityID.CellConveyerR2L;break;case r.Up:t=c.EntityID.CellConveyerR2U;break;case r.Down:t=c.EntityID.CellConveyerR2D}break;case r.Up:switch(this._outDirection){case r.Left:t=c.EntityID.CellConveyerU2L;break;case r.Right:t=c.EntityID.CellConveyerU2R;break;case r.Down:t=c.EntityID.CellConveyerU2D}break;case r.Down:switch(this._outDirection){case r.Left:t=c.EntityID.CellConveyerD2L;break;case r.Right:t=c.EntityID.CellConveyerD2R;break;case r.Up:t=c.EntityID.CellConveyerD2U}}return t},e.prototype.getInDirection=function(){return this._inDirection},e.prototype.setInDirection=function(t){this._inDirection=t},e.prototype.getOutDirection=function(){return this._outDirection},e.prototype.setOutDirection=function(t){this._outDirection=t},e.prototype.getPostalPos=function(){return this._postalPos},e.prototype.setPostalPos=function(t){this._postalPos=t},e.prototype.dealWithConfigMap=function(e){if(t.prototype.dealWithConfigMap.call(this,e),e[l.default.CFG_CONVEYER_POSTAL_KEY_TYPE]){var o=e[l.default.CFG_CONVEYER_POSTAL_VALUE_KEY];o&&(this._postalPos=a.default.getVec2FromConfigString(o))}},e.prototype.getInLogicalPos=function(){var t=this.getLogicalPos();if(!this._postalPos.equals(a.default.INVALID_LOGICAL_POSITION)){var e=this.getGrid().getCellAtLogicalPos(this._postalPos);if(e&&e.getCellType()==u.CellType.Conveyer)switch(e.getInDirection()){case r.Left:t=this._postalPos.add(cc.v2(-1,0));break;case r.Right:t=this._postalPos.add(cc.v2(1,0));break;case r.Up:t=this._postalPos.add(cc.v2(0,1));break;case r.Down:t=this._postalPos.add(cc.v2(0,-1))}}return t},e.prototype.getOutLogicalPos=function(){var t=this.getLogicalPos().clone();if(this._postalPos.equals(a.default.INVALID_LOGICAL_POSITION))switch(this._outDirection){case r.Left:t.addSelf(cc.v2(-1,0));break;case r.Right:t.addSelf(cc.v2(1,0));break;case r.Up:t.addSelf(cc.v2(0,1));break;case r.Down:t.addSelf(cc.v2(0,-1))}else t=this._postalPos;return t},e.prototype.getDoppelgangerInLogicalPos=function(){return this.getLogicalPos()},e.prototype.getDoppelgangerOutLogicalPos=function(){var t=this.getLogicalPos().clone();switch(this._outDirection){case r.Left:t.addSelf(cc.v2(-1,0));break;case r.Right:t.addSelf(cc.v2(1,0));break;case r.Up:t.addSelf(cc.v2(0,1));break;case r.Down:t.addSelf(cc.v2(0,-1))}return t},e.prototype.conveyerEntity=function(t,e,o){var n=this.getGrid(),i=this.getLogicalPos(),r=n.getEntity(t,i);if(r){r.removeFromGrid(),n.getConveyerLayer().addChild(r.node),r.node.setPosition(r.getPixelPos(e)),n.addObstructs(r);var a=r.getPixelPos(o),s=cc.sequence(cc.moveTo(.4,a),cc.callFunc(function(){n.setEntity(r,o),n.removeObstructs(r)}));r.runAction(s)}},e.prototype.conveyerDoppelganger=function(t,e,o){var n=this.getGrid(),i=this.getLogicalPos(),r=n.getEntity(t,i);if(r){var a=r.clone();if(a){n.getConveyerLayer().addChild(a.node),a.node.setPosition(r.getPixelPos(e)),a.node.zIndex=r.getTopZOrder();var s=r.getPixelPos(o),c=cc.sequence(cc.moveTo(.4,s),cc.callFunc(function(){a.node.destroy()}));a.runAction(c)}}},e.prototype.onConvey=function(){var t=[c.EntityType.Popsicle,c.EntityType.Floor,c.EntityType.Rug,c.EntityType.Item,c.EntityType.Parasite],e=this.getInLogicalPos(),o=this.getOutLogicalPos(),n=this.getDoppelgangerInLogicalPos(),i=this.getDoppelgangerOutLogicalPos(),r=!1;this.getPostalPos().equals(a.default.INVALID_LOGICAL_POSITION)||(r=!0);for(var s=0,l=t;s<l.length;s++){var p=l[s];r&&this.conveyerDoppelganger(p,n,i),this.conveyerEntity(p,e,o)}return o},e.prototype.initConveyer=function(e,o,n){t.prototype.initCell.call(this,e,u.CellType.Conveyer),this._inDirection=o,this._outDirection=n,this._postalPos=a.default.INVALID_LOGICAL_POSITION.clone(),this.updatePuppet()},e.createConveyer=function(t,e,o){var n=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/cell/CellConveyer","CellConveyer");return n?(n.initConveyer(t,e,o),n):null},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._postalPos=null},e=i([m],e)}(y.default));o.default=f,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../EntityPrefabNodePool":"EntityPrefabNodePool","./CellBase":"CellBase","./CellNormal":"CellNormal"}],CellFactory:[function(t,e,o){"use strict";cc._RF.push(e,"02f08L1m3FM44141aqW7gzu","CellFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./CellNormal"),a=t("./CellConveyer"),s=t("./CellMovablePlate"),c=function(){function t(){}return t.generateCellWithEntityID=function(t,e){var o=null;switch(e){case n.EntityID.CellNormal:o=r.default.create(t);break;case n.EntityID.CellConveyerL2R:o=a.default.createConveyer(t,a.CellConveyerDirection.Left,a.CellConveyerDirection.Right);break;case n.EntityID.CellConveyerL2U:o=a.default.createConveyer(t,a.CellConveyerDirection.Left,a.CellConveyerDirection.Up);break;case n.EntityID.CellConveyerL2D:o=a.default.createConveyer(t,a.CellConveyerDirection.Left,a.CellConveyerDirection.Down);break;case n.EntityID.CellConveyerR2L:o=a.default.createConveyer(t,a.CellConveyerDirection.Right,a.CellConveyerDirection.Left);break;case n.EntityID.CellConveyerR2U:o=a.default.createConveyer(t,a.CellConveyerDirection.Right,a.CellConveyerDirection.Up);break;case n.EntityID.CellConveyerR2D:o=a.default.createConveyer(t,a.CellConveyerDirection.Right,a.CellConveyerDirection.Down);break;case n.EntityID.CellConveyerU2L:o=a.default.createConveyer(t,a.CellConveyerDirection.Up,a.CellConveyerDirection.Left);break;case n.EntityID.CellConveyerU2R:o=a.default.createConveyer(t,a.CellConveyerDirection.Up,a.CellConveyerDirection.Right);break;case n.EntityID.CellConveyerU2D:o=a.default.createConveyer(t,a.CellConveyerDirection.Up,a.CellConveyerDirection.Down);break;case n.EntityID.CellConveyerD2L:o=a.default.createConveyer(t,a.CellConveyerDirection.Down,a.CellConveyerDirection.Left);break;case n.EntityID.CellConveyerD2R:o=a.default.createConveyer(t,a.CellConveyerDirection.Down,a.CellConveyerDirection.Right);break;case n.EntityID.CellConveyerD2U:o=a.default.createConveyer(t,a.CellConveyerDirection.Down,a.CellConveyerDirection.Up);break;case n.EntityID.CellMovablePlate:o=s.default.create(t)}return o},t.generateCellWithKindID=function(t,e){var o=i.default.getInstance().getEntityIDFromKindID(e);return this.generateCellWithEntityID(t,o)},t}();o.default=c,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./CellConveyer":"CellConveyer","./CellMovablePlate":"CellMovablePlate","./CellNormal":"CellNormal"}],CellMovablePlate:[function(t,e,o){"use strict";cc._RF.push(e,"12df3w6nXlK8ZWf3CHZXOMH","CellMovablePlate");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../extend/utils/GameMath"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../defines/TMXConfigInfoKeys"),l=t("../EntityPrefabNodePool"),p=t("./CellBase"),u=t("./CellNormal"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._movePath=[],e._moveInterval=1,e._moveSteps=1,e._hasFirstMove=!1,e._firstMoveSteps=0,e._firstMoveInterval=0,e._currentInterval=0,e._currentPathIndex=0,e}return n(e,t),e.create=function(t){var e=l.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/cell/CellMovablePlate","CellMovablePlate");return e?(e.init(t),e):null},e.prototype.init=function(e){t.prototype.initCell.call(this,e,p.CellType.MovablePlate),this._movePath.length=0,this._moveInterval=1,this._moveSteps=1,this._hasFirstMove=!1,this._firstMoveSteps=0,this._firstMoveInterval=0,this._currentInterval=0,this._currentPathIndex=0},e.prototype.getCollectionID=function(){return a.CollectionID.CellMovablePlate},e.prototype.getEntityID=function(){return s.EntityID.CellMovablePlate},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e);var o=[],n=e[c.default.CFG_MOVABLE_PLATE_PATH_KEY_TYPE];if(n){var i=0;for(var r in n)i+=1;for(var a=0;a<i;a++){var s=n[a];o.push(s)}}if(o.length>0){i=o.length;this._movePath.push(o[0]);for(var l=0;l<i;l++)if(l+1<i){var p=o[l],u=o[l+1].sub(p),y=0,h=cc.Vec2.ZERO;0==u.x?(y=Math.abs(u.y),h=u.y>0?cc.v2(0,1):cc.v2(0,-1)):0==u.y&&(y=Math.abs(u.x),h=u.x>0?cc.v2(1,0):cc.v2(-1,0));for(var m=1;m<=y;m++){s=p.add(h.mul(m));this._movePath.push(s)}}if(this._movePath[this._movePath.length-1].equals(this._movePath[0]))this._movePath.pop();else for(a=this._movePath.length-2;a>0;a--)this._movePath.push(this._movePath[a])}var f=e[c.default.CFG_MOVABLE_PLATE_PATH_MOVE_TYPE];f&&(this._moveSteps=Number(f));var d=e[c.default.CFG_MOVABLE_PLATE_PATH_STEP_TYPE];d&&(this._moveInterval=Number(d));var _=e[c.default.CFG_MOVABLE_PLATE_PATH_FIRST_MOVE_TYPE];_&&(this._firstMoveSteps=Number(_),this._hasFirstMove=!0);var g=e[c.default.CFG_MOVABLE_PLATE_PATH_FIRST_STEP_TYPE];g&&(this._firstMoveInterval=Number(g),this._hasFirstMove=!0)},e.prototype.onConvey=function(){this._currentInterval+=1;var t=0;if(this._hasFirstMove?this._currentInterval>=this._firstMoveInterval&&(t=this._firstMoveSteps,this._hasFirstMove=!1,this._currentInterval=0):this._currentInterval>=this._moveInterval&&(t=this._moveSteps,this._currentInterval=0),t>0){var e=[];e.push(this._movePath[this._currentPathIndex]);for(var o=this._movePath.length,n=0;n<t;n++)this._currentPathIndex=(this._currentPathIndex+1)%o,e.push(this._movePath[this._currentPathIndex]);if(e.length>0){for(var i=0,a=[s.EntityType.Cell,s.EntityType.Popsicle,s.EntityType.Floor,s.EntityType.Rug,s.EntityType.Item,s.EntityType.Parasite];i<a.length;i++){var c=a[i];this.moveEntity(c,e)}return e[e.length-1]}}return r.default.INVALID_LOGICAL_POSITION},e.prototype.moveEntity=function(t,e){var o=this.getGrid(),n=e[0],i=e[e.length-1],r=o.getEntity(t,n);if(r){r.removeFromGridAndAddToEffect(),o.addObstructs(r);for(var a=e.length,s=[],c=0;c<a;c++)s.push(cc.moveTo(.4,r.getPixelPos(e[c])));var l=cc.callFunc(function(){o.setEntity(r,i),o.removeObstructs(r)});s.push(l),r.runAction(cc.sequence(s))}},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._movePath=null},e=i([h],e)}(u.default));o.default=m,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../EntityPrefabNodePool":"EntityPrefabNodePool","./CellBase":"CellBase","./CellNormal":"CellNormal"}],CellNormal:[function(t,e,o){"use strict";cc._RF.push(e,"d65a12G7H5JrYgflbeXw41e","CellNormal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./CellBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../floor/FloorGrass"),l=t("../EntityPrefabNodePool"),p=t("../../commond/GridCommand"),u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){var e=l.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/cell/CellNormal","CellNormal");return e?(e.init(t),e):null},e.prototype.init=function(e){t.prototype.initCell.call(this,e,r.CellType.Normal)},e.prototype.canPassThrough=function(){if(this.canHoldItem()){var t=this.getGrid();if(t){if(t.getItemAtLogicalPos(this.getLogicalPos()))return!1;var e=t.getParasiteAtLogicalPos(this.getLogicalPos());return!e||e.hostCanDrop()}}return!1},e.prototype.getCollectionID=function(){return a.CollectionID.CellNormal},e.prototype.getEntityID=function(){return s.EntityID.CellNormal},e.prototype.canHoldItem=function(){return!0},e.prototype.getButterflyPriority=function(e,o){if(o&&this._canLayoutGrass()){var n=this.getGrid().getItemAtLogicalPos(this.getLogicalPos());if(n&&n.canLayoutGrass()&&n.canExcuteCommand(p.default.BombClean(this.getLogicalPos(),e,o)))return 1}return t.prototype.getButterflyPriority.call(this,e,o)},e.prototype._canCleanByBomb=function(t){return this._canLayoutGrass()},e.prototype._canLayoutGrass=function(){return!(!this.canHoldItem()||!this.getNeedGrass())&&!this.getGrid().isGrassFloorAtLogicalPos(this.getLogicalPos())},e.prototype._onClean=function(t){if(t.layoutGrass){var e=c.default.create(this.getGrid());this.getGrid().setFloorAtLogicalPos(e,this.getLogicalPos()),e.grow(),e.onCollected()}},e=i([y],e)}(r.default));o.default=h,cc._RF.pop()},{"../../commond/GridCommand":"GridCommand","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","../floor/FloorGrass":"FloorGrass","./CellBase":"CellBase"}],CollectedTrainSupplyBar:[function(t,e,o){"use strict";cc._RF.push(e,"c9815tJQWNIv4JFHwUMBuvr","CollectedTrainSupplyBar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./CollectedTrainSupplyItem"),a=t("../../../define/GameCurrencyType"),s=t("../GameSceneBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemNodes=[],e._gameScene=null,e._supplyItems=[],e}return n(e,t),e.prototype.setSupplyData=function(t){for(var e in t){var o=t[e],n=Number(e);if(n){var i=this.getItemWithSupplyItemID(n);i&&i.setAmount(o)}}},e.prototype.getItemWithSupplyItemID=function(t){for(var e=null,o=0,n=this._supplyItems;o<n.length;o++){var i=n[o];if(i.getItemID()==t){e=i;break}}return e},e.prototype.getWorldPosWithSupplyItemID=function(t){var e=cc.Vec2.ZERO,o=this.getItemWithSupplyItemID(t);return o&&(e=o.node.parent.convertToWorldSpaceAR(o.node.getPosition())),e},e.prototype.onLoad=function(){var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(s.default));for(var e=[a.GameCurrencyType.TrainFood,a.GameCurrencyType.TrainSoap,a.GameCurrencyType.TrainEyepatch,a.GameCurrencyType.TrainHoe,a.GameCurrencyType.GoldCoin],o=0;o<this.itemNodes.length;o++){var n=this.itemNodes[o].getComponent(r.default);n&&(n.setItemID(e[o]),this._supplyItems.push(n))}},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.itemNodes=null,this._gameScene=null,this._supplyItems=null},i([p([cc.Node])],e.prototype,"itemNodes",void 0),e=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../define/GameCurrencyType":"GameCurrencyType","../GameSceneBase":"GameSceneBase","./CollectedTrainSupplyItem":"CollectedTrainSupplyItem"}],CollectedTrainSupplyItem:[function(t,e,o){"use strict";cc._RF.push(e,"45dbbBZpypLmKH4Ia8SlBQb","CollectedTrainSupplyItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../define/GameCurrencyType"),a=t("../../../component/UISpriteExt"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.amountLabel=null,e._itemID=r.GameCurrencyType.NoneType,e._amount=0,e}var o;return n(e,t),o=e,e.prototype.getItemID=function(){return this._itemID},e.prototype.setItemID=function(t){this._itemID=t;var e="";switch(this._itemID){case r.GameCurrencyType.GoldCoin:e="match_scene/texture/userInterface/match_goldcoin";break;case r.GameCurrencyType.TrainFood:e="match_scene/texture/userInterface/match_food";break;case r.GameCurrencyType.TrainSoap:e="match_scene/texture/userInterface/match_soap";break;case r.GameCurrencyType.TrainEyepatch:e="match_scene/texture/userInterface/match_eyepatch";break;case r.GameCurrencyType.TrainHoe:e="match_scene/texture/userInterface/match_hoe"}var o=this.icon.getComponent(a.default);o&&(o.src=e)},e.prototype.getAmount=function(){return this._amount},e.prototype.setAmount=function(t){var e=this._amount;if(this._amount=t,this.amountLabel.string=this._amount.toString(),e!=this._amount){this.amountLabel.node.stopActionByTag(1001),this.amountLabel.node.scale=1;var o=cc.sequence(cc.scaleTo(.05,1.5).easing(cc.easeIn(2)),cc.scaleTo(.2,1).easing(cc.easeOut(2)));o.setTag(1001),this.amountLabel.node.runAction(o),this.icon.node.stopActionByTag(1001),this.icon.node.scale=1;var n=cc.sequence(cc.scaleTo(.05,1.5).easing(cc.easeIn(2)),cc.scaleTo(.2,1).easing(cc.easeOut(2)));n.setTag(1001),this.icon.node.runAction(n)}else this.amountLabel.node.scale=1,this.icon.node.scale=1},e.create=function(t){var e=cc.loader.getRes("match_scene/prefab/userInterface/CollectedTrainSupplyItem",cc.Prefab);if(e){var n=cc.instantiate(e);if(n){var i=n.getComponent(o);if(i)return i.init(t),i}}return null},e.prototype.init=function(t){this.setItemID(t),this.setAmount(0)},e.prototype.onLoad=function(){this.setAmount(0)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.icon=null,this.amountLabel=null},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Label)],e.prototype,"amountLabel",void 0),e=o=i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../component/UISpriteExt":"UISpriteExt","../../../define/GameCurrencyType":"GameCurrencyType"}],CollectionGroupID:[function(t,e,o){"use strict";cc._RF.push(e,"205c4fOpN9NKK7VL6iAtw8R","CollectionGroupID"),Object.defineProperty(o,"__esModule",{value:!0}),o.CollectionGroupID=void 0;var n,i=t("./CollectionID");(function(t){t[t.None=0]="None",t[t.ItemBombButterfly=602]="ItemBombButterfly",t[t.ItemBombRow=603]="ItemBombRow",t[t.ItemBombColumn=604]="ItemBombColumn",t[t.ItemBombCross=605]="ItemBombCross",t[t.ItemBombRange=606]="ItemBombRange",t[t.ItemPaw=621]="ItemPaw"})(n=o.CollectionGroupID||(o.CollectionGroupID={}));var r=function(){function t(){this.String_To_CollectionGroupID_Map={},this.CollectionGroupID_To_CollectionIDs_Map={},this.CollectionGroupID_To_FrameName_Map={},this.initString_To_CollectionGroupID_Map(),this.initCollectionGroupID_To_CollectionIDs_Map(),this.initCollectionGroupID_To_FrameName_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initString_To_CollectionGroupID_Map=function(){this.String_To_CollectionGroupID_Map.butterfly=n.ItemBombButterfly,this.String_To_CollectionGroupID_Map.hLine=n.ItemBombRow,this.String_To_CollectionGroupID_Map.vLine=n.ItemBombColumn,this.String_To_CollectionGroupID_Map.cross=n.ItemBombCross,this.String_To_CollectionGroupID_Map.boom=n.ItemBombRange,this.String_To_CollectionGroupID_Map.paw=n.ItemPaw},t.prototype.initCollectionGroupID_To_CollectionIDs_Map=function(){this.CollectionGroupID_To_CollectionIDs_Map[n.ItemBombButterfly]=[i.CollectionID.ItemBombButterflyRed,i.CollectionID.ItemBombButterflyGreen,i.CollectionID.ItemBombButterflyBlue,i.CollectionID.ItemBombButterflyYellow,i.CollectionID.ItemBombButterflyOrange,i.CollectionID.ItemBombButterflyPurple],this.CollectionGroupID_To_CollectionIDs_Map[n.ItemBombRow]=[i.CollectionID.ItemBombRowRed,i.CollectionID.ItemBombRowGreen,i.CollectionID.ItemBombRowBlue,i.CollectionID.ItemBombRowYellow,i.CollectionID.ItemBombRowOrange,i.CollectionID.ItemBombRowPurple],this.CollectionGroupID_To_CollectionIDs_Map[n.ItemBombColumn]=[i.CollectionID.ItemBombColumnRed,i.CollectionID.ItemBombColumnGreen,i.CollectionID.ItemBombColumnBlue,i.CollectionID.ItemBombColumnYellow,i.CollectionID.ItemBombColumnOrange,i.CollectionID.ItemBombColumnPurple],this.CollectionGroupID_To_CollectionIDs_Map[n.ItemBombCross]=[i.CollectionID.ItemBombCrossRed,i.CollectionID.ItemBombCrossGreen,i.CollectionID.ItemBombCrossBlue,i.CollectionID.ItemBombCrossYellow,i.CollectionID.ItemBombCrossOrange,i.CollectionID.ItemBombCrossPurple],this.CollectionGroupID_To_CollectionIDs_Map[n.ItemBombRange]=[i.CollectionID.ItemBombRangeRed,i.CollectionID.ItemBombRangeGreen,i.CollectionID.ItemBombRangeBlue,i.CollectionID.ItemBombRangeYellow,i.CollectionID.ItemBombRangeOrange,i.CollectionID.ItemBombRangePurple],this.CollectionGroupID_To_CollectionIDs_Map[n.ItemPaw]=[i.CollectionID.ItemPawRed,i.CollectionID.ItemPawGreen,i.CollectionID.ItemPawBlue,i.CollectionID.ItemPawYellow,i.CollectionID.ItemPawOrange,i.CollectionID.ItemPawPurple]},t.prototype.initCollectionGroupID_To_FrameName_Map=function(){this.CollectionGroupID_To_FrameName_Map[n.ItemBombButterfly]="butterfly_chromatic",this.CollectionGroupID_To_FrameName_Map[n.ItemBombRow]="hline_chromatic",this.CollectionGroupID_To_FrameName_Map[n.ItemBombColumn]="vline_chromatic",this.CollectionGroupID_To_FrameName_Map[n.ItemBombCross]="cross_chromatic",this.CollectionGroupID_To_FrameName_Map[n.ItemBombRange]="boom_chromatic",this.CollectionGroupID_To_FrameName_Map[n.ItemPaw]="paw_chromatic"},t.prototype.getCollectionGroupIDFromString=function(t){var e=this.String_To_CollectionGroupID_Map[t];return e||n.None},t.prototype.getFrameNameFromCollectionGroupID=function(t){var e=this.CollectionGroupID_To_FrameName_Map[t];return e?"texture/match/entities/"+e:"texture/match/entities/unknow/unknow"},t.prototype.getCollectionIDsFromCollectionGroupID=function(t){var e=this.CollectionGroupID_To_CollectionIDs_Map[t];return e||[]},t.prototype.getCollectionGroupIDFromCollectionID=function(t){var e=this.CollectionGroupID_To_CollectionIDs_Map;for(var o in e)if(e.hasOwnProperty(o))for(var i=0,r=e[o];i<r.length;i++){if(r[i]==t)return Number(o)}return n.None},t.instance=null,t}();o.default=r,cc._RF.pop()},{"./CollectionID":"CollectionID"}],CollectionID:[function(t,e,o){"use strict";var n;cc._RF.push(e,"1829cV8DKtJD6IusGMizH7W","CollectionID"),Object.defineProperty(o,"__esModule",{value:!0}),o.CollectionIDManager=o.CollectionID=void 0,function(t){t[t.None=0]="None",t[t.Frame=101]="Frame",t[t.CellNormal=10101]="CellNormal",t[t.CellConveyer=20101]="CellConveyer",t[t.CellMovablePlate=20201]="CellMovablePlate",t[t.PopsicleNormal=30101]="PopsicleNormal",t[t.PopsicleBoom=30201]="PopsicleBoom",t[t.PopsicleLine=30301]="PopsicleLine",t[t.FloorGrass=40101]="FloorGrass",t[t.FloorIce=40201]="FloorIce",t[t.FloorChanger=40301]="FloorChanger",t[t.FloorDouble=40401]="FloorDouble",t[t.FloorRoad=40501]="FloorRoad",t[t.RugJam=50101]="RugJam",t[t.ItemNormalRed=60101]="ItemNormalRed",t[t.ItemNormalGreen=60102]="ItemNormalGreen",t[t.ItemNormalBlue=60103]="ItemNormalBlue",t[t.ItemNormalYellow=60104]="ItemNormalYellow",t[t.ItemNormalOrange=60105]="ItemNormalOrange",t[t.ItemNormalPurple=60106]="ItemNormalPurple",t[t.ItemBombButterflyRed=60201]="ItemBombButterflyRed",t[t.ItemBombButterflyGreen=60202]="ItemBombButterflyGreen",t[t.ItemBombButterflyBlue=60203]="ItemBombButterflyBlue",t[t.ItemBombButterflyYellow=60204]="ItemBombButterflyYellow",t[t.ItemBombButterflyOrange=60205]="ItemBombButterflyOrange",t[t.ItemBombButterflyPurple=60206]="ItemBombButterflyPurple",t[t.ItemBombButterflyChromatic=60207]="ItemBombButterflyChromatic",t[t.ItemBombRowRed=60301]="ItemBombRowRed",t[t.ItemBombRowGreen=60302]="ItemBombRowGreen",t[t.ItemBombRowBlue=60303]="ItemBombRowBlue",t[t.ItemBombRowYellow=60304]="ItemBombRowYellow",t[t.ItemBombRowOrange=60305]="ItemBombRowOrange",t[t.ItemBombRowPurple=60306]="ItemBombRowPurple",t[t.ItemBombRowChromatic=60307]="ItemBombRowChromatic",t[t.ItemBombColumnRed=60401]="ItemBombColumnRed",t[t.ItemBombColumnGreen=60402]="ItemBombColumnGreen",t[t.ItemBombColumnBlue=60403]="ItemBombColumnBlue",t[t.ItemBombColumnYellow=60404]="ItemBombColumnYellow",t[t.ItemBombColumnOrange=60405]="ItemBombColumnOrange",t[t.ItemBombColumnPurple=60406]="ItemBombColumnPurple",t[t.ItemBombColumnChromatic=60407]="ItemBombColumnChromatic",t[t.ItemBombCrossRed=60501]="ItemBombCrossRed",t[t.ItemBombCrossGreen=60502]="ItemBombCrossGreen",t[t.ItemBombCrossBlue=60503]="ItemBombCrossBlue",t[t.ItemBombCrossYellow=60504]="ItemBombCrossYellow",t[t.ItemBombCrossOrange=60505]="ItemBombCrossOrange",t[t.ItemBombCrossPurple=60506]="ItemBombCrossPurple",t[t.ItemBombCrossChromatic=60507]="ItemBombCrossChromatic",t[t.ItemBombRangeRed=60601]="ItemBombRangeRed",t[t.ItemBombRangeGreen=60602]="ItemBombRangeGreen",t[t.ItemBombRangeBlue=60603]="ItemBombRangeBlue",t[t.ItemBombRangeYellow=60604]="ItemBombRangeYellow",t[t.ItemBombRangeOrange=60605]="ItemBombRangeOrange",t[t.ItemBombRangePurple=60606]="ItemBombRangePurple",t[t.ItemBombRangeChromatic=60607]="ItemBombRangeChromatic",t[t.ItemBombRainbow=60701]="ItemBombRainbow",t[t.ItemBlock=60801]="ItemBlock",t[t.ItemDoughnut=60901]="ItemDoughnut",t[t.ItemMagicCrystal=61001]="ItemMagicCrystal",t[t.ItemWatermelon=61101]="ItemWatermelon",t[t.ItemFruitCake=61201]="ItemFruitCake",t[t.ItemMower=61401]="ItemMower",t[t.ItemBone=61501]="ItemBone",t[t.ItemChestnut=61601]="ItemChestnut",t[t.ItemFireworks=61701]="ItemFireworks",t[t.ItemFireWormBottle=61301]="ItemFireWormBottle",t[t.ItemPuppy=62001]="ItemPuppy",t[t.ItemPawRed=62101]="ItemPawRed",t[t.ItemPawGreen=62102]="ItemPawGreen",t[t.ItemPawBlue=62103]="ItemPawBlue",t[t.ItemPawYellow=62104]="ItemPawYellow",t[t.ItemPawOrange=62105]="ItemPawOrange",t[t.ItemPawPurple=62106]="ItemPawPurple",t[t.ItemPawChromatic=62107]="ItemPawChromatic",t[t.ItemBalloon=62201]="ItemBalloon",t[t.ItemDogHouse=62301]="ItemDogHouse",t[t.ItemJamBottle=62401]="ItemJamBottle",t[t.ItemHoneyComb=62601]="ItemHoneyComb",t[t.ItemStatue=62801]="ItemStatue",t[t.ParasiteIceCube=70101]="ParasiteIceCube",t[t.ParasiteShackle=70201]="ParasiteShackle",t[t.ParasiteHoney=70301]="ParasiteHoney",t[t.ParasiteGiftBoxRed=70401]="ParasiteGiftBoxRed",t[t.ParasiteGiftBoxGreen=70402]="ParasiteGiftBoxGreen",t[t.ParasiteGiftBoxBlue=70403]="ParasiteGiftBoxBlue",t[t.ParasiteGiftBoxYellow=70404]="ParasiteGiftBoxYellow",t[t.ParasiteGiftBoxOrange=70405]="ParasiteGiftBoxOrange",t[t.ParasiteGiftBoxPurple=70406]="ParasiteGiftBoxPurple",t[t.MarkerBoneCollector=80101]="MarkerBoneCollector",t[t.MarkWormholeEntrance=80201]="MarkWormholeEntrance",t[t.MarkWormholeExit=80301]="MarkWormholeExit",t[t.FenceVine=80401]="FenceVine",t[t.MarkerDropMachine=80801]="MarkerDropMachine",t[t.MarkerNormal=80901]="MarkerNormal",t[t.FlyerFireWorm=90101]="FlyerFireWorm",t[t.FlyerFireworksEnergy=90201]="FlyerFireworksEnergy"}(n=o.CollectionID||(o.CollectionID={}));var i=function(){function t(){this.String_To_CollectID_Map={},this.CollectionID_To_FrameName_Map={},this.initString_To_CollectID_Map(),this.initCollectionID_To_FrameName_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initString_To_CollectID_Map=function(){this.String_To_CollectID_Map.popsicles=n.PopsicleNormal,this.String_To_CollectID_Map.popsiclesBoom=n.PopsicleBoom,this.String_To_CollectID_Map.popsiclesLine=n.PopsicleLine,this.String_To_CollectID_Map.grass=n.FloorGrass,this.String_To_CollectID_Map.jam=n.RugJam,this.String_To_CollectID_Map.red=n.ItemNormalRed,this.String_To_CollectID_Map.green=n.ItemNormalGreen,this.String_To_CollectID_Map.blue=n.ItemNormalBlue,this.String_To_CollectID_Map.yellow=n.ItemNormalYellow,this.String_To_CollectID_Map.orange=n.ItemNormalOrange,this.String_To_CollectID_Map.purple=n.ItemNormalPurple,this.String_To_CollectID_Map.butterflyRed=n.ItemBombButterflyRed,this.String_To_CollectID_Map.butterflyGreen=n.ItemBombButterflyGreen,this.String_To_CollectID_Map.butterflyBlue=n.ItemBombButterflyBlue,this.String_To_CollectID_Map.butterflyYellow=n.ItemBombButterflyYellow,this.String_To_CollectID_Map.butterflyOrange=n.ItemBombButterflyOrange,this.String_To_CollectID_Map.butterflyPurple=n.ItemBombButterflyPurple,this.String_To_CollectID_Map.hLineRed=n.ItemBombRowRed,this.String_To_CollectID_Map.hLineGreen=n.ItemBombRowGreen,this.String_To_CollectID_Map.hLineBlue=n.ItemBombRowBlue,this.String_To_CollectID_Map.hLineYellow=n.ItemBombRowYellow,this.String_To_CollectID_Map.hLineOrange=n.ItemBombRowOrange,this.String_To_CollectID_Map.hLinePurple=n.ItemBombRowPurple,this.String_To_CollectID_Map.vLineRed=n.ItemBombColumnRed,this.String_To_CollectID_Map.vLineGreen=n.ItemBombColumnGreen,this.String_To_CollectID_Map.vLineBlue=n.ItemBombColumnBlue,this.String_To_CollectID_Map.vLineYellow=n.ItemBombColumnYellow,this.String_To_CollectID_Map.vLineOrange=n.ItemBombColumnOrange,this.String_To_CollectID_Map.vLinePurple=n.ItemBombColumnPurple,this.String_To_CollectID_Map.crossRed=n.ItemBombCrossRed,this.String_To_CollectID_Map.crossGreen=n.ItemBombCrossGreen,this.String_To_CollectID_Map.crossBlue=n.ItemBombCrossBlue,this.String_To_CollectID_Map.crossYellow=n.ItemBombCrossYellow,this.String_To_CollectID_Map.crossOrange=n.ItemBombCrossOrange,this.String_To_CollectID_Map.crossPurple=n.ItemBombCrossPurple,this.String_To_CollectID_Map.boomRed=n.ItemBombRangeRed,this.String_To_CollectID_Map.boomGreen=n.ItemBombRangeGreen,this.String_To_CollectID_Map.boomBlue=n.ItemBombRangeBlue,this.String_To_CollectID_Map.boomYellow=n.ItemBombRangeYellow,this.String_To_CollectID_Map.boomOrange=n.ItemBombRangeOrange,this.String_To_CollectID_Map.boomPurple=n.ItemBombRangePurple,this.String_To_CollectID_Map.pawRed=n.ItemPawRed,this.String_To_CollectID_Map.pawGreen=n.ItemPawGreen,this.String_To_CollectID_Map.pawBlue=n.ItemPawBlue,this.String_To_CollectID_Map.pawYellow=n.ItemPawYellow,this.String_To_CollectID_Map.pawOrange=n.ItemPawOrange,this.String_To_CollectID_Map.pawPurple=n.ItemPawPurple,this.String_To_CollectID_Map.pawChromatic=n.ItemPawChromatic,this.String_To_CollectID_Map.rainbow=n.ItemBombRainbow,this.String_To_CollectID_Map.block=n.ItemBlock,this.String_To_CollectID_Map.doughnut=n.ItemDoughnut,this.String_To_CollectID_Map.watermelon=n.ItemWatermelon,this.String_To_CollectID_Map.fruitCake=n.ItemFruitCake,this.String_To_CollectID_Map.bone=n.ItemBone,this.String_To_CollectID_Map.nut=n.ItemChestnut,this.String_To_CollectID_Map.puppy=n.ItemPuppy,this.String_To_CollectID_Map.statue=n.ItemStatue,this.String_To_CollectID_Map.iceCube=n.ParasiteIceCube,this.String_To_CollectID_Map.honey=n.ParasiteHoney,this.String_To_CollectID_Map.fireworm=n.FlyerFireWorm},t.prototype.initCollectionID_To_FrameName_Map=function(){this.CollectionID_To_FrameName_Map[n.PopsicleNormal]="popsicles",this.CollectionID_To_FrameName_Map[n.PopsicleBoom]="popsiclesboom",this.CollectionID_To_FrameName_Map[n.PopsicleLine]="popsiclesline",this.CollectionID_To_FrameName_Map[n.FloorGrass]="grass",this.CollectionID_To_FrameName_Map[n.RugJam]="jam",this.CollectionID_To_FrameName_Map[n.ItemNormalRed]="red",this.CollectionID_To_FrameName_Map[n.ItemNormalGreen]="green",this.CollectionID_To_FrameName_Map[n.ItemNormalBlue]="blue",this.CollectionID_To_FrameName_Map[n.ItemNormalYellow]="yellow",this.CollectionID_To_FrameName_Map[n.ItemNormalOrange]="orange",this.CollectionID_To_FrameName_Map[n.ItemNormalPurple]="purple",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyRed]="butterfly_red",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyGreen]="butterfly_green",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyBlue]="butterfly_blue",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyYellow]="butterfly_yellow",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyOrange]="butterfly_orange",this.CollectionID_To_FrameName_Map[n.ItemBombButterflyPurple]="butterfly_purple",this.CollectionID_To_FrameName_Map[n.ItemBombRowRed]="hline_red",this.CollectionID_To_FrameName_Map[n.ItemBombRowGreen]="hline_green",this.CollectionID_To_FrameName_Map[n.ItemBombRowBlue]="hline_blue",this.CollectionID_To_FrameName_Map[n.ItemBombRowYellow]="hline_yellow",this.CollectionID_To_FrameName_Map[n.ItemBombRowOrange]="hline_orange",this.CollectionID_To_FrameName_Map[n.ItemBombRowPurple]="hline_purple",this.CollectionID_To_FrameName_Map[n.ItemBombColumnRed]="vline_red",this.CollectionID_To_FrameName_Map[n.ItemBombColumnGreen]="vline_green",this.CollectionID_To_FrameName_Map[n.ItemBombColumnBlue]="vline_blue",this.CollectionID_To_FrameName_Map[n.ItemBombColumnYellow]="vline_yellow",this.CollectionID_To_FrameName_Map[n.ItemBombColumnOrange]="vline_orange",this.CollectionID_To_FrameName_Map[n.ItemBombColumnPurple]="vline_purple",this.CollectionID_To_FrameName_Map[n.ItemBombCrossRed]="cross_red",this.CollectionID_To_FrameName_Map[n.ItemBombCrossGreen]="cross_green",this.CollectionID_To_FrameName_Map[n.ItemBombCrossBlue]="cross_blue",this.CollectionID_To_FrameName_Map[n.ItemBombCrossYellow]="cross_yellow",this.CollectionID_To_FrameName_Map[n.ItemBombCrossOrange]="cross_orange",this.CollectionID_To_FrameName_Map[n.ItemBombCrossPurple]="cross_purple",this.CollectionID_To_FrameName_Map[n.ItemBombRangeRed]="boom_red",this.CollectionID_To_FrameName_Map[n.ItemBombRangeGreen]="boom_green",this.CollectionID_To_FrameName_Map[n.ItemBombRangeBlue]="boom_blue",this.CollectionID_To_FrameName_Map[n.ItemBombRangeYellow]="boom_yellow",this.CollectionID_To_FrameName_Map[n.ItemBombRangeOrange]="boom_orange",this.CollectionID_To_FrameName_Map[n.ItemBombRangePurple]="boom_purple",this.CollectionID_To_FrameName_Map[n.ItemPawRed]="paw_red",this.CollectionID_To_FrameName_Map[n.ItemPawGreen]="paw_green",this.CollectionID_To_FrameName_Map[n.ItemPawBlue]="paw_blue",this.CollectionID_To_FrameName_Map[n.ItemPawYellow]="paw_yellow",this.CollectionID_To_FrameName_Map[n.ItemPawOrange]="paw_orange",this.CollectionID_To_FrameName_Map[n.ItemPawPurple]="paw_purple",this.CollectionID_To_FrameName_Map[n.ItemPawChromatic]="paw_chromatic",this.CollectionID_To_FrameName_Map[n.ItemBombRainbow]="rainbow",this.CollectionID_To_FrameName_Map[n.ItemBlock]="block",this.CollectionID_To_FrameName_Map[n.ItemDoughnut]="doughnut",this.CollectionID_To_FrameName_Map[n.ItemWatermelon]="watermelon",this.CollectionID_To_FrameName_Map[n.ItemFruitCake]="fruit_cake",this.CollectionID_To_FrameName_Map[n.ItemBone]="bone",this.CollectionID_To_FrameName_Map[n.ItemChestnut]="nut",this.CollectionID_To_FrameName_Map[n.ItemPuppy]="doghouse",this.CollectionID_To_FrameName_Map[n.ItemStatue]="statue",this.CollectionID_To_FrameName_Map[n.ParasiteIceCube]="ice_cube",this.CollectionID_To_FrameName_Map[n.ParasiteHoney]="honey",this.CollectionID_To_FrameName_Map[n.FlyerFireWorm]="fireworm"},t.prototype.getCollectionIDFromString=function(t){var e=this.String_To_CollectID_Map[t];return e||n.None},t.prototype.getCollectionNameFromID=function(t){var e=this.String_To_CollectID_Map;for(var o in e)if(e[o]==t)return o;return""},t.prototype.getFrameNameFromCollectionID=function(t){var e=this.CollectionID_To_FrameName_Map[t];return e?"common/texture/icons/match/"+e:"icons_unknow.png"},t.instance=null,t}();o.CollectionIDManager=i,cc._RF.pop()},{}],CompleteBanner:[function(t,e,o){"use strict";cc._RF.push(e,"a424ej74+9FtqSHuSid96eK","CompleteBanner");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../base/IGame"),a=t("../defines/IdentifierManager"),s=t("../GameSceneBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskView=null,e.title=null,e._completeCallback=null,e._displayDuraion=0,e}var o;return n(e,t),o=e,e.create=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var i=cc.loader.getRes("match_scene/prefab/userInterface/CompleteBanner",cc.Prefab);if(i){var r=cc.instantiate(i);if(r){var a=r.getComponent(o);return a&&a.init(t,e,n),a}}},e.prototype.init=function(t,e,o){this._completeCallback=e,this.title.string=o?" ":"\u7b2c"+t.toString()+"\u5173"},e.prototype.start=function(){var t=cc.find("Canvas");t&&t.getComponent(s.default).reportStepComplete();this.node.getComponent(cc.Animation).play("appear"),r.default.playAudio(a.default.getInstance().getMatchAudioFilePath("voice_level_complete"))},e.prototype.didAppear=function(){this._displayDuraion=2.2,this.maskView.on("touchstart",this.onTouchStart,this),this.node.getComponent(cc.Animation).play("idle")},e.prototype.update=function(t){(t*=cc.director.getScheduler().getTimeScale(),this._displayDuraion>0)&&(this._displayDuraion-=t,this._displayDuraion<=0&&this.node.getComponent(cc.Animation).play("disappear"))},e.prototype.didDisappear=function(){this._completeCallback&&this._completeCallback.call(this,null),this.node.destroy()},e.prototype.onTouchStart=function(t){this._displayDuraion>0&&(this._displayDuraion=0,this.node.getComponent(cc.Animation).play("disappear"))},e.prototype.onDestroy=function(){this._completeCallback=null},i([p(cc.Node)],e.prototype,"maskView",void 0),i([p(cc.Label)],e.prototype,"title",void 0),e=o=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../base/IGame":"IGame","../GameSceneBase":"GameSceneBase","../defines/IdentifierManager":"IdentifierManager"}],CurveToAction:[function(t,e,o){"use strict";cc._RF.push(e,"db301QLdplCI7YyTIu10qCl","CurveToAction"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../utils/GameMath"),i=function(){function t(){}return t.create=function(t,e,o){var i=o.sub(e),r=Math.atan2(i.x,i.y)/Math.PI*180,a=40+Math.floor(5*Math.random()+1);Math.random()>.5&&(a=-a),r+=a,(r%=360)<0&&(r=360+r),r-90>=180?r=360-(r-90):r-=90;var s=.5*n.default.getDistance(e,o),c=r*Math.PI/180,l=e.x+s*Math.cos(c),p=e.y+s*Math.sin(c),u=[cc.v2(l,p),cc.v2(o.x,o.y),cc.v2(o.x,o.y)];return cc.bezierTo(t,u)},t.createNotRandom=function(t,e,o){var i=o.sub(e),r=Math.atan2(i.x,i.y)/Math.PI*180;r-=160,(r%=360)<0&&(r=360+r),r-90>=180?r=360-(r-90):r-=90;var a=.6*n.default.getDistance(o,e),s=r*Math.PI/180,c=o.x+a*Math.cos(s),l=o.y+a*Math.sin(s),p=[cc.v2(c,l),cc.v2(o.x,o.y),cc.v2(o.x,o.y)];return cc.bezierTo(t,p)},t}();o.default=i,cc._RF.pop()},{"../utils/GameMath":"GameMath"}],EMatchType:[function(t,e,o){"use strict";cc._RF.push(e,"0130d0SxItD+YnSeo0XLmFV","EMatchType"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameConfigModelType=o.GameType=void 0,function(t){t[t.None=0]="None",t[t.Order=1]="Order",t[t.Grass=2]="Grass",t[t.Popsicle=3]="Popsicle",t[t.Path=4]="Path"}(o.GameType||(o.GameType={})),function(t){t[t.GCM_ErrorNoneData=-1]="GCM_ErrorNoneData",t[t.GCM_CFGTripleLevelOrder=1]="GCM_CFGTripleLevelOrder",t[t.GCM_CFGTripleLevelGrass=2]="GCM_CFGTripleLevelGrass",t[t.GCM_CFGTripleLevelPopsicles=3]="GCM_CFGTripleLevelPopsicles",t[t.GCM_CFGTripleLevelPath=4]="GCM_CFGTripleLevelPath"}(o.GameConfigModelType||(o.GameConfigModelType={})),cc._RF.pop()},{}],EViewZIndex:[function(t,e,o){"use strict";cc._RF.push(e,"a9494x5BupII5JSMiCa1xNF","EViewZIndex"),Object.defineProperty(o,"__esModule",{value:!0}),o.EViewZIndex=void 0,function(t){t[t.None=0]="None",t[t.Panel=100]="Panel",t[t.Effect=9e3]="Effect",t[t.Guide=1e4]="Guide",t[t.Tip=15e3]="Tip",t[t.MessageBox=2e4]="MessageBox",t[t.Loading=3e4]="Loading"}(o.EViewZIndex||(o.EViewZIndex={})),cc._RF.pop()},{}],EntityBase:[function(t,e,o){"use strict";cc._RF.push(e,"20875pTlgdNUphN/J11RRZC","EntityBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../extend/utils/GameMath"),a=t("../defines/CollectionID"),s=t("../defines/EntityID"),c=t("../defines/IdentifierManager"),l=t("../defines/PowerID"),p=t("../defines/TMXConfigInfoKeys"),u=t("./EntityPrefabNodePool"),y=t("./state/concreteState/EntityStateWait"),h=t("./state/EntityStateMachine"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._puppet=null,e._stateMachine=null,e._occupyArea=cc.rect(0,0,0,0),e._tileSize=cc.size(0,0),e._visible=!0,e._grid=null,e._entityType=s.EntityType.None,e._entityColor=s.EntityColor.None,e._fireWorksAttackedPriority=o.DEFAULT_FIREWORKS_ATTACKED_PRIORITY,e._missileAttackedPriority=o.DEFAULT_MISSILE_PRIORITY,e._immuneDamage=!1,e._prefabFileName="",e._path=[],e}var o;return n(e,t),o=e,e.getEntitySpriteFarme=function(t){var e=null,o=cc.loader.getRes(t,cc.SpriteFrame);return o&&(e=o),e},e.prototype.getPuppet=function(){return this._puppet},e.prototype.setPuppetSpriteFrameName=function(t){var e=o.getEntitySpriteFarme(t);if(e&&this._puppet){var n=this._puppet.getComponent(cc.Sprite);n&&(n.spriteFrame=e)}},e.prototype.updatePuppet=function(){var t=c.default.getInstance().getFrameNameFromEntityID(this.getEntityID());this.setPuppetSpriteFrameName(t)},e.prototype.getVisible=function(){return this._visible},e.prototype.setVisible=function(t){this._visible=t,this._visible?this.node.opacity=255:this.node.opacity=0},e.prototype.playAnimation=function(t){var e=this.node.getComponent(cc.Animation);return e?e.play(t):null},e.prototype.pauseAnimation=function(t){var e=this.node.getComponent(cc.Animation);return e&&null!=e.getAnimationState(t)&&e.pause(t),null},e.prototype.setCurrentAnimationTime=function(t,e){var o=this.node.getComponent(cc.Animation);return o&&null!=o.getAnimationState(e)&&o.setCurrentTime(t,e),null},e.prototype.getAnimationState=function(t){var e=this.node.getComponent(cc.Animation);return e?e.getAnimationState(t):null},e.prototype.getCurrentAnimationClipName=function(){var t=this.getComponent(cc.Animation);if(t){var e=t.currentClip;if(e)return e.name}return""},e.prototype.getContentSize=function(){return this.node.getContentSize()},e.prototype.setContentSize=function(t){this.node.setContentSize(t)},e.prototype.runAction=function(t){return this.node.runAction(t)},e.prototype.clone=function(){return null},e.prototype.getEntityComponent=function(){return null},e.prototype.getGrid=function(){return this._grid},e.prototype.getEntityType=function(){return this._entityType},e.prototype.onCollected=function(){var t=1,e=this.getGrid().getFloorAtLogicalPos(this.getLogicalPos());e&&e.getEntityID()==s.EntityID.FloorDouble&&(t=2);for(var o=0;o<t;o++)this.getGrid().chargeFlyer(this),this.getGrid().createCollectedEntityFlyer(this),this.getGrid().collectEntity(this)},e.prototype.isTargetCollection=function(){return this.getGrid().isTargetCollectionID(this.getCollectionID())},e.prototype.removeFromGrid=function(){this.getGrid().removeEntity(this.getEntityType(),this.getLogicalPos())},e.prototype.removeFromGridAndAddToEffect=function(){this.removeFromGrid(),this.node.parent=this.getGrid().node,this.setPixelPos(this.getLogicalPos()),this.node.zIndex=this.getTopZOrder()},e.prototype.shiftToEffectLayer=function(){this.getGrid().shiftEntityToEffectLayer(this)},e.prototype.getEntityColor=function(){return this._entityColor},e.prototype.setEntityColor=function(t){this._entityColor=t,this.updatePuppet()},e.prototype.getFireWorksAttackedPriority=function(){return this._fireWorksAttackedPriority},e.prototype.setFireWorksAttackedPriority=function(t){this._fireWorksAttackedPriority=t},e.prototype.getMissileAttackedPriority=function(){return this._missileAttackedPriority},e.prototype.setMissileAttackedPriority=function(t){this._missileAttackedPriority=t},e.prototype.getImmuneDamage=function(){return this._immuneDamage},e.prototype.setImmuneDamage=function(t){this._immuneDamage=t},e.prototype.getCurrentStateType=function(){return this.getCurrentState().getType()},e.prototype.getCurrentState=function(){return this._stateMachine.getCurrentState()},e.prototype.setCurrentState=function(t){this._stateMachine.setCurrentState(t)},e.prototype.dealWithConfigMap=function(t){var e=t[p.default.CFG_FIREWORK_ATTACKED_PRIORITY];if(e){var o=Number(e);this.setFireWorksAttackedPriority(o)}var n=t[p.default.CFG_MISSILE_ATTACKED_PRIORITY];if(n){o=Number(n);this.setMissileAttackedPriority(o)}},e.prototype.getEntityID=function(){return s.EntityID.None},e.prototype.getPrefabFileName=function(){return this._prefabFileName},e.prototype.setPrefabFileName=function(t){return this._prefabFileName=t},e.prototype.getCollectionID=function(){return a.CollectionID.None},e.prototype.getProducedTrainSupplyMaps=function(){return{}},e.prototype.getPowerID=function(){return l.PowerID.None},e.prototype.getScore=function(){return 0},e.prototype.getButterflyPriority=function(t,e){return c.default.getInstance().getDefaultButterflyPriorityFromEntityID(this.getEntityID())},e.prototype.getLogicalPos=function(){return this._occupyArea.origin},e.prototype.setLogicalPos=function(t){this._occupyArea.origin=t,this.node.setPosition(this.getPixelPos(t)),this.node.zIndex=this.getBottomZOrder()},e.prototype.getPixelPos=function(t){var e=this.getContentSize(),o=cc.v2(.5*e.width-.5*this._tileSize.width,.5*e.height-.5*this._tileSize.height);return this.getGrid().getPixelPosFromLogicalPos(t).add(o)},e.prototype.setPixelPos=function(t){this.node.setPosition(this.getPixelPos(t))},e.prototype.getTopZOrder=function(){return this.getGrid().getTopZOrderForEnity(this)},e.prototype.getBottomZOrder=function(){return this.getGrid().getBottomZOrderForEnity(this)},e.prototype.getLogicalSize=function(){return this._occupyArea.size},e.prototype.getOccupyArea=function(){return this._occupyArea},e.prototype.getPath=function(){return this._path},e.prototype.addStepToPath=function(t){this._path.push(t)},e.prototype.clearPath=function(){r.default.clearArray(this._path)},e.prototype.canExcuteCommand=function(t){return!1},e.prototype.excuteCommand=function(t){},e.prototype.initEntity=function(t,e,o,n){if(void 0===o&&(o=1),void 0===n&&(n=1),this._grid=t,this._grid){this._puppet=this.node.getChildByName("puppet"),this._entityType=e,this._occupyArea.width=o,this._occupyArea.height=n,this._tileSize=this._grid.getCellSize();var i=cc.size(this._tileSize.width*o,this._tileSize.height*n);this.node.setContentSize(i),this.node.setAnchorPoint(cc.v2(.5,.5))}this._stateMachine=h.default.create(this),this.setCurrentState(y.default.create())},e.prototype.onLoad=function(){},e.prototype.update=function(t){t*=cc.director.getScheduler().getTimeScale(),this._stateMachine.update(t)},e.prototype.onDestroy=function(){this._puppet=null,this._stateMachine=null,this._occupyArea=null,this._tileSize=null,this._grid=null,this._prefabFileName=null,this._path=null},e.prototype.destoryWithRecycle=function(t){void 0===t&&(t=!1),t?(this.resetForRecycle(),this.node.removeFromParent(!0),u.default.getInstance().putPrefabNode(this)):this.node.destroy()},e.prototype.resetForRecycle=function(){this.node.scale=1,this.node.angle=0,this.node.opacity=255,this._grid=null,this._stateMachine=null,this._fireWorksAttackedPriority=o.DEFAULT_FIREWORKS_ATTACKED_PRIORITY,this._missileAttackedPriority=o.DEFAULT_MISSILE_PRIORITY,this.clearPath(),this.setImmuneDamage(!1),this.setVisible(!0)},e.prototype.selfDestory=function(t){var e=this;void 0===t&&(t=!1),this.removeFromGridAndAddToEffect(),this.getGrid().addObstructs(this),this.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){e.getGrid().removeObstructs(e),e.destoryWithRecycle(t)})))},e.prototype.selfHurt=function(){var t=this;this.getGrid().addObstructs(this),this.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){t.getGrid().removeObstructs(t)})))},e.DEFAULT_MISSILE_PRIORITY=9999,e.DEFAULT_FIREWORKS_ATTACKED_PRIORITY=999,e=o=i([f],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../extend/utils/GameMath":"GameMath","../defines/CollectionID":"CollectionID","../defines/EntityID":"EntityID","../defines/IdentifierManager":"IdentifierManager","../defines/PowerID":"PowerID","../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","./EntityPrefabNodePool":"EntityPrefabNodePool","./state/EntityStateMachine":"EntityStateMachine","./state/concreteState/EntityStateWait":"EntityStateWait"}],EntityEventBase:[function(t,e,o){"use strict";cc._RF.push(e,"1fb3fX4Ql1HwqVHj2p1CjB8","EntityEventBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.EntityEventType=void 0,function(t){t[t.EntityChanged=0]="EntityChanged"}(o.EntityEventType||(o.EntityEventType={}));var i=function(t){function e(o){var n=t.call(this,e.ENTITY_EVENT_KEY,!0)||this;return n._type=o,n}return n(e,t),e.prototype.getEventType=function(){return this._type},e.ENTITY_EVENT_KEY="ENTITY_EVENT_KEY",e}(cc.Event.EventCustom);o.default=i,cc._RF.pop()},{}],EntityEventChanged:[function(t,e,o){"use strict";cc._RF.push(e,"bb7a4OkVYJIVYRpuFBNn4HX","EntityEventChanged");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("./EntityEventBase"),r=function(t){function e(e){var o=t.call(this,i.EntityEventType.EntityChanged)||this;return o._entity=e,o}return n(e,t),e.prototype.getEntity=function(){return this._entity},e.create=function(t){return new e(t)},e}(i.default);o.default=r,cc._RF.pop()},{"./EntityEventBase":"EntityEventBase"}],EntityGroupID:[function(t,e,o){"use strict";cc._RF.push(e,"74011RMezNNIZygITMSa8FQ","EntityGroupID"),Object.defineProperty(o,"__esModule",{value:!0}),o.EntityGroupID=void 0;var n,i=t("./EntityID");(function(t){t[t.None=0]="None",t[t.ItemNormal=601]="ItemNormal",t[t.ItemBombButterfly=602]="ItemBombButterfly",t[t.ItemBombRow=603]="ItemBombRow",t[t.ItemBombColumn=604]="ItemBombColumn",t[t.ItemBombCross=605]="ItemBombCross",t[t.ItemBombRange=606]="ItemBombRange",t[t.ItemPaw=621]="ItemPaw",t[t.ParasiteGiftBox=704]="ParasiteGiftBox"})(n=o.EntityGroupID||(o.EntityGroupID={}));var r=function(){function t(){this.String_To_EntityGroupID_Map={},this.EntityGroupID_To_EntityIDs_Map={},this.EntityGroupID_To_FrameName_Map={},this.initString_To_EntityGroupID_Map(),this.initEntityGroupID_To_EntityIDs_Map(),this.initEntityGroupID_To_FrameName_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initString_To_EntityGroupID_Map=function(){this.String_To_EntityGroupID_Map.fruit=n.ItemNormal,this.String_To_EntityGroupID_Map.butterfly=n.ItemBombButterfly,this.String_To_EntityGroupID_Map.hLine=n.ItemBombRow,this.String_To_EntityGroupID_Map.vLine=n.ItemBombColumn,this.String_To_EntityGroupID_Map.cross=n.ItemBombCross,this.String_To_EntityGroupID_Map.boom=n.ItemBombRange,this.String_To_EntityGroupID_Map.paw=n.ItemPaw,this.String_To_EntityGroupID_Map.giftBox=n.ParasiteGiftBox},t.prototype.initEntityGroupID_To_EntityIDs_Map=function(){this.EntityGroupID_To_EntityIDs_Map[n.ItemNormal]=[i.EntityID.ItemNormalRed,i.EntityID.ItemNormalGreen,i.EntityID.ItemNormalBlue,i.EntityID.ItemNormalYellow,i.EntityID.ItemNormalOrange,i.EntityID.ItemNormalPurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemBombButterfly]=[i.EntityID.ItemBombButterflyRed,i.EntityID.ItemBombButterflyGreen,i.EntityID.ItemBombButterflyBlue,i.EntityID.ItemBombButterflyYellow,i.EntityID.ItemBombButterflyOrange,i.EntityID.ItemBombButterflyPurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemBombRow]=[i.EntityID.ItemBombRowRed,i.EntityID.ItemBombRowGreen,i.EntityID.ItemBombRowBlue,i.EntityID.ItemBombRowYellow,i.EntityID.ItemBombRowOrange,i.EntityID.ItemBombRowPurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemBombColumn]=[i.EntityID.ItemBombColumnRed,i.EntityID.ItemBombColumnGreen,i.EntityID.ItemBombColumnBlue,i.EntityID.ItemBombColumnYellow,i.EntityID.ItemBombColumnOrange,i.EntityID.ItemBombColumnPurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemBombCross]=[i.EntityID.ItemBombCrossRed,i.EntityID.ItemBombCrossGreen,i.EntityID.ItemBombCrossBlue,i.EntityID.ItemBombCrossYellow,i.EntityID.ItemBombCrossOrange,i.EntityID.ItemBombCrossPurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemBombRange]=[i.EntityID.ItemBombRangeRed,i.EntityID.ItemBombRangeGreen,i.EntityID.ItemBombRangeBlue,i.EntityID.ItemBombRangeYellow,i.EntityID.ItemBombRangeOrange,i.EntityID.ItemBombRangePurple],this.EntityGroupID_To_EntityIDs_Map[n.ItemPaw]=[i.EntityID.ItemPawRed,i.EntityID.ItemPawGreen,i.EntityID.ItemPawBlue,i.EntityID.ItemPawYellow,i.EntityID.ItemPawOrange,i.EntityID.ItemPawPurple],this.EntityGroupID_To_EntityIDs_Map[n.ParasiteGiftBox]=[i.EntityID.ParasiteGiftBoxRed,i.EntityID.ParasiteGiftBoxGreen,i.EntityID.ParasiteGiftBoxBlue,i.EntityID.ParasiteGiftBoxYellow,i.EntityID.ParasiteGiftBoxOrange,i.EntityID.ParasiteGiftBoxPurple]},t.prototype.initEntityGroupID_To_FrameName_Map=function(){this.EntityGroupID_To_FrameName_Map[n.ItemNormal]="items/60701.png",this.EntityGroupID_To_FrameName_Map[n.ItemBombButterfly]="items/60207.png",this.EntityGroupID_To_FrameName_Map[n.ItemBombRow]="items/60307.png",this.EntityGroupID_To_FrameName_Map[n.ItemBombColumn]="items/60407.png",this.EntityGroupID_To_FrameName_Map[n.ItemBombCross]="items/60507.png",this.EntityGroupID_To_FrameName_Map[n.ItemBombRange]="items/60607.png",this.EntityGroupID_To_FrameName_Map[n.ItemPaw]="items/62107.png",this.EntityGroupID_To_FrameName_Map[n.ParasiteGiftBox]="parasites/70407.png"},t.prototype.getEntityGroupIDFromString=function(t){var e=this.String_To_EntityGroupID_Map[t];return e||n.None},t.prototype.getFrameNameFromEntityGroupID=function(t){var e="match_scene/texture/entities/",o=this.EntityGroupID_To_FrameName_Map[t];return o?e+o:e+"unknow/unknow"},t.prototype.getEntityIDsFromEntityGroupID=function(t){var e=this.EntityGroupID_To_EntityIDs_Map[t];return e||[]},t.prototype.getEntityGroupIDFromEntityID=function(t){var e=this.EntityGroupID_To_EntityIDs_Map;for(var o in e)if(e.hasOwnProperty(o))for(var i=0,r=e[o];i<r.length;i++){if(r[i]==t)return Number(o)}return n.None},t.instance=null,t}();o.default=r,cc._RF.pop()},{"./EntityID":"EntityID"}],EntityID:[function(t,e,o){"use strict";cc._RF.push(e,"1dadeMCXIxKvJaZzPD5dR/5","EntityID"),Object.defineProperty(o,"__esModule",{value:!0}),o.EntityIDManager=o.HurtAnimationInfo=o.EntityDropStep=o.EntityDropStepType=o.EntityChargeOption=o.EntityChangeOption=o.EntityCleanOption=o.EntityCleanType=o.EntityColor=o.EntityType=o.EntityID=void 0;var n,i,r=t("../entity/item/color/bomb/ItemBombBase"),a=t("./CollectionID"),s=t("../entity/EntityBase");(function(t){t[t.None=0]="None",t[t.Frame=1]="Frame",t[t.CellNormal=10101]="CellNormal",t[t.CellConveyerD2U=20101]="CellConveyerD2U",t[t.CellConveyerL2R=20102]="CellConveyerL2R",t[t.CellConveyerU2D=20103]="CellConveyerU2D",t[t.CellConveyerR2L=20104]="CellConveyerR2L",t[t.CellConveyerD2L=20105]="CellConveyerD2L",t[t.CellConveyerL2U=20106]="CellConveyerL2U",t[t.CellConveyerU2R=20107]="CellConveyerU2R",t[t.CellConveyerR2D=20108]="CellConveyerR2D",t[t.CellConveyerD2R=20109]="CellConveyerD2R",t[t.CellConveyerR2U=20110]="CellConveyerR2U",t[t.CellConveyerU2L=20111]="CellConveyerU2L",t[t.CellConveyerL2D=20112]="CellConveyerL2D",t[t.CellMovablePlate=20201]="CellMovablePlate",t[t.PopsicleNormal=30101]="PopsicleNormal",t[t.PopsicleNormal_1x1=30101]="PopsicleNormal_1x1",t[t.PopsicleNormal_1x2=30102]="PopsicleNormal_1x2",t[t.PopsicleNormal_2x2=30103]="PopsicleNormal_2x2",t[t.PopsicleNormal_2x3=30104]="PopsicleNormal_2x3",t[t.PopsicleNormal_3x3=30105]="PopsicleNormal_3x3",t[t.PopsicleNormal_3x4=30106]="PopsicleNormal_3x4",t[t.PopsicleBoom=30201]="PopsicleBoom",t[t.PopsicleBoom_2x2=30201]="PopsicleBoom_2x2",t[t.PopsicleBoom_1x1=30202]="PopsicleBoom_1x1",t[t.PopsicleLine=30301]="PopsicleLine",t[t.FloorGrass=40101]="FloorGrass",t[t.FloorIceHp1=40201]="FloorIceHp1",t[t.FloorIceHp2=40202]="FloorIceHp2",t[t.FloorIceHp3=40203]="FloorIceHp3",t[t.FloorIceHp4=40204]="FloorIceHp4",t[t.FloorChangerRed=40301]="FloorChangerRed",t[t.FloorChangerGreen=40302]="FloorChangerGreen",t[t.FloorChangerBlue=40303]="FloorChangerBlue",t[t.FloorChangerYellow=40304]="FloorChangerYellow",t[t.FloorChangerOrange=40305]="FloorChangerOrange",t[t.FloorChangerPurple=40306]="FloorChangerPurple",t[t.FloorDouble=40401]="FloorDouble",t[t.FloorRoadLineVU=40501]="FloorRoadLineVU",t[t.FloorRoadLineHR=40502]="FloorRoadLineHR",t[t.FloorRoadLineVD=40503]="FloorRoadLineVD",t[t.FloorRoadLineHL=40504]="FloorRoadLineHL",t[t.FloorRoadTurnLdD=40505]="FloorRoadTurnLdD",t[t.FloorRoadTurnLuL=40506]="FloorRoadTurnLuL",t[t.FloorRoadTurnRuU=40507]="FloorRoadTurnRuU",t[t.FloorRoadTurnRdR=40508]="FloorRoadTurnRdR",t[t.FloorRoadTurnRdD=40509]="FloorRoadTurnRdD",t[t.FloorRoadTurnRuR=40510]="FloorRoadTurnRuR",t[t.FloorRoadTurnLuU=40511]="FloorRoadTurnLuU",t[t.FloorRoadTurnLdL=40512]="FloorRoadTurnLdL",t[t.FloorRoadStartPoint=40601]="FloorRoadStartPoint",t[t.RugJam=50101]="RugJam",t[t.ItemNormalRed=60101]="ItemNormalRed",t[t.ItemNormalGreen=60102]="ItemNormalGreen",t[t.ItemNormalBlue=60103]="ItemNormalBlue",t[t.ItemNormalYellow=60104]="ItemNormalYellow",t[t.ItemNormalOrange=60105]="ItemNormalOrange",t[t.ItemNormalPurple=60106]="ItemNormalPurple",t[t.ItemBombButterflyRed=60201]="ItemBombButterflyRed",t[t.ItemBombButterflyGreen=60202]="ItemBombButterflyGreen",t[t.ItemBombButterflyBlue=60203]="ItemBombButterflyBlue",t[t.ItemBombButterflyYellow=60204]="ItemBombButterflyYellow",t[t.ItemBombButterflyOrange=60205]="ItemBombButterflyOrange",t[t.ItemBombButterflyPurple=60206]="ItemBombButterflyPurple",t[t.ItemBombRowRed=60301]="ItemBombRowRed",t[t.ItemBombRowGreen=60302]="ItemBombRowGreen",t[t.ItemBombRowBlue=60303]="ItemBombRowBlue",t[t.ItemBombRowYellow=60304]="ItemBombRowYellow",t[t.ItemBombRowOrange=60305]="ItemBombRowOrange",t[t.ItemBombRowPurple=60306]="ItemBombRowPurple",t[t.ItemBombColumnRed=60401]="ItemBombColumnRed",t[t.ItemBombColumnGreen=60402]="ItemBombColumnGreen",t[t.ItemBombColumnBlue=60403]="ItemBombColumnBlue",t[t.ItemBombColumnYellow=60404]="ItemBombColumnYellow",t[t.ItemBombColumnOrange=60405]="ItemBombColumnOrange",t[t.ItemBombColumnPurple=60406]="ItemBombColumnPurple",t[t.ItemBombCrossRed=60501]="ItemBombCrossRed",t[t.ItemBombCrossGreen=60502]="ItemBombCrossGreen",t[t.ItemBombCrossBlue=60503]="ItemBombCrossBlue",t[t.ItemBombCrossYellow=60504]="ItemBombCrossYellow",t[t.ItemBombCrossOrange=60505]="ItemBombCrossOrange",t[t.ItemBombCrossPurple=60506]="ItemBombCrossPurple",t[t.ItemBombRangeRed=60601]="ItemBombRangeRed",t[t.ItemBombRangeGreen=60602]="ItemBombRangeGreen",t[t.ItemBombRangeBlue=60603]="ItemBombRangeBlue",t[t.ItemBombRangeYellow=60604]="ItemBombRangeYellow",t[t.ItemBombRangeOrange=60605]="ItemBombRangeOrange",t[t.ItemBombRangePurple=60606]="ItemBombRangePurple",t[t.ItemBombRainbow=60701]="ItemBombRainbow",t[t.ItemBlockHp1=60801]="ItemBlockHp1",t[t.ItemBlockHp2=60802]="ItemBlockHp2",t[t.ItemBlockHp3=60803]="ItemBlockHp3",t[t.ItemBlockHp4=60804]="ItemBlockHp4",t[t.ItemBlockHp5=60805]="ItemBlockHp5",t[t.ItemBlockHp6=60806]="ItemBlockHp6",t[t.ItemDoughnutHp1=60901]="ItemDoughnutHp1",t[t.ItemDoughnutHp2=60902]="ItemDoughnutHp2",t[t.ItemDoughnutHp3=60903]="ItemDoughnutHp3",t[t.ItemMagicCrystal=61001]="ItemMagicCrystal",t[t.ItemWatermelon=61101]="ItemWatermelon",t[t.ItemFruitCake=61201]="ItemFruitCake",t[t.ItemFireWormBottle=61301]="ItemFireWormBottle",t[t.ItemMowerUp=61401]="ItemMowerUp",t[t.ItemMowerRight=61402]="ItemMowerRight",t[t.ItemMowerDown=61403]="ItemMowerDown",t[t.ItemMowerLeft=61404]="ItemMowerLeft",t[t.ItemBone=61501]="ItemBone",t[t.ItemChestnut=61601]="ItemChestnut",t[t.ItemFireworksHp1=61701]="ItemFireworksHp1",t[t.ItemFireworksHp2=61702]="ItemFireworksHp2",t[t.ItemFireworksHp3=61703]="ItemFireworksHp3",t[t.ItemFireworksHp4=61704]="ItemFireworksHp4",t[t.ItemPuppy=62001]="ItemPuppy",t[t.ItemPawRed=62101]="ItemPawRed",t[t.ItemPawGreen=62102]="ItemPawGreen",t[t.ItemPawBlue=62103]="ItemPawBlue",t[t.ItemPawYellow=62104]="ItemPawYellow",t[t.ItemPawOrange=62105]="ItemPawOrange",t[t.ItemPawPurple=62106]="ItemPawPurple",t[t.ItemBalloon=62201]="ItemBalloon",t[t.ItemDogHouse=62301]="ItemDogHouse",t[t.ItemJamBottle=62401]="ItemJamBottle",t[t.ItemHoneyComb=62601]="ItemHoneyComb",t[t.ItemStatueHp1=62801]="ItemStatueHp1",t[t.ItemStatueHp2=62802]="ItemStatueHp2",t[t.ItemStatueHp3=62803]="ItemStatueHp3",t[t.ParasiteIceCubeHp1=70101]="ParasiteIceCubeHp1",t[t.ParasiteIceCubeHp2=70102]="ParasiteIceCubeHp2",t[t.ParasiteIceCubeHp3=70103]="ParasiteIceCubeHp3",t[t.ParasiteIceCubeHp4=70104]="ParasiteIceCubeHp4",t[t.ParasiteIceCubeHp5=70105]="ParasiteIceCubeHp5",t[t.ParasiteIceCubeHp6=70106]="ParasiteIceCubeHp6",t[t.ParasiteShackleHp1=70201]="ParasiteShackleHp1",t[t.ParasiteShackleHp2=70202]="ParasiteShackleHp2",t[t.ParasiteShackleHp3=70203]="ParasiteShackleHp3",t[t.ParasiteHoneyHp1=70301]="ParasiteHoneyHp1",t[t.ParasiteHoneyHp2=70302]="ParasiteHoneyHp2",t[t.ParasiteGiftBoxRed=70401]="ParasiteGiftBoxRed",t[t.ParasiteGiftBoxGreen=70402]="ParasiteGiftBoxGreen",t[t.ParasiteGiftBoxBlue=70403]="ParasiteGiftBoxBlue",t[t.ParasiteGiftBoxYellow=70404]="ParasiteGiftBoxYellow",t[t.ParasiteGiftBoxOrange=70405]="ParasiteGiftBoxOrange",t[t.ParasiteGiftBoxPurple=70406]="ParasiteGiftBoxPurple",t[t.MarkBoneCollector=80101]="MarkBoneCollector",t[t.MarkWormholeEntrance=80201]="MarkWormholeEntrance",t[t.MarkWormholeExit=80301]="MarkWormholeExit",t[t.FenceVineVertical=80401]="FenceVineVertical",t[t.FenceVineHorizontal=80501]="FenceVineHorizontal",t[t.MarkDropMachine=80801]="MarkDropMachine",t[t.MarkNormal=80901]="MarkNormal",t[t.FlyerMissileRed=90101]="FlyerMissileRed",t[t.FlyerMissileGreen=90102]="FlyerMissileGreen",t[t.FlyerMissileBlue=90103]="FlyerMissileBlue",t[t.FlyerMissileYellow=90104]="FlyerMissileYellow",t[t.FlyerMissileOrange=90105]="FlyerMissileOrange",t[t.FlyerMissilePurple=90106]="FlyerMissilePurple",t[t.FlyerCannonRed=90201]="FlyerCannonRed",t[t.FlyerCannonGreen=90202]="FlyerCannonGreen",t[t.FlyerCannonBlue=90203]="FlyerCannonBlue",t[t.FlyerCannonYellow=90204]="FlyerCannonYellow",t[t.FlyerCannonOrange=90205]="FlyerCannonOrange",t[t.FlyerCannonPurple=90206]="FlyerCannonPurple",t[t.FlyerCannonWhite=90207]="FlyerCannonWhite",t[t.FlyerBombRed=90301]="FlyerBombRed",t[t.FlyerBombGreen=90302]="FlyerBombGreen",t[t.FlyerBombBlue=90303]="FlyerBombBlue",t[t.FlyerBombYellow=90304]="FlyerBombYellow",t[t.FlyerBombOrange=90305]="FlyerBombOrange",t[t.FlyerBombPurple=90306]="FlyerBombPurple",t[t.FlyerBombWhite=90307]="FlyerBombWhite",t[t.FlyerNuclear=90401]="FlyerNuclear",t[t.FlyerLaser=90501]="FlyerLaser",t[t.FlyerLaserBullet=90502]="FlyerLaserBullet",t[t.FlyerPopsicelLine=90601]="FlyerPopsicelLine",t[t.FlyerPopsicelBomb=90701]="FlyerPopsicelBomb",t[t.FlyerCollectedEntity=90801]="FlyerCollectedEntity",t[t.FlyerChargeEntity=90802]="FlyerChargeEntity",t[t.FlyerCollectedSupply=90803]="FlyerCollectedSupply",t[t.FlyerMoreStep=90804]="FlyerMoreStep",t[t.FlyerAnimationBomb1x1=90901]="FlyerAnimationBomb1x1",t[t.FlyerAnimationCommonHurt=90902]="FlyerAnimationCommonHurt",t[t.FlyerAnimationFocusFrame=90903]="FlyerAnimationFocusFrame",t[t.FlyerAnimationHighlightedCell=90904]="FlyerAnimationHighlightedCell",t[t.FlyerAnimationItemMarked=90905]="FlyerAnimationItemMarked",t[t.FlyerAnimationBombCross=90906]="FlyerAnimationBombCross",t[t.FlyerAnimationFloorIceDie=91001]="FlyerAnimationFloorIceDie",t[t.FlyerAnimationRugJamDie=91002]="FlyerAnimationRugJamDie",t[t.FlyerAnimationItemNormalRedDie=91003]="FlyerAnimationItemNormalRedDie",t[t.FlyerAnimationItemNormalGreenDie=91004]="FlyerAnimationItemNormalGreenDie",t[t.FlyerAnimationItemNormalBlueDie=91005]="FlyerAnimationItemNormalBlueDie",t[t.FlyerAnimationItemNormalYellowDie=91006]="FlyerAnimationItemNormalYellowDie",t[t.FlyerAnimationItemNormalOrangeDie=91007]="FlyerAnimationItemNormalOrangeDie",t[t.FlyerAnimationItemNormalPurpleDie=91008]="FlyerAnimationItemNormalPurpleDie",t[t.FlyerAnimationItemBlockDie=91009]="FlyerAnimationItemBlockDie",t[t.FlyerAnimationItemDoughnutDie=91010]="FlyerAnimationItemDoughnutDie",t[t.FlyerAnimationItemWatermelonDie=91011]="FlyerAnimationItemWatermelonDie",t[t.FlyerAnimationItemFruitCakeDie=91012]="FlyerAnimationItemFruitCakeDie",t[t.FlyerAnimationItemFirewormBottleDie=91013]="FlyerAnimationItemFirewormBottleDie",t[t.FlyerAnimationItemChestnutDie=91014]="FlyerAnimationItemChestnutDie",t[t.FlyerAnimationItemJamBottleDie=91015]="FlyerAnimationItemJamBottleDie",t[t.FlyerAnimationItemStatueDie=91016]="FlyerAnimationItemStatueDie",t[t.FlyerAnimationParasiteIceCubeDie=91101]="FlyerAnimationParasiteIceCubeDie",t[t.FlyerAnimationParasiteShackleDie=91102]="FlyerAnimationParasiteShackleDie",t[t.FlyerAnimationParasiteHoneyDie=91103]="FlyerAnimationParasiteHoneyDie",t[t.FlyerAnimationParasiteGiftBoxRedDie=91104]="FlyerAnimationParasiteGiftBoxRedDie",t[t.FlyerAnimationParasiteGiftBoxGreenDie=91105]="FlyerAnimationParasiteGiftBoxGreenDie",t[t.FlyerAnimationParasiteGiftBoxBlueDie=91106]="FlyerAnimationParasiteGiftBoxBlueDie",t[t.FlyerAnimationParasiteGiftBoxYellowDie=91107]="FlyerAnimationParasiteGiftBoxYellowDie",t[t.FlyerAnimationParasiteGiftBoxOrangeDie=91108]="FlyerAnimationParasiteGiftBoxOrangeDie",t[t.FlyerAnimationParasiteGiftBoxPurpleDie=91109]="FlyerAnimationParasiteGiftBoxPurpleDie",t[t.FlyerHammer=91201]="FlyerHammer",t[t.FlyerMower=91301]="FlyerMower",t[t.FlyerFireworks=91401]="FlyerFireworks"})(n=o.EntityID||(o.EntityID={})),function(t){t[t.None=0]="None",t[t.Frame=1]="Frame",t[t.Cell=2]="Cell",t[t.Floor=3]="Floor",t[t.Rug=4]="Rug",t[t.Popsicle=5]="Popsicle",t[t.Item=6]="Item",t[t.Parasite=7]="Parasite",t[t.Fences=8]="Fences",t[t.Flyer=9]="Flyer",t[t.Marker=10]="Marker"}(o.EntityType||(o.EntityType={})),function(t){t[t.None=-1]="None",t[t.Begin=0]="Begin",t[t.Red=0]="Red",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.Yellow=3]="Yellow",t[t.Orange=4]="Orange",t[t.Purple=5]="Purple",t[t.End=5]="End"}(i=o.EntityColor||(o.EntityColor={})),function(t){t[t.None=0]="None",t[t.Bomb=1]="Bomb",t[t.Match=2]="Match",t[t.Neighbor=3]="Neighbor",t[t.Floor=4]="Floor",t[t.Popsicle=5]="Popsicle",t[t.Suicide=6]="Suicide",t[t.Activate=7]="Activate",t[t.LayoutGrass=8]="LayoutGrass",t[t.Terminate=9]="Terminate"}(o.EntityCleanType||(o.EntityCleanType={}));var c=function(){function t(t,e,o,n,i,r,a){this.cleanType=t,this.cleanRoot=e,this.cleanColor=o,this.createBombType=n,this.hitNeighbour=i,this.hitFloor=r,this.layoutGrass=a}return t.create=function(e,o,n,a,s,c,l){return void 0===n&&(n=i.None),void 0===a&&(a=r.ItemBombType.None),void 0===s&&(s=!1),void 0===c&&(c=!1),void 0===l&&(l=!1),new t(e,o,n,a,s,c,l)},t}();o.EntityCleanOption=c;var l=function(){function t(t,e){this.targetID=t,this.collectOld=e}return t.create=function(e,o){return new t(e,o)},t}();o.EntityChangeOption=l;var p=function(){function t(t,e){this.chargeID=a.CollectionID.None,this.chargeAmount=0,this.chargeID=t,this.chargeAmount=e}return t.create=function(e,o){return new t(e,o)},t}();o.EntityChargeOption=p,function(t){t[t.Hide=0]="Hide",t[t.Born=1]="Born",t[t.Stay=2]="Stay",t[t.Drop=3]="Drop",t[t.Wormhole=4]="Wormhole"}(o.EntityDropStepType||(o.EntityDropStepType={}));var u=function(){function t(t,e){this.type=t,this.logicalPos=e}return t.create=function(e,o){return new t(e,o)},t}();o.EntityDropStep=u;var y=function(){function t(t,e){this.fileName="",this.entityID=0,this.fileName=t,this.entityID=e}return t.create=function(e,o){return new t(e,o)},t}();o.HurtAnimationInfo=y;var h=function(){function t(){this.String_To_EntityID_Map={},this.EntityID_To_FrameName_Map={},this.EntityID_To_ButterflyPriority_Map={},this.EntityID_To_NormalEntityID_Map={},this.EntityID_To_EntityColor_Map={},this.EntityID_To_DieAnimationPath_Map={},this.initString_To_EntityID_Map(),this.initEntityID_To_FrameName_Map(),this.initEntityID_To_ButterflyPriority_Map(),this.initEntityID_To_NormalEntityID_Map(),this.initEntityID_To_EntityColor_Map(),this.initEntityID_To_DieAnimationPath_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initString_To_EntityID_Map=function(){this.String_To_EntityID_Map.popsicles=n.PopsicleNormal,this.String_To_EntityID_Map.popsiclesLine=n.PopsicleLine,this.String_To_EntityID_Map.popsiclesBoom=n.PopsicleBoom,this.String_To_EntityID_Map.grass=n.FloorGrass,this.String_To_EntityID_Map.doubler=n.FloorDouble,this.String_To_EntityID_Map.ice1=n.FloorIceHp1,this.String_To_EntityID_Map.ice2=n.FloorIceHp2,this.String_To_EntityID_Map.ice3=n.FloorIceHp3,this.String_To_EntityID_Map.ice4=n.FloorIceHp4,this.String_To_EntityID_Map.changerRed=n.FloorChangerRed,this.String_To_EntityID_Map.changerGreen=n.FloorChangerGreen,this.String_To_EntityID_Map.changerBlue=n.FloorChangerBlue,this.String_To_EntityID_Map.changerYellow=n.FloorChangerYellow,this.String_To_EntityID_Map.changerOrange=n.FloorChangerOrange,this.String_To_EntityID_Map.changerPurple=n.FloorChangerPurple,this.String_To_EntityID_Map.jam=n.RugJam,this.String_To_EntityID_Map.red=n.ItemNormalRed,this.String_To_EntityID_Map.green=n.ItemNormalGreen,this.String_To_EntityID_Map.blue=n.ItemNormalBlue,this.String_To_EntityID_Map.yellow=n.ItemNormalYellow,this.String_To_EntityID_Map.orange=n.ItemNormalOrange,this.String_To_EntityID_Map.purple=n.ItemNormalPurple,this.String_To_EntityID_Map.butterflyRed=n.ItemBombButterflyRed,this.String_To_EntityID_Map.butterflyGreen=n.ItemBombButterflyGreen,this.String_To_EntityID_Map.butterflyBlue=n.ItemBombButterflyBlue,this.String_To_EntityID_Map.butterflyYellow=n.ItemBombButterflyYellow,this.String_To_EntityID_Map.butterflyOrange=n.ItemBombButterflyOrange,this.String_To_EntityID_Map.butterflyPurple=n.ItemBombButterflyPurple,this.String_To_EntityID_Map.hLineRed=n.ItemBombRowRed,this.String_To_EntityID_Map.hLineGreen=n.ItemBombRowGreen,this.String_To_EntityID_Map.hLineBlue=n.ItemBombRowBlue,this.String_To_EntityID_Map.hLineYellow=n.ItemBombRowYellow,this.String_To_EntityID_Map.hLineOrange=n.ItemBombRowOrange,this.String_To_EntityID_Map.hLinePurple=n.ItemBombRowPurple,this.String_To_EntityID_Map.vLineRed=n.ItemBombColumnRed,this.String_To_EntityID_Map.vLineGreen=n.ItemBombColumnGreen,this.String_To_EntityID_Map.vLineBlue=n.ItemBombColumnBlue,this.String_To_EntityID_Map.vLineYellow=n.ItemBombColumnYellow,this.String_To_EntityID_Map.vLineOrange=n.ItemBombColumnOrange,this.String_To_EntityID_Map.vLinePurple=n.ItemBombColumnPurple,this.String_To_EntityID_Map.crossRed=n.ItemBombCrossRed,this.String_To_EntityID_Map.crossGreen=n.ItemBombCrossGreen,this.String_To_EntityID_Map.crossBlue=n.ItemBombCrossBlue,this.String_To_EntityID_Map.crossYellow=n.ItemBombCrossYellow,this.String_To_EntityID_Map.crossOrange=n.ItemBombCrossOrange,this.String_To_EntityID_Map.crossPurple=n.ItemBombCrossPurple,this.String_To_EntityID_Map.boomRed=n.ItemBombRangeRed,this.String_To_EntityID_Map.boomGreen=n.ItemBombRangeGreen,this.String_To_EntityID_Map.boomBlue=n.ItemBombRangeBlue,this.String_To_EntityID_Map.boomYellow=n.ItemBombRangeYellow,this.String_To_EntityID_Map.boomOrange=n.ItemBombRangeOrange,this.String_To_EntityID_Map.boomPurple=n.ItemBombRangePurple,this.String_To_EntityID_Map.pawRed=n.ItemPawRed,this.String_To_EntityID_Map.pawGreen=n.ItemPawGreen,this.String_To_EntityID_Map.pawBlue=n.ItemPawBlue,this.String_To_EntityID_Map.pawYellow=n.ItemPawYellow,this.String_To_EntityID_Map.pawOrange=n.ItemPawOrange,this.String_To_EntityID_Map.pawPurple=n.ItemPawPurple,this.String_To_EntityID_Map.rainbow=n.ItemBombRainbow,this.String_To_EntityID_Map.block1=n.ItemBlockHp1,this.String_To_EntityID_Map.block2=n.ItemBlockHp2,this.String_To_EntityID_Map.block3=n.ItemBlockHp3,this.String_To_EntityID_Map.block4=n.ItemBlockHp4,this.String_To_EntityID_Map.block5=n.ItemBlockHp5,this.String_To_EntityID_Map.block6=n.ItemBlockHp6,this.String_To_EntityID_Map.doughnut1=n.ItemDoughnutHp1,this.String_To_EntityID_Map.doughnut2=n.ItemDoughnutHp2,this.String_To_EntityID_Map.doughnut3=n.ItemDoughnutHp3,this.String_To_EntityID_Map.magicCrystal=n.ItemMagicCrystal,this.String_To_EntityID_Map.watermelon=n.ItemWatermelon,this.String_To_EntityID_Map.bone=n.ItemBone,this.String_To_EntityID_Map.mower=n.ItemMowerUp,this.String_To_EntityID_Map.nut=n.ItemChestnut,this.String_To_EntityID_Map.puppy=n.ItemPuppy,this.String_To_EntityID_Map.honeyComb=n.ItemHoneyComb,this.String_To_EntityID_Map.jamBottle=n.ItemJamBottle,this.String_To_EntityID_Map.statue1=n.ItemStatueHp1,this.String_To_EntityID_Map.statue2=n.ItemStatueHp2,this.String_To_EntityID_Map.statue3=n.ItemStatueHp3,this.String_To_EntityID_Map.iceCube1=n.ParasiteIceCubeHp1,this.String_To_EntityID_Map.iceCube2=n.ParasiteIceCubeHp2,this.String_To_EntityID_Map.iceCube3=n.ParasiteIceCubeHp3,this.String_To_EntityID_Map.iceCube4=n.ParasiteIceCubeHp4,this.String_To_EntityID_Map.iceCube5=n.ParasiteIceCubeHp5,this.String_To_EntityID_Map.iceCube6=n.ParasiteIceCubeHp6,this.String_To_EntityID_Map.chain1=n.ParasiteShackleHp1,this.String_To_EntityID_Map.chain2=n.ParasiteShackleHp2,this.String_To_EntityID_Map.chain3=n.ParasiteShackleHp3,this.String_To_EntityID_Map.honey1=n.ParasiteHoneyHp1,this.String_To_EntityID_Map.honey2=n.ParasiteHoneyHp2,this.String_To_EntityID_Map.fireworks1=n.ItemFireworksHp1,this.String_To_EntityID_Map.fireworks2=n.ItemFireworksHp2,this.String_To_EntityID_Map.fireworks3=n.ItemFireworksHp3,this.String_To_EntityID_Map.fireworks4=n.ItemFireworksHp4,this.String_To_EntityID_Map.giftBoxRed=n.ParasiteGiftBoxRed,this.String_To_EntityID_Map.giftBoxGreen=n.ParasiteGiftBoxGreen,this.String_To_EntityID_Map.giftBoxBlue=n.ParasiteGiftBoxBlue,this.String_To_EntityID_Map.giftBoxYellow=n.ParasiteGiftBoxYellow,this.String_To_EntityID_Map.giftBoxOrange=n.ParasiteGiftBoxOrange,this.String_To_EntityID_Map.giftBoxPurple=n.ParasiteGiftBoxPurple},t.prototype.initEntityID_To_FrameName_Map=function(){this.EntityID_To_FrameName_Map[n.None]="unknow/unknow",this.EntityID_To_FrameName_Map[n.CellNormal]="cells/10101",this.EntityID_To_FrameName_Map[n.CellConveyerD2U]="conveyers/20101",this.EntityID_To_FrameName_Map[n.CellConveyerL2R]="conveyers/20102",this.EntityID_To_FrameName_Map[n.CellConveyerU2D]="conveyers/20103",this.EntityID_To_FrameName_Map[n.CellConveyerR2L]="conveyers/20104",this.EntityID_To_FrameName_Map[n.CellConveyerD2L]="conveyers/20105",this.EntityID_To_FrameName_Map[n.CellConveyerL2U]="conveyers/20106",this.EntityID_To_FrameName_Map[n.CellConveyerU2R]="conveyers/20107",this.EntityID_To_FrameName_Map[n.CellConveyerR2D]="conveyers/20108",this.EntityID_To_FrameName_Map[n.CellConveyerD2R]="conveyers/20109",this.EntityID_To_FrameName_Map[n.CellConveyerR2U]="conveyers/20110",this.EntityID_To_FrameName_Map[n.CellConveyerU2L]="conveyers/20111",this.EntityID_To_FrameName_Map[n.CellConveyerL2D]="conveyers/20112",this.EntityID_To_FrameName_Map[n.CellMovablePlate]="conveyers/20201",this.EntityID_To_FrameName_Map[n.PopsicleNormal]="popsicles/30101",this.EntityID_To_FrameName_Map[n.PopsicleNormal_1x1]="popsicles/30101",this.EntityID_To_FrameName_Map[n.PopsicleNormal_1x2]="popsicles/30102",this.EntityID_To_FrameName_Map[n.PopsicleNormal_2x2]="popsicles/30103",this.EntityID_To_FrameName_Map[n.PopsicleNormal_2x3]="popsicles/30104",this.EntityID_To_FrameName_Map[n.PopsicleNormal_3x3]="popsicles/30105",this.EntityID_To_FrameName_Map[n.PopsicleNormal_3x4]="popsicles/30106",this.EntityID_To_FrameName_Map[n.PopsicleBoom]="popsicles/30201",this.EntityID_To_FrameName_Map[n.PopsicleBoom_2x2]="popsicles/30201",this.EntityID_To_FrameName_Map[n.PopsicleBoom_1x1]="popsicles/30202",this.EntityID_To_FrameName_Map[n.PopsicleLine]="popsicles/30301",this.EntityID_To_FrameName_Map[n.FloorGrass]="floors/40101",this.EntityID_To_FrameName_Map[n.FloorIceHp1]="floors/40201",this.EntityID_To_FrameName_Map[n.FloorIceHp2]="floors/40202",this.EntityID_To_FrameName_Map[n.FloorIceHp3]="floors/40203",this.EntityID_To_FrameName_Map[n.FloorIceHp4]="floors/40204",this.EntityID_To_FrameName_Map[n.FloorChangerRed]="floors/40301",this.EntityID_To_FrameName_Map[n.FloorChangerGreen]="floors/40302",this.EntityID_To_FrameName_Map[n.FloorChangerBlue]="floors/40303",this.EntityID_To_FrameName_Map[n.FloorChangerYellow]="floors/40304",this.EntityID_To_FrameName_Map[n.FloorChangerOrange]="floors/40305",this.EntityID_To_FrameName_Map[n.FloorChangerPurple]="floors/40306",this.EntityID_To_FrameName_Map[n.FloorDouble]="floors/40401",this.EntityID_To_FrameName_Map[n.FloorRoadLineVU]="floors/40501",this.EntityID_To_FrameName_Map[n.FloorRoadLineHR]="floors/40502",this.EntityID_To_FrameName_Map[n.FloorRoadLineVD]="floors/40503",this.EntityID_To_FrameName_Map[n.FloorRoadLineHL]="floors/40504",this.EntityID_To_FrameName_Map[n.FloorRoadTurnLdD]="floors/40505",this.EntityID_To_FrameName_Map[n.FloorRoadTurnLuL]="floors/40506",this.EntityID_To_FrameName_Map[n.FloorRoadTurnRuU]="floors/40507",this.EntityID_To_FrameName_Map[n.FloorRoadTurnRdR]="floors/40508",this.EntityID_To_FrameName_Map[n.FloorRoadTurnRdD]="floors/40509",this.EntityID_To_FrameName_Map[n.FloorRoadTurnRuR]="floors/40510",this.EntityID_To_FrameName_Map[n.FloorRoadTurnLuU]="floors/40511",this.EntityID_To_FrameName_Map[n.FloorRoadTurnLdL]="floors/40512",this.EntityID_To_FrameName_Map[n.FloorRoadStartPoint]="floors/40601",this.EntityID_To_FrameName_Map[n.RugJam]="rugs/50101",this.EntityID_To_FrameName_Map[n.ItemNormalRed]="items/60101",this.EntityID_To_FrameName_Map[n.ItemNormalGreen]="items/60102",this.EntityID_To_FrameName_Map[n.ItemNormalBlue]="items/60103",this.EntityID_To_FrameName_Map[n.ItemNormalYellow]="items/60104",this.EntityID_To_FrameName_Map[n.ItemNormalOrange]="items/60105",this.EntityID_To_FrameName_Map[n.ItemNormalPurple]="items/60106",this.EntityID_To_FrameName_Map[n.ItemBombButterflyRed]="items/60201",this.EntityID_To_FrameName_Map[n.ItemBombButterflyGreen]="items/60202",this.EntityID_To_FrameName_Map[n.ItemBombButterflyBlue]="items/60203",this.EntityID_To_FrameName_Map[n.ItemBombButterflyYellow]="items/60204",this.EntityID_To_FrameName_Map[n.ItemBombButterflyOrange]="items/60205",this.EntityID_To_FrameName_Map[n.ItemBombButterflyPurple]="items/60206",this.EntityID_To_FrameName_Map[n.ItemBombRowRed]="items/60301",this.EntityID_To_FrameName_Map[n.ItemBombRowGreen]="items/60302",this.EntityID_To_FrameName_Map[n.ItemBombRowBlue]="items/60303",this.EntityID_To_FrameName_Map[n.ItemBombRowYellow]="items/60304",this.EntityID_To_FrameName_Map[n.ItemBombRowOrange]="items/60305",this.EntityID_To_FrameName_Map[n.ItemBombRowPurple]="items/60306",this.EntityID_To_FrameName_Map[n.ItemBombColumnRed]="items/60401",this.EntityID_To_FrameName_Map[n.ItemBombColumnGreen]="items/60402",this.EntityID_To_FrameName_Map[n.ItemBombColumnBlue]="items/60403",this.EntityID_To_FrameName_Map[n.ItemBombColumnYellow]="items/60404",this.EntityID_To_FrameName_Map[n.ItemBombColumnOrange]="items/60405",this.EntityID_To_FrameName_Map[n.ItemBombColumnPurple]="items/60406",this.EntityID_To_FrameName_Map[n.ItemBombCrossRed]="items/60501",this.EntityID_To_FrameName_Map[n.ItemBombCrossGreen]="items/60502",this.EntityID_To_FrameName_Map[n.ItemBombCrossBlue]="items/60503",this.EntityID_To_FrameName_Map[n.ItemBombCrossYellow]="items/60504",this.EntityID_To_FrameName_Map[n.ItemBombCrossOrange]="items/60505",this.EntityID_To_FrameName_Map[n.ItemBombCrossPurple]="items/60506",this.EntityID_To_FrameName_Map[n.ItemBombRangeRed]="items/60601",this.EntityID_To_FrameName_Map[n.ItemBombRangeGreen]="items/60602",this.EntityID_To_FrameName_Map[n.ItemBombRangeBlue]="items/60603",this.EntityID_To_FrameName_Map[n.ItemBombRangeYellow]="items/60604",this.EntityID_To_FrameName_Map[n.ItemBombRangeOrange]="items/60605",this.EntityID_To_FrameName_Map[n.ItemBombRangePurple]="items/60606",this.EntityID_To_FrameName_Map[n.ItemBombRainbow]="items/60701",this.EntityID_To_FrameName_Map[n.ItemBlockHp1]="items/60801",this.EntityID_To_FrameName_Map[n.ItemBlockHp2]="items/60802",this.EntityID_To_FrameName_Map[n.ItemBlockHp3]="items/60803",this.EntityID_To_FrameName_Map[n.ItemBlockHp4]="items/60804",this.EntityID_To_FrameName_Map[n.ItemBlockHp5]="items/60805",this.EntityID_To_FrameName_Map[n.ItemBlockHp6]="items/60806",this.EntityID_To_FrameName_Map[n.ItemDoughnutHp1]="items/60901",this.EntityID_To_FrameName_Map[n.ItemDoughnutHp2]="items/60902",this.EntityID_To_FrameName_Map[n.ItemDoughnutHp3]="items/60903",this.EntityID_To_FrameName_Map[n.ItemMagicCrystal]="items/61001",this.EntityID_To_FrameName_Map[n.ItemWatermelon]="items/61101",this.EntityID_To_FrameName_Map[n.ItemFruitCake]="items/61201",this.EntityID_To_FrameName_Map[n.ItemFireWormBottle]="items/61301",this.EntityID_To_FrameName_Map[n.ItemMowerUp]="items/61401",this.EntityID_To_FrameName_Map[n.ItemMowerRight]="items/61402",this.EntityID_To_FrameName_Map[n.ItemMowerDown]="items/61403",this.EntityID_To_FrameName_Map[n.ItemMowerLeft]="items/61404",this.EntityID_To_FrameName_Map[n.ItemBone]="items/61501",this.EntityID_To_FrameName_Map[n.ItemChestnut]="items/61601",this.EntityID_To_FrameName_Map[n.ItemFireworksHp1]="items/61701",this.EntityID_To_FrameName_Map[n.ItemFireworksHp2]="items/61702",this.EntityID_To_FrameName_Map[n.ItemFireworksHp3]="items/61703",this.EntityID_To_FrameName_Map[n.ItemFireworksHp4]="items/61704",this.EntityID_To_FrameName_Map[n.ItemPuppy]="items/62001",this.EntityID_To_FrameName_Map[n.ItemPawRed]="items/62101",this.EntityID_To_FrameName_Map[n.ItemPawGreen]="items/62102",this.EntityID_To_FrameName_Map[n.ItemPawBlue]="items/62103",this.EntityID_To_FrameName_Map[n.ItemPawYellow]="items/62104",this.EntityID_To_FrameName_Map[n.ItemPawOrange]="items/62105",this.EntityID_To_FrameName_Map[n.ItemPawPurple]="items/62106",this.EntityID_To_FrameName_Map[n.ItemBalloon]="items/62201",this.EntityID_To_FrameName_Map[n.ItemDogHouse]="items/62301",this.EntityID_To_FrameName_Map[n.ItemJamBottle]="items/62401",this.EntityID_To_FrameName_Map[n.ItemHoneyComb]="items/62601",this.EntityID_To_FrameName_Map[n.ItemStatueHp1]="items/62801",this.EntityID_To_FrameName_Map[n.ItemStatueHp2]="items/62802",this.EntityID_To_FrameName_Map[n.ItemStatueHp3]="items/62803",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp1]="parasites/70101",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp2]="parasites/70102",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp3]="parasites/70103",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp4]="parasites/70104",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp5]="parasites/70105",this.EntityID_To_FrameName_Map[n.ParasiteIceCubeHp6]="parasites/70106",this.EntityID_To_FrameName_Map[n.ParasiteShackleHp1]="parasites/70201",this.EntityID_To_FrameName_Map[n.ParasiteShackleHp2]="parasites/70202",this.EntityID_To_FrameName_Map[n.ParasiteShackleHp3]="parasites/70203",this.EntityID_To_FrameName_Map[n.ParasiteHoneyHp1]="parasites/70301",this.EntityID_To_FrameName_Map[n.ParasiteHoneyHp2]="parasites/70302",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxRed]="parasites/70401",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxGreen]="parasites/70402",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxBlue]="parasites/70403",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxYellow]="parasites/70404",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxOrange]="parasites/70405",this.EntityID_To_FrameName_Map[n.ParasiteGiftBoxPurple]="parasites/70406",this.EntityID_To_FrameName_Map[n.MarkBoneCollector]="marks/80101",this.EntityID_To_FrameName_Map[n.MarkWormholeEntrance]="marks/80201",this.EntityID_To_FrameName_Map[n.MarkWormholeExit]="marks/80301",this.EntityID_To_FrameName_Map[n.FenceVineVertical]="marks/80401",this.EntityID_To_FrameName_Map[n.FenceVineHorizontal]="marks/80501",this.EntityID_To_FrameName_Map[n.MarkDropMachine]="marks/80801",this.EntityID_To_FrameName_Map[n.FlyerMissileRed]="flyers/90101",this.EntityID_To_FrameName_Map[n.FlyerMissileGreen]="flyers/90102",this.EntityID_To_FrameName_Map[n.FlyerMissileBlue]="flyers/90103",this.EntityID_To_FrameName_Map[n.FlyerMissileYellow]="flyers/90104",this.EntityID_To_FrameName_Map[n.FlyerMissileOrange]="flyers/90105",this.EntityID_To_FrameName_Map[n.FlyerMissilePurple]="flyers/90106",this.EntityID_To_FrameName_Map[n.FlyerCannonRed]="flyers/90201",this.EntityID_To_FrameName_Map[n.FlyerCannonGreen]="flyers/90202",this.EntityID_To_FrameName_Map[n.FlyerCannonBlue]="flyers/90203",this.EntityID_To_FrameName_Map[n.FlyerCannonYellow]="flyers/90204",this.EntityID_To_FrameName_Map[n.FlyerCannonOrange]="flyers/90205",this.EntityID_To_FrameName_Map[n.FlyerCannonPurple]="flyers/90206",this.EntityID_To_FrameName_Map[n.FlyerMower]="items/61401"},t.prototype.initEntityID_To_ButterflyPriority_Map=function(){this.EntityID_To_ButterflyPriority_Map[n.FloorIceHp1]=2,this.EntityID_To_ButterflyPriority_Map[n.FloorIceHp2]=2,this.EntityID_To_ButterflyPriority_Map[n.FloorIceHp3]=2,this.EntityID_To_ButterflyPriority_Map[n.FloorIceHp4]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalRed]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalGreen]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalBlue]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalYellow]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalOrange]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemNormalPurple]=4,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp1]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp2]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp3]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp4]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp5]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemBlockHp6]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemDoughnutHp1]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemDoughnutHp2]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemDoughnutHp3]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemPawRed]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemPawGreen]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemPawBlue]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemPawYellow]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemPawOrange]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemPawPurple]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemJamBottle]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemFireWormBottle]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemChestnut]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemWatermelon]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemFireworksHp1]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemFireworksHp2]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemFireworksHp3]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemFireworksHp4]=2,this.EntityID_To_ButterflyPriority_Map[n.ItemStatueHp1]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemStatueHp2]=1,this.EntityID_To_ButterflyPriority_Map[n.ItemStatueHp3]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp1]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp2]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp3]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp4]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp5]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteIceCubeHp6]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteShackleHp1]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteShackleHp2]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteShackleHp3]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteHoneyHp1]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteHoneyHp2]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxRed]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxGreen]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxBlue]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxYellow]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxOrange]=1,this.EntityID_To_ButterflyPriority_Map[n.ParasiteGiftBoxPurple]=1},t.prototype.initEntityID_To_NormalEntityID_Map=function(){this.EntityID_To_NormalEntityID_Map[n.ItemNormalRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemNormalGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemNormalBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemNormalYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemNormalOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemNormalPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemBombButterflyPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemBombRowPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemBombColumnPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemBombCrossPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangeRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangeGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangeBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangeYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangeOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemBombRangePurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ItemPawRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ItemPawGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ItemPawBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ItemPawYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ItemPawOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ItemPawPurple]=n.ItemNormalPurple,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxRed]=n.ItemNormalRed,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxGreen]=n.ItemNormalGreen,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxBlue]=n.ItemNormalBlue,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxYellow]=n.ItemNormalYellow,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxOrange]=n.ItemNormalOrange,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxPurple]=n.ItemNormalPurple},t.prototype.initEntityID_To_EntityColor_Map=function(){this.EntityID_To_EntityColor_Map[n.ItemNormalRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemNormalGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemNormalBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemNormalYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemNormalOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemNormalPurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemBombButterflyPurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemBombRowRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemBombRowGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemBombRowBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemBombRowYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemBombRowOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemBombRowPurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemBombColumnRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemBombColumnGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemBombColumnBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemBombColumnYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemBombColumnOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemBombColumnPurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemBombCrossRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemBombCrossGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemBombCrossBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemBombCrossYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemBombCrossOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemBombCrossPurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemBombRangeRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemBombRangeGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemBombRangeBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemBombRangeYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemBombRangeOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemBombRangePurple]=i.Purple,this.EntityID_To_EntityColor_Map[n.ItemPawRed]=i.Red,this.EntityID_To_EntityColor_Map[n.ItemPawGreen]=i.Green,this.EntityID_To_EntityColor_Map[n.ItemPawBlue]=i.Blue,this.EntityID_To_EntityColor_Map[n.ItemPawYellow]=i.Yellow,this.EntityID_To_EntityColor_Map[n.ItemPawOrange]=i.Orange,this.EntityID_To_EntityColor_Map[n.ItemPawPurple]=i.Purple,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxRed]=i.Red,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxGreen]=i.Green,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxBlue]=i.Blue,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxYellow]=i.Yellow,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxOrange]=i.Orange,this.EntityID_To_NormalEntityID_Map[n.ParasiteGiftBoxPurple]=i.Purple},t.prototype.initEntityID_To_DieAnimationPath_Map=function(){var t="match_scene/prefab/entity/animation/";this.EntityID_To_DieAnimationPath_Map[n.FloorIceHp1]=y.create(t+"AnimationIceDie",n.FlyerAnimationFloorIceDie),this.EntityID_To_DieAnimationPath_Map[n.FloorIceHp2]=y.create(t+"AnimationIceDie",n.FlyerAnimationFloorIceDie),this.EntityID_To_DieAnimationPath_Map[n.FloorIceHp3]=y.create(t+"AnimationIceDie",n.FlyerAnimationFloorIceDie),this.EntityID_To_DieAnimationPath_Map[n.FloorIceHp4]=y.create(t+"AnimationIceDie",n.FlyerAnimationFloorIceDie),this.EntityID_To_DieAnimationPath_Map[n.RugJam]=y.create(t+"AnimationJamDie",n.FlyerAnimationRugJamDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalRed]=y.create(t+"AnimationFruitDieRed",n.FlyerAnimationItemNormalRedDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalGreen]=y.create(t+"AnimationFruitDieGreen",n.FlyerAnimationItemNormalGreenDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalBlue]=y.create(t+"AnimationFruitDieBlue",n.FlyerAnimationItemNormalBlueDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalYellow]=y.create(t+"AnimationFruitDieYellow",n.FlyerAnimationItemNormalYellowDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalOrange]=y.create(t+"AnimationFruitDieOrange",n.FlyerAnimationItemNormalOrangeDie),this.EntityID_To_DieAnimationPath_Map[n.ItemNormalPurple]=y.create(t+"AnimationFruitDiePurple",n.FlyerAnimationItemNormalPurpleDie),this.EntityID_To_DieAnimationPath_Map[n.ItemBlockHp1]=y.create(t+"AnimationBlockDie",n.FlyerAnimationItemBlockDie),this.EntityID_To_DieAnimationPath_Map[n.ItemDoughnutHp1]=y.create(t+"AnimationDoughnutDie",n.FlyerAnimationItemDoughnutDie),this.EntityID_To_DieAnimationPath_Map[n.ItemWatermelon]=y.create(t+"AnimationWatermelonHurt",n.FlyerAnimationItemWatermelonDie),this.EntityID_To_DieAnimationPath_Map[n.ItemFruitCake]=y.create(t+"AnimationFruitCakeDie",n.FlyerAnimationItemFruitCakeDie),this.EntityID_To_DieAnimationPath_Map[n.ItemFireWormBottle]=y.create(t+"AnimationFireWormBottleDie",n.FlyerAnimationItemFirewormBottleDie),this.EntityID_To_DieAnimationPath_Map[n.ItemChestnut]=y.create(t+"AnimationChestnutDie",n.FlyerAnimationItemChestnutDie),this.EntityID_To_DieAnimationPath_Map[n.ItemJamBottle]=y.create(t+"AnimationJamBottleDie",n.FlyerAnimationItemJamBottleDie),this.EntityID_To_DieAnimationPath_Map[n.ItemStatueHp1]=y.create(t+"AnimationStatueDie",n.FlyerAnimationItemStatueDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteIceCubeHp1]=y.create(t+"AnimationIceCubeDie",n.FlyerAnimationParasiteIceCubeDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteShackleHp1]=y.create(t+"AnimationShackleDie",n.FlyerAnimationParasiteShackleDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteHoneyHp1]=y.create(t+"AnimationHoneyDie",n.FlyerAnimationParasiteHoneyDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteHoneyHp2]=y.create(t+"AnimationHoneyDie",n.FlyerAnimationParasiteHoneyDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxRed]=y.create(t+"AnimationGiftBoxRedDie",n.FlyerAnimationParasiteGiftBoxRedDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxGreen]=y.create(t+"AnimationGiftBoxGreenDie",n.FlyerAnimationParasiteGiftBoxGreenDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxBlue]=y.create(t+"AnimationGiftBoxBlueDie",n.FlyerAnimationParasiteGiftBoxBlueDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxYellow]=y.create(t+"AnimationGiftBoxYellowDie",n.FlyerAnimationParasiteGiftBoxYellowDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxOrange]=y.create(t+"AnimationGiftBoxOrangeDie",n.FlyerAnimationParasiteGiftBoxOrangeDie),this.EntityID_To_DieAnimationPath_Map[n.ParasiteGiftBoxPurple]=y.create(t+"AnimationGiftBoxPurpleDie",n.FlyerAnimationParasiteGiftBoxPurpleDie)},t.prototype.getEntityIDFromString=function(t){var e=this.String_To_EntityID_Map[t];return e||n.None},t.prototype.getFrameNameFromEntityID=function(t){var e="match_scene/texture/entities/",o=this.EntityID_To_FrameName_Map[t];return o?e+o:e+"unknow/unknow"},t.prototype.getHurtAnimationInfoFromEntityID=function(t){var e=this.EntityID_To_DieAnimationPath_Map[t];return e||null},t.prototype.getDefaultButterflyPriorityFromEntityID=function(t){var e=this.EntityID_To_ButterflyPriority_Map[t];return e||s.default.DEFAULT_MISSILE_PRIORITY},t.prototype.getCorrespondingNormlaEntityID=function(t){var e=this.EntityID_To_NormalEntityID_Map[t];return e||n.None},t.prototype.getEntityColorWithEntityID=function(t){var e=i.None;return this.EntityID_To_EntityColor_Map.hasOwnProperty(t)&&(e=this.EntityID_To_EntityColor_Map[t]),e},t.instance=null,t}();o.EntityIDManager=h,cc._RF.pop()},{"../entity/EntityBase":"EntityBase","../entity/item/color/bomb/ItemBombBase":"ItemBombBase","./CollectionID":"CollectionID"}],EntityPrefabNodePool:[function(t,e,o){"use strict";cc._RF.push(e,"8f1148VqL5HuLhhkrCsSuMr","EntityPrefabNodePool"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../extend/utils/GameMath"),i=function(){function t(){this._prefabNodePools={}}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getPrefabNodeWithFileNameAndClassName=function(t,e){var o=null,n=this._prefabNodePools[t];if(n&&n.size()>0)o=n.get();else{var i=cc.loader.getRes(t,cc.Prefab);i&&(o=cc.instantiate(i))}if(o){var r=o.getComponent(e);return r||(r=o.addComponent(e)).setPrefabFileName(t),r}return null},t.prototype.putPrefabNode=function(t){if(t){var e=t.getPrefabFileName();if(""!=e){this._prefabNodePools.hasOwnProperty(e)||(this._prefabNodePools[e]=new cc.NodePool);var o=this._prefabNodePools[e];o.size()<100&&o.put(t.node)}}},t.prototype.clear=function(){for(var t in this._prefabNodePools){this._prefabNodePools[t].clear()}n.default.clearObject(this._prefabNodePools)},t.instance=null,t}();o.default=i,cc._RF.pop()},{"../../../extend/utils/GameMath":"GameMath"}],EntityStateBase:[function(t,e,o){"use strict";var n;cc._RF.push(e,"c1293Qu15xBB6zFurj5SxDm","EntityStateBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.EntityStateType=void 0,function(t){t[t.None=-1]="None",t[t.Wait=0]="Wait",t[t.Drop=1]="Drop",t[t.Swap=2]="Swap",t[t.Clean=3]="Clean",t[t.Shuffle=4]="Shuffle",t[t.Replace=5]="Replace",t[t.Upgrade=6]="Upgrade",t[t.ChangeColor=7]="ChangeColor",t[t.Generate=8]="Generate",t[t.Butterfly=9]="Butterfly"}(n=o.EntityStateType||(o.EntityStateType={}));var i=function(){function t(t){this._type=n.None,this._type=t}return t.prototype.getType=function(){return this._type},t.prototype.enter=function(t){},t.prototype.update=function(t,e){},t.prototype.exit=function(t){},t}();o.default=i,cc._RF.pop()},{}],EntityStateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"e176ePKYI9GTp1sqLAduimO","EntityStateMachine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){return new e(t)},e}(t("../../fsm/StateMachineBase").default);o.default=i,cc._RF.pop()},{"../../fsm/StateMachineBase":"StateMachineBase"}],EntityStateWait:[function(t,e,o){"use strict";cc._RF.push(e,"fd5f7gpMOpAMqefk3jl0Pb5","EntityStateWait");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../EntityStateBase"),r=function(t){function e(){return t.call(this,i.EntityStateType.Wait)||this}return n(e,t),e.create=function(){return new e},e}(i.default);o.default=r,cc._RF.pop()},{"../EntityStateBase":"EntityStateBase"}],FenceBase:[function(t,e,o){"use strict";cc._RF.push(e,"7c0dccJg0dMmrea/eNOxoMZ","FenceBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FenceType=void 0;var r,a=t("../../defines/EntityID"),s=t("../EntityBase"),c=t("./FencePos");(function(t){t[t.None=0]="None",t[t.Vine=1]="Vine"})(r=o.FenceType||(o.FenceType={}));var l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fenceType=r.None,e._fencePos=c.default.create(cc.Vec2.ZERO,cc.v2(0,1)),e}return n(e,t),e.prototype.getFenceType=function(){return this._fenceType},e.prototype.getFencePos=function(){return this._fencePos},e.prototype.setFencePos=function(t){this._fencePos=t;var e=this.getGrid().getPixelPosFromLogicalPos(this._fencePos.posA),o=this.getGrid().getPixelPosFromLogicalPos(this._fencePos.posB),n=e.add(o).mul(.5);this.node.setPosition(n),this.node.zIndex=this.getGrid().getBottomZOrder(this.getEntityType(),this._fencePos.posA),this.updatePuppet()},e.prototype.removeFromGridAndAddToEffect=function(){this.removeFromGrid(),this.node.parent=this.getGrid().node,this.setFencePos(this.getFencePos()),this.node.zIndex=this.getTopZOrder()},e.prototype.initFence=function(e,o){t.prototype.initEntity.call(this,e,a.EntityType.Fences,1,1),this._fenceType=o,this._fencePos=c.default.create(cc.Vec2.ZERO,cc.v2(0,1))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fencePos=null},e=i([p],e)}(s.default));o.default=u,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../EntityBase":"EntityBase","./FencePos":"FencePos"}],FenceFactory:[function(t,e,o){"use strict";cc._RF.push(e,"f16d45VvjBPpojHuqK69FZa","FenceFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./FenceVine"),a=t("./FencePos"),s=function(){function t(){}return t.generateItemWithEntityID=function(t,e,o){var i=null;switch(o){case n.EntityID.FenceVineHorizontal:(i=r.default.create(t)).setFencePos(a.default.create(e,e.add(cc.v2(0,-1))));break;case n.EntityID.FenceVineVertical:(i=r.default.create(t)).setFencePos(a.default.create(e,e.add(cc.v2(-1,0))))}return i},t.generateItemWithKindID=function(t,e,o){var n=i.default.getInstance().getEntityIDFromKindID(o);return this.generateItemWithEntityID(t,e,n)},t}();o.default=s,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./FencePos":"FencePos","./FenceVine":"FenceVine"}],FencePos:[function(t,e,o){"use strict";cc._RF.push(e,"f2b47gRmLJPPZtXasQjqqji","FencePos"),Object.defineProperty(o,"__esModule",{value:!0}),o.FencePosType=void 0;var n,i=t("../../../../extend/utils/GameMath");(function(t){t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"})(n=o.FencePosType||(o.FencePosType={}));var r=function(){function t(t,e){this.posA=t,this.posB=e}return t.create=function(e,o){var n=e.sub(o);return 0==n.x&&1==Math.abs(n.y)||0==n.y&&1==Math.abs(n.x)?i.default.vec2Less(e,o)?new t(e,o):new t(o,e):null},t.prototype.getFencePosType=function(){var t=n.None,e=this.posA.sub(this.posB);return 0==e.x&&1==Math.abs(e.y)?t=n.Horizontal:0==e.y&&1==Math.abs(e.x)&&(t=n.Vertical),t},t.prototype.equals=function(t){return!(!this.posA.equals(t.posA)||!this.posB.equals(t.posB))},t}();o.default=r,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath"}],FenceVine:[function(t,e,o){"use strict";cc._RF.push(e,"43dee1zz81GnqX9wk7R0ivO","FenceVine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FenceBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){var e=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/fence/FenceVine","FenceVine");return e?(e.init(t),e):null},e.prototype.init=function(e){t.prototype.initFence.call(this,e,r.FenceType.Vine)},e.prototype.getCollectionID=function(){return a.CollectionID.FenceVine},e.prototype.getEntityID=function(){return this.getFencePos().posA.y==this.getFencePos().posB.y?s.EntityID.FenceVineVertical:s.EntityID.FenceVineHorizontal},e.prototype.start=function(){},e=i([p],e)}(r.default));o.default=u,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FenceBase":"FenceBase"}],FloorBase:[function(t,e,o){"use strict";cc._RF.push(e,"9037apHv89Aa7VLHC8UdRBR","FloorBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FloorType=void 0;var r=t("../../defines/EntityID"),a=t("../EntityBase"),s=t("../../commond/GridCommand");(function(t){t[t.Ice=0]="Ice",t[t.Double=1]="Double",t[t.Road=2]="Road",t[t.Changer=3]="Changer",t[t.Grass=4]="Grass"})(o.FloorType||(o.FloorType={}));var c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=null,e}return n(e,t),e.prototype.getFloorType=function(){return this._type},e.prototype.initFloor=function(e,o){t.prototype.initEntity.call(this,e,r.EntityType.Floor),this._type=o},e.prototype.getType=function(){return this._type},e.prototype.canExcuteCommand=function(t){switch(t.type){case s.GridCommandType.BombClean:return this.canCleanByBomb(t.cleanColor);case s.GridCommandType.FloorClean:return this.canBeFloorClean();case s.GridCommandType.TerminateClean:return this.canCleanByTerminate(t.cleanColor)}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case s.GridCommandType.BombClean:this.onClean(r.EntityCleanOption.create(r.EntityCleanType.Bomb,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.FloorClean:this.onClean(r.EntityCleanOption.create(r.EntityCleanType.Floor,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.TerminateClean:this.onClean(r.EntityCleanOption.create(r.EntityCleanType.Terminate,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass))}},e.prototype.canCleanByTerminate=function(t){return this._canCleanByTerminate(t)},e.prototype.canCleanByBomb=function(t){return!this.getImmuneDamage()&&this._canCleanByBomb(t)},e.prototype.canBeFloorClean=function(){return!this.getImmuneDamage()&&this._canBeFloorClean()},e.prototype.onClean=function(t){this._onClean(t),this.setImmuneDamage(!0)},e.prototype.removeFromGrid=function(){this.getGrid().removeFloorAtLogicalPos(this.getLogicalPos())},e.prototype._canCleanByTerminate=function(t){return!1},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canBeFloorClean=function(){return!1},e.prototype._onClean=function(t){},e=i([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../EntityBase":"EntityBase"}],FloorChanger:[function(t,e,o){"use strict";cc._RF.push(e,"a3909XA8H5GkozAd/QsoYj3","FloorChanger");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FloorBase"),a=t("../../defines/EntityID"),s=t("../../defines/CollectionID"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t,e){var o=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/floor/FloorChanger","FloorChanger");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.getCollectionID=function(){return s.CollectionID.FloorChanger},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=a.EntityID.FloorChangerRed;break;case a.EntityColor.Green:t=a.EntityID.FloorChangerGreen;break;case a.EntityColor.Blue:t=a.EntityID.FloorChangerBlue;break;case a.EntityColor.Yellow:t=a.EntityID.FloorChangerYellow;break;case a.EntityColor.Orange:t=a.EntityID.FloorChangerOrange;break;case a.EntityColor.Purple:t=a.EntityID.FloorChangerPurple}return t},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canBeFloorClean=function(){return!1},e.prototype.init=function(e,o){t.prototype.initFloor.call(this,e,r.FloorType.Changer),this.setEntityColor(o)},e=o=i([p],e)}(r.default));o.default=u,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FloorBase":"FloorBase"}],FloorDoubler:[function(t,e,o){"use strict";cc._RF.push(e,"b6b152yClhGyq3QyKqmQjng","FloorDoubler");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FloorBase"),a=t("../../defines/EntityID"),s=t("../../defines/CollectionID"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/floor/FloorDoubler","FloorDoubler");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return s.CollectionID.FloorDouble},e.prototype.getEntityID=function(){return a.EntityID.FloorDouble},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canBeFloorClean=function(){return!1},e.prototype.init=function(e){t.prototype.initFloor.call(this,e,r.FloorType.Double)},e=o=i([p],e)}(r.default));o.default=u,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FloorBase":"FloorBase"}],FloorFactory:[function(t,e,o){"use strict";cc._RF.push(e,"61013XVaBlI0phUgcjUM2SI","FloorFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./FloorRoad"),a=t("./FloorIce"),s=t("./FloorGrass"),c=t("./FloorChanger"),l=t("./FloorDoubler"),p=function(){function t(){}return t.generateFloorWithEntityID=function(t,e){var o=null;switch(e){case n.EntityID.FloorIceHp1:case n.EntityID.FloorIceHp2:case n.EntityID.FloorIceHp3:case n.EntityID.FloorIceHp4:var i=e-n.EntityID.FloorIceHp1+1;o=a.default.create(t,i);break;case n.EntityID.FloorRoadLineVU:o=r.default.create(t,r.FloorRoadDirection.Down,r.FloorRoadDirection.Up);break;case n.EntityID.FloorRoadLineHR:o=r.default.create(t,r.FloorRoadDirection.Left,r.FloorRoadDirection.Right);break;case n.EntityID.FloorRoadLineVD:o=r.default.create(t,r.FloorRoadDirection.Up,r.FloorRoadDirection.Down);break;case n.EntityID.FloorRoadLineHL:o=r.default.create(t,r.FloorRoadDirection.Right,r.FloorRoadDirection.Left);break;case n.EntityID.FloorRoadTurnLdD:o=r.default.create(t,r.FloorRoadDirection.Left,r.FloorRoadDirection.Down);break;case n.EntityID.FloorRoadTurnLuL:o=r.default.create(t,r.FloorRoadDirection.Up,r.FloorRoadDirection.Left);break;case n.EntityID.FloorRoadTurnRuU:o=r.default.create(t,r.FloorRoadDirection.Right,r.FloorRoadDirection.Up);break;case n.EntityID.FloorRoadTurnRdR:o=r.default.create(t,r.FloorRoadDirection.Down,r.FloorRoadDirection.Right);break;case n.EntityID.FloorRoadTurnRdD:o=r.default.create(t,r.FloorRoadDirection.Right,r.FloorRoadDirection.Down);break;case n.EntityID.FloorRoadTurnRuR:o=r.default.create(t,r.FloorRoadDirection.Up,r.FloorRoadDirection.Right);break;case n.EntityID.FloorRoadTurnLuU:o=r.default.create(t,r.FloorRoadDirection.Left,r.FloorRoadDirection.Up);break;case n.EntityID.FloorRoadTurnLdL:o=r.default.create(t,r.FloorRoadDirection.Down,r.FloorRoadDirection.Left);break;case n.EntityID.FloorChangerRed:case n.EntityID.FloorChangerGreen:case n.EntityID.FloorChangerBlue:case n.EntityID.FloorChangerYellow:case n.EntityID.FloorChangerOrange:case n.EntityID.FloorChangerPurple:(i=e-n.EntityID.FloorChangerRed+n.EntityColor.Red)>=n.EntityColor.Begin&&i<=n.EntityColor.End&&(o=c.default.create(t,i))&&o.setEntityColor(i);break;case n.EntityID.FloorGrass:o=s.default.create(t);break;case n.EntityID.FloorDouble:o=l.default.create(t)}return o},t.generateFloorWithKindID=function(t,e){var o=i.default.getInstance().getEntityIDFromKindID(e);return this.generateFloorWithEntityID(t,o)},t}();o.default=p,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./FloorChanger":"FloorChanger","./FloorDoubler":"FloorDoubler","./FloorGrass":"FloorGrass","./FloorIce":"FloorIce","./FloorRoad":"FloorRoad"}],FloorGrass:[function(t,e,o){"use strict";cc._RF.push(e,"4f7adZ00spJH4JKTGCbEMKL","FloorGrass");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../defines/IdentifierManager"),l=t("../EntityPrefabNodePool"),p=t("./FloorBase"),u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=l.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/floor/FloorGrass","FloorGrass");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return a.CollectionID.FloorGrass},e.prototype.getEntityID=function(){return s.EntityID.FloorGrass},e.prototype.getScore=function(){return 200},e.prototype.onCollected=function(){this.getGrid().isTargetCollectionID(this.getCollectionID())&&this.getGrid().updateTargetBarUIWithDelta(this.getCollectionID(),-1),this.getGrid().collectEntity(this)},e.prototype.grow=function(){this.getGrid().gainScoreWithEntity(this),this.playAnimation("grow"),this.selfHurt(),r.default.playAudio(c.default.getInstance().getMatchAudioFilePath("grass"))},e.prototype.init=function(e){t.prototype.initFloor.call(this,e,p.FloorType.Grass)},e=o=i([y],e)}(p.default));o.default=h,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FloorBase":"FloorBase"}],FloorIce:[function(t,e,o){"use strict";cc._RF.push(e,"00356zqv0lMGrQ3DtOo4LJc","FloorIce");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FloorBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../commond/GridCommand"),l=t("../flyer/FlyerAnimation"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/floor/FloorIce","FloorIce");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getCollectionID=function(){return a.CollectionID.FloorIce},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.FloorIceHp1;break;case 2:t=s.EntityID.FloorIceHp2;break;case 3:t=s.EntityID.FloorIceHp3;break;case 4:t=s.EntityID.FloorIceHp4}return t},e.prototype.getScore=function(){return 50},e.prototype.getButterflyPriority=function(e,o){if(this.getGrid().getPopsicleAtLogicalPos(this.getLogicalPos())){var n=this.getGrid().getItemAtLogicalPos(this.getLogicalPos());return n&&n.canExcuteCommand(c.default.BombClean(this.getLogicalPos(),e,o)),1}return t.prototype.getButterflyPriority.call(this,e,o)},e.prototype._canCleanByTerminate=function(t){return!0},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canBeFloorClean=function(){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(this.setVisible(!1),!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("ice"))}this.onCollected(),this.selfDestory(),this.getGrid().dispatchCommand(this.getLogicalPos(),c.default.PopsicleClean(),0)}else{this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt();o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("ice")),o.node.zIndex=this.getTopZOrder()}},e.prototype.init=function(e,o){t.prototype.initFloor.call(this,e,r.FloorType.Ice),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../commond/GridCommand":"GridCommand","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./FloorBase":"FloorBase"}],FloorRoad:[function(t,e,o){"use strict";cc._RF.push(e,"22062qWI8hHPZ93a4Z/Vw1l","FloorRoad");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FloorRoadDirection=void 0;var r,a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("./FloorBase"),l=t("../EntityPrefabNodePool");(function(t){t[t.Left=0]="Left",t[t.Up=1]="Up",t[t.Right=2]="Right",t[t.Down=3]="Down"})(r=o.FloorRoadDirection||(o.FloorRoadDirection={}));var p=cc._decorator,u=p.ccclass,y=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isStartPoint=!1,e._inDirection=r.Left,e._outDirection=r.Up,e}var o;return n(e,t),o=e,e.create=function(t,e,o){var n=l.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/floor/FloorRoad","FloorRoad");return n?(n.init(t,e,o),n):null},e.prototype.clone=function(){return o.create(this.getGrid(),this._inDirection,this._outDirection)},e.prototype.init=function(e,o,n){t.prototype.initFloor.call(this,e,c.FloorType.Road),this.setInDirection(o),this.setOutDirection(n),this.updatePuppet()},e.prototype.getCollectionID=function(){return a.CollectionID.FloorRoad},e.prototype.getEntityID=function(){if(this.getIsStartPoint())return s.EntityID.FloorRoadStartPoint;var t=s.EntityID.None;switch(this._inDirection){case r.Left:switch(this._outDirection){case r.Right:t=s.EntityID.FloorRoadLineHR;break;case r.Up:t=s.EntityID.FloorRoadTurnLuU;break;case r.Down:t=s.EntityID.FloorRoadTurnLdD}break;case r.Right:switch(this._outDirection){case r.Left:t=s.EntityID.FloorRoadLineHL;break;case r.Up:t=s.EntityID.FloorRoadTurnRuU;break;case r.Down:t=s.EntityID.FloorRoadTurnRdD}break;case r.Up:switch(this._outDirection){case r.Left:t=s.EntityID.FloorRoadTurnLuL;break;case r.Right:t=s.EntityID.FloorRoadTurnRuR;break;case r.Down:t=s.EntityID.FloorRoadLineVD}break;case r.Down:switch(this._outDirection){case r.Left:t=s.EntityID.FloorRoadTurnLdL;break;case r.Right:t=s.EntityID.FloorRoadTurnRdR;break;case r.Up:t=s.EntityID.FloorRoadLineVU}}return t},e.prototype.getIsStartPoint=function(){return this._isStartPoint},e.prototype.setIsStartPoint=function(t){this._isStartPoint=t,this.updatePuppet()},e.prototype.getInDirection=function(){return this._inDirection},e.prototype.setInDirection=function(t){this._inDirection=t},e.prototype.getOutDirection=function(){return this._outDirection},e.prototype.setOutDirection=function(t){this._outDirection=t},e=o=i([u],e)}(c.default));o.default=y,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FloorBase":"FloorBase"}],FlyerAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"a037d+MRTZIoKgX8nH4xQqC","FlyerAnimation");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FlyerAnimationType=void 0;var r,a=t("../../defines/EntityID"),s=t("../../defines/IdentifierManager"),c=t("../EntityPrefabNodePool"),l=t("./FlyerBase");(function(t){t[t.Bomb1x1=0]="Bomb1x1",t[t.CommonHurt=1]="CommonHurt",t[t.FocusFrame=2]="FocusFrame",t[t.HighlightedCell=3]="HighlightedCell",t[t.ItemMarked=4]="ItemMarked",t[t.BombCross=5]="BombCross"})(r=o.FlyerAnimationType||(o.FlyerAnimationType={}));var p=cc._decorator,u=p.ccclass,y=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._autoRemoveOnFinish=!1,e._entityID=a.EntityID.None,e}return n(e,t),e.prototype.getAutoRemoveOnFinish=function(){return this._autoRemoveOnFinish},e.prototype.setAutoRemoveOnFinish=function(t){this._autoRemoveOnFinish=t},e.prototype.getEntityID=function(){return this._entityID},e.prototype.launch=function(){var t=this,e=this.playAnimation("default");if(this._autoRemoveOnFinish)if(e){var o=cc.sequence(cc.delayTime(e.duration),cc.callFunc(function(){t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(o)}else this.getGrid().removeObstructs(this),this.destoryWithRecycle(!0)},e.prototype.init=function(e,o,n){this._entityID=o,t.prototype.initFlyer.call(this,e,l.FlyerType.Animation),this.setAutoRemoveOnFinish(n)},e.create=function(t,e,o,n){void 0===n&&(n=!0);var i=o,r=c.default.getInstance().getPrefabNodeWithFileNameAndClassName(i,"FlyerAnimation");return r?(r.init(t,e,n),r):null},e.createDieAnimation=function(t,e,o){void 0===o&&(o=!0);var n=s.default.getInstance().getHurtAnimationInfoPathFromEntityID(e);return n?this.create(t,n.entityID,n.fileName,o):null},e.createAnimationWithType=function(t,e,o){void 0===o&&(o=!0);var n=null,i=a.EntityID.None;switch(e){case r.Bomb1x1:n="match_scene/prefab/entity/animation/AnimationBomb1x1",i=a.EntityID.FlyerAnimationBomb1x1;break;case r.CommonHurt:n="match_scene/prefab/entity/animation/AnimationCommonHurt",i=a.EntityID.FlyerAnimationCommonHurt;break;case r.FocusFrame:n="match_scene/prefab/entity/animation/AnimationFocusFrame",i=a.EntityID.FlyerAnimationFocusFrame;break;case r.HighlightedCell:n="match_scene/prefab/entity/animation/AnimationHighlightedCell",i=a.EntityID.FlyerAnimationHighlightedCell;break;case r.ItemMarked:n="match_scene/prefab/entity/animation/AnimationItemMarked",i=a.EntityID.FlyerAnimationItemMarked;break;case r.BombCross:n="match_scene/prefab/entity/animation/AnimationFireworkBoom",i=a.EntityID.FlyerAnimationBombCross}return n?this.create(t,i,n,o):null},e.prototype.start=function(){},e=i([u],e)}(l.default));o.default=y,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerBase:[function(t,e,o){"use strict";cc._RF.push(e,"9a942L29kNCR4kK6I0NvvB6","FlyerBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FlyerType=void 0;var r,a=t("../../../../extend/utils/GameMath"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../EntityBase"),p=t("../../commond/GridCommand");(function(t){t[t.None=0]="None",t[t.Missile=1]="Missile",t[t.Cannon=2]="Cannon",t[t.Mower=3]="Mower",t[t.Bomb=4]="Bomb",t[t.NuclearBomb=5]="NuclearBomb",t[t.LasetBullet=6]="LasetBullet",t[t.Laser=7]="Laser",t[t.Hammer=8]="Hammer",t[t.PopsicleLine=9]="PopsicleLine",t[t.PopsicleBomb=10]="PopsicleBomb",t[t.Animation=11]="Animation",t[t.CollectedEntity=12]="CollectedEntity",t[t.CollectedSupply=13]="CollectedSupply",t[t.MoreStep=14]="MoreStep",t[t.Charger=15]="Charger",t[t.ComboWord=16]="ComboWord",t[t.FireworksMissile=17]="FireworksMissile",t[t.FireworksCannon=18]="FireworksCannon",t[t.Score=19]="Score"})(r=o.FlyerType||(o.FlyerType={}));var u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._flyerType=r.None,e}return n(e,t),e.prototype.getFlyerType=function(){return this._flyerType},e.prototype.getCollectionID=function(){return s.CollectionID.None},e.prototype.launch=function(){},e.prototype.initFlyer=function(e,o){t.prototype.initEntity.call(this,e,c.EntityType.Flyer),this._flyerType=o},e.prototype.getAttackPos=function(t,e){var o=cc.v2(-1,-1),n=l.default.DEFAULT_MISSILE_PRIORITY,i=this.getGrid(),r=[c.EntityType.Parasite,c.EntityType.Item,c.EntityType.Rug,c.EntityType.Floor,c.EntityType.Popsicle,c.EntityType.Cell],s=i.getCellsMap(),u=[],y=i.getAttackedPosition();for(var h in s){var m=s[h].getLogicalPos();-1==a.default.indexOf(y,m)&&u.push(m)}a.default.shuffleArray(u);for(var f=0,d=u;f<d.length;f++){m=d[f];if(-1==a.default.indexOf(y,m)){for(var _=l.default.DEFAULT_MISSILE_PRIORITY,g=!1,I=0,C=r;I<C.length;I++){var P=C[I],D=i.getEntity(P,m);if(D){if(P==c.EntityType.Parasite||P==c.EntityType.Item?D.canExcuteCommand(p.default.BombClean(this.getLogicalPos(),t,e))&&(g=!0):g=!0,!g)break;var v=D.getButterflyPriority(t,e);v<_&&(_=v)}}g&&_<n&&(n=_,o=m)}}if(o.equals(cc.v2(-1,-1)))if(u.length>0)o=u[a.default.randomInt(0,u.length-1)];else for(;;){var b=a.default.randomInt(0,i.getGridSize().width-1),E=a.default.randomInt(0,i.getGridSize().height-1);m=cc.v2(b,E);if(i.getCellAtLogicalPos(m)){o=m;break}}return o},e=i([y],e)}(l.default));o.default=h,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityBase":"EntityBase"}],FlyerBomb:[function(t,e,o){"use strict";cc._RF.push(e,"b5e89npFaFGwZn7qQrZFl3O","FlyerBomb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../../../extend/utils/GameMath"),s=t("../../commond/GridCommand"),c=t("../../defines/EntityID"),l=t("../../defines/IdentifierManager"),p=t("../EntityPrefabNodePool"),u=t("./FlyerBase"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FLYER_BOMB_DURATION=.2,e._launched=!1,e._bombDuration=0,e._lastBombRingIndex=0,e._canLayoutGrass=!1,e._origin=cc.Vec2.ZERO,e._radius=0,e}return n(e,t),e.prototype.getCanLayoutGrass=function(){return this._canLayoutGrass},e.prototype.setCanLayoutGrass=function(t){this._canLayoutGrass=t},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getRadius=function(){return this._radius},e.prototype.setRadius=function(t){this._radius=t},e.prototype.getEntityID=function(){var t=c.EntityID.FlyerBombWhite;switch(this.getEntityColor()){case c.EntityColor.Red:t=c.EntityID.FlyerBombRed;break;case c.EntityColor.Green:t=c.EntityID.FlyerBombGreen;break;case c.EntityColor.Blue:t=c.EntityID.FlyerBombBlue;break;case c.EntityColor.Yellow:t=c.EntityID.FlyerBombYellow;break;case c.EntityColor.Orange:t=c.EntityID.FlyerBombOrange;break;case c.EntityColor.Purple:t=c.EntityID.FlyerBombPurple}return t},e.prototype.launch=function(){var t=this;if(!this._launched){for(var e=0,o=a.default.enumerateRingPos(this._origin,0,this._radius);e<o.length;e++){var n=o[e];this.getGrid().recordAttackedPosition(n)}this._launched=!0,r.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_bomb")),this._bombDuration=0,this._lastBombRingIndex=-1,this._launched=!0,this.getGrid().addObstructs(this);var i=this.playAnimation("default");if(i){var s=cc.sequence(cc.delayTime(i.duration),cc.callFunc(function(){t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(s)}}},e.prototype.update=function(t){if(0!=this._launched){t*=cc.director.getScheduler().getTimeScale(),this._bombDuration+=t;var e=Math.min(this._radius,Math.floor(this._radius*this._bombDuration/this.FLYER_BOMB_DURATION));if(e>this._lastBombRingIndex){for(var o=a.default.enumerateRingPos(this._origin,this._lastBombRingIndex+1,e),n=this.getGrid(),i=0,r=o;i<r.length;i++){var c=r[i];n.dispatchCommand(c,s.default.BombClean(this._origin,this.getEntityColor(),this.getCanLayoutGrass()),0),n.highlightedCell(c)}this._lastBombRingIndex=e,this._lastBombRingIndex>=this._radius&&n.removeObstructs(this)}}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null},e.create=function(t,e,o,n,i){var r="match_scene/prefab/entity/flyer/FlyerBomb";switch(e){case c.EntityColor.Red:r+="Red";break;case c.EntityColor.Green:r+="Green";break;case c.EntityColor.Blue:r+="Blue";break;case c.EntityColor.Yellow:r+="Yellow";break;case c.EntityColor.Orange:r+="Orange";break;case c.EntityColor.Purple:r+="Purple";break;case c.EntityColor.None:r+="White"}var a=r,s=p.default.getInstance().getPrefabNodeWithFileNameAndClassName(a,"FlyerBomb");return s?(s.init(t,e,o,n,i),s):null},e.prototype.init=function(e,o,n,i,r){t.prototype.initFlyer.call(this,e,u.FlyerType.Bomb),this.setEntityColor(o),this.setCanLayoutGrass(n),this.setOrigin(i),this.setRadius(r),this.FLYER_BOMB_DURATION=.2,this._launched=!1,this._bombDuration=0,this._lastBombRingIndex=0},e=i([h],e)}(u.default));o.default=m,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerBullet:[function(t,e,o){"use strict";cc._RF.push(e,"a50f3jyIYZIQJjeDurF/Hmm","FlyerBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../../../extend/utils/GameMath"),s=t("../../commond/GridCommand"),c=t("../../defines/EntityID"),l=t("../../defines/IdentifierManager"),p=t("../EntityPrefabNodePool"),u=t("../item/color/bomb/ItemBombBase"),y=t("../item/ItemFactory"),h=t("./FlyerBase"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._duration=0,e._startPos=cc.Vec2.ZERO,e._targetPos=cc.Vec2.ZERO,e._bombType=u.ItemBombType.None,e._launched=!1,e}return n(e,t),e.prototype.getEntityID=function(){return c.EntityID.FlyerLaserBullet},e.prototype.launch=function(){var t=this;if(!this._launched){this._launched=!0,this._bombType!=u.ItemBombType.None?r.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_color")):r.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_colorline"));var e=this.getGrid(),o=(this.getPixelPos(this._startPos),e.getPixelPosFromLogicalPos(this._targetPos));this.setPixelPos(this._startPos),this.node.scale=.25;var n=cc.spawn(cc.moveTo(this._duration,o).easing(cc.easeInOut(2)),cc.scaleTo(this._duration,1)),i=cc.callFunc(function(){if(t._bombType!=u.ItemBombType.None){e.highlightedCell(t._targetPos);var o=e.getItemAtLogicalPos(t._targetPos);if(o&&o.canUpgradeByRainbow()){var n=t._bombType;t._bombType!=u.ItemBombType.Row&&t._bombType!=u.ItemBombType.Column||(n=a.default.randomInt(0,100)<50?u.ItemBombType.Row:u.ItemBombType.Column);var i=y.default.generateEffectBombItem(e,n,t.getEntityColor());i&&e.dispatchCommand(t._targetPos,s.default.Change(i.getEntityID(),!0),0)}}e.removeObstructs(t),t.destoryWithRecycle(!0)});this.runAction(cc.sequence(n,i))}},e.create=function(t,e,o,n,i,r,a){var s=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerBullet","FlyerBullet");return s?(s.init(t,e,o,n,i,r,a),s):null},e.prototype.init=function(e,o,n,i,r,a,s){t.prototype.initFlyer.call(this,e,h.FlyerType.LasetBullet),this.setEntityColor(r),this._duration=o,this._startPos=n,this._targetPos=i,this._bombType=a,this._launched=!1},e=i([f],e)}(h.default));o.default=d,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","../item/ItemFactory":"ItemFactory","../item/color/bomb/ItemBombBase":"ItemBombBase","./FlyerBase":"FlyerBase"}],FlyerCannon:[function(t,e,o){"use strict";cc._RF.push(e,"ed22f2oJ+JNrqZht0pA5g8R","FlyerCannon");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../extend/utils/GameMath"),a=t("../../commond/GridCommand"),s=t("../../defines/EntityID"),c=t("../EntityPrefabNodePool"),l=t("./FlyerAnimation"),p=t("./FlyerBase"),u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitOrigin=!1,e._launched=!1,e._aliveArea=cc.rect(0,0,0,0),e._speed=0,e._lastCellPostion=cc.v2(-1,-1),e._startFly=!1,e._layoutGrass=!1,e._origin=cc.Vec2.ZERO,e._direction=cc.Vec2.ZERO,e}var o;return n(e,t),o=e,e.prototype.getEntityID=function(){var t=s.EntityID.FlyerCannonWhite;switch(this.getEntityColor()){case s.EntityColor.None:t=s.EntityID.FlyerCannonWhite;break;case s.EntityColor.Red:t=s.EntityID.FlyerCannonRed;break;case s.EntityColor.Green:t=s.EntityID.FlyerCannonGreen;break;case s.EntityColor.Blue:t=s.EntityID.FlyerCannonBlue;break;case s.EntityColor.Yellow:t=s.EntityID.FlyerCannonYellow;break;case s.EntityColor.Orange:t=s.EntityID.FlyerCannonOrange;break;case s.EntityColor.Purple:t=s.EntityID.FlyerCannonPurple}return t},e.prototype.getLayoutGrass=function(){return this._layoutGrass},e.prototype.setLayourGrass=function(t){this._layoutGrass=t},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getDirection=function(){return this._direction},e.prototype.setDirection=function(t){this._direction=t;var e=r.default.getAngle(cc.Vec2.ZERO,t);this._puppet.angle=-e},e.prototype.launch=function(){var t=this;if(!this._launched){for(var e=this._origin.clone(),n=this.getGrid(),i=cc.rect(0,0,n.getGridSize().width,n.getGridSize().height);r.default.rectContainsPoint(i,e);)n.recordAttackedPosition(e.clone()),e.addSelf(this._direction);this._launched=!0,this.setOrigin(this.getOrigin()),this._lastCellPostion=this._origin,this._hitOrigin&&(this._lastCellPostion=this._lastCellPostion.sub(this._direction)),this._launched=!0,this._speed=o.FLYER_CANNON_START_SPEED,n.addObstructs(this);var a=this.playAnimation("default");if(a){var s=cc.sequence(cc.delayTime(a.duration),cc.callFunc(function(){t._startFly=!0}));this.runAction(s)}else this._startFly=!0}},e.prototype.update=function(t){if(0!=this._launched&&0!=this._startFly){t*=cc.director.getScheduler().getTimeScale();var e=this.getGrid();this._speed=r.default.clamp(this._speed+o.FLYER_CANNON_ACCELERATION*t,o.FLYER_CANNON_MIN_SPEED,o.FLYER_CANNON_MAX_SPEED);var n=this.node.getPosition().add(this._direction.normalize().mul(this._speed).mul(t));this.node.setPosition(n);var i=e.getLogicalPosFromPixelPos(n);if(!i.equals(this._lastCellPostion)){for(var s=i.sub(this._lastCellPostion).mag()/this._direction.mag(),c=0;c<s;c++){var p=this._lastCellPostion.add(this._direction.mul(c+1)),u=!1,y=e.getItemAtLogicalPos(p);if(y&&y.canBlockBombRay()&&(u=!0),e.getCellAtLogicalPos(p)&&(e.dispatchCommand(p,a.default.BombClean(this.getOrigin(),this.getEntityColor(),this._layoutGrass),0),e.highlightedCell(p)),u){var h=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.Bomb1x1);e.setFlyerAtLogicalPos(h,p),e.removeObstructs(this),this.destoryWithRecycle(!0)}if(e.isGrassFloorAtLogicalPos(p)){var m=e.getItemAtLogicalPos(p);m?m.canMatch()&&m.canSwap()&&m.canLayoutGrass()&&(this._layoutGrass=!0):this._layoutGrass=!0}}this._lastCellPostion=i}r.default.rectContainsPoint(this._aliveArea,this.node.getPosition())||(e.removeObstructs(this),this.destoryWithRecycle(!1))}},e.create=function(t,e,o,n,i,r){var a="match_scene/prefab/entity/flyer/FlyerCannon";switch(e){case s.EntityColor.Red:a+="Red";break;case s.EntityColor.Green:a+="Green";break;case s.EntityColor.Blue:a+="Blue";break;case s.EntityColor.Yellow:a+="Yellow";break;case s.EntityColor.Orange:a+="Orange";break;case s.EntityColor.Purple:a+="Purple";break;case s.EntityColor.None:a+="White"}var l=a,p=c.default.getInstance().getPrefabNodeWithFileNameAndClassName(l,"FlyerCannon");return p?(p.init(t,e,o,n,i,r),p):null},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._aliveArea=null,this._lastCellPostion=null},e.prototype.init=function(e,o,n,i,r,a){t.prototype.initFlyer.call(this,e,p.FlyerType.Cannon),this.setEntityColor(o),this.setLayourGrass(n),this.setOrigin(i),this.setDirection(r),this._speed=0,this._lastCellPostion=cc.v2(-1,-1),this._hitOrigin=a,this._launched=!1,this._startFly=!1,this._aliveArea=cc.rect(-2e3,-2e3,4e3,4e3)},e.FLYER_CANNON_MIN_SPEED=500,e.FLYER_CANNON_MAX_SPEED=5e3,e.FLYER_CANNON_START_SPEED=500,e.FLYER_CANNON_ACCELERATION=5e3,e.FLYER_CANNON_TAIL_FADE_DURATION=.4,e=o=i([y],e)}(p.default));o.default=h,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerAnimation":"FlyerAnimation","./FlyerBase":"FlyerBase"}],FlyerChargeEntity:[function(t,e,o){"use strict";cc._RF.push(e,"0990dLX67ZOTKPKYsRPAzLM","FlyerChargeEntity");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../component/UISpriteExt"),a=t("../../../../extend/action/CurveToAction"),s=t("../../commond/GridCommand"),c=t("../../defines/CollectionID"),l=t("../../defines/EntityID"),p=t("../../defines/IdentifierManager"),u=t("../EntityPrefabNodePool"),y=t("./FlyerBase"),h=t("../../../../extend/utils/GameMath"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._collectionID=c.CollectionID.None,e._origin=cc.Vec2.ZERO,e._targetPos=cc.Vec2.ZERO,e}return n(e,t),e.create=function(t,e,o,n){var i=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerChargeEntity","FlyerChargeEntity");return i?(i.init(t,e,o,n),i):null},e.prototype.init=function(e,o,n,i){t.prototype.initFlyer.call(this,e,y.FlyerType.Charger),this.setOrigin(n),this.setTargetPos(i),this._collectionID=o,this.updatePuppet()},e.prototype.updatePuppet=function(){var t=p.default.getInstance().getFrameNameFromCollectionID(this._collectionID),e=this._puppet.getComponent(r.default);e&&(e.src=t)},e.prototype.getCollectionID=function(){return c.CollectionID.None},e.prototype.getEntityID=function(){return l.EntityID.FlyerChargeEntity},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getTargetPos=function(){return this._targetPos},e.prototype.setTargetPos=function(t){this._targetPos=t},e.prototype.launch=function(){var t=this,e=this.getGrid().getPixelPosFromLogicalPos(this._origin),o=this.getGrid().getPixelPosFromLogicalPos(this._targetPos),n=h.default.getDistance(e,o)/600;this.node.setPosition(e),this.getGrid().addObstructs(this);var i=cc.spawn(a.default.create(n,e,o).easing(cc.easeOut(2)),cc.scaleTo(n,.35)),r=cc.callFunc(function(){t.getGrid().dispatchCommand(t._targetPos,s.default.Charge(t._collectionID,1),0),t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}),c=cc.sequence(i,r);this.node.runAction(c)},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null,this._targetPos=null},e=i([f],e)}(y.default));o.default=d,cc._RF.pop()},{"../../../../component/UISpriteExt":"UISpriteExt","../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerCollectedEntity:[function(t,e,o){"use strict";cc._RF.push(e,"bbd07p2JUZPAZ1jZwx9rT6I","FlyerCollectedEntity");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../component/UISpriteExt"),a=t("../../../../extend/action/CurveToAction"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../../defines/IdentifierManager"),p=t("../EntityPrefabNodePool"),u=t("./FlyerBase"),y=t("../../../../extend/utils/GameMath"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._collectionID=s.CollectionID.None,e._delta=0,e._origin=cc.Vec2.ZERO,e}return n(e,t),e.create=function(t,e,o,n){var i=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerCollectedEntity","FlyerCollectedEntity");return i?(i.init(t,e,o,n),i):null},e.prototype.init=function(e,o,n,i){t.prototype.initFlyer.call(this,e,u.FlyerType.CollectedEntity),this.setOrigin(i),this._collectionID=o,this._delta=n,this.updatePuppet()},e.prototype.updatePuppet=function(){var t=l.default.getInstance().getFrameNameFromCollectionID(this._collectionID),e=this._puppet.getComponent(r.default);e&&(e.src=t)},e.prototype.getCollectionID=function(){return s.CollectionID.None},e.prototype.getEntityID=function(){return c.EntityID.FlyerCollectedEntity},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.launch=function(){var t=this,e=this.getGrid().getPixelPosFromLogicalPos(this._origin),o=this.getGrid().getWorldPosForTarget(this._collectionID),n=this.getGrid().node.convertToNodeSpaceAR(o),i=y.default.getDistance(e,n)/1e3;this.node.setPosition(e);var r=cc.spawn(a.default.create(i,e,n),cc.scaleTo(i,.75)),s=cc.callFunc(function(){t.getGrid().updateTargetBarUIWithDelta(t._collectionID,t._delta),t.destoryWithRecycle(!0)}),c=cc.sequence(r,s);this.node.runAction(c)},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null},e=i([m],e)}(u.default));o.default=f,cc._RF.pop()},{"../../../../component/UISpriteExt":"UISpriteExt","../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerCollectedSupply:[function(t,e,o){"use strict";cc._RF.push(e,"9db28Q4LD9KUI+O1/xnCPuZ","FlyerCollectedSupply");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../../../define/GameCurrencyType"),s=t("../../../../extend/utils/GameMath"),c=t("../../defines/CollectionID"),l=t("../../defines/EntityID"),p=t("../../defines/IdentifierManager"),u=t("../EntityPrefabNodePool"),y=t("./FlyerBase"),h=t("../../../../extend/action/CurveToAction"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._itemID=a.GameCurrencyType.NoneType,e._delay=0,e._itemAmount=0,e._origin=cc.Vec2.ZERO,e}return n(e,t),e.prototype.getItemID=function(){return this._itemID},e.prototype.setItemID=function(t){this._itemID=t,this.updatePuppet()},e.prototype.getAmount=function(){return this._itemAmount},e.prototype.setAmount=function(t){this._itemAmount=t},e.create=function(t,e,o,n,i){void 0===i&&(i=0);var r=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerCollectedSupply","FlyerCollectedSupply");return r?(r.init(t,e,o,n,i),r):null},e.prototype.init=function(e,o,n,i,r){void 0===r&&(r=0),t.prototype.initFlyer.call(this,e,y.FlyerType.CollectedSupply),this.setOrigin(i),this.setAmount(n),this.setItemID(o),this._delay=r},e.prototype.updatePuppet=function(){var t="";switch(this.getItemID()){case a.GameCurrencyType.TrainFood:t="match_scene/texture/entities/flyers/90202";break;case a.GameCurrencyType.TrainSoap:t="match_scene/texture/entities/flyers/90205";break;case a.GameCurrencyType.TrainEyepatch:t="match_scene/texture/entities/flyers/90201";break;case a.GameCurrencyType.TrainHoe:t="match_scene/texture/entities/flyers/90204";break;case a.GameCurrencyType.GoldCoin:t="match_scene/texture/entities/flyers/90203"}this.setPuppetSpriteFrameName(t)},e.prototype.getCollectionID=function(){return c.CollectionID.None},e.prototype.getEntityID=function(){return l.EntityID.FlyerCollectedSupply},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.launch=function(){var t=this,e=this.getGrid().getPixelPosFromLogicalPos(this._origin),o=this.getGrid().getWorldPosForSupply(this._itemID),n=this.getGrid().node.convertToNodeSpaceAR(o),i=s.default.getDistance(e,n),c=750,l=1.25,u=1.5;this._itemID==a.GameCurrencyType.GoldCoin&&(l=1,u=1,c=1100),this.getGrid().addFlyerObstructs(this),this.node.setPosition(e),this.node.setScale(0);var y=[],m=Math.round(.75*this.getGrid().getCellSize().width),f=Math.round(1.5*this.getGrid().getCellSize().width),d=s.default.randomInt(m,f),_=s.default.randomInt(0,360)/180*Math.PI,g=cc.v2(e.x+d*Math.cos(_),e.y+d*Math.sin(_));this._delay>0&&y.push(cc.delayTime(this._delay)),y.push(cc.spawn(cc.scaleTo(.3,l).easing(cc.easeBackOut()),cc.moveTo(.3,g).easing(cc.easeOut(2)))),y.push(cc.delayTime(.1));var I=i/c;y.push(cc.spawn(h.default.create(I,g,n),cc.scaleTo(I,u))),y.push(cc.callFunc(function(){t.getGrid().updateSupplyBarUIWithDelta(t._itemID,t._itemAmount),r.default.playAudio(p.default.getInstance().getMatchAudioFilePath("coincollect")),t.getGrid().removeFlyerObstructs(t),t.destoryWithRecycle(!0)}));var C=cc.sequence(y);this.node.runAction(C)},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null},e=i([f],e)}(y.default));o.default=d,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../define/GameCurrencyType":"GameCurrencyType","../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerComboWord:[function(t,e,o){"use strict";cc._RF.push(e,"dadb601ldxCH71mA/Yhi4jF","FlyerComboWord");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FlyerBase"),a=t("../../defines/EntityID"),s=t("../EntityPrefabNodePool"),c=t("../../../../base/IGame"),l=t("../../defines/IdentifierManager"),p=cc._decorator,u=p.ccclass,y=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._comboCount=0,e._needObstruct=!1,e._autoRemoveOnFinish=!1,e}return n(e,t),e.create=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=!0);var i=s.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerComboWord","FlyerComboWord");return i?(i.init(t,e,o,n),i):null},e.prototype.init=function(e,o,n,i){void 0===n&&(n=!1),t.prototype.initFlyer.call(this,e,r.FlyerType.Animation),this._comboCount=o,this.setAutoRemoveOnFinish(i);var a="texture/match/entities/effects/combo_word/";this._comboCount<4?(a+="fresh",c.default.playAudio(l.default.getInstance().getMatchAudioFilePath("voice_combo1"))):this._comboCount<5?(a+="sweet",c.default.playAudio(l.default.getInstance().getMatchAudioFilePath("voice_combo2"))):this._comboCount<6?(a+="tasty",c.default.playAudio(l.default.getInstance().getMatchAudioFilePath("voice_combo3"))):this._comboCount<8?(a+="fantastic",c.default.playAudio(l.default.getInstance().getMatchAudioFilePath("voice_combo4"))):(a+="incredible",c.default.playAudio(l.default.getInstance().getMatchAudioFilePath("voice_combo5"))),this.setPuppetSpriteFrameName(a),this._needObstruct=n},e.prototype.getAutoRemoveOnFinish=function(){return this._autoRemoveOnFinish},e.prototype.setAutoRemoveOnFinish=function(t){this._autoRemoveOnFinish=t},e.prototype.getEntityID=function(){return a.EntityID.None},e.prototype.launch=function(){var t=this,e=this.getGrid().node.getContentSize();this.node.setPosition(cc.v2(.5*e.width,.5*e.height+60)),this._needObstruct&&this.getGrid().addObstructs(this);var o=this.playAnimation("default");if(this._autoRemoveOnFinish)if(o){var n=cc.sequence(cc.delayTime(o.duration),cc.callFunc(function(){t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(n)}else this.getGrid().removeObstructs(this),this.destoryWithRecycle(!0)},e=i([u],e)}(r.default));o.default=y,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerFireworksMissile:[function(t,e,o){"use strict";cc._RF.push(e,"4cb6btiEwNALoC/zc5vQJ+o","FlyerFireworksMissile");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../../../extend/utils/GameMath"),s=t("../../commond/GridCommand"),c=t("../../defines/EntityID"),l=t("../../defines/IdentifierManager"),p=t("../EntityPrefabNodePool"),u=t("./FlyerBase"),y=t("./FlyerAnimation"),h=t("../EntityBase"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._layoutGrass=!1,e._launched=!1,e._currentMaxCentrifugalForce=0,e._targetPos=cc.v2(0,0),e._targetLogicalPos=cc.v2(0,0),e._velocity=cc.v2(0,0),e}var o;return n(e,t),o=e,e.prototype.setVelocity=function(t){if(this._velocity=t,this._velocity.mag()>1e-6){var e=a.default.getAngle(cc.v2(0,100),this._velocity,cc.v2(0,100),!0);this._puppet.angle=-e}},e.create=function(t,e){var o=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerFireworksMissile","FlyerFireworksMissile");return o?(o.init(t,e),o):null},e.prototype.init=function(e,o){t.prototype.initFlyer.call(this,e,u.FlyerType.FireworksMissile),this._layoutGrass=o,this._launched=!1},e.prototype.getEntityID=function(){return c.EntityID.FlyerFireworks},e.prototype.getAttackPos=function(e,o){var n=cc.v2(-1,-1),i=h.default.DEFAULT_FIREWORKS_ATTACKED_PRIORITY,r=this.getGrid(),l=[c.EntityType.Parasite,c.EntityType.Item,c.EntityType.Rug,c.EntityType.Floor,c.EntityType.Popsicle,c.EntityType.Cell],p=r.getCellsMap(),u=[],y=r.getAttackedPosition();for(var m in p){var f=p[m].getLogicalPos();-1==a.default.indexOf(y,f)&&u.push(f)}a.default.shuffleArray(u);for(var d=0,_=u;d<_.length;d++){f=_[d];if(-1==a.default.indexOf(y,f)){for(var g=h.default.DEFAULT_FIREWORKS_ATTACKED_PRIORITY,I=!1,C=0,P=l;C<P.length;C++){var D=P[C],v=r.getEntity(D,f);if(v){if(D==c.EntityType.Parasite||D==c.EntityType.Item?v.canExcuteCommand(s.default.BombClean(this.getLogicalPos(),e,o))&&(I=!0):I=!0,!I)break;var b=v.getFireWorksAttackedPriority();b<g&&(g=b)}}I&&g<i&&(i=g,n=f)}}return(i>=h.default.DEFAULT_FIREWORKS_ATTACKED_PRIORITY||n.equals(cc.v2(-1,-1)))&&(n=t.prototype.getAttackPos.call(this,e,o)),n},e.prototype.launch=function(){if(!this._launched){this._launched=!0,r.default.playAudio(l.default.getInstance().getMatchAudioFilePath("fireworks"));var t=this.getGrid();this._targetLogicalPos=this.getAttackPos(this.getEntityColor(),this._layoutGrass),this._targetPos=t.getPixelPosFromLogicalPos(this._targetLogicalPos);for(var e=0,n=[cc.v2(0,0),cc.v2(0,1),cc.v2(0,-1),cc.v2(1,0),cc.v2(-1,0)];e<n.length;e++){var i=n[e],a=this._targetLogicalPos.add(i);t.recordAttackedPosition(a)}t.addObstructs(this),this.setVelocity(cc.v2(0,o.maxSpeed)),this._currentMaxCentrifugalForce=o.startCentrifugalForce}},e.prototype.update=function(t){if(0!=this._launched){this._currentMaxCentrifugalForce=Math.min(o.maxCentrifugalForce,(o.maxCentrifugalForce-o.startCentrifugalForce)*t+this._currentMaxCentrifugalForce);var e=this._targetPos.sub(this.node.getPosition()),n=this.getGrid(),i=n.getCellSize();if(e.mag()<.5*i.width){var r=y.default.createAnimationWithType(n,y.FlyerAnimationType.BombCross,!0);n.setFlyerAtLogicalPos(r,this._targetLogicalPos);for(var a=0,l=[cc.v2(0,0),cc.v2(0,1),cc.v2(0,-1),cc.v2(1,0),cc.v2(-1,0)];a<l.length;a++){var p=l[a],u=this._targetLogicalPos.add(p);n.dispatchCommand(u,s.default.BombClean(u,c.EntityColor.None,this._layoutGrass),0),n.highlightedCell(this._targetLogicalPos),n.bombCell(u)}n.removeObstructs(this),this.destoryWithRecycle(!1)}var h=e.normalize().mul(o.maxSpeed).sub(this._velocity).mul(60),m=(this._velocity.x*h.x+this._velocity.y*h.y)/this._velocity.mag(),f=this._velocity.normalize().mul(m),d=h.sub(f);d.mag()>this._currentMaxCentrifugalForce&&(h=h.mul(this._currentMaxCentrifugalForce/d.mag()));var _=h.normalize().mul(Math.min(o.maxForce,h.mag())),g=this._velocity.add(_.mul(t)),I=Math.min(g.mag(),o.maxSpeed);this.setVelocity(g.normalize().mul(I)),this.node.setPosition(this.node.getPosition().add(this._velocity.mul(t)))}},e.maxSpeed=1e3,e.maxForce=5e3,e.maxCentrifugalForce=o.maxForce,e.startCentrifugalForce=800,e=o=i([f],e)}(u.default));o.default=d,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityBase":"EntityBase","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerAnimation":"FlyerAnimation","./FlyerBase":"FlyerBase"}],FlyerHammer:[function(t,e,o){"use strict";cc._RF.push(e,"3a9a3X8hGVHRpC9svntGQs6","FlyerHammer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FlyerBase"),a=t("../../defines/EntityID"),s=t("../../../../base/IGame"),c=t("../../defines/IdentifierManager"),l=t("../../commond/GridCommand"),p=t("../../../../define/GameCurrencyType"),u=t("../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetPos=cc.Vec2.ZERO,e._launched=!1,e}return n(e,t),e.create=function(t,e){var o=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerHammer","FlyerHammer");return o?(o.init(t,e),o):null},e.prototype.init=function(e,o){t.prototype.initFlyer.call(this,e,r.FlyerType.Hammer),this._targetPos=o,this._launched=!1},e.prototype.getEntityID=function(){return a.EntityID.FlyerHammer},e.prototype.launch=function(){var t=this;if(!this._launched){this._launched=!0;var e=this.getGrid().getWorldPosForGear(p.GameCurrencyType.AidHammer),o=this.getGrid().node.convertToNodeSpaceAR(e);this.node.setPosition(o);var n=this.getGrid(),i=n.getPixelPosFromLogicalPos(this._targetPos);n.addObstructs(this);var r=cc.sequence(cc.moveTo(.33,i),cc.callFunc(function(){var e=t.playAnimation("default");if(e){var o=cc.sequence(cc.delayTime(e.duration),cc.callFunc(function(){n.removeObstructs(t),t.destoryWithRecycle(!0)}));t.runAction(o)}else n.removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(r)}},e.prototype.onHitted=function(){s.default.playAudio(c.default.getInstance().getMatchAudioFilePath("prop_hammer")),this.getGrid().dispatchCommand(this._targetPos,l.default.BombClean(this._targetPos,a.EntityColor.None,!1),0)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._targetPos=null},e=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../define/GameCurrencyType":"GameCurrencyType","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerLaser:[function(t,e,o){"use strict";cc._RF.push(e,"94b14HIgQBBu6ACfmoMDclM","FlyerLaser");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../../defines/EntityID"),s=t("../../grid/GridBase"),c=t("../item/color/bomb/ItemBombBase"),l=t("./FlyerBase"),p=t("../../../../extend/utils/GameMath"),u=t("./FlyerBullet"),y=t("../../commond/GridCommand"),h=t("./FlyerAnimation"),m=t("../EntityPrefabNodePool");(function(t){t[t.None=0]="None",t[t.LockTarget=1]="LockTarget",t[t.WaitLastLaser=2]="WaitLastLaser",t[t.DestroyTarget=3]="DestroyTarget"})(r||(r={}));var f=cc._decorator,d=f.ccclass,_=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._marks=[],e._targetPositions=[],e._origin=cc.Vec2.ZERO,e._findTargetInterval=0,e._state=r.None,e._laserColor=a.EntityColor.None,e._laserBombType=c.ItemBombType.None,e._laserLayoutGrass=!1,e._lastLaserDuration=0,e._rainbowItem=null,e._launched=!1,e}return n(e,t),e.prototype._shootOneLaser=function(t){var e=this.getGrid(),o=[],n=e.getItemsMap();for(var i in n){var r=n[i];r.canMatch()&&r.getEntityColor()==this._laserColor&&-1==p.default.indexOf(this._targetPositions,r.getLogicalPos())&&o.push(r.getLogicalPos())}if(o.length<=0)return!1;var a=o[p.default.randomInt(0,o.length-1)];this._targetPositions.push(a);var s=u.default.create(e,t,this._origin,a,this._laserColor,this._laserBombType,this._laserLayoutGrass);e.setFlyerAtLogicalPos(s,a);var c=h.default.createAnimationWithType(e,h.FlyerAnimationType.ItemMarked,!1);e.setFlyerAtLogicalPos(c,a),c.setVisible(!1);var l=cc.sequence(cc.delayTime(t),cc.callFunc(function(){c.setVisible(!0)}));return c.runAction(l),this._marks.push(c),!0},e.prototype.getEntityID=function(){return a.EntityID.FlyerLaser},e.prototype.launch=function(){if(!this._launched){var t=this.getGrid(),e=t.getItemsMap();for(var o in e){var n=e[o];n.canMatch()&&n.getEntityColor()==this._laserColor&&t.recordAttackedPosition(n.getLogicalPos())}this._launched=!0,this._rainbowItem&&(this._rainbowItem.node.setScale(1.2),this._rainbowItem.node.zIndex=s.default.ZORDER_EFFECT,this._rainbowItem.shiftToEffectLayer()),this._state=r.LockTarget,this._lastLaserDuration=.2,this.getGrid().addObstructs(this)}},e.prototype.update=function(t){switch(this._state){case r.LockTarget:var e=p.default.clamp(180+30*this._targetPositions.length,180,3581);if(this._rainbowItem.node.angle+=-e*t,this._findTargetInterval-=t,this._findTargetInterval<=0){var o=p.default.clamp(.5-.03*this._targetPositions.length,.2,.5),n=p.default.clamp(.2-.015*this._targetPositions.length,.05,.2);this._lastLaserDuration=o,this._findTargetInterval=n,this._shootOneLaser(o)||(this._state=r.WaitLastLaser,this._findTargetInterval+=this._lastLaserDuration)}break;case r.WaitLastLaser:e=p.default.clamp(180+30*this._targetPositions.length,180,3581);this._rainbowItem.node.angle+=-e*t,this._findTargetInterval-=t,this._findTargetInterval<=0&&(this._rainbowItem.runAction(cc.rotateBy(1,e).repeatForever()),this._state=r.DestroyTarget);break;case r.DestroyTarget:this._state=r.None;for(var i=this.getGrid(),s=0,c=this._marks;s<c.length;s++){c[s].destoryWithRecycle(!0)}this._marks.length=0,this._rainbowItem.excuteCommand(y.default.SuicideClean(this._origin,a.EntityColor.None,this._laserLayoutGrass));for(var l=0,u=this._targetPositions;l<u.length;l++){var h=u[l];i.dispatchCommand(h,y.default.MatchClean(h,0,this._laserLayoutGrass),0),i.highlightedCell(h),i.bombCell(h)}i.removeObstructs(this),this.destoryWithRecycle(!0)}},e.create=function(t,e,o,n,i,r){var a=m.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerLaser","FlyerLaser");return a?(a.init(t,e,o,n,i,r),a):null},e.prototype.init=function(e,o,n,i,a,s){t.prototype.initFlyer.call(this,e,l.FlyerType.Laser),this._marks.length=0,this._targetPositions.length=0,this._findTargetInterval=0,this._state=r.None,this._lastLaserDuration=0,this._rainbowItem=o,this._origin=n,this._laserColor=i,this._laserBombType=a,this._laserLayoutGrass=s,this._launched=!1},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._marks=null,this._targetPositions=null,this._origin=null,this._rainbowItem=null},e=i([d],e)}(l.default));o.default=_,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../grid/GridBase":"GridBase","../EntityPrefabNodePool":"EntityPrefabNodePool","../item/color/bomb/ItemBombBase":"ItemBombBase","./FlyerAnimation":"FlyerAnimation","./FlyerBase":"FlyerBase","./FlyerBullet":"FlyerBullet"}],FlyerMissile:[function(t,e,o){"use strict";cc._RF.push(e,"badd5GmheBGkIEFeljzviPE","FlyerMissile");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FlyerMissileType=void 0;var r,a=t("../../../../base/IGame"),s=t("../../../../base/Pair"),c=t("../../../../extend/action/OrbitTrack"),l=t("../../../../extend/utils/GameMath"),p=t("../../commond/GridCommand"),u=t("../../defines/EntityID"),y=t("../../defines/IdentifierManager"),h=t("../EntityPrefabNodePool"),m=t("./FlyerBase"),f=t("./FlyerBomb"),d=t("./FlyerCannon"),_=t("../EntityBase");(function(t){t[t.None=0]="None",t[t.Dot=1]="Dot",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Cross=4]="Cross",t[t.Range=5]="Range"})(r=o.FlyerMissileType||(o.FlyerMissileType={}));var g=cc._decorator,I=g.ccclass,C=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._missileType=r.None,e._layoutGrass=!1,e._launched=!1,e}return n(e,t),e.prototype.getEntityID=function(){var t=u.EntityID.None;switch(this.getEntityColor()){case u.EntityColor.Red:t=u.EntityID.FlyerMissileRed;break;case u.EntityColor.Green:t=u.EntityID.FlyerMissileGreen;break;case u.EntityColor.Blue:t=u.EntityID.FlyerMissileBlue;break;case u.EntityColor.Yellow:t=u.EntityID.FlyerMissileYellow;break;case u.EntityColor.Orange:t=u.EntityID.FlyerMissileOrange;break;case u.EntityColor.Purple:t=u.EntityID.FlyerMissilePurple}return t},e.create=function(t,e,o,n){var i="match_scene/prefab/entity/flyer/FlyerMissile";switch(o){case u.EntityColor.Red:i+="Red";break;case u.EntityColor.Green:i+="Green";break;case u.EntityColor.Blue:i+="Blue";break;case u.EntityColor.Yellow:i+="Yellow";break;case u.EntityColor.Orange:i+="Orange";break;case u.EntityColor.Purple:i+="Purple";break;case u.EntityColor.None:i+="White"}var r=i,a=h.default.getInstance().getPrefabNodeWithFileNameAndClassName(r,"FlyerMissile");return a?(a.init(t,e,o,n),a):null},e.prototype.init=function(e,o,n,i){t.prototype.initFlyer.call(this,e,m.FlyerType.Missile),this.setEntityColor(n),this._missileType=o,this._layoutGrass=i,this._launched=!1},e.prototype.getAttackPos=function(e,o){var n=cc.v2(-1,-1),i=_.default.DEFAULT_MISSILE_PRIORITY,r=this.getGrid(),a=[u.EntityType.Item],s=r.getCellsMap(),c=[],y=r.getAttackedPosition();for(var h in s){var m=s[h].getLogicalPos();-1==l.default.indexOf(y,m)&&c.push(m)}l.default.shuffleArray(c);for(var f=0,d=c;f<d.length;f++){m=d[f];if(-1==l.default.indexOf(y,m)){for(var g=_.default.DEFAULT_MISSILE_PRIORITY,I=!1,C=0,P=a;C<P.length;C++){var D=P[C],v=r.getEntity(D,m);if(v){if(D==u.EntityType.Parasite||D==u.EntityType.Item?v.canExcuteCommand(p.default.BombClean(this.getLogicalPos(),e,o))&&(I=!0):I=!0,!I)break;var b=v.getMissileAttackedPriority();b<g&&(g=b)}}I&&g<i&&(i=g,n=m)}}return(i>=_.default.DEFAULT_MISSILE_PRIORITY||n.equals(cc.v2(-1,-1)))&&(n=t.prototype.getAttackPos.call(this,e,o)),n},e.prototype.launch=function(){var t=this;if(!this._launched){this._launched=!0,a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_cube"));var e=this.getGrid(),o=this.getAttackPos(this.getEntityColor(),this._layoutGrass),n=e.getPixelPosFromLogicalPos(o);e.addObstructs(this),this._puppet.angle=-45;var i=e.getCellSize(),u=l.default.randomInt(i.width,1.5*i.width),h=[],m=this.playAnimation("default");m&&h.push(cc.delayTime(m.duration));var _=c.default.createWithSpeed(1100,this.node.getPosition(),n,cc.v2(1,1),u,!0).easing(cc.easeIn(2)),g=cc.sequence(cc.scaleTo(.25*_.getDuration(),1.2).easing(cc.easeIn(2)),cc.delayTime(.5*_.getDuration()),cc.scaleTo(.25*_.getDuration(),1).easing(cc.easeOut(2)));h.push(cc.spawn(_,g));var I=null,C=e.getGridSize();switch(this._missileType){case r.Dot:e.recordAttackedPosition(o),I=cc.callFunc(function(){a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_cube2")),e.dispatchCommand(o,p.default.BombClean(o,t.getEntityColor(),t._layoutGrass),0)});break;case r.Row:for(var P=[new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(-1,0),!1)],D=0,v=P;D<v.length;D++)for(var b=v[D],E=o.clone(),B=b.first,T=cc.rect(0,0,C.width,C.height);l.default.rectContainsPoint(T,E);)e.recordAttackedPosition(E.clone()),E.addSelf(B);I=cc.callFunc(function(){a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_line"));for(var e=t.getGrid(),n=0,i=P;n<i.length;n++){var r=i[n],s=d.default.create(e,t.getEntityColor(),t._layoutGrass,o,r.first,r.second);e.setFlyerAtLogicalPos(s,o)}});break;case r.Column:for(var F=[new s.Pair(cc.v2(0,1),!0),new s.Pair(cc.v2(0,-1),!1)],M=0,G=F;M<G.length;M++)for(b=G[M],E=o.clone(),B=b.first,T=cc.rect(0,0,C.width,C.height);l.default.rectContainsPoint(T,E);)e.recordAttackedPosition(E.clone()),E.addSelf(B);I=cc.callFunc(function(){a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_line"));for(var e=t.getGrid(),n=0,i=F;n<i.length;n++){var r=i[n],s=d.default.create(e,t.getEntityColor(),t._layoutGrass,o,r.first,r.second);e.setFlyerAtLogicalPos(s,o)}});break;case r.Cross:for(var S=[new s.Pair(cc.v2(1,1),!0),new s.Pair(cc.v2(-1,-1),!1),new s.Pair(cc.v2(1,-1),!1),new s.Pair(cc.v2(-1,1),!1)],R=0,w=S;R<w.length;R++)for(b=w[R],E=o.clone(),B=b.first,T=cc.rect(0,0,C.width,C.height);l.default.rectContainsPoint(T,E);)e.recordAttackedPosition(E.clone()),E.addSelf(B);I=cc.callFunc(function(){a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_cross"));for(var e=t.getGrid(),n=0,i=S;n<i.length;n++){var r=i[n],s=d.default.create(e,t.getEntityColor(),t._layoutGrass,o,r.first,r.second);e.setFlyerAtLogicalPos(s,o)}});break;case r.Range:for(var O=0,A=l.default.enumerateRingPos(o,0,2);O<A.length;O++){var N=A[O];this.getGrid().recordAttackedPosition(N)}I=cc.callFunc(function(){a.default.playAudio(y.default.getInstance().getMatchAudioFilePath("eliminate_special_bomb"));var n=f.default.create(e,t.getEntityColor(),t._layoutGrass,o,2);e.setFlyerAtLogicalPos(n,o)})}I&&h.push(I);var L=cc.callFunc(function(){e.highlightedCell(o),e.bombCell(o),e.removeObstructs(t),t.destoryWithRecycle(!1)});h.push(L),this.runAction(cc.sequence(h))}},e=i([I],e)}(m.default));o.default=C,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../base/Pair":"Pair","../../../../extend/action/OrbitTrack":"OrbitTrack","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityBase":"EntityBase","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase","./FlyerBomb":"FlyerBomb","./FlyerCannon":"FlyerCannon"}],FlyerMoreStep:[function(t,e,o){"use strict";cc._RF.push(e,"40513I2751OnJMUUczoreem","FlyerMoreStep");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FlyerBase"),a=t("../EntityPrefabNodePool"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../../../../extend/utils/GameMath"),p=cc._decorator,u=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amountLabel=null,e._extraStep=0,e._origin=cc.Vec2.ZERO,e}return n(e,t),e.create=function(t,e,o){var n=a.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerMoreStep","FlyerMoreStep");return n?(n.init(t,e,o),n):null},e.prototype.init=function(e,o,n){t.prototype.initFlyer.call(this,e,r.FlyerType.MoreStep),this.setOrigin(n),this._extraStep=o,this.amountLabel.string="+"+this._extraStep.toString()},e.prototype.updatePuppet=function(){},e.prototype.getCollectionID=function(){return s.CollectionID.None},e.prototype.getEntityID=function(){return c.EntityID.FlyerMoreStep},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.launch=function(){var t=this,e=this.getGrid().getPixelPosFromLogicalPos(this._origin),o=this.getGrid().getWorldPosForStep(),n=this.getGrid().node.convertToNodeSpaceAR(o),i=l.default.getDistance(e,n)/1e3;this.node.setPosition(e);var r=cc.scaleTo(.3,2).easing(cc.easeBackOut()),a=cc.spawn(cc.moveTo(i,n),cc.scaleTo(i,.75)),s=cc.callFunc(function(){t.getGrid().updateStepBarUIWithDelta(t._extraStep),t.destoryWithRecycle(!0)}),c=cc.sequence(r,a,s);this.node.runAction(c)},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.amountLabel=null,this._origin=null},i([y(cc.Label)],e.prototype,"amountLabel",void 0),e=i([u],e)}(r.default);o.default=h,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerMower:[function(t,e,o){"use strict";cc._RF.push(e,"82042M+oSRGx583C/+LLR8V","FlyerMower");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FlyerMowerDirection=void 0;var r,a=t("./FlyerBase"),s=t("../../defines/EntityID"),c=t("../../../../extend/utils/GameMath"),l=t("../../commond/GridCommand"),p=t("../EntityPrefabNodePool"),u=t("../../defines/IdentifierManager"),y=t("../../../../base/IGame");(function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"})(r=o.FlyerMowerDirection||(o.FlyerMowerDirection={}));var h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._launched=!1,e._aliveArea=cc.rect(0,0,0,0),e._speed=0,e._lastCellPostion=cc.Vec2.ZERO,e._startFly=!1,e._hadPlayMoveAction=!1,e._layoutGrass=!1,e._origin=cc.Vec2.ZERO,e._direction=r.Up,e}var o;return n(e,t),o=e,e.create=function(t,e,o,n){var i=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerMower","FlyerMower");return i?(i.init(t,e,o,n),i):null},e.prototype.init=function(e,o,n,i){t.prototype.initFlyer.call(this,e,a.FlyerType.Mower),this.setLayourGrass(o),this.setOrigin(n),this.setDirection(i),this._speed=0,this._lastCellPostion=cc.v2(-1,-1),this._launched=!1,this._startFly=!1,this._hadPlayMoveAction=!1,this._aliveArea=cc.rect(-2e3,-2e3,4e3,4e3)},e.prototype.getEntityID=function(){return s.EntityID.FlyerMower},e.prototype.getLayoutGrass=function(){return this._layoutGrass},e.prototype.setLayourGrass=function(t){this._layoutGrass=t},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getDirection=function(){return this._direction},e.prototype.setDirection=function(t){this._direction=t;var e=this.getStepDirection(),o=c.default.getAngle(cc.Vec2.ZERO,e);this._puppet.angle=-o},e.prototype.getStepDirection=function(){var t=cc.v2(0,1);switch(this._direction){case r.Up:t=cc.v2(0,1);break;case r.Right:t=cc.v2(1,0);break;case r.Down:t=cc.v2(0,-1);break;case r.Left:t=cc.v2(-1,0)}return t},e.prototype.launch=function(){var t=this;if(!this._launched){y.default.playAudio(u.default.getInstance().getMatchAudioFilePath("mower"));for(var e=this._origin.clone(),n=this.getGrid(),i=cc.rect(0,0,n.getGridSize().width,n.getGridSize().height);c.default.rectContainsPoint(i,e);)n.recordAttackedPosition(e.clone()),e.addSelf(this.getStepDirection());this._launched=!0,this.setOrigin(this.getOrigin()),this._lastCellPostion=this._origin,this._launched=!0,this._speed=o.FLYER_MOWER_START_SPEED,n.addObstructs(this);var r=this.playAnimation("jump");if(r){var a=cc.sequence(cc.delayTime(r.duration),cc.callFunc(function(){t._startFly=!0}));this.runAction(a)}else this._startFly=!0}},e.prototype.update=function(t){if(0!=this._launched&&0!=this._startFly){0==this._hadPlayMoveAction&&(this.playAnimation("move"),this._hadPlayMoveAction=!0),t*=cc.director.getScheduler().getTimeScale();var e=this.getGrid(),n=this.getStepDirection();this._speed=c.default.clamp(this._speed+o.FLYER_MOWER_ACCELERATION*t,o.FLYER_MOWER_MIN_SPEED,o.FLYER_MOWER_MAX_SPEED);var i=this.node.getPosition().add(n.normalize().mul(this._speed).mul(t));this.node.setPosition(i);var r=e.getLogicalPosFromPixelPos(i);if(!r.equals(this._lastCellPostion)){for(var a=r.sub(this._lastCellPostion).mag()/n.mag(),s=0;s<a;s++){var p=this._lastCellPostion.add(n.mul(s+1));if(e.getCellAtLogicalPos(p)&&(e.dispatchCommand(p,l.default.TerminateClean(this.getOrigin(),this.getEntityColor(),this._layoutGrass),0),e.highlightedCell(p)),e.isGrassFloorAtLogicalPos(p)){var u=e.getItemAtLogicalPos(p);u?u.canMatch()&&u.canSwap()&&u.canLayoutGrass()&&(this._layoutGrass=!0):this._layoutGrass=!0}}this._lastCellPostion=r}c.default.rectContainsPoint(this._aliveArea,this.node.getPosition())||(e.removeObstructs(this),this.destoryWithRecycle(!1))}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._aliveArea=null,this._lastCellPostion=null,this._origin=null},e.FLYER_MOWER_MIN_SPEED=500,e.FLYER_MOWER_MAX_SPEED=2e3,e.FLYER_MOWER_START_SPEED=500,e.FLYER_MOWER_ACCELERATION=1e3,e=o=i([m],e)}(a.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerNuclear:[function(t,e,o){"use strict";cc._RF.push(e,"1ecc9gFBUVEuI1nup3K/Svg","FlyerNuclear");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../defines/EntityID"),a=t("../../grid/GridBase"),s=t("./FlyerBase"),c=t("../../../../extend/utils/GameMath"),l=t("../../commond/GridCommand"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FLYER_NUCLEAR_BOMB_DURATION=2,e._shouldLayoutGrass=!1,e._origin=cc.Vec2.ZERO,e._radius=0,e._launched=!1,e._bombDuration=0,e._lastBombRingIndex=0,e}return n(e,t),e.prototype.getShouldLayoutGrass=function(){return this._shouldLayoutGrass},e.prototype.setShouldLayoutGrass=function(t){this._shouldLayoutGrass=t},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getRadius=function(){return this._radius},e.prototype.setRadius=function(t){this._radius=t},e.prototype.getEntityID=function(){return r.EntityID.FlyerNuclear},e.prototype.init=function(e,o,n,i){t.prototype.initFlyer.call(this,e,s.FlyerType.NuclearBomb),this.setRadius(i),this.setOrigin(n),this.setEntityColor(r.EntityColor.None),this.setShouldLayoutGrass(o),this._launched=!1,this._bombDuration=0,this._lastBombRingIndex=0},e.create=function(t,e,o,n){void 0===n&&(n=a.default.MAX_GRID_HEIGHT+a.default.MAX_GRID_WIDTH);var i=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerNuclear","FlyerNuclear");return i?(i.init(t,e,o,n),i):null},e.prototype.launch=function(){var t=this;if(!this._launched){this._launched=!0,p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_special_colorcolor")),this._bombDuration=0,this._lastBombRingIndex=-1;var e=this.getGrid();e.addObstructs(this);for(var o=e.getGridSize(),n=[cc.v2(0,0),cc.v2(o.width-1,0),cc.v2(0,o.height-1),cc.v2(o.width-1,o.height-1)],i=0,r=e.getPixelPosFromLogicalPos(this._origin),a=0,s=n;a<s.length;a++){var l=s[a],y=e.getPixelPosFromLogicalPos(l),h=c.default.getDistanceSQ(r,y);h>i&&(i=h)}var m=Math.min(Math.sqrt(i),1270);this.node.setScale(m/135);var f=this.playAnimation("default");if(f){var d=cc.sequence(cc.delayTime(f.duration),cc.callFunc(function(){t.destoryWithRecycle(!1)}));this.runAction(d)}}},e.prototype.update=function(t){if(0!=this._launched){this._bombDuration+=t;var e=Math.min(this._radius,Math.floor(this._radius*this._bombDuration/this.FLYER_NUCLEAR_BOMB_DURATION));if(e>this._lastBombRingIndex){for(var o=c.default.enumerateRingPos(this._origin,this._lastBombRingIndex+1,e),n=this.getGrid(),i=0,r=o;i<r.length;i++){var a=r[i];n.getCellAtLogicalPos(a)&&(n.dispatchCommand(a,l.default.BombClean(this._origin,this.getEntityColor(),this._shouldLayoutGrass),0),n.highlightedCell(a))}this._lastBombRingIndex=e,this._lastBombRingIndex>=this._radius&&n.removeObstructs(this)}}},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null},e=i([m],e)}(s.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../grid/GridBase":"GridBase","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerPopsicleBomb:[function(t,e,o){"use strict";cc._RF.push(e,"39bf3e83gZCn4yyxz6pnbcD","FlyerPopsicleBomb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FlyerBase"),a=t("../../commond/GridCommand"),s=t("../../defines/EntityID"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FLYER_BOMB_DURATION=.2,e._launched=!1,e._bombDuration=0,e._lastBombRingIndex=0,e._canLayoutGrass=!1,e._origin=cc.Vec2.ZERO,e._bombPositions=[],e}return n(e,t),e.prototype.getCanLayoutGrass=function(){return this._canLayoutGrass},e.prototype.setCanLayoutGrass=function(t){this._canLayoutGrass=t},e.prototype.getOrigin=function(){return this._origin},e.prototype.setOrigin=function(t){this._origin=t},e.prototype.getEntityID=function(){return s.EntityID.FlyerPopsicelBomb},e.prototype.launch=function(){var t=this;if(!this._launched){this._launched=!0,this._bombDuration=0,this._lastBombRingIndex=-1,this._launched=!0,this.getGrid().addObstructs(this);var e=this.playAnimation("default");if(e){var o=cc.sequence(cc.delayTime(e.duration),cc.callFunc(function(){t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(o)}for(var n=this.getGrid(),i=0,r=this._bombPositions;i<r.length;i++){var s=r[i],c=this._origin.add(s);this.getGrid().recordAttackedPosition(c),n.dispatchCommand(c,a.default.BombClean(this._origin,this.getEntityColor(),this._canLayoutGrass),0),n.highlightedCell(c)}}},e.create=function(t,e,o,n,i){var r=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerPopsicleBomb","FlyerPopsicleBomb");return r?(r.init(t,e,o,n,i),r):null},e.prototype.init=function(e,o,n,i,a){t.prototype.initFlyer.call(this,e,r.FlyerType.Bomb),this.setEntityColor(o),this.setCanLayoutGrass(i),this.setOrigin(n),this._bombPositions=a,this._launched=!1,this._bombDuration=0,this._lastBombRingIndex=0},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._origin=null,this._bombPositions=null},e=i([p],e)}(r.default));o.default=u,cc._RF.pop()},{"../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerPopsicleLine:[function(t,e,o){"use strict";cc._RF.push(e,"5cb6aCzFaNPTKjB4+vlsPl7","FlyerPopsicleLine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FlyerCannon"),a=t("../../defines/EntityID"),s=t("./FlyerBase"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getEntityID=function(){return a.EntityID.FlyerPopsicelLine},e.prototype.updatePuppet=function(){},e.create=function(t,e,o,n,i,r){var a=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerPopsicleLine","FlyerPopsicleLine");return a?(a.init(t,e,o,n,i,r),a):null},e.prototype.init=function(e,o,n,i,r,c){t.prototype.initFlyer.call(this,e,s.FlyerType.PopsicleLine),this.setEntityColor(a.EntityColor.None),this.setLayourGrass(n),this.setOrigin(i),this.setDirection(r),this._hitOrigin=c,this._speed=0,this._lastCellPostion=cc.v2(-1,-1),this._aliveArea=cc.rect(-2e3,-2e3,4e3,4e3),this._launched=!1,this._startFly=!1},e=i([p],e)}(r.default));o.default=u,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase","./FlyerCannon":"FlyerCannon"}],FlyerScoreLabel:[function(t,e,o){"use strict";cc._RF.push(e,"ccb9edCnmVAgbDZE56degHG","FlyerScoreLabel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../EntityPrefabNodePool"),a=t("./FlyerBase"),s=t("../../defines/EntityID"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._score=0,e._pixelPos=cc.v2(0,0),e._needObstruct=!1,e._autoRemoveOnFinish=!1,e}return n(e,t),e.create=function(t,e,o,n,i){void 0===n&&(n=!1),void 0===i&&(i=!0);var a=r.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerScoreLabel","FlyerScoreLabel");return a?(a.init(t,e,o,n,i),a):null},e.prototype.init=function(e,o,n,i,r){void 0===i&&(i=!1),t.prototype.initFlyer.call(this,e,a.FlyerType.Score),this._score=n;var s=this._puppet.getComponent(cc.Label);s&&(s.string=this._score.toString()),this._pixelPos=o,this.setAutoRemoveOnFinish(r),this._needObstruct=i},e.prototype.getAutoRemoveOnFinish=function(){return this._autoRemoveOnFinish},e.prototype.setAutoRemoveOnFinish=function(t){this._autoRemoveOnFinish=t},e.prototype.getEntityID=function(){return s.EntityID.None},e.prototype.launch=function(){var t=this;this.node.setPosition(this._pixelPos),this.getGrid().addFlyerObstructs(this);var e=1,o=this.playAnimation("default");o&&(e=o.duration);var n=cc.delayTime(e),i=cc.sequence(n,cc.callFunc(function(){t.getGrid().removeFlyerObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(i)},e=i([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FlyerScore:[function(t,e,o){"use strict";cc._RF.push(e,"950b4EUbeZGdbtKppZaKeb5","FlyerScore");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../EntityPrefabNodePool"),a=t("./FlyerBase"),s=t("../../defines/EntityID"),c=t("../../../../extend/action/CurveToAction"),l=t("../../../../extend/utils/GameMath"),p=cc._decorator,u=p.ccclass,y=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._score=0,e._pixelPos=cc.v2(0,0),e._needObstruct=!1,e._autoRemoveOnFinish=!1,e}return n(e,t),e.create=function(t,e,o,n,i){void 0===n&&(n=!1),void 0===i&&(i=!0);var a=r.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/flyer/FlyerScore","FlyerScore");return a?(a.init(t,e,o,n,i),a):null},e.prototype.init=function(e,o,n,i,r){void 0===i&&(i=!1),t.prototype.initFlyer.call(this,e,a.FlyerType.Score),this._score=n,this._pixelPos=o,this.setAutoRemoveOnFinish(r),this._needObstruct=i},e.prototype.getAutoRemoveOnFinish=function(){return this._autoRemoveOnFinish},e.prototype.setAutoRemoveOnFinish=function(t){this._autoRemoveOnFinish=t},e.prototype.getEntityID=function(){return s.EntityID.None},e.prototype.launch=function(){var t=this;this.getGrid().addFlyerObstructs(this),this.node.setPosition(this._pixelPos);var e=this.getGrid().getWorldPosForScore(),o=this.node.parent.convertToNodeSpaceAR(e),n=this.node.getPosition(),i=l.default.getDistance(n,o)/800,r=cc.spawn(c.default.create(i,n,o),cc.fadeTo(i,92)),a=cc.sequence(r,cc.callFunc(function(){t.getGrid().updateScoreBarUIWithDelta(t._score),t.getGrid().removeFlyerObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(a)},e=i([u],e)}(a.default));o.default=y,cc._RF.pop()},{"../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FlyerBase":"FlyerBase"}],FrameBase:[function(t,e,o){"use strict";cc._RF.push(e,"cc995CYwINLRLzKqQ+127S7","FrameBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../defines/EntityID"),a=t("../cell/CellBase"),s=t("../EntityBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getPositionCode=function(t){var e=[cc.v2(1,0),cc.v2(1,1),cc.v2(0,1),cc.v2(-1,1),cc.v2(-1,0),cc.v2(-1,-1),cc.v2(0,-1),cc.v2(1,-1)],o=this.getGrid().getCellAtLogicalPos(t);if(o&&o.getCellType()!=a.CellType.MovablePlate)return 0;for(var n=0,i=1,r=0,s=e;r<s.length;r++){var c=s[r],l=t.add(c),p=this.getGrid().getCellAtLogicalPos(l);p&&p.getCellType()!=a.CellType.MovablePlate&&(n+=i),i*=2}return n},e.prototype.initFrame=function(e){t.prototype.initEntity.call(this,e,r.EntityType.Frame,1,1)},e=i([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../EntityBase":"EntityBase","../cell/CellBase":"CellBase"}],FrameNormal:[function(t,e,o){"use strict";cc._RF.push(e,"06a86PRHddCb73qvrO4P0O+","FrameNormal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../defines/CollectionID"),a=t("../../defines/EntityID"),s=t("./FrameBase"),c=t("../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getCollectionID=function(){return r.CollectionID.Frame},e.prototype.getEntityID=function(){return a.EntityID.Frame},e.prototype.setLogicalPos=function(e){t.prototype.setLogicalPos.call(this,e);var o=this.getPositionCode(this.getLogicalPos()),n="01101";switch(o){case 128:n="00101";break;case 2:n="00102";break;case 8:n="00103";break;case 32:n="00104";break;case 160:n="00201";break;case 130:n="00202";break;case 10:n="00203";break;case 40:n="00204";break;case 136:n="00205";break;case 34:n="00206";break;case 162:n="00301";break;case 138:n="00302";break;case 42:n="00303";break;case 168:n="00304";break;case 170:n="00401";break;case 64:case 96:case 192:case 224:n="00501";break;case 1:case 3:case 129:case 131:n="00502";break;case 4:case 6:case 12:case 14:n="00503";break;case 16:case 24:case 56:case 48:n="00504";break;case 66:case 98:case 194:case 226:n="00601";break;case 72:case 104:case 200:case 232:n="00602";break;case 9:case 11:case 137:case 139:n="00603";break;case 33:case 35:case 161:case 163:n="00604";break;case 36:case 38:case 44:case 46:n="00605";break;case 132:case 134:case 140:case 142:n="00606";break;case 144:case 152:case 176:case 184:n="00607";break;case 18:case 26:case 50:case 58:n="00608";break;case 74:case 106:case 202:case 234:n="00701";break;case 41:case 43:case 169:case 171:n="00702";break;case 164:case 166:case 172:case 174:n="00703";break;case 146:case 154:case 178:case 186:n="00704";break;case 65:case 67:case 97:case 99:case 193:case 195:case 225:case 227:n="00801";break;case 5:case 7:case 13:case 15:case 133:case 135:case 141:case 143:n="00802";break;case 20:case 22:case 28:case 30:case 52:case 54:case 60:case 62:n="00803";break;case 80:case 88:case 112:case 120:case 208:case 216:case 240:case 248:n="00804";break;case 68:case 70:case 76:case 78:case 100:case 102:case 108:case 110:case 196:case 198:case 204:case 206:case 228:case 230:case 236:case 238:n="00805";break;case 17:case 19:case 25:case 27:case 49:case 51:case 57:case 59:case 145:case 147:case 153:case 155:case 177:case 179:case 185:case 187:n="00806";break;case 73:case 75:case 105:case 107:case 201:case 203:case 233:case 235:n="00901";break;case 37:case 39:case 45:case 47:case 165:case 167:case 173:case 175:n="00902";break;case 148:case 150:case 156:case 158:case 180:case 182:case 188:case 190:n="00903";break;case 82:case 90:case 114:case 122:case 210:case 218:case 242:case 250:n="00904";break;case 69:case 71:case 77:case 79:case 101:case 103:case 109:case 111:case 197:case 199:case 205:case 207:case 229:case 231:case 237:case 239:n="01001";break;case 21:case 23:case 29:case 31:case 53:case 55:case 61:case 63:case 149:case 151:case 157:case 159:case 181:case 183:case 189:case 191:n="01002";break;case 84:case 86:case 92:case 94:case 116:case 118:case 124:case 126:case 212:case 214:case 220:case 222:case 244:case 246:case 252:case 254:n="01003";break;case 81:case 83:case 89:case 91:case 113:case 115:case 121:case 123:case 209:case 211:case 217:case 219:case 241:case 243:case 249:case 251:n="01004";break;case 85:case 87:case 93:case 95:case 117:case 119:case 125:case 127:case 213:case 215:case 221:case 223:case 245:case 247:case 253:case 255:n="01101"}n="match_scene/texture/entities/frames/"+n,this.setPuppetSpriteFrameName(n),this.setVisible(0!=o)},e.create=function(t){var e=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/frame/FrameNormal","FrameNormal");return e?(e.init(t),e):null},e.prototype.init=function(e){t.prototype.initFrame.call(this,e)},e=i([p],e)}(s.default));o.default=u,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityPrefabNodePool":"EntityPrefabNodePool","./FrameBase":"FrameBase"}],GameConfig:[function(t,e,o){"use strict";var n;cc._RF.push(e,"67ba4c5uy9PiYGFYEH+KkdI","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.DebugMatchType=void 0,function(t){t[t.None=0]="None",t[t.Order=1]="Order",t[t.Grass=2]="Grass",t[t.Popsicle=3]="Popsicle",t[t.Path=4]="Path"}(n=o.DebugMatchType||(o.DebugMatchType={}));var i=function(){function t(){}return Object.defineProperty(t,"LoginSdk",{get:function(){return window.hasOwnProperty("wx")?2:1},enumerable:!1,configurable:!0}),t.IsDebug=!1,t.IsPublishForPlanners=!1,t.GameVer=0xf29635eb68,t.IsVerify=!1,t.EnableAutoPilot=!1,t.DebugMatchType=n.None,t.LANGUAGE="cn",t.LoginModel=5,t.ConfigDir="",t.OnStage=!0,t.DigRedPacket=!0,t.Platform={1:{HttpSerever:"http://192.168.1.124:6001/Platform101/server/getserver.php",UserFrom:"99001",PlatformId:"99",Channel:"9901",ConfigUrl:"",LoginVersion:5114},2:{HttpSerever:"https://lbvip1.bcpgame.com:3155/ttptp/server/getserver.php",UserFrom:"10191001",PlatformId:"10191",Channel:"1019101",ConfigUrl:"{s0}.zip",LoginVersion:5114}},t.shareImgDomain="https://respet.bcpgame.com/petgame/share",t.giftImgDomain="https://respet.bcpgame.com/petgame/source/gift",t.PayEnv=0,t.OfferId="1450017098",t.ZoneId=1,t}();o.default=i,cc._RF.pop()},{}],GameCongratulationPanel:[function(t,e,o){"use strict";cc._RF.push(e,"6cd46dy3vxPHo9chPdgluU9","GameCongratulationPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../defines/IdentifierManager"),s=t("../../GameSceneBase"),c=t("./GameResultBasePanel"),l=t("../../../../define/GameConfig"),p=cc._decorator,u=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardButtonLabel=null,e.cancelButtonLable=null,e.giveUpButton=null,e.terminateButton=null,e._rewardType=s.MatchGameEndRewardType.Normal,e}return n(e,t),e.prototype.sendMarkID=function(){this._gameScene.reportStepCongratulation()},e.prototype.playSoundEffect=function(){r.default.stopBGM(),r.default.playAudio(a.default.getInstance().getMatchAudioFilePath("levelcomplete")),r.default.playAudio(a.default.getInstance().getMatchAudioFilePath("voice_level_complete2"))},e.prototype.getExtraRewardType=function(){var t=c.GameEndExtraRewardType.None,e=this._gameScene.getEndUIData();return e&&(t=e.succeedRewardType),l.default.IsVerify&&(t=c.GameEndExtraRewardType.None),t},e.prototype.initSupplyItem=function(){var e=this.getExtraRewardType();switch(this._rewardType=s.MatchGameEndRewardType.Normal,e){case c.GameEndExtraRewardType.ShareForReward:this._rewardType=s.MatchGameEndRewardType.None}t.prototype.initSupplyItem.call(this)},e.prototype.initButtons=function(){t.prototype.initButtons.call(this),this.giveUpButton.on("touchend",this.onCancelButtonClicked,this),this.terminateButton.on("touchend",this.onTerminateButtonClicked,this),this.terminateButton.active=this._gameScene.getLevel()>=5,this.rewardButton.active=!1,this.giveUpButton.active=!1},e.prototype.onConfirmButtonClicked=function(t){this.reportResult(s.MatchGameEndType.Complete,this._rewardType,!1)},e.prototype.onCancelButtonClicked=function(t){this.reportResult(s.MatchGameEndType.Complete,this._rewardType,!1)},e.prototype.onTerminateButtonClicked=function(t){this.reportResult(s.MatchGameEndType.Complete,this._rewardType,!1)},e.prototype.onReportResultRespone=function(e){switch(console.log("GameCongratulationPanel.onReportResultRespone"),t.prototype.onReportResultRespone.call(this,e),this.terminateButton.active=!1,this._rewardType){case s.MatchGameEndRewardType.None:this.onRewardFlyToBackpackComplete();break;case s.MatchGameEndRewardType.Normal:case s.MatchGameEndRewardType.Doubled:this.rewardFlyToBackpack()}},e.prototype.rewardFlyToBackpack=function(){t.prototype.rewardFlyToBackpack.call(this),this.giveUpButton.active=!1},e.prototype.onRewardFlyToBackpackComplete=function(){},i([y(cc.Label)],e.prototype,"rewardButtonLabel",void 0),i([y(cc.Label)],e.prototype,"cancelButtonLable",void 0),i([y(cc.Node)],e.prototype,"giveUpButton",void 0),i([y(cc.Node)],e.prototype,"terminateButton",void 0),e=i([u],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../define/GameConfig":"GameConfig","../../GameSceneBase":"GameSceneBase","../../defines/IdentifierManager":"IdentifierManager","./GameResultBasePanel":"GameResultBasePanel"}],GameCurrencyType:[function(t,e,o){"use strict";cc._RF.push(e,"9af2dB9R/NEJYu79T1rK1XT","GameCurrencyType"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameCurrencyType=void 0,function(t){t[t.NoneType=-2]="NoneType",t[t.NeedUseDiamond=-1]="NeedUseDiamond",t[t.NeedBuyDiamond=0]="NeedBuyDiamond",t[t.CurrencyBegin=1]="CurrencyBegin",t[t.DiamondCoin=1]="DiamondCoin",t[t.StarCoin=2]="StarCoin",t[t.GoldCoin=3]="GoldCoin",t[t.LifeHeart=4]="LifeHeart",t[t.VirtualCoin=5]="VirtualCoin",t[t.RedPacket=7]="RedPacket",t[t.CurrencyEnd=7]="CurrencyEnd",t[t.ExtraStep5=10010]="ExtraStep5",t[t.ExtraStep1=10011]="ExtraStep1",t[t.ExtraStep3=10012]="ExtraStep3",t[t.ExtraStep2=10013]="ExtraStep2",t[t.BeginLine=10020]="BeginLine",t[t.BeginRange=10030]="BeginRange",t[t.BeginRainbow=10040]="BeginRainbow",t[t.TimeLimitedBeginLine=10021]="TimeLimitedBeginLine",t[t.TimeLimitedBeginRange=10031]="TimeLimitedBeginRange",t[t.TimeLimitedBeginRainbow=10041]="TimeLimitedBeginRainbow",t[t.InfiniteBeginLine=10022]="InfiniteBeginLine",t[t.InfiniteBeginRange=10032]="InfiniteBeginRange",t[t.InfiniteBeginRainbow=10042]="InfiniteBeginRainbow",t[t.OneRoundBeginLine=10023]="OneRoundBeginLine",t[t.OneRoundBeginRange=10033]="OneRoundBeginRange",t[t.OneRoundBeginRainbow=10043]="OneRoundBeginRainbow",t[t.LuckyWheelRow=13020]="LuckyWheelRow",t[t.LuckyWheelColumn=13030]="LuckyWheelColumn",t[t.LuckyWheelCross=13040]="LuckyWheelCross",t[t.LuckyWheelRange=13050]="LuckyWheelRange",t[t.LuckyWheelMissile_Row=13060]="LuckyWheelMissile_Row",t[t.LuckyWheelMissile_Column=13070]="LuckyWheelMissile_Column",t[t.LuckyWheelMissile_Cross=13080]="LuckyWheelMissile_Cross",t[t.LuckyWheelMissile_Range=13090]="LuckyWheelMissile_Range",t[t.LuckyWheelRow_Cross=13100]="LuckyWheelRow_Cross",t[t.LuckyWheelColumn_Cross=13110]="LuckyWheelColumn_Cross",t[t.LuckyWheelRow_Range=13120]="LuckyWheelRow_Range",t[t.LuckyWheelColumn_Range=13130]="LuckyWheelColumn_Range",t[t.LuckyWheelMissile_Row_Column=13140]="LuckyWheelMissile_Row_Column",t[t.LuckyWheelMissile_Rainbow=13150]="LuckyWheelMissile_Rainbow",t[t.LuckyWheelMissile_Row_Cross=13160]="LuckyWheelMissile_Row_Cross",t[t.LuckyWheelMissile_Column_Range=13170]="LuckyWheelMissile_Column_Range",t[t.AidHammer=10050]="AidHammer",t[t.AidBomb=10060]="AidBomb",t[t.AidSwap=10070]="AidSwap",t[t.TimeLimitedAidHammer=10051]="TimeLimitedAidHammer",t[t.TimeLimitedAidBomb=10061]="TimeLimitedAidBomb",t[t.TimeLimitedAidSwap=10071]="TimeLimitedAidSwap",t[t.LifeAddOnePoint=10080]="LifeAddOnePoint",t[t.LifeEverOneHour=10090]="LifeEverOneHour",t[t.LifeEverTwoHour=10100]="LifeEverTwoHour",t[t.TrainFood=10110]="TrainFood",t[t.TrainSoap=10120]="TrainSoap",t[t.TrainEyepatch=10130]="TrainEyepatch",t[t.TrainHoe=10140]="TrainHoe",t[t.AddSpeed=10150]="AddSpeed",t[t.PetKeJi=20010]="PetKeJi"}(o.GameCurrencyType||(o.GameCurrencyType={})),cc._RF.pop()},{}],GameEndItem:[function(t,e,o){"use strict";cc._RF.push(e,"95fb2vG6YRJSLTjcxOHgRly","GameEndItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../define/GameCurrencyType"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLabel=null,e.numLabel=null,e.ico=null,e._itemID=r.GameCurrencyType.NoneType,e}return n(e,t),e.prototype.getItemID=function(){return this._itemID},e.prototype.setItemID=function(t){this._itemID=t},e.prototype.start=function(){},e.prototype.onDestroy=function(){},i([c(cc.Label)],e.prototype,"nameLabel",void 0),i([c(cc.Label)],e.prototype,"numLabel",void 0),i([c(cc.Sprite)],e.prototype,"ico",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../define/GameCurrencyType":"GameCurrencyType"}],GameMath:[function(t,e,o){"use strict";cc._RF.push(e,"0577afOdYxEt4TsUAJscPYq","GameMath"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../base/Pair"),i=t("../../scenes/match/entity/fence/FencePos"),r=t("../../scenes/match/entity/item/color/bomb/ItemBombBase"),a=function(){function t(){}return t.getMergePos=function(e,o){for(var i=[],r=0;r<e.length;r++){var a=new n.Pair(e[r],o[r]);i.push(a)}i.sort(function(t,e){return t.first.y==e.first.y?t.first.x<e.first.x?-1:1:t.first.y<e.first.y?-1:1});var s=-1,c=0,l=0;for(r=0;r<i.length;r++){for(var p=i[r].first,u=0,y=0,h=i;y<h.length;y++){var m=h[y];u+=Math.abs(m.first.x-p.x)+Math.abs(m.first.y-p.y)}u+=i[r].second;for(var f=[],d=[cc.v2(1,0),cc.v2(-1,0)],_=[p],g=0;g<_.length;g++)for(var I=_[g],C=0,P=d;C<P.length;C++){var D=P[C],v=I.add(D);if(-1==t.indexOf(_,v)){for(var b=!1,E=0,B=i;E<B.length;E++){if(B[E].first.equals(v)){b=!0;break}}b&&_.push(v)}}for(var T=0,F=_;T<F.length;T++){var M=F[T];-1!=t.indexOf(f,M)&&f.push(M)}var G=[cc.v2(0,-1),cc.v2(0,1)],S=[p];for(g=0;g<S.length;g++)for(var R=S[g],w=0,O=G;w<O.length;w++){D=O[w],v=R.add(D);if(-1==t.indexOf(S,v)){b=!1;for(var A=0,N=i;A<N.length;A++){if(N[A].first.equals(v)){b=!0;break}}b&&S.push(v)}}for(var L=0,k=S;L<k.length;L++){var x=k[L];-1!=t.indexOf(f,x)&&f.push(x)}var H=f.length,j=!1;-1==s?j=!0:u<c?j=!0:u==c&&H>l&&(j=!0),j&&(s=r,c=u,l=H)}return i[s].first},t.getCreateBombType=function(e){for(var o=r.ItemBombType.None,n=-1,i=-1,a=-1,s=-1,c=0,l=e;c<l.length;c++){var p=l[c];(-1==n||p.x<n)&&(n=p.x),(-1==i||p.x>i)&&(i=p.x),(-1==a||p.y<a)&&(a=p.y),(-1==s||p.y>s)&&(s=p.y)}for(var u=i-n+1,y=s-a+1,h=0,m=0,f=cc.v2(n,a),d=0;d<u;d++){for(var _=0,g=0;g<y;g++)-1!=t.indexOf(e,f.add(cc.v2(d,g)))&&_++;_>m&&(m=_)}for(g=0;g<y;g++){for(_=0,d=0;d<u;d++)-1!=t.indexOf(e,f.add(cc.v2(d,g)))&&_++;_>h&&(h=_)}if(h>=5||m>=5)o=r.ItemBombType.Rainbow;else if(h>=3&&m>=3){for(var I=0,C=!0,P=0;P<h;P++){var D=cc.v2(n+P,a);if(-1==t.indexOf(e,D)){C=!1;break}}C&&(I+=1);var v=!0;for(P=0;P<h;P++){D=cc.v2(n+P,s);if(-1==t.indexOf(e,D)){v=!1;break}}v&&(I+=1);var b=!0;for(P=0;P<m;P++){D=cc.v2(n,a+P);-1==t.indexOf(e,D)&&(b=!1)}b&&(I+=1);var E=!0;for(P=0;P<m;P++){D=cc.v2(i,a+P);-1==t.indexOf(e,D)&&(E=!1)}E&&(I+=1),o=I>=2?r.ItemBombType.Range:r.ItemBombType.Cross}else h>=4||m>=4?m>=4?o=r.ItemBombType.Row:h>=4&&(o=r.ItemBombType.Column):o=h>=2&&m>=2?r.ItemBombType.Butterfly:r.ItemBombType.None;return o},t.isValidMatchPos=function(e,o){for(var n=0,i=0,r=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)];i<r.length;i++){var a=r[i],s=o.add(a);-1!=t.indexOf(e,s)&&n++}if(n>=2)return!0;for(var c=1,l=0,p=[cc.v2(1,0),cc.v2(-1,0)];l<p.length;l++)for(a=p[l],s=o.clone();s.addSelf(a),-1!=t.indexOf(e,s);)c+=1;if(c>=3)return!0;for(var u=1,y=0,h=[cc.v2(0,1),cc.v2(0,-1)];y<h.length;y++)for(a=h[y],s=o.clone();s.addSelf(a),-1!=t.indexOf(e,s);)u+=1;return u>=3},t.filterInvalidMathPositions=function(e){for(e.length<3&&t.clearArray(e);;){for(var o=-1,n=0;n<e.length;n++){var i=e[n];if(!this.isValidMatchPos(e,i)){o=n;break}}if(-1==o)break;e.splice(o,1)}e.length<3&&t.clearArray(e)},t.enumerateCirclePos=function(t,e){return this.enumerateRingPos(t,0,e)},t.enumerateRingPos=function(t,e,o){for(var n=[],i=-o;i<=o;i++)for(var r=-o;r<=o;r++){var a=Math.abs(i)+Math.abs(r);a<=o&&a>=e&&n.push(t.add(cc.v2(r,i)))}return n},t.enumerateCannonPos=function(t,e,o){for(var n=[],i=0;i<o;i++)n.push(t.add(e));return n},t.getContactPoint=function(t,e,o,n){var i=o.sub(t),r=e/i.mag(),a=i.mul(r),s=Math.acos(r);n||(s=-s);var c=cc.v2(a.x*Math.cos(s)-a.y*Math.sin(s),a.x*Math.sin(s)+a.y*Math.cos(s));return t.add(c)},t.getAngle=function(t,e,o,n){if(void 0===o&&(o=cc.v2(0,1)),void 0===n&&(n=!0),t.equals(e))return 0;var i=e.sub(t),r=o.mag(),a=i.mag(),s=(o.x*i.x+o.y*i.y)/(a*r),c=Math.acos(s),l=180/Math.PI*c,p=o.x*i.y-i.x*o.y;return n?p>0&&(l=360-l):p<0&&(l=360-l),l},t.getDistance=function(t,e){return t.sub(e).mag()},t.getDistanceSQ=function(t,e){return t.sub(e).magSqr()},t.rectIntersectsRect=function(t,e){return t.intersects(e)},t.rectContainsPoint=function(t,e){return t.contains(e)},t.insertAsSet=function(e,o,n){void 0===n&&(n=null),-1==t.indexOf(e,o,0,n)&&e.push(o)},t.indexOf=function(t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=null);for(var i=t.length,r=o;r<i;r++){var a=t[r];if(null!=n){if(n(a,e))return r}else if(a.equals){if(a.equals(e))return r}else if(a==e)return r}return-1},t.clearArray=function(t){t.length=0},t.shuffleArray=function(t){t.sort(function(){return.5-Math.random()})},t.isEmptyObject=function(t){if(t)for(var e in t)return!1;return!0},t.clearObject=function(t){for(var e in t)delete t[e]},t.randomInt=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=0),o&&t<=n&&n<=e){var i=e-t-1;return(Math.round(Math.random()*(i-1)+1)+n)%e+t}var r=e-t;return Math.round(Math.random()*r)+t},t.random=function(t,e){var o=e-t;return Math.random()*o+t},t.clamp=function(t,e,o){var n=Math.min(e,o),i=Math.max(e,o);return Math.max(Math.min(t,i),n)},t.getStringFromVec2=function(t){return(1e3*t.x+t.y+1e4).toString()},t.getVec2FromString=function(t){var e=null,o=Number(t);if(o){var n=Math.floor((o-1e4)/1e3),i=o-1e4-1e3*n;e=cc.v2(n,i)}return e},t.getVec2FromConfigString=function(t){var e=null,o=t.replace("{","").replace("}","").split(",");return 2==o.length&&(e=cc.v2(Number(o[0]),Number(o[1]))),e},t.getConfigStringFromVec2=function(t){return"{"+t.x+", "+t.y+"}"},t.vec2Less=function(t,e){return t.x==e.x?t.y<e.y:t.x<e.x},t.getStringFromFencePos=function(t){return this.getStringFromVec2(t.posA)+"|"+this.getStringFromVec2(t.posB)},t.getFencePosFromString=function(t){var e=t.split("|");if(2==e.length){var o=this.getVec2FromString(e[0]),n=this.getVec2FromString(e[1]);return i.default.create(o,n)}return null},t.fencePosLess=function(t,e){return t.posA.equals(e.posA)?this.vec2Less(t.posB,e.posB):this.vec2Less(t.posA,e.posA)},t.getScaleFromViewSize=function(e,o,n,i){void 0===n&&(n=0),void 0===i&&(i=1);var r=Math.min(e.width/o.width,e.height/o.height);return r=t.clamp(r,n,i)},t.getScaleViewSizeFromRealSize=function(t,e,o){var n=cc.size(0,0),i=this.getScaleFromViewSize(e,t,0,10);if((n=cc.size(t.width*i,t.height*i)).width<o){var r=o/n.width;n=cc.size(n.width*r,n.height*r)}return n},t.getDeviceViewSizeFromViewSize=function(t,e,o){cc.size(0,0);var n=t.width/e.width,i=t.height/e.height;return cc.size(o.width*n,o.height*i)},t.getAdBannerSize=function(e,o,n,i,r){var a=t.getDeviceViewSizeFromViewSize(e,o,n);return t.getScaleViewSizeFromRealSize(i,a,r)},t.INVALID_LOGICAL_POSITION=cc.v2(-1,-1),t}();o.default=a,cc._RF.pop()},{"../../base/Pair":"Pair","../../scenes/match/entity/fence/FencePos":"FencePos","../../scenes/match/entity/item/color/bomb/ItemBombBase":"ItemBombBase"}],GameNoMoreStepPanel:[function(t,e,o){"use strict";cc._RF.push(e,"15831mb9n1Iy47kMad7jt9s","GameNoMoreStepPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./NoMoreStepBasePanel/NoMoreStepBasePanel"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.giveUp=function(){this._gameScene.gameOver()},e=i([s],e)}(r.default));o.default=c,cc._RF.pop()},{"./NoMoreStepBasePanel/NoMoreStepBasePanel":"NoMoreStepBasePanel"}],GameOverPanel:[function(t,e,o){"use strict";cc._RF.push(e,"9526cBfgeZF1bQIseeNdd3T","GameOverPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../define/GameConfig"),a=t("../../../../base/IGame"),s=t("../../defines/IdentifierManager"),c=t("./GameResultBasePanel"),l=t("../../GameSceneBase"),p=cc._decorator,u=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardButtonLabel=null,e.cancelButtonLable=null,e._rewardType=l.MatchGameEndRewardType.None,e}return n(e,t),e.prototype.playSoundEffect=function(){a.default.stopBGM(),a.default.playAudio(s.default.getInstance().getMatchAudioFilePath("levelfailed"))},e.prototype.getExtraRewardType=function(){var t=c.GameEndExtraRewardType.None,e=this._gameScene.getEndUIData();return e&&(t=e.failedRewardType),r.default.IsVerify&&(t=c.GameEndExtraRewardType.None),t},e.prototype.recordBestScore=function(){this.setFriendView()},e.prototype.initButtons=function(){t.prototype.initButtons.call(this),this.rewardButton.active=!1},e.prototype.initSupplyItem=function(){this._rewardType=l.MatchGameEndRewardType.None,t.prototype.initSupplyItem.call(this)},e.prototype.onConfirmButtonClicked=function(t){},e.prototype.onCancelButtonClicked=function(t){this.reportResult(l.MatchGameEndType.GameOver,this._rewardType,!1)},e.prototype.onReportResultRespone=function(e){switch(t.prototype.onReportResultRespone.call(this,e),this._rewardType){case l.MatchGameEndRewardType.None:this.onRewardFlyToBackpackComplete();break;case l.MatchGameEndRewardType.Normal:case l.MatchGameEndRewardType.Doubled:this.rewardFlyToBackpack()}},i([y(cc.Label)],e.prototype,"rewardButtonLabel",void 0),i([y(cc.Label)],e.prototype,"cancelButtonLable",void 0),e=i([u],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../define/GameConfig":"GameConfig","../../GameSceneBase":"GameSceneBase","../../defines/IdentifierManager":"IdentifierManager","./GameResultBasePanel":"GameResultBasePanel"}],GameResultBasePanel:[function(t,e,o){"use strict";cc._RF.push(e,"de9beFw+vJN4IuSq3QBuHKq","GameResultBasePanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameEndPanelData=o.GameEndExtraRewardType=void 0;var r,a=t("../../../../base/IGame"),s=t("../../../../define/GameCurrencyType"),c=t("../../../../extend/action/CurveToAction"),l=t("../../../../extend/utils/GameMath"),p=t("../../defines/IdentifierManager"),u=t("../../defines/ItemInfoManager"),y=t("../../GameSceneBase"),h=t("./GameEndItem"),m=t("./StarAndScoreFrame");(function(t){t[t.None=0]="None",t[t.Share=1]="Share",t[t.WatchVideo=2]="WatchVideo",t[t.Request=4]="Request",t[t.ShareForReward=7]="ShareForReward"})(r=o.GameEndExtraRewardType||(o.GameEndExtraRewardType={}));var f=function(){function t(){this.succeedRewardType=r.None,this.failedRewardType=r.None}return t.createWithData=function(e){var o=0;e&&e.hasOwnProperty("LD")&&(o=e.LD);var n=0;return e&&e.hasOwnProperty("LT")&&(n=e.LT),t.create(o,n)},t.create=function(e,o){var n=new t;return n.succeedRewardType=e,n.failedRewardType=o,n},t}();o.GameEndPanelData=f;var d=cc._decorator,_=d.ccclass,g=d.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starFrame=null,e.rewardItemsFrame=null,e.rewardItems=[],e.goldSprite=null,e.goldDoubleIco=null,e.goldLabel=null,e.lifeSprite=null,e.lifeDoubleIco=null,e.lifeLabel=null,e.backpack=null,e.rewardButton=null,e.cancelButton=null,e.rankNode=null,e.friendSprite=null,e._gameScene=null,e._report=null,e._achievementReward=null,e._timeLimitAward=null,e._activeNextResidentGearType=0,e._updateSubDomainFixFrameRate=0,e}return n(e,t),e.prototype.getExtraRewardType=function(){return r.None},e.prototype.showAdBanner=function(){},e.prototype.closeAdBanner=function(){},e.prototype.sendMarkID=function(){},e.prototype.recordBestScore=function(){},e.prototype.popUpRearAchievementPanel=function(){},e.prototype.playSoundEffect=function(){},e.prototype.initSupplyItem=function(){for(var t=[s.GameCurrencyType.TrainFood,s.GameCurrencyType.TrainSoap,s.GameCurrencyType.TrainEyepatch,s.GameCurrencyType.TrainHoe],e=0;e<this.rewardItems.length;e++){this.rewardItems[e].setItemID(t[e])}var o=this._report.IT;for(var n in this.rewardItems){var i=this.rewardItems[n],r=u.default.getInstance().getItemInfoFromItemID(i.getItemID());if(r&&(i.nameLabel.string=r.localization),o.hasOwnProperty(i.getItemID())){var a=o[i.getItemID()];a&&(i.numLabel.string=a.toString())}}if(o[s.GameCurrencyType.GoldCoin]){var c=o[s.GameCurrencyType.GoldCoin];this.goldLabel.string=c.toString()}if(o[s.GameCurrencyType.LifeAddOnePoint]){var l=o[s.GameCurrencyType.LifeAddOnePoint];this.lifeLabel.string=l.toString()}},e.prototype.initButtons=function(){this.rewardButton.on("touchend",this.onConfirmButtonClicked,this),this.cancelButton.on("touchend",this.onCancelButtonClicked,this)},e.prototype.popUpGiftBox=function(){},e.prototype.onConfirmButtonClicked=function(t){},e.prototype.onCancelButtonClicked=function(t){},e.prototype.onShareSuccess=function(){},e.prototype.onShareFail=function(){},e.prototype.onWatchVideoSuccess=function(){},e.prototype.onWatchVideoFail=function(){},e.prototype.reportResult=function(t,e,o){this._gameScene.reportResult(t,e,o,this.onReportResultRespone,this)},e.prototype.onReportResultRespone=function(t){},e.prototype.setRankView=function(){},e.prototype.setFriendView=function(){},e.prototype.updateSubDomainCanvas=function(){},e.prototype.onOpen=function(t){var e=cc.find("Canvas");e&&(this._gameScene=e.getComponent(y.default));var o=t.report;this._report=o,this.playSoundEffect(),this.initSupplyItem(),this.recordBestScore(),this.setRankView(),this.initButtons(),this.sendMarkID(),this.popUpRearAchievementPanel(),this.popUpGiftBox(),this.showAdBanner()},e.prototype.onAnimationDone=function(){var t=0;this._report.hasOwnProperty("starCount")&&(t=this._report.starCount);var e=0;this._report.hasOwnProperty("totalScore")&&(e=this._report.totalScore);var o=0;this._report.hasOwnProperty("historyHighscore")&&(o=this._report.historyHighscore),o=Math.max(o,e),this.starFrame.setStarCount(t),this.starFrame.setScore(e),this.starFrame.setHighscore(o),this.starFrame.appear()},e.prototype.onClose=function(){},e.prototype.update=function(){this.updateSubDomainCanvas()},e.prototype.start=function(){},e.prototype.rewardFlyToBackpack=function(){var t=this;this.rewardButton.active=!1,this.cancelButton.active=!1;var e=this.backpack.node.position,o=0;this.backpack.node.runAction(cc.fadeTo(.3,255));var n=function(t,e){t.runAction(cc.sequence(cc.delayTime(e),cc.fadeTo(.2,0)))},i=function(n){n.runAction(cc.sequence(cc.delayTime(o),c.default.create(.6,n.position,e),cc.callFunc(function(){a.default.playAudio(p.default.getInstance().getMatchAudioFilePath("getitem")),t.backpack.node.runAction(cc.sequence(cc.scaleTo(.1,2.2),cc.scaleTo(.1,2)))}),cc.removeSelf(!0)))};for(var r in this.rewardItems){var s=this.rewardItems[r],u=cc.instantiate(s.ico.node);this.node.addChild(u);var y=s.node.parent.convertToWorldSpaceAR(s.node.position),h=this.node.convertToNodeSpaceAR(y);u.position=h,n(s.node,o),i(u),o+=.3}n(this.goldSprite.node,.5);for(var m=function(t){var o=cc.instantiate(f.goldSprite.node);f.node.addChild(o);var n=f.goldSprite.node.parent.convertToWorldSpaceAR(f.goldSprite.node.position),i=f.node.convertToNodeSpaceAR(n);for(var r in o.position=i,o.opacity=0,o.children){o.children[r].active=!1}var s=[],u=Math.round(37.5),y=Math.round(75),h=l.default.randomInt(u,y),m=l.default.randomInt(0,360)/180*Math.PI,d=cc.v2(i.x+h*Math.cos(m),i.y+h*Math.sin(m));s.push(cc.delayTime(.1*t)),s.push(cc.fadeTo(0,255)),s.push(cc.spawn(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.moveTo(.3,d).easing(cc.easeOut(2)))),s.push(cc.delayTime(.1)),s.push(cc.spawn(c.default.create(.8,i,e),cc.scaleTo(.6,.5))),s.push(cc.callFunc(function(){a.default.playAudio(p.default.getInstance().getMatchAudioFilePath("coincollect")),o.removeFromParent(),o.destroy()})),o.runAction(cc.sequence(s))},f=this,d=0;d<5;d++)m(d);u=cc.instantiate(this.lifeSprite.node);this.node.addChild(u);y=this.lifeSprite.node.parent.convertToWorldSpaceAR(this.lifeSprite.node.position),h=this.node.convertToNodeSpaceAR(y);for(var r in u.position=h,u.opacity=0,u.children){u.children[r].active=!1}n(this.lifeSprite.node,.3),u.runAction(cc.sequence(cc.fadeTo(0,255),cc.spawn(c.default.create(.8,u.position,e),cc.scaleTo(.4,.5)),cc.removeSelf(!0))),o+=.3,o+=.8,this.node.runAction(cc.sequence(cc.delayTime(o),cc.callFunc(function(){t.onRewardFlyToBackpackComplete()})))},e.prototype.onRewardFlyToBackpackComplete=function(){},i([g(m.default)],e.prototype,"starFrame",void 0),i([g(cc.Node)],e.prototype,"rewardItemsFrame",void 0),i([g([h.default])],e.prototype,"rewardItems",void 0),i([g(cc.Sprite)],e.prototype,"goldSprite",void 0),i([g(cc.Sprite)],e.prototype,"goldDoubleIco",void 0),i([g(cc.Label)],e.prototype,"goldLabel",void 0),i([g(cc.Sprite)],e.prototype,"lifeSprite",void 0),i([g(cc.Sprite)],e.prototype,"lifeDoubleIco",void 0),i([g(cc.Label)],e.prototype,"lifeLabel",void 0),i([g(cc.Sprite)],e.prototype,"backpack",void 0),i([g(cc.Node)],e.prototype,"rewardButton",void 0),i([g(cc.Node)],e.prototype,"cancelButton",void 0),i([g(cc.Node)],e.prototype,"rankNode",void 0),i([g(cc.Sprite)],e.prototype,"friendSprite",void 0),e=i([_],e)}(cc.Component);o.default=I,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../define/GameCurrencyType":"GameCurrencyType","../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../GameSceneBase":"GameSceneBase","../../defines/IdentifierManager":"IdentifierManager","../../defines/ItemInfoManager":"ItemInfoManager","./GameEndItem":"GameEndItem","./StarAndScoreFrame":"StarAndScoreFrame"}],GameSceneBase:[function(t,e,o){"use strict";cc._RF.push(e,"f5e316DP+NNYr+tdvyevPJr","GameSceneBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MatchGameEndRewardType=o.MatchGameEndType=void 0;var r=t("../../base/IGame"),a=t("../../component/UISceneBase"),s=t("../../define/GameCurrencyType"),c=t("../../extend/utils/GameMath"),l=t("./defines/CollectionID"),p=t("./defines/EntityID"),u=t("./defines/PowerID"),y=t("./entity/EntityPrefabNodePool"),h=t("./entity/flyer/FlyerAnimation"),m=t("./entity/flyer/FlyerBomb"),f=t("./entity/flyer/FlyerBullet"),d=t("./entity/flyer/FlyerCollectedEntity"),_=t("./entity/item/color/bomb/ItemBombBase"),g=t("./entity/item/color/bomb/ItemBombButterfly"),I=t("./entity/item/color/bomb/ItemBombColumn"),C=t("./entity/item/color/bomb/ItemBombCross"),P=t("./entity/item/color/bomb/ItemBombRainbow"),D=t("./entity/item/color/bomb/ItemBombRange"),v=t("./entity/item/color/bomb/ItemBombRow"),b=t("./entity/item/color/ItemNormal"),E=t("./grid/GridBase"),B=t("./statistics/GameStatistics"),T=t("./userinterface/CollectedTrainSupplyBar"),F=t("./userinterface/CompleteBanner"),M=t("./userinterface/GearBar"),G=t("./userinterface/ScoreBar"),S=t("./userinterface/StepBar"),R=t("./userinterface/TargetBanner"),w=t("./userinterface/TargetBar"),O=cc._decorator,A=O.ccclass,N=O.property;(function(t){t[t.Complete=1]="Complete",t[t.GiveUp=2]="GiveUp",t[t.GameOver=3]="GameOver",t[t.Terminate=4]="Terminate"})(o.MatchGameEndType||(o.MatchGameEndType={})),function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Doubled=2]="Doubled"}(o.MatchGameEndRewardType||(o.MatchGameEndRewardType={}));var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgTop=null,e.cancelGearLayer=null,e.backgroundMask=null,e.swallowTouchLayer=null,e.gridFrame=null,e.levelLabel=null,e.targetBar=null,e.supplyBar=null,e.stepBar=null,e.scoreBar=null,e.gearBar=null,e.pauseButton=null,e._grid=null,e._mode=E.GridMode.Normal,e._hasShowCompleteBanner=!1,e._statistics=null,e}return n(e,t),e.prototype.canGenerateBomb=function(){return!1},e.prototype.canGenerateTrainSupply=function(){return!1},e.prototype.canPauseGame=function(){return!!this._grid&&this._grid.canPauseGame()},e.prototype.canGetBonusFromLeftStep=function(){return!1},e.prototype.canTriggerGuide=function(){return!1},e.prototype.canCountScore=function(){return!1},e.prototype.initGameScene=function(t){r.default.playAudioBGM("audio/bgm/bgm_crush"),this.pauseButton&&this.pauseButton.on("touchend",this.onPauseTabbed,this),this.swallowTouchLayer&&(this.swallowTouchLayer.active=!1),this.clearGameScene(),this._statistics=B.default.create(t)},e.prototype.clearGameScene=function(){this.destroyGrid(),this.destroyStatistics(),this.targetBar&&this.targetBar.clearTargets()},e.prototype.createStatistics=function(t){this._statistics=B.default.create(t)},e.prototype.destroyStatistics=function(){this._statistics&&(this._statistics=null)},e.prototype.phrasePrewarData=function(t){},e.prototype.preloadResources=function(){for(var t=y.default.getInstance(),e=[],o=0;o<3;o++)e.push(m.default.create(this._grid,p.EntityColor.Red,!1,cc.Vec2.ZERO,0)),e.push(f.default.create(this._grid,0,cc.Vec2.ZERO,cc.Vec2.ZERO,p.EntityColor.Red,_.ItemBombType.None,!1)),e.push(d.default.create(this._grid,l.CollectionID.ItemNormalRed,0,cc.Vec2.ZERO)),e.push(g.default.create(this._grid,p.EntityColor.Red)),e.push(I.default.create(this._grid,p.EntityColor.Red)),e.push(v.default.create(this._grid,p.EntityColor.Red)),e.push(D.default.create(this._grid,p.EntityColor.Red)),e.push(C.default.create(this._grid,p.EntityColor.Red)),e.push(P.default.create(this._grid));var n=Math.floor(this._grid.getGridSize().width*this._grid.getGridSize().height/3);for(o=0;o<n;o++)e.push(b.default.create(this._grid,p.EntityColor.Red)),e.push(h.default.createAnimationWithType(this._grid,h.FlyerAnimationType.HighlightedCell,!0)),e.push(h.default.createAnimationWithType(this._grid,h.FlyerAnimationType.CommonHurt,!0)),e.push(h.default.createAnimationWithType(this._grid,h.FlyerAnimationType.Bomb1x1,!0));for(o=0;o<5;o++)e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalRed)),e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalGreen)),e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalBlue)),e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalYellow)),e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalOrange)),e.push(h.default.createDieAnimation(this._grid,p.EntityID.ItemNormalPurple));for(var i=0,r=e;i<r.length;i++){var a=r[i];t.putPrefabNode(a)}},e.prototype.getGrid=function(){return this._grid},e.prototype.createGrid=function(){this.destroyGrid();var t=this._statistics.getCurrentMapJson(),e=this.gridFrame.getContentSize();this._grid=E.default.create(this,e,t),this.gridFrame.addChild(this._grid.node),this.gridFrame.opacity=0,this.setGridMode(E.GridMode.Normal),this.preloadResources(),this.reportStepCreateGrid()},e.prototype.destroyGrid=function(){this._grid&&(this._grid.node.destroy(),this._grid=null)},e.prototype.runGame=function(){this._grid.runGame()},e.prototype.getWorldAreas=function(t,e){return this._grid.getWorldAreas(t,e)},e.prototype.getWorldAreaWithLogicalPos=function(t){return this._grid.getWorldAreaWithLogicalPos(t)},e.prototype.getGridMode=function(){return this._mode},e.prototype.setGridMode=function(t){if(this._mode!=t){this._mode=t,this._grid.tryEnableMode(t);var e=s.GameCurrencyType.NoneType;switch(this._mode){case E.GridMode.ForceClean:e=s.GameCurrencyType.AidHammer;break;case E.GridMode.CrossBomb:e=s.GameCurrencyType.AidBomb;break;case E.GridMode.ForceSwap:e=s.GameCurrencyType.AidSwap}this.gearBar&&this.gearBar.focusItemWithGearID(e)}},e.prototype.selectGear=function(t){var e=E.GridMode.Normal;switch(t){case s.GameCurrencyType.AidHammer:e=this.getGridMode()==E.GridMode.ForceClean?E.GridMode.Normal:E.GridMode.ForceClean;break;case s.GameCurrencyType.AidBomb:e=this.getGridMode()==E.GridMode.CrossBomb?E.GridMode.Normal:E.GridMode.CrossBomb;break;case s.GameCurrencyType.AidSwap:e=this.getGridMode()==E.GridMode.ForceSwap?E.GridMode.Normal:E.GridMode.ForceSwap}this.setGridMode(e)},e.prototype.updateGears=function(t){var e=t.getUserData().itemID;e&&e!=s.GameCurrencyType.NoneType&&(this.updateUserInterface(),this.selectGear(e))},e.prototype.hasShowCompleteBanner=function(){return this._hasShowCompleteBanner},e.prototype.hadOperated=function(){return this._statistics.hadOperated()},e.prototype.getTickTime=function(){return Math.round(this._statistics.getTick())},e.prototype.getPuppyLeftSteps=function(){return this._statistics.getPuppyLeftSteps()},e.prototype.getShareTimes=function(){return this._statistics.getShareForMoreStepTimes()},e.prototype.setShareTimes=function(t){this._statistics.setShareForMoreStepTimes(t)},e.prototype.getStatisticsReport=function(){var t={};t.hadOperated=this.hadOperated(),t.usedStep_ST=this.getPowerAmount(u.PowerID.UsedSwap),t.leftStep_SL=this.getPowerAmount(u.PowerID.AvailableSwap),t.totalTime_T=this.getTickTime(),t.shareTimes=this.getShareTimes(),t.config=this.getMatchGameConfig(),t.isCompleteWithLastStep=this.getCompleteWithLastStep(),t.totalScore=this.getTotalScore(),t.completeScore=this.getCompleteScore(),t.historyHighscore=this.getHistoryHighscore(),t.starCount=this.getStarsCount(),this.hasShowCompleteBanner()?t.isVeryFastComplete=this.getPowerAmount(u.PowerID.UsedSwap)<10:t.isVeryFastComplete=!1;var e=this.getTargetMap();for(var o in e){var n=Number(o),i=0;if(n==l.CollectionID.ItemPuppy)i=this.getPuppyLeftSteps();else i=Math.max(0,e[o]-this.getCollectedEntityAmount(n));t.leftTarget_TN||(t.leftTarget_TN={}),t.leftTarget_TN[n]=i}t.leftTarget_TN=this.getRemainingTargets();var r=this.getUsedGearMap();for(var o in r){var a=r[o];a>0&&(t.usedGear_GN||(t.usedGear_GN={}),t.usedGear_GN[o]=a)}var s=this.getCollectedSupplyMap(),c={};for(var o in s){var p=s[o];c[Number(o)]=p}return t.IT=c,t},e.prototype.disappearUI=function(){var t=this.node.getComponent(cc.Animation);t&&t.play("disappear")},e.prototype.appearUI=function(){var t=this.node.getComponent(cc.Animation);t&&t.play("appear"),this.gridFrame.opacity=255},e.prototype.getLevel=function(){return this._statistics.getLevel()},e.prototype.getMatchGameConfig=function(){return this._statistics.getMatchGameConfig()},e.prototype.getDropEntityMap=function(){return this._statistics.getDropEntityMap()},e.prototype.resetDropConfig=function(){this._statistics.resetDropConfig()},e.prototype.getLimitedEntityMap=function(){return this._statistics.getLimitedEntityMap()},e.prototype.getLimitedGroupMap=function(){return this._statistics.getLimitedGroupMap()},e.prototype.getTargetMap=function(){return this._statistics.getTargetMap()},e.prototype.getRemainingTargets=function(){return this._statistics.getRemainingTargets()},e.prototype.getTargetAmount=function(t){return this._statistics.getTargetAmount(t)},e.prototype.isTargetCollectionID=function(t){return this._statistics.isTargetCollectionID(t)},e.prototype.getCollectedEntityAmount=function(t){return this._statistics.getCollectedEntityAmount(t)},e.prototype.setCollectedEntityAmount=function(t,e){this._statistics.setCollectedEntityAmount(t,e)},e.prototype.getCollectedSupplyMap=function(){return this._statistics.getCollectedSupplyMap()},e.prototype.getCollectedSupplyAmount=function(t){return this._statistics.getCollectedSupplyAmount(t)},e.prototype.setCollectedSupplyAmount=function(t,e){this._statistics.setCollectedSupplyAmount(t,e)},e.prototype.getPowerAmount=function(t){return this._statistics.getPowerAmount(t)},e.prototype.setPowerAmount=function(t,e){this._statistics.setPowerAmount(t,e)},e.prototype.gainPowerAmount=function(t,e){this.setPowerAmount(t,this.getPowerAmount(t)+e)},e.prototype.lossPowerAmount=function(t,e){this.gainPowerAmount(t,-e)},e.prototype.getLaunchGearMap=function(){return this._statistics.getLaunchGearMap()},e.prototype.clearLaunchGears=function(){this._statistics.clearLaunchGears()},e.prototype.getPrewarGearAmount=function(t){return this._statistics.getPrewarGearAmount(t)},e.prototype.setPrewarGearAmount=function(t,e){this._statistics.setPrewarGearAmount(t,e)},e.prototype.getAvailableGearItemAmount=function(t){return this._statistics.getAvailableGearItemAmount(t)},e.prototype.getUsedGearMap=function(){return this._statistics.getUsedGearMap()},e.prototype.getUsedGearAmount=function(t){return this._statistics.getUsedGearAmount(t)},e.prototype.setUsedGearAmount=function(t,e){this._statistics.setUsedGearAmount(t,e),this.updateUserInterface()},e.prototype.getLimitedGearMap=function(){return this._statistics.getLimitedGearMap()},e.prototype.setLimitedGearAmount=function(t,e){this._statistics.setLimitedGearAmount(t,e)},e.prototype.getLimitedGearAmount=function(t){return this._statistics.getLimitedGearAmount(t)},e.prototype.getCompleteWithLastStep=function(){return this._statistics.getCompleteWithLastStep()},e.prototype.setCompleteWithLastStep=function(t){this._statistics.setCompleteWithLastStep(t)},e.prototype.getTotalScore=function(){return this._statistics.getTotalScore()},e.prototype.setTotalScore=function(t){this._statistics.setTotalScore(t)},e.prototype.gainTotalScore=function(t){this.setTotalScore(this.getTotalScore()+t)},e.prototype.lossTotalScore=function(t){this.gainTotalScore(-t)},e.prototype.getHistoryHighscore=function(){return this._statistics.getHistoryHighScore()},e.prototype.setHistoryHighscore=function(t){this._statistics.setHistoryHighScore(t)},e.prototype.getStarScores=function(){return this._statistics.getStarScores()},e.prototype.getStarsCount=function(){return this._statistics.getStarsCount()},e.prototype.getCompleteScore=function(){return this._statistics.getCompleteScore()},e.prototype.setCompleteScore=function(t){this._statistics.setCompleteScore(t),this.scoreBar&&this.scoreBar.updateScore()},e.prototype.getCompleteReward=function(){return this._statistics.getCompleteReward()},e.prototype.getBonusStepCount=function(){return this._statistics.getBonusStepCount()},e.prototype.setBonusStepCount=function(t){this._statistics.setBonusStepCount(t)},e.prototype.getEndUIData=function(){return this._statistics.getEndUIData()},e.prototype.setEndUIData=function(t){this._statistics.setEndUIData(t)},e.prototype.getEventTargets=function(){return this._statistics.getEventTargets()},e.prototype.setEventTargets=function(t){this._statistics.setEventTargets(t)},e.prototype.getShouldShowAdBanner=function(){return!!this.gearBar&&this.gearBar.getType()==M.GearBarType.Drawer},e.prototype.isCompleted=function(){return this._statistics.finishAllTarget()},e.prototype.isFailed=function(){return this.getPowerAmount(u.PowerID.AvailableSwap)<=0},e.prototype.updateUserInterface=function(){},e.prototype.updateLevelBar=function(){if(this.levelLabel){var t=this.getLevel();this.levelLabel.string=t.toString()}},e.prototype.getWorldPosForTarget=function(t){return this.targetBar?this.targetBar.getWorldPosWithCollectionID(t):cc.v2(0,0)},e.prototype.updateTargetBarUIWithDelta=function(t,e){if(this.targetBar){var o=this.targetBar.getItemWithCollectionID(t);if(o){var n=o.getAmount();o.setAmount(n+e)}}},e.prototype.updateTargetBar=function(){this.targetBar&&(this.targetBar.setTargetData(this.getRemainingTargets()),this.targetBar.hideAll())},e.prototype.getWorldPosForSupply=function(t){return this.supplyBar?this.supplyBar.getWorldPosWithSupplyItemID(t):cc.v2(0,0)},e.prototype.updateSupplyBarUIWithDelta=function(t,e){if(this.supplyBar){var o=this.supplyBar.getItemWithSupplyItemID(t);o&&o.setAmount(o.getAmount()+e)}},e.prototype.updateSupplyBar=function(){this.supplyBar&&(this.supplyBar.setSupplyData(this.getCollectedSupplyMap()),this.supplyBar.node.active=!this.isPlayingHistoryLevel())},e.prototype.getWorldPosForStep=function(){return this.stepBar?cc.v2(this.stepBar.getWorldPos()):cc.v2(0,0)},e.prototype.updateStepBar=function(){this.stepBar&&this.stepBar.setAmount(this.getPowerAmount(u.PowerID.AvailableSwap))},e.prototype.updateStepBarUIWithDelta=function(t){this.stepBar&&this.stepBar.setAmount(this.stepBar.getAmount()+t)},e.prototype.getWorldPosForScore=function(){return this.scoreBar?cc.v2(this.scoreBar.getWorldPos()):cc.v2(0,0)},e.prototype.getWorldPosForStar=function(t){return this.scoreBar?cc.v2(this.scoreBar.getWorldPosForStar(t)):cc.v2(0,0)},e.prototype.updateScoreBarUIWithDelta=function(t){this.scoreBar&&this.scoreBar.setScore(this.scoreBar.getScore()+t)},e.prototype.getWorldPosForGear=function(t){return this.gearBar?this.gearBar.getGearIconWorldPos(t):cc.v2(0,0)},e.prototype.updateGearBar=function(){this.gearBar&&this.gearBar.updateGears()},e.prototype.updateScore=function(){this.scoreBar.updateScore()},e.prototype.showTargetBanner=function(){var t=R.default.create(this.getLevel(),this.getRemainingTargets());t&&this.node.addChild(t.node,1e3)},e.prototype.showCompleteBanner=function(){var t=F.default.create(this.getLevel(),this.onCompleteBannerDisappear.bind(this),!1);t&&this.node.addChild(t.node,1e3),this.swallowTouchLayer.active=!0,this.setGridMode(E.GridMode.Normal),this.setCompleteScore(this.getTotalScore())},e.prototype.onCompleteBannerDisappear=function(t){this._hasShowCompleteBanner=!0},e.prototype.congratulation=function(){},e.prototype.noMoreStep=function(){},e.prototype.stalemate=function(){},e.prototype.showReplayPrepareUI=function(){},e.prototype.cheatGameWithLevel=function(t){},e.prototype.endGameWithReplay=function(t){t?this.clearForReplay():this.backToMainScene(!1)},e.prototype.clearForReplay=function(){this._grid.clearGameForReplay()},e.prototype.isPlayingHistoryLevel=function(){return!1},e.prototype.getStepMark=function(t){return 0},e.prototype.reportStepMark=function(t){},e.prototype.reportStepInit=function(){this.reportStepMark("onInit")},e.prototype.reportStepCreateGrid=function(){this.reportStepMark("onCreateGrid")},e.prototype.reportStepSwap=function(t){var e="onStep"+t.toString();this.reportStepMark(e)},e.prototype.reportStepComplete=function(){this.reportStepMark("onComplete")},e.prototype.reportStepCongratulation=function(){this.reportStepMark("onCongratulation")},e.prototype.reportStepNextGame=function(){this.reportStepMark("onNextGame")},e.prototype.onPauseTabbed=function(t){},e.prototype.nextGame=function(){},e.prototype.quitGame=function(){},e.prototype.replayGame=function(){},e.prototype.gameOver=function(){},e.prototype.showGameFail=function(){},e.prototype.onNoMoreStep=function(t){},e.prototype.stalemateGame=function(){},e.prototype.backToMainScene=function(t){},e.prototype.beforePlayerOperated=function(){},e.prototype.onPlayerOperated=function(){},e.prototype.onRecevieGiftBox=function(t){},e.prototype.onCancleGiftBox=function(t){},e.prototype.hideAdBanner=function(){this.gearBar&&this.gearBar.setType(M.GearBarType.Normal)},e.prototype.getRequestUseGearParam=function(t,e){return{}},e.prototype.requestUseGear=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=null)},e.prototype.requestBuyMoreStep=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null)},e.prototype.getReportResultParam=function(t,e,o){return{}},e.prototype.reportResult=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null)},e.prototype.cancelGear=function(t){this.selectGear(s.GameCurrencyType.NoneType)},e.prototype.onLoad=function(){var t=cc.view.getVisibleSize(),e=this.getComponent(cc.Canvas);if(t.height/t.width>=1.7){e.fitHeight=!1,e.fitWidth=!0;var o=e.designResolution.width/t.width*t.height;e.designResolution=cc.size(e.designResolution.width,o)}else{e.fitHeight=!0,e.fitWidth=!1;var n=e.designResolution.height/t.height*t.width;e.designResolution=cc.size(n,e.designResolution.height)}if(this.bgTop){this.bgTop.scale=c.default.getScaleFromViewSize(e.designResolution,this.bgTop.getContentSize(),1,2);var i=this.bgTop.getBoundingBox(),r=Math.max(.5*e.designResolution.height-i.height,0);r+=i.height*this.bgTop.anchorY,this.bgTop.setPosition(cc.v2(0,r))}this.cancelGearLayer&&(this.cancelGearLayer.on("touchend",this.cancelGear,this),this.cancelGearLayer.active=!1)},e.prototype.getCurrentPetAnimationName=function(){return""},e.prototype.update=function(t){t*=cc.director.getScheduler().getTimeScale(),this._statistics&&this._statistics.tick(t)},e.prototype.onDestroy=function(){this.stepBar=null,this.levelLabel=null,this.gridFrame=null,this.gearBar=null,this.targetBar=null,this.supplyBar=null,this.pauseButton=null,this.swallowTouchLayer=null,this._grid=null,this._statistics=null,y.default.getInstance().clear()},i([N(cc.Node)],e.prototype,"bgTop",void 0),i([N(cc.Node)],e.prototype,"cancelGearLayer",void 0),i([N(cc.Node)],e.prototype,"backgroundMask",void 0),i([N(cc.Node)],e.prototype,"swallowTouchLayer",void 0),i([N(cc.Node)],e.prototype,"gridFrame",void 0),i([N(cc.Label)],e.prototype,"levelLabel",void 0),i([N(w.default)],e.prototype,"targetBar",void 0),i([N(T.default)],e.prototype,"supplyBar",void 0),i([N(S.default)],e.prototype,"stepBar",void 0),i([N(G.default)],e.prototype,"scoreBar",void 0),i([N(M.default)],e.prototype,"gearBar",void 0),i([N(cc.Node)],e.prototype,"pauseButton",void 0),e=i([A],e)}(a.default);o.default=L,cc._RF.pop()},{"../../base/IGame":"IGame","../../component/UISceneBase":"UISceneBase","../../define/GameCurrencyType":"GameCurrencyType","../../extend/utils/GameMath":"GameMath","./defines/CollectionID":"CollectionID","./defines/EntityID":"EntityID","./defines/PowerID":"PowerID","./entity/EntityPrefabNodePool":"EntityPrefabNodePool","./entity/flyer/FlyerAnimation":"FlyerAnimation","./entity/flyer/FlyerBomb":"FlyerBomb","./entity/flyer/FlyerBullet":"FlyerBullet","./entity/flyer/FlyerCollectedEntity":"FlyerCollectedEntity","./entity/item/color/ItemNormal":"ItemNormal","./entity/item/color/bomb/ItemBombBase":"ItemBombBase","./entity/item/color/bomb/ItemBombButterfly":"ItemBombButterfly","./entity/item/color/bomb/ItemBombColumn":"ItemBombColumn","./entity/item/color/bomb/ItemBombCross":"ItemBombCross","./entity/item/color/bomb/ItemBombRainbow":"ItemBombRainbow","./entity/item/color/bomb/ItemBombRange":"ItemBombRange","./entity/item/color/bomb/ItemBombRow":"ItemBombRow","./grid/GridBase":"GridBase","./statistics/GameStatistics":"GameStatistics","./userinterface/CollectedTrainSupplyBar":"CollectedTrainSupplyBar","./userinterface/CompleteBanner":"CompleteBanner","./userinterface/GearBar":"GearBar","./userinterface/ScoreBar":"ScoreBar","./userinterface/StepBar":"StepBar","./userinterface/TargetBanner":"TargetBanner","./userinterface/TargetBar":"TargetBar"}],GameStalematePanel:[function(t,e,o){"use strict";cc._RF.push(e,"d34f0DjnOhO/ar/1ejZZy39","GameStalematePanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../GameSceneBase"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._report=null,e._gameScene=null,e}return n(e,t),e.prototype.onOpen=function(t){this._report=t;var e=cc.find("Canvas");e&&(this._gameScene=e.getComponent(r.default))},e.prototype.onClose=function(){this._report=null,this._gameScene=null},e.prototype.onCloseBtnClick=function(){this._gameScene.stalemateGame()},e=i([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../GameSceneBase":"GameSceneBase"}],GameStatistics:[function(t,e,o){"use strict";cc._RF.push(e,"23a3f7XvsxOQ5LQnNe1SG7y","GameStatistics"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventCollectTargets=o.GameMode=o.GameType=void 0;var n,i=t("../../../config/CFGTripleLevel"),r=t("../../../config/CFGTripleLevelGrass"),a=t("../../../config/CFGTripleLevelOrder"),s=t("../../../config/CFGTripleLevelPath"),c=t("../../../config/CFGTripleLevelPopsicles"),l=t("../../../config/CFGTripleMap"),p=t("../../../define/GameConfig"),u=t("../../../define/GameCurrencyType"),y=t("../../../extend/utils/GameMath"),h=t("../../../extend/utils/TMXJsonPhraser"),m=t("../defines/CollectionID"),f=t("../defines/EntityGroupID"),d=t("../defines/EntityID"),_=t("../defines/IdentifierManager"),g=t("../defines/KindID"),I=t("../defines/PowerID"),C=t("../defines/TMXConfigInfoKeys"),P=t("../userinterface/GameResultPanel/GameResultBasePanel");(function(t){t[t.None=0]="None",t[t.Order=1]="Order",t[t.Grass=2]="Grass",t[t.Popsicle=3]="Popsicle",t[t.Path=4]="Path"})(n=o.GameType||(o.GameType={})),function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.ClimbingTower=2]="ClimbingTower"}(o.GameMode||(o.GameMode={}));var D=function(){function t(){this._collections=[]}return t.createWithData=function(e){var o=[];return e&&e.hasOwnProperty("TTID")&&(o=e.TTID),t.create(o)},t.create=function(e){var o=new t;return o.setTargets(e),o},t.prototype.setTargets=function(t){this._collections.length=0;for(var e=0,o=t;e<o.length;e++){var n=o[e];this._collections.push(n)}},t.prototype.getTargets=function(){return this._collections},t}();o.EventCollectTargets=D;var v=function(){function t(){this._cfgObj={},this._mapDatas=[],this._mapIndex=0,this._targetMap={},this._collectedEntityMap={},this._collectedSupplyMap={},this._recordedSupplyMap={},this._collectedEnergyMap={},this._dropEntityMap={},this._limitEntityMap={},this._limitGroupMap={},this._prewarGear={},this._usedGear={},this._limitedGear={},this._totalTime=0,this._shareForMoreStepTimes=0,this._endUIData=new P.GameEndPanelData,this._level=0,this._completeWithLastStep=!1,this._totalScore=0,this._historyHighscore=0,this._completeScore=0,this._bonusStepCount=0,this._eventTargets=new D,this._startScores=[],this._completeReward={},this._availableGear={},this._puppyStepCount=0}return t.create=function(e){var o=new t;return o.init(e),o},t.prototype.init=function(e){this._level=e,this.clear();var o=t.getMatchCfgByLevel(e);if(p.default.IsDebug)switch(p.default.DebugMatchType){case p.DebugMatchType.Order:this.initOrderTestConfig(o);break;case p.DebugMatchType.Grass:this.initGrassTestConfig(o);break;case p.DebugMatchType.Popsicle:this.initPopsicleTestConfig(o);break;case p.DebugMatchType.Path:this.initPathTestConfig(o)}switch(o.LevelType){case n.Order:this.setPowerAmount(I.PowerID.AvailableSwap,o.Step),this.initMapJsonsWithMapNames(o.MapID),this.initCompleteReward(o.LevelReward,o.RewardNum),this.initDropEntities(o.DropBox,o.DropProb),this.initTargetEntities(o.Target,o.TargetNum),this.initLimitEntities(o.DropLimit,o.DropLimitNum),this.initStarScores(o.StarScore);break;case n.Grass:this.setPowerAmount(I.PowerID.AvailableSwap,o.Step),this.initMapJsonsWithMapNames(o.MapID),this.initCompleteReward(o.LevelReward,o.RewardNum),this.initDropEntities(o.DropBox,o.DropProb),this.initTargetGrass(this._mapDatas),this.initStarScores(o.StarScore);break;case n.Popsicle:this.setPowerAmount(I.PowerID.AvailableSwap,o.Step),this.initMapJsonsWithMapNames(o.MapID),this.initCompleteReward(o.LevelReward,o.RewardNum),this.initDropEntities(o.DropBox,o.DropProb),this.initTargetPopsicle(this._mapDatas),this.initStarScores(o.StarScore);break;case n.Path:this.setPowerAmount(I.PowerID.AvailableSwap,o.Step),this.initMapJsonsWithMapNames(o.MapID),this.initCompleteReward(o.LevelReward,o.RewardNum),this.initDropEntities(o.DropBox,o.DropProb),this.initTargetEntities("puppy","1"),this.initLimitEntities(o.DropLimit,o.DropLimitNum),this.initTargetPath(this._mapDatas),this.initStarScores(o.StarScore)}this._cfgObj=o},t.prototype.initOrderTestConfig=function(t){t.LevelType=1,t.Step=1,t.MapID="test_maps/TestOrder",t.DropBox="red|green|blue|yellow|orange",t.DropProb="100|100|100|100|100",t.Target="purple",t.TargetNum="3"},t.prototype.initGrassTestConfig=function(t){t.LevelType=2,t.Step=1,t.MapID="test_maps/TestGrass",t.DropBox="red|blue|orange|yellow|green",t.DropProb="100|100|100|100|100",t.DropLimit="red|blue",t.DropLimitNum="3|3"},t.prototype.initPopsicleTestConfig=function(t){t.LevelType=3,t.Step=99,t.MapID="test_maps/TestPopsicle",t.DropBox="red|blue|orange|yellow|green",t.DropProb="100|100|100|100|100",t.DropLimit="red|blue",t.DropLimitNum="3|3"},t.prototype.initPathTestConfig=function(t){t.LevelType=4,t.Step=99,t.MapID="test_maps/TestPath",t.DropBox="red|blue|orange|yellow|green|purple",t.DropProb="100|100|100|100|100|100",t.DropLimit="",t.DropLimitNum=""},t.getLevelTypeByLevel=function(t){var e=n.None,o=i.CFGTripleLevel.getInstance().getCongfigByLevelNum(t);return o&&(e=o.LevelType),e},t.getMatchCfgByLevel=function(t){var e={},o=i.CFGTripleLevel.getInstance().getCongfigByLevelNum(t);if(!o)return e;for(var l in o)e[l]=o[l];var p=null;if(o.LevelType==n.Order?p=new a.CFGTripleLevelOrder:o.LevelType==n.Grass?p=new r.CFGTripleLevelGrass:o.LevelType==n.Popsicle?p=new c.CFGTripleLevelPopsicles:o.LevelType==n.Path&&(p=new s.CFGTripleLevelPath),p){var u=p.getCongfigByLevelID(o.LevelID);for(var l in u)e[l]=u[l]}return e},t.prototype.getMatchGameConfig=function(){return this._cfgObj},t.prototype.getCurrentMapJson=function(){return this._mapDatas.length>0?this._mapDatas[this._mapIndex]:{}},t.prototype.nextMapJson=function(){return this._mapIndex+1<this._mapDatas.length&&(this._mapIndex+=1,!0)},t.prototype.getTotalScore=function(){return this._totalScore},t.prototype.setTotalScore=function(t){this._totalScore=Math.max(0,t)},t.prototype.getHistoryHighScore=function(){return this._historyHighscore},t.prototype.setHistoryHighScore=function(t){t&&(this._historyHighscore=Math.max(0,t))},t.prototype.getStarScores=function(){return this._startScores},t.prototype.getStarsCount=function(){for(var t=0;t<this._startScores.length;t++){if(this._startScores[t]>this._totalScore)break}return t},t.prototype.getCompleteScore=function(){return this._completeScore},t.prototype.setCompleteScore=function(t){this._completeScore=t},t.prototype.getCompleteReward=function(){return this._completeReward},t.prototype.getBonusStepCount=function(){return this._bonusStepCount},t.prototype.setBonusStepCount=function(t){this._bonusStepCount=t},t.prototype.getCompleteWithLastStep=function(){return this._completeWithLastStep},t.prototype.setCompleteWithLastStep=function(t){this._completeWithLastStep=t},t.prototype.getTargetMap=function(){return this._targetMap},t.prototype.getRemainingTargets=function(){var t={};for(var e in this._targetMap){var o=this._targetMap[e],n=Number(e),i=o-this.getCollectedEntityAmount(n);t[n]=Math.max(i,0)}return t},t.prototype.getTargetAmount=function(t){return this._targetMap.hasOwnProperty(t)?this._targetMap[t]:0},t.prototype.finishAllTarget=function(){var t=!0;for(var e in this._targetMap){var o=this._targetMap[e],n=Number(e);if(this.getCollectedEntityAmount(n)<o){t=!1;break}}return t},t.prototype.isTargetCollectionID=function(t){var e=this.getTargetAmount(t);return this.getCollectedEntityAmount(t)<e},t.prototype.setTargetAmount=function(t,e){t!=m.CollectionID.None&&(e=Math.max(e,0),this._targetMap[t]=e)},t.prototype.getCollectedEntityMap=function(){return this._collectedEntityMap},t.prototype.getCollectedEntityAmount=function(t){return this._collectedEntityMap.hasOwnProperty(t)?this._collectedEntityMap[t]:0},t.prototype.setCollectedEntityAmount=function(t,e){t!=m.CollectionID.None&&(e=Math.max(e,0),this._collectedEntityMap[t]=e)},t.prototype.getCollectedSupplyMap=function(){return this._collectedSupplyMap},t.prototype.getCollectedSupplyAmount=function(t){return this._collectedSupplyMap.hasOwnProperty(t)?this._collectedSupplyMap[t]:0},t.prototype.setCollectedSupplyAmount=function(t,e){t!=u.GameCurrencyType.NoneType&&(e=Math.max(e,0),this._collectedSupplyMap[t]=e)},t.prototype.getRecordedSupplyInfo=function(t){return this._recordedSupplyMap[t]},t.prototype.getPowerAmount=function(t){return this._collectedEnergyMap.hasOwnProperty(t)?this._collectedEnergyMap[t]:0},t.prototype.setPowerAmount=function(t,e){t!=I.PowerID.None&&(e=Math.max(e,0),this._collectedEnergyMap[t]=e)},t.prototype.getPuppyTotalStepCount=function(){return this._puppyStepCount},t.prototype.getPuppyLeftSteps=function(){return this._puppyStepCount-this.getPowerAmount(I.PowerID.PuppyMovedStep)},t.prototype.getDropEntityMap=function(){return this._dropEntityMap},t.prototype.getLimitedEntityMap=function(){return this._limitEntityMap},t.prototype.getLimitedGroupMap=function(){return this._limitGroupMap},t.prototype.resetDropConfig=function(){this.initDropEntities("red|green|blue|yellow|orange|purple","100|100|100|100|100|100"),y.default.clearObject(this._limitEntityMap),y.default.clearObject(this._limitGroupMap)},t.prototype.getLaunchGearMap=function(){return this._prewarGear},t.prototype.clearLaunchGears=function(){y.default.clearObject(this._prewarGear)},t.prototype.setPrewarGearAmount=function(t,e){t!=u.GameCurrencyType.NoneType&&(this._prewarGear[t]=Math.max(0,e))},t.prototype.getPrewarGearAmount=function(t){var e=0;return this._prewarGear.hasOwnProperty(t)&&(e=this._prewarGear[t]),e},t.prototype.getAvailableGearItemAmount=function(t){var e=0;return this._availableGear.hasOwnProperty(e)&&(e=this._availableGear[t]),e},t.prototype.setAvailableGearItemAmount=function(t,e){this._availableGear[t]=e},t.prototype.getUsedGearMap=function(){return this._usedGear},t.prototype.setUsedGearAmount=function(t,e){t!=u.GameCurrencyType.NoneType&&(this._usedGear[t]=Math.max(0,e))},t.prototype.getUsedGearAmount=function(t){var e=0;return this._usedGear.hasOwnProperty(t)&&(e=this._usedGear[t]),e},t.prototype.getLimitedGearMap=function(){return this._limitedGear},t.prototype.setLimitedGearAmount=function(t,e){t!=u.GameCurrencyType.NoneType&&(this._limitedGear[t]=e)},t.prototype.getLimitedGearAmount=function(t){var e=-1;return this._limitedGear.hasOwnProperty(t)&&(e=this._limitedGear[t]),e},t.prototype.getEventTargets=function(){return this._eventTargets},t.prototype.setEventTargets=function(t){this._eventTargets=t},t.prototype.getLevel=function(){return this._level},t.prototype.resetTick=function(){this._totalTime=0},t.prototype.tick=function(t){this._totalTime+=t},t.prototype.getTick=function(){return this._totalTime},t.prototype.hadOperated=function(){return!y.default.isEmptyObject(this._usedGear)||this.getPowerAmount(I.PowerID.UsedSwap)>0},t.prototype.getShareForMoreStepTimes=function(){return this._shareForMoreStepTimes},t.prototype.setShareForMoreStepTimes=function(t){this._shareForMoreStepTimes=t},t.prototype.getEndUIData=function(){return this._endUIData},t.prototype.setEndUIData=function(t){this._endUIData=t},t.prototype.clear=function(){this._mapIndex=0,y.default.clearArray(this._mapDatas),this._dropEntityMap={},this._targetMap={},this._limitEntityMap={},this._collectedEntityMap={},this._collectedEnergyMap={}},t.prototype.initMapJsonsWithMapNames=function(t){for(var e=0,o=t.split("|");e<o.length;e++){var n=o[e],i={};if(p.default.IsDebug&&p.default.DebugMatchType!=p.DebugMatchType.None)i=cc.loader.getRes("maps/"+n).json;else{var r=(new l.CFGTripleMap).getMapDataByMapId(n);i=JSON.parse(r)}this._mapDatas.push(i)}},t.prototype.initTargetEntities=function(e,o){this._targetMap=t.phraseTargetEntities(e,o)},t.prototype.initDropEntities=function(e,o){this._dropEntityMap=t.phraseDropEntities(e,o)},t.prototype.initLimitEntities=function(e,o){this._limitEntityMap=t.phraseLimitEntities(e,o),this._limitGroupMap=t.phraseLimitGroup(e,o)},t.prototype.initStarScores=function(t){if(t){this._startScores.length=0;for(var e=0,o=t.split("|");e<o.length;e++){var n=o[e];this._startScores.push(Number(n))}}},t.prototype.initCompleteReward=function(e,o){this._completeReward=t.phraseCompleteReward(e,o)},t.prototype.initTargetGrass=function(t){for(var e=0,o=0,n=t;o<n.length;o++){for(var i=n[o],r=new h.default(i),a=r.getTileLayerWithName(C.default.CELLS_LAYER_KEY),s=r.getMapSize(),c=0;c<s.width;c++)for(var l=0;l<s.height;l++){var p=a[l*s.width+c],u=r.getPropertieFromGID(p),y=!0;for(var f in u){y=!1;break}if(!y){var d=Number(u.Kind);_.default.getInstance().needLayoutGrassFromKindID(d)&&e++}}a=r.getTileLayerWithName(C.default.CONVEYERS_LAYER_KEY),s=r.getMapSize();for(c=0;c<s.width;c++)for(l=0;l<s.height;l++){p=a[l*s.width+c],u=r.getPropertieFromGID(p),y=!0;for(var f in u){y=!1;break}if(!y){d=Number(u.Kind);_.default.getInstance().needLayoutGrassFromKindID(d)&&e++}}a=r.getTileLayerWithName(C.default.FLOORS_LAYER_KEY),s=r.getMapSize();for(c=0;c<s.width;c++)for(l=0;l<s.height;l++){p=a[l*s.width+c],u=r.getPropertieFromGID(p),y=!0;for(var f in u){y=!1;break}if(!y)(d=Number(u.Kind))==Number(g.KindID.FloorGrass)&&e--}}this.setTargetAmount(m.CollectionID.FloorGrass,e)},t.prototype.initTargetPopsicle=function(t){for(var e=0,o=t;e<o.length;e++)for(var n=o[e],i=new h.default(n),r=C.default.POPSICLES_LAYER_KEY,a=0,s=i.getObjectLayerWithName(r);a<s.length;a++){var c=s[a],l=C.default.CFG_POPSICLE_VALUE_NORMAL;c.properties.hasOwnProperty(C.default.CFG_POPSICLE_KEY_TYPE)&&(l=c.properties[C.default.CFG_POPSICLE_KEY_TYPE]);var p=m.CollectionID.PopsicleNormal;l==C.default.CFG_POPSICLE_VALUE_LINE?p=m.CollectionID.PopsicleLine:l==C.default.CFG_POPSICLE_VALUE_BOOM&&(p=m.CollectionID.PopsicleBoom),this.setTargetAmount(p,this.getTargetAmount(p)+1)}},t.prototype.initTargetPath=function(t){this._puppyStepCount=0;for(var e=0,o=0,n=t;o<n.length;o++){for(var i=n[o],r=h.default.create(i),a=r.getMapSize(),s=r.getTileLayerWithName(C.default.FLOORS_LAYER_KEY),c=0;c<a.width;c++)for(var l=0;l<a.height;l++){var p=s[l*a.width+c],u=r.getPropertieFromGID(p);if(!y.default.isEmptyObject(u))(f=u.Kind)!=g.KindID.FloorRoadLineVU&&f!=g.KindID.FloorRoadLineHR&&f!=g.KindID.FloorRoadLineVD&&f!=g.KindID.FloorRoadLineHL&&f!=g.KindID.FloorRoadTurnLdD&&f!=g.KindID.FloorRoadTurnLuL&&f!=g.KindID.FloorRoadTurnRuU&&f!=g.KindID.FloorRoadTurnRdR&&f!=g.KindID.FloorRoadTurnRdD&&f!=g.KindID.FloorRoadTurnRuR&&f!=g.KindID.FloorRoadTurnLuU&&f!=g.KindID.FloorRoadTurnLdL||e++}var m=r.getTileLayerWithName(C.default.ITEMS_LAYER_KEY);for(c=0;c<a.width;c++)for(l=0;l<a.height;l++){var f;p=m[l*a.width+c],u=r.getPropertieFromGID(p);if(!y.default.isEmptyObject(u))(f=u.Kind)!=g.KindID.ItemDogHouse&&f!=g.KindID.ItemBalloon||e--}}this._puppyStepCount=e},t.phraseTargetEntities=function(t,e){var o={};if(t&&e)for(var n=t.split("|"),i=e.split("|"),r=n.length,a=i.length,s=0;s<r&&!(a<=s);s++){var c=n[s],l=_.default.getInstance().getCollectionIDFromString(c);l!=m.CollectionID.None&&(o[l]=Number(i[s]))}return o},t.phraseDropEntities=function(t,e){var o={};if(t&&e){for(var n=t.split("|"),i=e.split("|"),r=n.length,a=i.length,s=0;s<r&&!(a<=s);s++){var c=n[s];(y=_.default.getInstance().getEntityIDFromString(c))!=d.EntityID.None&&(o[y]=100*Number(i[s]))}for(var l=0,p=0,u=[d.EntityID.ItemNormalRed,d.EntityID.ItemNormalGreen,d.EntityID.ItemNormalBlue,d.EntityID.ItemNormalYellow,d.EntityID.ItemNormalOrange,d.EntityID.ItemNormalPurple];p<u.length;p++){var y=u[p];o.hasOwnProperty(y)&&(l+=o[y]);o[y]}for(s=0;s<r&&!(a<=s);s++){c=n[s];var h=_.default.getInstance().getEntityGroupIDFromString(c);if(h!=f.EntityGroupID.None)for(var m=0,g=_.default.getInstance().getEntityIDsFromEntityGroupID(h);m<g.length;m++){y=g[m];var I=_.default.getInstance().getCorrespondingNormlaEntityID(y);o.hasOwnProperty(I)&&(o[y]=100*Number(i[s])*(1*o[I]/l))}}}return o},t.phraseLimitEntities=function(t,e){var o={};if(t&&e)for(var n=t.split("|"),i=e.split("|"),r=n.length,a=i.length,s=0;s<r&&!(a<=s);s++){var c=n[s],l=_.default.getInstance().getEntityIDFromString(c);l!=d.EntityID.None&&(o[l]=Number(i[s]))}return o},t.phraseLimitGroup=function(t,e){var o={};if(t&&e)for(var n=t.split("|"),i=e.split("|"),r=n.length,a=i.length,s=0;s<r&&!(a<=s);s++){var c=n[s],l=_.default.getInstance().getEntityGroupIDFromString(c);l!=f.EntityGroupID.None&&(o[l]=Number(i[s]))}return o},t.phraseCompleteReward=function(t,e){var o={};if(t&&e)for(var n=t.split("|"),i=e.split("|"),r=n.length,a=i.length,s=0;s<r&&!(a<=s);s++){var c=n[s],l=_.default.getInstance().getItemIDFromName(c);l!=u.GameCurrencyType.NoneType&&(o[l]=Number(i[s]))}return o},t}();o.default=v,cc._RF.pop()},{"../../../config/CFGTripleLevel":"CFGTripleLevel","../../../config/CFGTripleLevelGrass":"CFGTripleLevelGrass","../../../config/CFGTripleLevelOrder":"CFGTripleLevelOrder","../../../config/CFGTripleLevelPath":"CFGTripleLevelPath","../../../config/CFGTripleLevelPopsicles":"CFGTripleLevelPopsicles","../../../config/CFGTripleMap":"CFGTripleMap","../../../define/GameConfig":"GameConfig","../../../define/GameCurrencyType":"GameCurrencyType","../../../extend/utils/GameMath":"GameMath","../../../extend/utils/TMXJsonPhraser":"TMXJsonPhraser","../defines/CollectionID":"CollectionID","../defines/EntityGroupID":"EntityGroupID","../defines/EntityID":"EntityID","../defines/IdentifierManager":"IdentifierManager","../defines/KindID":"KindID","../defines/PowerID":"PowerID","../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../userinterface/GameResultPanel/GameResultBasePanel":"GameResultBasePanel"}],GameTargetBase:[function(t,e,o){"use strict";var n;cc._RF.push(e,"cd002y/f9NNApIDqX1Q+sQC","GameTargetBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameTargetBase=o.GameTargetType=void 0,function(t){t[t.None=0]="None",t[t.Single=1]="Single",t[t.Group=2]="Group"}(n=o.GameTargetType||(o.GameTargetType={}));var i=function(){function t(){this.type=n.None,this.targetAmount=0}return t.prototype.getType=function(){return this.type},t.prototype.getTargetAmount=function(){return this.targetAmount},t.prototype.setTargetAmount=function(t){return this.targetAmount=t},t.prototype.initWithType=function(t){this.type=t},t.prototype.getCollectionIDs=function(){return[]},t.prototype.getIconFrameName=function(){return""},t}();o.GameTargetBase=i,cc._RF.pop()},{}],GameTargetSingle:[function(t,e,o){"use strict";cc._RF.push(e,"6de9bAkjqZIVoWJtjibWUQc","GameTargetSingle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GameTargetBase"),r=t("../../defines/CollectionID"),a=t("../../defines/IdentifierManager"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectionID=r.CollectionID.None,e}return n(e,t),e.create=function(t,o){var n=new e;return n.init(t,o),n},e.prototype.init=function(e,o){t.prototype.initWithType.call(this,i.GameTargetType.Single),this.collectionID=e,this.setTargetAmount(o)},e.prototype.getCollectionIDs=function(){return[this.collectionID]},e.prototype.getIconFrameName=function(){return a.default.getInstance().getFrameNameFromCollectionID(this.collectionID)},e}(i.GameTargetBase);o.default=s,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/IdentifierManager":"IdentifierManager","./GameTargetBase":"GameTargetBase"}],GearBar:[function(t,e,o){"use strict";cc._RF.push(e,"8ebb9IAwohLDYC/Q3f+EDKs","GearBar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GearBarData=o.GearBarType=o.GearBarState=void 0;var r,a,s=t("../../../define/GameCurrencyType"),c=t("../defines/PowerID"),l=t("../GameSceneBase"),p=t("./GearItem");(function(t){t[t.None=0]="None",t[t.Down=1]="Down",t[t.Up=2]="Up"})(r=o.GearBarState||(o.GearBarState={})),function(t){t[t.Normal=0]="Normal",t[t.Drawer=1]="Drawer"}(a=o.GearBarType||(o.GearBarType={}));var u=function(){function t(){this.type=a.Normal}return t.createWithData=function(e){var o=a.Normal;if(e&&e.hasOwnProperty("BT"))switch(e.BT){case 0:o=a.Normal;break;case 3:o=a.Drawer}return t.create(o)},t.create=function(e){var o=new t;return o.type=e,o},t}();o.GearBarData=u;var y=cc._decorator,h=y.ccclass,m=y.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemsNode=[],e.instroductionLabelDown=null,e.drawUpButton=null,e.drawUpButtonFrame=null,e.instroductionLabelUp=null,e.fallDownButton=null,e.fallDownLayer=null,e.GearBarRoot=null,e.pullUpCover=null,e._gameScene=null,e._gearItems=[],e._lastFocusID=s.GameCurrencyType.NoneType,e._state=r.Down,e._type=a.Normal,e._pullUpHeight=o.AdBannerDefaultHeight,e._fallDownHeight=0,e._lastLeftStepCount=0,e._hasShownAdBanner=!1,e}var o;return n(e,t),o=e,e.prototype.getAvailableAmount=function(t){return this._gameScene.getAvailableGearItemAmount(t)},e.prototype.drawUp=function(t){if(void 0===t&&(t=!1),t){var e=cc.moveTo(.15,cc.v2(0,this._pullUpHeight));e.setTag(1001),this.GearBarRoot.stopActionByTag(1001),this.GearBarRoot.runAction(e),this._gameScene.getPowerAmount(c.PowerID.AvailableSwap)<=5&&this.playAlertGeatItemsAnimation(.15)}else this.GearBarRoot.setPosition(cc.v2(0,this._pullUpHeight))},e.prototype.fallDown=function(t){if(void 0===t&&(t=!1),t){var e=cc.moveTo(.15,cc.v2(0,this._fallDownHeight));e.setTag(1001),this.GearBarRoot.stopActionByTag(1001),this.GearBarRoot.runAction(e)}else this.GearBarRoot.setPosition(cc.v2(0,this._fallDownHeight))},e.prototype.playAlertGeatItemsAnimation=function(t){if(!this._gameScene.hasShowCompleteBanner())for(var e=0;e<this._gearItems.length;e++){this._gearItems[e].playAlertAnimation(.4*e+t)}},e.prototype.getState=function(){return this._state},e.prototype.setState=function(t,e){void 0===e&&(e=!1);this._state;switch(this._state=t,this._state){case r.Down:this._type==a.Drawer?this.drawUpButtonFrame.active=this._hasShownAdBanner:this.drawUpButtonFrame.active=!1,this.fallDownButton.active=!1,this.fallDownLayer.active=!1,this.instroductionLabelUp.node.active=!0,this.instroductionLabelDown.node.active=!1,e&&this._state,this.fallDown(e);break;case r.Up:this.drawUpButtonFrame.active=!1,this.fallDownButton.active=!0,this.fallDownLayer.active=!0,this.instroductionLabelUp.node.active=!1,this.instroductionLabelDown.node.active=!0,e&&this._state,this.drawUp(e)}},e.prototype.getType=function(){return this._type},e.prototype.setType=function(t){switch(this._type=t,this._type){case a.Normal:this.setState(r.Down),this.drawUpButtonFrame.active=!1,this.instroductionLabelDown.node.active=!0,this.instroductionLabelUp.node.active=!1;var e=this._gameScene.gridFrame.getComponent(cc.Widget);e&&(e.bottom=o.GearBarDefaultHeight),this.pullUpCover.active=!1}},e.prototype.setData=function(t){this.setType(t.type)},e.prototype.focusItemWithGearID=function(t){switch(t){case s.GameCurrencyType.AidHammer:case s.GameCurrencyType.AidBomb:case s.GameCurrencyType.AidSwap:}this.instroductionLabelUp,this.instroductionLabelDown,t==s.GameCurrencyType.NoneType?this._lastFocusID!=s.GameCurrencyType.NoneType&&(this._gameScene.backgroundMask&&this._gameScene.backgroundMask.runAction(cc.fadeTo(.25,0).easing(cc.easeIn(2))),this._gameScene.cancelGearLayer&&(this._gameScene.cancelGearLayer.active=!1),this.instroductionLabelUp&&(this.instroductionLabelUp.node.opacity=0),this.instroductionLabelDown&&(this.instroductionLabelDown.node.opacity=0)):this._lastFocusID==s.GameCurrencyType.NoneType&&(this._gameScene.backgroundMask&&this._gameScene.backgroundMask.runAction(cc.fadeTo(.25,150).easing(cc.easeIn(2))),this._gameScene.cancelGearLayer&&(this._gameScene.cancelGearLayer.active=!0),this.instroductionLabelUp&&(this.instroductionLabelUp.node.opacity=255),this.instroductionLabelDown&&(this.instroductionLabelDown.node.opacity=255));for(var e=0,o=this._gearItems;e<o.length;e++){var n=o[e];n.getItemID()==t?n.node.zIndex=2:n.node.zIndex=0}switch(this._lastFocusID=t,this._type){case a.Drawer:this.setState(r.Down,!0)}},e.prototype.onItemTabbed=function(t){this._gameScene.selectGear(t.getItemID())},e.prototype.updateGears=function(){for(var t=0,e=this._gearItems;t<e.length;t++){var o=e[t];o.updataAmount(),o.setLimitedAmount(this._gameScene.getLimitedGearAmount(o.getItemID())),o.setUsedAmount(this._gameScene.getUsedGearAmount(o.getItemID()))}var n=this._gameScene.getPowerAmount(c.PowerID.AvailableSwap);n<=5&&this._lastLeftStepCount!=n&&(this.playAlertAnimation(),this.playAlertGeatItemsAnimation(0)),this._lastLeftStepCount=n},e.prototype.getItemWithGearID=function(t){for(var e=null,o=0,n=this._gearItems;o<n.length;o++){var i=n[o];if(i.getItemID()==t){e=i;break}}return e},e.prototype.getGearIconWorldPos=function(t){var e=this.getItemWithGearID(t);return e?e.node.parent.convertToWorldSpaceAR(e.node.position):cc.Vec2.ZERO},e.prototype.playAlertAnimation=function(){if(!this._gameScene.hasShowCompleteBanner()){for(var t=!1,e=0,o=this._gearItems;e<o.length;e++){if(o[e].getIsAvailable()){t=!0;break}}if(t){var n=this.getComponent(cc.Animation);if(n){var i=n.currentClip;if(i&&"alert1"==i.name)return;n.play("alert1")}}}},e.prototype.onDrawUpButtonTabbed=function(t){this.setState(r.Up,!0)},e.prototype.onFallDownButtonTabbed=function(t){this.setState(r.Down,!0)},e.prototype.onLoad=function(){var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(l.default));for(var e=[s.GameCurrencyType.AidHammer,s.GameCurrencyType.AidBomb,s.GameCurrencyType.AidSwap],o=0;o<this.itemsNode.length;o++){var n=this.itemsNode[o].getComponent(p.default);n.setItemID(e[o]),n.setGearBar(this),this._gearItems[o]=n}this.instroductionLabelUp.node.opacity=0,this.instroductionLabelDown.node.opacity=0,this.drawUpButton.on("touchend",this.onDrawUpButtonTabbed,this),this.fallDownButton.on("touchend",this.onFallDownButtonTabbed,this),this.fallDownLayer.on("touchend",this.onFallDownButtonTabbed,this),this.setType(a.Normal),this.setState(r.Down),this.pullUpCover.active=!1,this.schedule(this.updateGears,1)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.itemsNode=null,this._gameScene=null,this._gearItems=null},e.AdBannerDefaultHeight=250,e.GearBarDefaultHeight=170,i([m([cc.Node])],e.prototype,"itemsNode",void 0),i([m(cc.Label)],e.prototype,"instroductionLabelDown",void 0),i([m(cc.Node)],e.prototype,"drawUpButton",void 0),i([m(cc.Node)],e.prototype,"drawUpButtonFrame",void 0),i([m(cc.Label)],e.prototype,"instroductionLabelUp",void 0),i([m(cc.Node)],e.prototype,"fallDownButton",void 0),i([m(cc.Node)],e.prototype,"fallDownLayer",void 0),i([m(cc.Node)],e.prototype,"GearBarRoot",void 0),i([m(cc.Node)],e.prototype,"pullUpCover",void 0),e=o=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../define/GameCurrencyType":"GameCurrencyType","../GameSceneBase":"GameSceneBase","../defines/PowerID":"PowerID","./GearItem":"GearItem"}],GearID:[function(t,e,o){"use strict";cc._RF.push(e,"58064kO/epD5YK5C6tHYh7i","GearID"),Object.defineProperty(o,"__esModule",{value:!0}),o.GearID=void 0,function(t){t[t.None=0]="None"}(o.GearID||(o.GearID={})),cc._RF.pop()},{}],GearItem:[function(t,e,o){"use strict";cc._RF.push(e,"c986awDkvdKZ4Y5F0cTOUwH","GearItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GearItemState=void 0;var r,a=t("../../../define/GameCurrencyType"),s=t("../../../component/UISpriteExt"),c=t("../../../component/UINodeIdentifier"),l=t("../../../extend/identify/nodeIdentify/IdentifyNodeManager"),p=cc._decorator,u=p.ccclass,y=p.property;(function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Disable=2]="Disable"})(r=o.GearItemState||(o.GearItemState={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amountFramePos1=null,e.amountFramePos2=null,e.itemRoot=null,e.icon=null,e.normalAmountRoot=null,e.normalAmountFrame=null,e.normalAmountLabel=null,e.buyButton=null,e.timeLimitedAmountRoot=null,e.timeLimitedAmountFrame=null,e.timeLimitedAmountLabel=null,e.timeLimitedCountDownLabel=null,e.lockButton=null,e.lockIcon=null,e.identifyComponent=null,e._isLocked=!1,e._normalItemID=a.GameCurrencyType.NoneType,e._usedAmount=0,e._limitedAmount=0,e._state=r.Normal,e._gearBar=null,e}return n(e,t),e.prototype.getIsLocked=function(){return this._isLocked},e.prototype.setIsLocked=function(t){this._isLocked=t,this.lockIcon.active=this._isLocked,this.itemRoot.active=!this._isLocked},e.prototype.getItemID=function(){return this._normalItemID},e.prototype.setItemID=function(t){this._normalItemID=t;var e="";switch(this._normalItemID){case a.GameCurrencyType.AidHammer:this.identifyComponent&&this.identifyComponent.setIdentifier(l.NodeID.MatchScene_HammerButton),e="match_scene/texture/userInterface/match_hammer";break;case a.GameCurrencyType.AidBomb:this.identifyComponent&&this.identifyComponent.setIdentifier(l.NodeID.MatchScene_BombButton),e="match_scene/texture/userInterface/match_bomb";break;case a.GameCurrencyType.AidSwap:this.identifyComponent&&this.identifyComponent.setIdentifier(l.NodeID.MatchScene_SwapButton),e="match_scene/texture/userInterface/match_swap"}var o=this.icon.getComponent(s.default);o&&(o.src=e),this.updataAmount(),this.setIsLocked(!1)},e.prototype.updataAmount=function(){this._gearBar&&(this.timeLimitedAmountRoot.active=!1,this.normalAmountRoot.active=!1)},e.prototype.getUsedAmount=function(){return this._usedAmount},e.prototype.setUsedAmount=function(t){this._usedAmount=t,this.updateGearState()},e.prototype.getLimitedAmount=function(){return this._limitedAmount},e.prototype.setLimitedAmount=function(t){this._limitedAmount=t,this.updateGearState()},e.prototype.getState=function(){return this._state},e.prototype.setState=function(t){switch(this._state=t,this._state){case r.Normal:this.icon.node.opacity=255;break;case r.Disable:this.icon.node.opacity=128}},e.prototype.getIsAvailable=function(){return!this._isLocked&&this._state==r.Normal},e.prototype.updateGearState=function(){var t=r.Normal;this._limitedAmount>=0&&this._usedAmount>=this._limitedAmount&&(t=r.Disable),this.setState(t)},e.prototype.onIconTabbed=function(t){this._gearBar.onItemTabbed(this)},e.prototype.onBuyTabbed=function(t){this._gearBar.onItemTabbed(this)},e.prototype.setGearBar=function(t){this._gearBar=t},e.prototype.getGearBar=function(){return this._gearBar},e.prototype.playAlertAnimation=function(t){switch(this._state){case r.Normal:var e=this.getComponent(cc.Animation);e&&e.play("alert")}},e.prototype.onLoad=function(){this.icon.node.on("touchend",this.onIconTabbed,this),this.buyButton.on("touchend",this.onBuyTabbed,this)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.icon=null,this.normalAmountLabel=null,this.itemRoot=null,this.buyButton=null,this.lockButton=null,this.identifyComponent=null,this.lockIcon=null,this._gearBar=null},i([y(cc.Node)],e.prototype,"amountFramePos1",void 0),i([y(cc.Node)],e.prototype,"amountFramePos2",void 0),i([y(cc.Node)],e.prototype,"itemRoot",void 0),i([y(cc.Sprite)],e.prototype,"icon",void 0),i([y(cc.Node)],e.prototype,"normalAmountRoot",void 0),i([y(cc.Node)],e.prototype,"normalAmountFrame",void 0),i([y(cc.Label)],e.prototype,"normalAmountLabel",void 0),i([y(cc.Node)],e.prototype,"buyButton",void 0),i([y(cc.Node)],e.prototype,"timeLimitedAmountRoot",void 0),i([y(cc.Node)],e.prototype,"timeLimitedAmountFrame",void 0),i([y(cc.Label)],e.prototype,"timeLimitedAmountLabel",void 0),i([y(cc.Label)],e.prototype,"timeLimitedCountDownLabel",void 0),i([y(cc.Node)],e.prototype,"lockButton",void 0),i([y(cc.Node)],e.prototype,"lockIcon",void 0),i([y(c.default)],e.prototype,"identifyComponent",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../component/UINodeIdentifier":"UINodeIdentifier","../../../component/UISpriteExt":"UISpriteExt","../../../define/GameCurrencyType":"GameCurrencyType","../../../extend/identify/nodeIdentify/IdentifyNodeManager":"IdentifyNodeManager"}],GridBase:[function(t,e,o){"use strict";cc._RF.push(e,"3186ePNME5EJoOkg/UI5Hmr","GridBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GridMode=void 0;var r,a=t("../../../component/RectangleClipper"),s=t("../../../define/GameCurrencyType"),c=t("../../../extend/utils/GameMath"),l=t("../commond/GridCommand"),p=t("../commond/GridCommandPair"),u=t("../commond/Heap"),y=t("../defines/CollectionID"),h=t("../defines/EntityGroupID"),m=t("../defines/EntityID"),f=t("../defines/IdentifierManager"),d=t("../defines/PowerID"),_=t("../entity/cell/CellBase"),g=t("../entity/floor/FloorBase"),I=t("../entity/flyer/FlyerAnimation"),C=t("../entity/flyer/FlyerChargeEntity"),P=t("../entity/flyer/FlyerCollectedEntity"),D=t("../entity/flyer/FlyerCollectedSupply"),v=t("../entity/flyer/FlyerMoreStep"),b=t("../entity/flyer/FlyerScore"),E=t("../entity/flyer/FlyerScoreLabel"),B=t("../entity/item/color/bomb/ItemBombBase"),T=t("../entity/item/ItemBase"),F=t("../entity/item/ItemFactory"),M=t("../entity/item/state/ItemStateGenerate"),G=t("../entity/item/state/ItemStateReplace"),S=t("../entity/parasite/ParasiteBase"),R=t("../event/EntityEventBase"),w=t("./state/concreteState/GridStateAppear"),O=t("./state/concreteState/GridStateCreate"),A=t("./state/concreteState/GridStateCrossBomb"),N=t("./state/concreteState/GridStateDisappear"),L=t("./state/concreteState/GridStateForceClean"),k=t("./state/concreteState/GridStateForceSwap"),x=t("./state/concreteState/GridStateLaunchGears"),H=t("./state/concreteState/GridStateNull"),j=t("./state/concreteState/GridStateSwapNeighbour"),W=t("./state/GridStateMachine");(function(t){t[t.Normal=0]="Normal",t[t.ForceClean=1]="ForceClean",t[t.ForceSwap=2]="ForceSwap",t[t.CrossBomb=3]="CrossBomb"})(r=o.GridMode||(o.GridMode={}));var U=cc._decorator,Y=U.ccclass,K=U.property,V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._frameLayer=null,e._cellLayer=null,e._popsicleLayer=null,e._floorLayer=null,e._rugLayer=null,e._itemLayer=null,e._parasiteLayer=null,e._fenceLayer=null,e._markerLayer=null,e._puppyLayer=null,e._flyerLayer=null,e._effectLayer=null,e._usePriorityCommandQueue=!0,e._priorityCommandQueue=null,e.conveyerLayer=null,e._stateMachine=null,e._gridSize=cc.Size.ZERO,e._cellSize=cc.Size.ZERO,e._mode=r.Normal,e._framesMap={},e._cellsMap={},e._popsiclesMap={},e._floorsMap={},e._rugsMap={},e._itemsMap={},e._parasitesMap={},e._fencesMap={},e._markersMap={},e._obstructs=[],e._flyerObstructs=[],e._attackePositions=[],e._commandPairs=[],e._nextCommandIndex=0,e._insertNewCommand=!1,e._gameScene=null,e._lastTouchLogicalPos=cc.Vec2.ZERO,e}var o;return n(e,t),o=e,e.create=function(t,e,n){var i=cc.loader.getRes("match_scene/prefab/grid/GridBase",cc.Prefab);if(i){var r=cc.instantiate(i);if(r){var a=r.getComponent(o);if(a)return a.init(t,e,n),a}}return null},e.prototype.init=function(t,e,n){this._gameScene=t,this._frameLayer=new cc.Node,this.node.addChild(this._frameLayer,o.ZORDER_FRAME_BOTTOM),this._cellLayer=new cc.Node,this.node.addChild(this._cellLayer,o.ZORDER_CELL_BOTTOM),this._popsicleLayer=new cc.Node,this.node.addChild(this._popsicleLayer,o.ZORDER_POPSICLES_BOTTOM),this._floorLayer=new cc.Node,this.node.addChild(this._floorLayer,o.ZORDER_FLOOR_BOTTOM),this._rugLayer=new cc.Node,this.node.addChild(this._rugLayer,o.ZORDER_RUG_BOTTOM),this._itemLayer=new cc.Node,this.node.addChild(this._itemLayer,o.ZORDER_ITEM_BOTTOM),this._parasiteLayer=new cc.Node,this.node.addChild(this._parasiteLayer,o.ZORDER_PARASITE_BOTTOM),this._fenceLayer=new cc.Node,this.node.addChild(this._fenceLayer,o.ZORDER_FENCE_BOTTOM),this._markerLayer=new cc.Node,this.node.addChild(this._markerLayer,o.ZORDER_MARKER_BOTTOM),this._puppyLayer=new cc.Node,this.node.addChild(this._puppyLayer,o.ZORDER_PUPPY_BOTTOM),this._flyerLayer=new cc.Node,this.node.addChild(this._flyerLayer,o.ZORDER_FLYER_BOTTOM),this._effectLayer=new cc.Node,this.node.addChild(this._effectLayer,o.ZORDER_EFFECT),this.conveyerLayer.zIndex=o.ZORDER_CONVEYERS_BOTTOM;this._priorityCommandQueue=new u.default(function(t,e){return t.delayTime==e.delayTime?t.command.getPriority()==e.command.getPriority()?t.index<e.index:t.command.getPriority()<e.command.getPriority():t.delayTime<e.delayTime},function(t,e){return!(t.command.type!=l.GridCommandType.MatchClean||t.command.type!=e.command.type||!e.targetPos.equals(t.targetPos))}),this._stateMachine=W.default.create(this),this.setCurrentState(O.default.createState(e,n)),this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this),this.node.on(R.default.ENTITY_EVENT_KEY,this.onEvent,this)},e.prototype.getConveyerLayer=function(){return this.conveyerLayer},e.prototype.setConveyerLayerVisiblePos=function(t){var e=this.conveyerLayer.getComponent(a.default);if(e){for(var o=[],n=0,i=t;n<i.length;n++){var r=i[n],s=this.getPixelPosFromLogicalPos(r),c=this.getCellSize(),l=cc.rect(s.x-.5*c.width,s.y-.5*c.height,c.width,c.height);o.push(l)}e.setCropRectangles(o)}},e.prototype.getRandomEntityID=function(t,e,o,n){void 0===n&&(n=!1);var i=m.EntityID.None,r={},a={},s=this.getItemsMap();for(var l in s){var p=1,u=r[M=s[l].getEntityID()];u&&(p=u+1),r[M]=p,p=1,(u=a[C=f.default.getInstance().getEntityGroupIDFromEntityID(M)])&&(p=u+1),a[C]=p}var d={};for(var l in t)d[l]=t[l];for(var l in e){var _=e[l];(g=r[l])&&g>=_&&delete d[l]}for(var l in o){var g,I=o[l];if((g=a[l])&&g>=I)for(var C=Number(l),P=0,D=E=f.default.getInstance().getEntityIDsFromEntityGroupID(C);P<D.length;P++){delete d[M=D[P]]}}if(this.getTargetAmount(y.CollectionID.ItemBone)>0){var v=this.getCollectedEntityAmount(y.CollectionID.ItemBone);if(r.hasOwnProperty(m.EntityID.ItemBone)&&(v+=r[m.EntityID.ItemBone]),v>=this.getTargetAmount(y.CollectionID.ItemBone))delete d[m.EntityID.ItemBone];else{var b=0;r.hasOwnProperty(m.EntityID.ItemBone)&&(b=r[m.EntityID.ItemBone]),b<=0&&d.hasOwnProperty(m.EntityID.ItemBone)&&((d={})[m.EntityID.ItemBone]=100)}}if(this.getTargetAmount(y.CollectionID.ItemPuppy)>0&&this.getCollectedEntityAmount(y.CollectionID.ItemPuppy)<this.getTargetAmount(y.CollectionID.ItemPuppy)){for(var E,B=0,T=0,F=E=f.default.getInstance().getEntityIDsFromEntityGroupID(h.EntityGroupID.ItemPaw);T<F.length;T++){var M=F[T];r.hasOwnProperty(M)&&(B+=r[M])}if(B<=0){for(var G=[],S=0,R=E;S<R.length;S++){M=R[S];d.hasOwnProperty(M)&&G.push(M)}if(G.length>0){d={};for(var w=0,O=G;w<O.length;w++){d[O[w]]=100}}}}if(this.getTargetAmount(y.CollectionID.RugJam)>0){var A=0;for(var l in this._rugsMap){this._rugsMap[l].getEntityID()==m.EntityID.RugJam&&(A+=1)}r.hasOwnProperty(m.EntityID.ItemJamBottle)&&(A+=9*r[m.EntityID.ItemJamBottle]),this.getCollectedEntityAmount(y.CollectionID.RugJam)+A>=this.getTargetAmount(y.CollectionID.RugJam)?delete d[m.EntityID.ItemJamBottle]:A<=0&&d.hasOwnProperty(m.EntityID.ItemJamBottle)&&((d={})[m.EntityID.ItemJamBottle]=100)}var N=0;for(var l in d){(Z=d[l])&&(N+=Z)}var L=c.default.randomInt(0,N);if(n){var k=0,x=0;for(var l in d){var H=d[l];(U=r[M=Number(l)])&&(k+=U),x+=H}var j={},W={};for(var l in d){H=d[l];var U=r[M=Number(l)];j[M]=U&&k>0?U/k:0,W[M]=H/x}var Y=0;for(var l in d){Y=Number(l);break}var K=0;for(var l in d){var V=W[l]-j[l];V>K&&(K=V,Y=Number(l))}i=Y}else{var z=0;for(var l in d){var Z;if((Z=d[l])&&(z+=Z)>=L){i=Number(l);break}}}return i},e.prototype.getGlobalRandomEntityID=function(){return this.getRandomEntityID(this.getDropEntityMap(),this.getLimitedEntityMap(),this.getLimitedGroupMap())},e.prototype.getCurrentState=function(){return this._stateMachine.getCurrentState()},e.prototype.setCurrentState=function(t){this._stateMachine.setCurrentState(t)},e.prototype.getGridSize=function(){return this._gridSize},e.prototype.setGridSize=function(t){this._gridSize=t},e.prototype.getCellSize=function(){return this._cellSize},e.prototype.setCellSize=function(t){this._cellSize=t},e.prototype.getMode=function(){return this._mode},e.prototype.setMode=function(t){this._mode=t,this._gameScene.setGridMode(t)},e.prototype.tryEnableMode=function(t){if(this._mode=t,this.getCurrentState().canChangeState())switch(t){case r.Normal:return this.setCurrentState(j.default.create()),!0;case r.ForceClean:return this.setCurrentState(L.default.create()),!0;case r.ForceSwap:return this.setCurrentState(k.default.create()),!0;case r.CrossBomb:return this.setCurrentState(A.default.create()),!0}return!1},e.prototype.getLogicalPosFromPixelPos=function(t){this.node.getContentSize();var e=cc.Vec2.ZERO,o=Math.floor((t.x-e.x)/this._cellSize.width),n=Math.floor((t.y-e.y)/this._cellSize.height);return cc.v2(o,n)},e.prototype.getPixelPosFromLogicalPos=function(t){var e=cc.v2(.5*this._cellSize.width,.5*this._cellSize.height);return cc.v2(e.x+t.x*this._cellSize.width,e.y+t.y*this._cellSize.height)},e.prototype.getBottomZOrder=function(t,e){var n=0;switch(t){case m.EntityType.Frame:n=o.ZORDER_FRAME_BOTTOM;break;case m.EntityType.Cell:n=o.ZORDER_CELL_BOTTOM;break;case m.EntityType.Popsicle:n=o.ZORDER_POPSICLES_BOTTOM;break;case m.EntityType.Floor:n=o.ZORDER_FLOOR_BOTTOM;break;case m.EntityType.Rug:n=o.ZORDER_RUG_BOTTOM;break;case m.EntityType.Item:n=o.ZORDER_ITEM_BOTTOM;break;case m.EntityType.Parasite:n=o.ZORDER_PARASITE_BOTTOM;break;case m.EntityType.Fences:n=o.ZORDER_FENCE_BOTTOM;break;case m.EntityType.Flyer:n=o.ZORDER_FLYER_BOTTOM;break;case m.EntityType.Marker:n=o.ZORDER_MARKER_BOTTOM}return n+(this._gridSize.height-e.y)*this._gridSize.width+(this._gridSize.width-e.x)},e.prototype.getBottomZOrderForEnity=function(t){return this.getBottomZOrder(t.getEntityType(),t.getLogicalPos())},e.prototype.getTopZOrder=function(t,e){var n=0;switch(t){case m.EntityType.Frame:n=o.ZORDER_FRAME_TOP;break;case m.EntityType.Cell:n=o.ZORDER_CELL_TOP;break;case m.EntityType.Popsicle:n=o.ZORDER_POPSICLES_TOP;break;case m.EntityType.Floor:n=o.ZORDER_FLOOR_TOP;break;case m.EntityType.Rug:n=o.ZORDER_RUG_TOP;break;case m.EntityType.Item:n=o.ZORDER_ITEM_TOP;break;case m.EntityType.Parasite:n=o.ZORDER_PARASITE_TOP;break;case m.EntityType.Fences:n=o.ZORDER_FENCE_TOP;break;case m.EntityType.Flyer:n=o.ZORDER_FLYER_TOP;break;case m.EntityType.Marker:n=o.ZORDER_MARKER_TOP}return n+(this._gridSize.height-e.y)*this._gridSize.width+(this._gridSize.width-e.x)},e.prototype.getTopZOrderForEnity=function(t){return this.getTopZOrder(t.getEntityType(),t.getLogicalPos())},e.prototype.getAvailableColors=function(){var t=[],e=this.getDropEntityMap();for(var o in e){var n=Number(o);if(n){var i=f.default.getInstance().getEntityColorWithEntityID(n);i!=m.EntityColor.None&&c.default.insertAsSet(t,i)}}return t},e.prototype.getEntityFromMapAtLogicalPos=function(t,e){return t[c.default.getStringFromVec2(e)]},e.prototype.removeEntityFromMapAtLogicalPos=function(t,e){var o=this.getEntityFromMapAtLogicalPos(t,e);if(o){for(var n=o.getOccupyArea(),i=0;i<n.size.height;i++)for(var r=0;r<n.size.width;r++){var a=cc.v2(r,i).add(n.origin);delete t[c.default.getStringFromVec2(a)]}o.node.removeFromParent()}},e.prototype.setEntityToMapAtLogicalPos=function(t,e,o,n){if(t){this.removeEntityFromMapAtLogicalPos(o,n);for(var i=t.getOccupyArea(),r=0;r<i.size.height;r++)for(var a=0;a<i.size.width;a++){var s=cc.v2(a,r).add(n);o[c.default.getStringFromVec2(s)]=t}t.node.removeFromParent(!1),e.addChild(t.node),t.setLogicalPos(n)}},e.prototype.shiftEntityToEffectLayer=function(t){t&&(t.node.parent=this._effectLayer)},e.prototype.getFrameAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._framesMap,t);return o&&(e=o),e},e.prototype.setFrameAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._frameLayer,this._framesMap,e)},e.prototype.removeFrameAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._framesMap,t)},e.prototype.getFramesMap=function(){return this._framesMap},e.prototype.getCellAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._cellsMap,t);return o&&(e=o),e},e.prototype.setCellAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._cellLayer,this._cellsMap,e)},e.prototype.removeCellAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._cellsMap,t)},e.prototype.getCellsMap=function(){return this._cellsMap},e.prototype.getPopsicleAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._popsiclesMap,t);return o&&(e=o),e},e.prototype.setPopsicleAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._popsicleLayer,this._popsiclesMap,e)},e.prototype.removePopsicleAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._popsiclesMap,t)},e.prototype.getPopsiclesMap=function(){return this._popsiclesMap},e.prototype.getFloorAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._floorsMap,t);return o&&(e=o),e},e.prototype.setFloorAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._floorLayer,this._floorsMap,e)},e.prototype.removeFloorAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._floorsMap,t)},e.prototype.getFloorsMap=function(){return this._floorsMap},e.prototype.isGrassFloorAtLogicalPos=function(t){var e=!1,o=this.getFloorAtLogicalPos(t);return o&&o.getEntityID()==m.EntityID.FloorGrass&&(e=!0),e},e.prototype.getRugAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._rugsMap,t);return o&&(e=o),e},e.prototype.setRugAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._rugLayer,this._rugsMap,e)},e.prototype.removeRugAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._rugsMap,t)},e.prototype.getRugsMap=function(){return this._rugsMap},e.prototype.getItemAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._itemsMap,t);return o&&(e=o),e},e.prototype.setItemAtLogicalPos=function(t,e){var o=this._itemLayer;t.getItemType()==T.ItemType.Puppy&&(o=this._puppyLayer),this.setEntityToMapAtLogicalPos(t,o,this._itemsMap,e)},e.prototype.removeItemAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._itemsMap,t)},e.prototype.swapItem=function(t,e){if(!t.equals(e)){var o=this.getItemAtLogicalPos(t),n=this.getItemAtLogicalPos(e);null==o&&null==n||(this.removeItemAtLogicalPos(t),this.removeItemAtLogicalPos(e),o&&this.setItemAtLogicalPos(o,e),n&&this.setItemAtLogicalPos(n,t))}},e.prototype.generateBomb=function(t,e,o,n){void 0===n&&(n=!1);var i=F.default.generateEffectBombItem(this,e,o);i&&(i.setPixelPos(t),i.setImmuneDamage(!0),this._itemLayer.addChild(i.node,this.getTopZOrder(i.getEntityType(),t)),n?i.setCurrentState(G.default.create(t)):i.setCurrentState(M.default.create(t)))},e.prototype.getItemsMap=function(){return this._itemsMap},e.prototype.getParasiteAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._parasitesMap,t);return o&&(e=o),e},e.prototype.setParasiteAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._parasiteLayer,this._parasitesMap,e)},e.prototype.removeParasiteAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._parasitesMap,t)},e.prototype.getParasitesMap=function(){return this._parasitesMap},e.prototype.getFenceAtFencePos=function(t){var e=c.default.getStringFromFencePos(t);return this._fencesMap[e]},e.prototype.setFenceAtFencePos=function(t,e){if(t){this.removeFenceAtFencePos(e);var o=c.default.getStringFromFencePos(e);this._fencesMap[o]=t,t.node.removeFromParent(!1),this._fenceLayer.addChild(t.node),t.setFencePos(e)}},e.prototype.removeFenceAtFencePos=function(t){var e=this.getFenceAtFencePos(t);if(e){var o=c.default.getStringFromFencePos(t);delete this._fencesMap[o],e.node.removeFromParent()}},e.prototype.getFencesMap=function(){return this._fencesMap},e.prototype.getMarkerAtLogicalPos=function(t){var e=null,o=this.getEntityFromMapAtLogicalPos(this._markersMap,t);return o&&(e=o),e},e.prototype.setMarkerAtLogicalPos=function(t,e){this.setEntityToMapAtLogicalPos(t,this._markerLayer,this._markersMap,e)},e.prototype.removeMarkerAtLogicalPos=function(t){this.removeEntityFromMapAtLogicalPos(this._markersMap,t)},e.prototype.getMarkersMap=function(){return this._markersMap},e.prototype.setFlyerAtLogicalPos=function(t,e){t&&(t.setPixelPos(e),this._flyerLayer.addChild(t.node,this.getTopZOrder(t.getEntityType(),e)),t.launch())},e.prototype.highlightedCell=function(t){if(this.getCellAtLogicalPos(t)){var e=I.default.createAnimationWithType(this,I.FlyerAnimationType.HighlightedCell);this.setFlyerAtLogicalPos(e,t),e.node.zIndex=o.ZORDER_ITEM_BOTTOM}},e.prototype.bombCell=function(t){var e=I.default.createAnimationWithType(this,I.FlyerAnimationType.Bomb1x1);this.setFlyerAtLogicalPos(e,t)},e.prototype.getEntity=function(t,e){var o=null;switch(t){case m.EntityType.Frame:o=this.getFrameAtLogicalPos(e);break;case m.EntityType.Cell:o=this.getCellAtLogicalPos(e);break;case m.EntityType.Popsicle:o=this.getPopsicleAtLogicalPos(e);break;case m.EntityType.Floor:o=this.getFloorAtLogicalPos(e);break;case m.EntityType.Rug:o=this.getRugAtLogicalPos(e);break;case m.EntityType.Item:o=this.getItemAtLogicalPos(e);break;case m.EntityType.Parasite:o=this.getParasiteAtLogicalPos(e);break;case m.EntityType.Marker:o=this.getMarkerAtLogicalPos(e)}return o},e.prototype.setEntity=function(t,e){if(t)switch(t.getEntityType()){case m.EntityType.Frame:this.setFrameAtLogicalPos(t,e);break;case m.EntityType.Cell:this.setCellAtLogicalPos(t,e);break;case m.EntityType.Popsicle:this.setPopsicleAtLogicalPos(t,e);break;case m.EntityType.Floor:this.setFloorAtLogicalPos(t,e);break;case m.EntityType.Rug:this.setRugAtLogicalPos(t,e);break;case m.EntityType.Item:this.setItemAtLogicalPos(t,e);break;case m.EntityType.Parasite:this.setParasiteAtLogicalPos(t,e);break;case m.EntityType.Marker:this.setMarkerAtLogicalPos(t,e)}},e.prototype.removeEntity=function(t,e){switch(t){case m.EntityType.Frame:this.removeFrameAtLogicalPos(e);break;case m.EntityType.Cell:this.removeCellAtLogicalPos(e);break;case m.EntityType.Popsicle:this.removePopsicleAtLogicalPos(e);break;case m.EntityType.Floor:this.removeFloorAtLogicalPos(e);break;case m.EntityType.Rug:this.removeRugAtLogicalPos(e);break;case m.EntityType.Item:this.removeItemAtLogicalPos(e);break;case m.EntityType.Parasite:this.removeParasiteAtLogicalPos(e);break;case m.EntityType.Marker:this.removeMarkerAtLogicalPos(e)}},e.prototype.isObstructsEmpty=function(){return this._obstructs.length<=0},e.prototype.addObstructs=function(t){t&&c.default.insertAsSet(this._obstructs,t)},e.prototype.removeObstructs=function(t){if(t){var e=c.default.indexOf(this._obstructs,t);-1!=e&&this._obstructs.splice(e,1)}},e.prototype.isFlyerObstructsEmpty=function(){return this._flyerObstructs.length<=0},e.prototype.addFlyerObstructs=function(t){t&&c.default.insertAsSet(this._flyerObstructs,t)},e.prototype.removeFlyerObstructs=function(t){if(t){var e=c.default.indexOf(this._flyerObstructs,t);-1!=e&&this._flyerObstructs.splice(e,1)}},e.prototype.getAttackedPosition=function(){return this._attackePositions},e.prototype.recordAttackedPosition=function(t){c.default.insertAsSet(this._attackePositions,t)},e.prototype.clearAttackedPostionRecord=function(){c.default.clearArray(this._attackePositions)},e.prototype.unimmuneAllEntities=function(){for(var t in this._framesMap){this._framesMap[t].setImmuneDamage(!1)}for(var t in this._cellsMap){this._cellsMap[t].setImmuneDamage(!1)}for(var t in this._popsiclesMap){this._popsiclesMap[t].setImmuneDamage(!1)}for(var t in this._floorsMap){this._floorsMap[t].setImmuneDamage(!1)}for(var t in this._rugsMap){this._rugsMap[t].setImmuneDamage(!1)}for(var t in this._itemsMap){this._itemsMap[t].setImmuneDamage(!1)}for(var t in this._parasitesMap){this._parasitesMap[t].setImmuneDamage(!1)}for(var t in this._fencesMap){this._fencesMap[t].setImmuneDamage(!1)}},e.prototype.dispatchCommand=function(t,e,o){if(!(t.x<0||t.x>=this._gridSize.width||t.y<0||t.y>=this._gridSize.height))if(this._usePriorityCommandQueue){var n=p.default.create(t,e,o,this._nextCommandIndex);-1==this._priorityCommandQueue.indexOf(n)&&(this._priorityCommandQueue.push(n),this._nextCommandIndex++)}else{if(e.type==l.GridCommandType.MatchClean)if(-1!=c.default.indexOf(this._commandPairs,e,0,function(e,o){return!(e.command.type!=o.type||!t.equals(e.targetPos))}))return;n=p.default.create(t,e,o,this._nextCommandIndex);this._commandPairs.push(n),this._nextCommandIndex++,this._insertNewCommand=!0}},e.prototype.isCommandListEmpty=function(){return this._usePriorityCommandQueue?this._priorityCommandQueue.isEmpty():this._commandPairs.length<=0},e.prototype.sortCommandList=function(){this._insertNewCommand&&(this._insertNewCommand=!1,this._commandPairs.sort(function(t,e){return t.delayTime==e.delayTime?t.command.getPriority()==e.command.getPriority()?t.index==e.index?0:t.index<e.index?-1:1:t.command.getPriority()>e.command.getPriority()?-1:1:t.delayTime<e.delayTime?-1:1}))},e.prototype.progressCommand=function(t){if(this._usePriorityCommandQueue){for(var e=0,o=this._priorityCommandQueue.getElements();e<o.length;e++){(a=o[e]).delayTime-=t}for(;!this._priorityCommandQueue.isEmpty();){if(!((a=this._priorityCommandQueue.peek()).delayTime<0))break;a=this._priorityCommandQueue.pop(),this.excuteCommandPair(a)}}else{this.sortCommandList();for(var n=0,i=this._commandPairs;n<i.length;n++){(a=i[n]).delayTime-=t}for(var r=0;r<this._commandPairs.length;){var a;if((a=this._commandPairs[r]).delayTime>0){this._commandPairs.splice(0,r);break}this.excuteCommandPair(a),(r+=1)>=this._commandPairs.length&&(this._commandPairs.length=0)}}},e.prototype.excuteCommandPair=function(t){var e=[m.EntityType.Parasite,m.EntityType.Item,m.EntityType.Rug,m.EntityType.Floor,m.EntityType.Popsicle,m.EntityType.Cell];t.command.type==l.GridCommandType.CheckMatch&&(e=[m.EntityType.Item]);for(var o=0,n=e;o<n.length;o++){var i=n[o],r=this.getEntity(i,t.targetPos);if(r&&(r.excuteCommand(t.command),t.command.type!=l.GridCommandType.TerminateClean))break}},e.prototype.runGame=function(){this.setPowerAmount(d.PowerID.LaunchResidentGears,1),this.setPowerAmount(d.PowerID.LaunchGears,1),this.setCurrentState(w.default.create())},e.prototype.pauseGame=function(){this.setCurrentState(H.default.create())},e.prototype.resumeGame=function(){this.setCurrentState(x.default.create())},e.prototype.clearGameForReplay=function(){this.setCurrentState(N.default.create())},e.prototype.appearUI=function(){this._gameScene.appearUI()},e.prototype.disappearUI=function(){this._gameScene.disappearUI()},e.prototype.showReplayPrepareUI=function(){this._gameScene.showReplayPrepareUI()},e.prototype.isComplete=function(){return this._gameScene.isCompleted()},e.prototype.isFailed=function(){return this._gameScene.isFailed()},e.prototype.hasShowCompleteBanner=function(){return this._gameScene.hasShowCompleteBanner()},e.prototype.showCompleteBanner=function(){this._gameScene.showCompleteBanner()},e.prototype.congratulation=function(){this._gameScene.congratulation()},e.prototype.showGameFail=function(){this._gameScene.showGameFail()},e.prototype.noMoreStep=function(){this._gameScene.noMoreStep()},e.prototype.stalemate=function(){this._gameScene.stalemate()},e.prototype.chargeFlyer=function(t){var e=[];for(var o in this._itemsMap){var n=this._itemsMap[o];n.canWillCharge(t.getCollectionID())&&e.push(n)}if(e.length>0){e.sort(function(t,e){if(t.getChargePriority()==e.getChargePriority()){var o=t.getLogicalPos(),n=e.getLogicalPos();return o.equals(n)?0:c.default.vec2Less(t.getLogicalPos(),e.getLogicalPos())?-1:1}return t.getChargePriority()-e.getChargePriority()});var i=e[0];if(i){i.setWillChargeAmount(i.getWillChargeAmount()+1);var r=C.default.create(this,t.getCollectionID(),t.getLogicalPos(),i.getLogicalPos());this.setFlyerAtLogicalPos(r,t.getLogicalPos())}}},e.prototype.updateStepBarUIWithDelta=function(t){this._gameScene.updateStepBarUIWithDelta(t)},e.prototype.updateTargetBarUIWithDelta=function(t,e){this._gameScene.updateTargetBarUIWithDelta(t,e)},e.prototype.updateSupplyBarUIWithDelta=function(t,e){this._gameScene.updateSupplyBarUIWithDelta(t,e)},e.prototype.updateScoreBarUIWithDelta=function(t){this._gameScene.updateScoreBarUIWithDelta(t)},e.prototype.collectEntity=function(t){this.gainCollectedEntity(t.getCollectionID(),1),this.gainPower(t.getPowerID(),1),this.gainCollectedSupplyWithEntity(t)},e.prototype.createCollectedEntityFlyer=function(t){var e=t.getCollectionID();if(this.isTargetCollectionID(e)){var o=P.default.create(this,e,-1,t.getLogicalPos());this.setFlyerAtLogicalPos(o,t.getLogicalPos())}},e.prototype.isTargetCollectionID=function(t){return this._gameScene.isTargetCollectionID(t)},e.prototype.gainStepWithItemID=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=cc.Vec2.ZERO);if(this.gainPower(d.PowerID.AvailableSwap,5),e){var n=v.default.create(this,5,o);this.setFlyerAtLogicalPos(n,o)}else this.updateStepBarUIWithDelta(5)},e.prototype.getTargetMap=function(){return this._gameScene.getTargetMap()},e.prototype.getTargetAmount=function(t){return this._gameScene.getTargetAmount(t)},e.prototype.getCollectedEntityAmount=function(t){return this._gameScene.getCollectedEntityAmount(t)},e.prototype.setCollectedEntityAmount=function(t,e){this._gameScene.setCollectedEntityAmount(t,e)},e.prototype.gainCollectedEntity=function(t,e){this.setCollectedEntityAmount(t,this.getCollectedEntityAmount(t)+e)},e.prototype.lossCollectedEntity=function(t,e){this.gainCollectedEntity(t,-e)},e.prototype.getCollectedSupplyAmount=function(t){return this._gameScene.getCollectedSupplyAmount(t)},e.prototype.setCollectedSupplyAmount=function(t,e){this._gameScene.setCollectedSupplyAmount(t,e)},e.prototype.gainCollectedSupply=function(t,e){this.setCollectedSupplyAmount(t,this.getCollectedSupplyAmount(t)+e)},e.prototype.lossCollectedSupply=function(t,e){this.gainCollectedSupply(t,-e)},e.prototype.gainCollectedSupplyWithLogicalPos=function(t,e,o){if(this.canGenerateTrainSupply()&&t!=s.GameCurrencyType.NoneType&&e>0){this.gainCollectedSupply(t,e);var n=D.default.create(this,t,e,o,0);this.setFlyerAtLogicalPos(n,o)}},e.prototype.gainCollectedSupplyWithEntity=function(t){if(this.canGenerateTrainSupply()){var e=t.getProducedTrainSupplyMaps();for(var o in e){var n=Number(o),i=e[o];this.gainCollectedSupplyWithLogicalPos(n,i,t.getLogicalPos())}}},e.prototype.getWorldPosForTarget=function(t){return this._gameScene.getWorldPosForTarget(t)},e.prototype.getWorldPosForSupply=function(t){return this._gameScene.getWorldPosForSupply(t)},e.prototype.getWorldPosForStep=function(){return this._gameScene.getWorldPosForStep()},e.prototype.getWorldPosForScore=function(){return this._gameScene.getWorldPosForScore()},e.prototype.getWorldPosForGear=function(t){return this._gameScene.getWorldPosForGear(t)},e.prototype.getWorldAreas=function(t,e){var o=[];switch(t){case 1:for(var n=[],i=0,r=e.split("|");i<r.length;i++){var a=r[i],s=c.default.getVec2FromConfigString(a);s&&n.push(s)}o=this.getWorldAreasWithPositions(n);break;case 2:for(var l=0,p=e.split("|");l<p.length;l++)for(var u=p[l],y=0,h=this.getWorldAreasWithName(u);y<h.length;y++){var m=h[y];o.push(m)}}return o},e.prototype.getWorldAreasWithPositions=function(t){for(var e=[],o=0,n=t;o<n.length;o++){var i=n[o],r=this.getWorldAreaWithLogicalPos(i);r&&e.push(r)}return e},e.prototype.getWorldAreaWithLogicalPos=function(t){var e=cc.v2(.5*-this._cellSize.width,.5*-this._cellSize.height),o=this.getPixelPosFromLogicalPos(t).add(e),n=this.getPixelPosFromLogicalPos(t.add(cc.v2(1,1))).add(e),i=this.node.convertToWorldSpaceAR(o),r=this.node.convertToWorldSpaceAR(n);return cc.rect(i.x,i.y,r.x-i.x,r.y-i.y)},e.prototype.getWorldAreasWithName=function(t){var e=[];if("popsicles"==t)for(var o in this._popsiclesMap)for(var n=this._popsiclesMap[o].getOccupyArea(),i=0;i<n.height;i++)for(var r=0;r<n.width;r++){var a=cc.v2(n.x+r,n.y+i);(u=this.getWorldAreaWithLogicalPos(a))&&e.push(u)}else if("unfilled_grass"==t)for(var o in this._cellsMap){var s=this._cellsMap[o].getLogicalPos();if(!this.isGrassFloorAtLogicalPos(s))(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}else if("doughnut"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.Doughnut){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("block"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.Block){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("iceCube"==t)for(var o in this._itemsMap){if((l=(c=this._itemsMap[o]).getTopParasite())&&l.getParasiteType()==S.ParasiteType.IceCube){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("nut"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.Chestnut){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("paw"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.DogPaw){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("red"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.Normal&&c.getEntityColor()==m.EntityColor.Red){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("green"==t)for(var o in this._itemsMap){if((c=this._itemsMap[o]).getItemType()==T.ItemType.Normal&&c.getEntityColor()==m.EntityColor.Green){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("butterfly"==t)for(var o in this._itemsMap){var c;if((c=this._itemsMap[o]).getItemType()==T.ItemType.EffectBomb)if(c.getBombType()==B.ItemBombType.Butterfly){s=c.getLogicalPos();(u=this.getWorldAreaWithLogicalPos(s))&&e.push(u)}}else if("giftbox"==t)for(var o in this._parasitesMap){var l;if((l=this._parasitesMap[o]).getParasiteType()==S.ParasiteType.GiftBox){s=l.getLogicalPos();var p=l.getLogicalSize();for(i=0;i<p.height;i++)for(r=0;r<p.width;r++){var u;a=s.add(cc.v2(r,i));(u=this.getWorldAreaWithLogicalPos(a))&&e.push(u)}}}return e},e.prototype.getPowerAmount=function(t){return this._gameScene.getPowerAmount(t)},e.prototype.setPowerAmount=function(t,e){this._gameScene.setPowerAmount(t,e)},e.prototype.gainPower=function(t,e){this._gameScene.gainPowerAmount(t,e)},e.prototype.lossPower=function(t,e){this._gameScene.lossPowerAmount(t,e)},e.prototype.getTotalScore=function(){return this._gameScene.getTotalScore()},e.prototype.setTotalScore=function(t){this._gameScene.setTotalScore(t)},e.prototype.gainScore=function(t){this._gameScene.gainTotalScore(t)},e.prototype.lossScore=function(t){this._gameScene.lossTotalScore(t)},e.prototype.gainScoreWithPixelPos=function(t,e,o){if(void 0===o&&(o=!1),this._gameScene.canCountScore()){this.gainScore(t);var n=b.default.create(this,e,t);if(this.setFlyerAtLogicalPos(n,cc.v2(0,0)),o){var i=E.default.create(this,e,t);this.setFlyerAtLogicalPos(i,cc.v2(0,0))}}},e.prototype.gainScoreWithEntity=function(t,e){void 0===e&&(e=1);var o=t.getScore()*e,n=this.getPixelPosFromLogicalPos(t.getLogicalPos());this.gainScoreWithPixelPos(o,n)},e.prototype.getBonusStepCount=function(){return this._gameScene.getBonusStepCount()},e.prototype.setBonusStepCount=function(t){this._gameScene.setBonusStepCount(t)},e.prototype.gainBonusStepCount=function(t){this.setBonusStepCount(this.getBonusStepCount()+t)},e.prototype.lossBonusStepCount=function(t){this.setBonusStepCount(this.getBonusStepCount()-t)},e.prototype.requestUseGear=function(t,e){this._gameScene.requestUseGear(t,e,this.onUseGearRespone,this)},e.prototype.onUseGearRespone=function(t){this._stateMachine.onRespone(t)},e.prototype.getUsedGearAmount=function(t){return this._gameScene.getUsedGearAmount(t)},e.prototype.setUsedGearAmount=function(t,e){return this._gameScene.setUsedGearAmount(t,e)},e.prototype.getLaunchGearMap=function(){return this._gameScene.getLaunchGearMap()},e.prototype.clearLaunchGears=function(){this._gameScene.clearLaunchGears()},e.prototype.getDropEntityMap=function(){return this._gameScene.getDropEntityMap()},e.prototype.resetDropConfig=function(){for(var t in this._gameScene.resetDropConfig(),this._cellsMap){var e=this._cellsMap[t];e.getGenerateType()!=_.GenerateType.None&&e.setGenerateType(_.GenerateType.Default)}},e.prototype.getLimitedEntityMap=function(){return this._gameScene.getLimitedEntityMap()},e.prototype.getLimitedGroupMap=function(){return this._gameScene.getLimitedGroupMap()},e.prototype.getPuppyLeftSteps=function(){var t=0;for(var e in this._floorsMap){this._floorsMap[e].getFloorType()==g.FloorType.Road&&(t+=1)}return t-this.getPowerAmount(d.PowerID.PuppyMovedStep)-1},e.prototype.canGenerateBomb=function(){return this._gameScene.canGenerateBomb()},e.prototype.canGenerateTrainSupply=function(){return this._gameScene.canGenerateTrainSupply()},e.prototype.canGetBonusFromLeftStep=function(){return this._gameScene.canGetBonusFromLeftStep()},e.prototype.beforePlayerOperated=function(){this._gameScene.beforePlayerOperated()},e.prototype.onPlayerOperated=function(){this._gameScene.onPlayerOperated()},e.prototype.canPauseGame=function(){return this.getCurrentState().canPause()},e.prototype.start=function(){},e.prototype.update=function(t){t*=cc.director.getScheduler().getTimeScale(),this.progressCommand(t),this._stateMachine.update(t)},e.prototype.onDestroy=function(){this.conveyerLayer=null,this._stateMachine=null,this._gridSize=null,this._cellSize=null,this._framesMap=null,this._cellsMap=null,this._popsiclesMap=null,this._floorsMap=null,this._rugsMap=null,this._itemsMap=null,this._fencesMap=null,this._markersMap=null,this._obstructs=null,this._flyerObstructs=null,this._attackePositions=null,this._commandPairs=null,this._gameScene=null},e.prototype.onTouchStart=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this.getLogicalPosFromPixelPos(cc.v2(e.x,e.y));this._stateMachine.onTapBegan(o)},e.prototype.onTouchMove=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this.getLogicalPosFromPixelPos(cc.v2(e.x,e.y));o.equals(this._lastTouchLogicalPos)||(this._lastTouchLogicalPos=o,this._stateMachine.onTapMoved(o))},e.prototype.onTouchEnd=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this.getLogicalPosFromPixelPos(cc.v2(e.x,e.y));this._stateMachine.onTapEnded(o)},e.prototype.onEvent=function(t){this._stateMachine.onEvent(t)},e.ZORDER_FRAME_BOTTOM=1e3,e.ZORDER_FRAME_TOP=1500,e.ZORDER_CELL_BOTTOM=2e3,e.ZORDER_CELL_TOP=2500,e.ZORDER_POPSICLES_BOTTOM=4e3,e.ZORDER_POPSICLES_TOP=4500,e.ZORDER_FLOOR_BOTTOM=5e3,e.ZORDER_FLOOR_TOP=5500,e.ZORDER_RUG_BOTTOM=6e3,e.ZORDER_RUG_TOP=6500,e.ZORDER_ITEM_BOTTOM=7e3,e.ZORDER_ITEM_TOP=7500,e.ZORDER_PARASITE_BOTTOM=8e3,e.ZORDER_PARASITE_TOP=8500,e.ZORDER_FENCE_BOTTOM=9e3,e.ZORDER_FENCE_TOP=9500,e.ZORDER_MARKER_BOTTOM=1e4,e.ZORDER_MARKER_TOP=10500,e.ZORDER_PUPPY_BOTTOM=11e3,e.ZORDER_PUPPY_TOP=11500,e.ZORDER_CONVEYERS_BOTTOM=12e3,e.ZORDER_CONVEYERS_TOP=12500,e.ZORDER_FLYER_BOTTOM=13e3,e.ZORDER_FLYER_TOP=13500,e.ZORDER_EFFECT=2e4,e.MAX_GRID_WIDTH=9,e.MAX_GRID_HEIGHT=12,i([K(cc.Node)],e.prototype,"conveyerLayer",void 0),e=o=i([Y],e)}(cc.Component);o.default=V,cc._RF.pop()},{"../../../component/RectangleClipper":"RectangleClipper","../../../define/GameCurrencyType":"GameCurrencyType","../../../extend/utils/GameMath":"GameMath","../commond/GridCommand":"GridCommand","../commond/GridCommandPair":"GridCommandPair","../commond/Heap":"Heap","../defines/CollectionID":"CollectionID","../defines/EntityGroupID":"EntityGroupID","../defines/EntityID":"EntityID","../defines/IdentifierManager":"IdentifierManager","../defines/PowerID":"PowerID","../entity/cell/CellBase":"CellBase","../entity/floor/FloorBase":"FloorBase","../entity/flyer/FlyerAnimation":"FlyerAnimation","../entity/flyer/FlyerChargeEntity":"FlyerChargeEntity","../entity/flyer/FlyerCollectedEntity":"FlyerCollectedEntity","../entity/flyer/FlyerCollectedSupply":"FlyerCollectedSupply","../entity/flyer/FlyerMoreStep":"FlyerMoreStep","../entity/flyer/FlyerScore":"FlyerScore","../entity/flyer/FlyerScoreLabel":"FlyerScoreLabel","../entity/item/ItemBase":"ItemBase","../entity/item/ItemFactory":"ItemFactory","../entity/item/color/bomb/ItemBombBase":"ItemBombBase","../entity/item/state/ItemStateGenerate":"ItemStateGenerate","../entity/item/state/ItemStateReplace":"ItemStateReplace","../entity/parasite/ParasiteBase":"ParasiteBase","../event/EntityEventBase":"EntityEventBase","./state/GridStateMachine":"GridStateMachine","./state/concreteState/GridStateAppear":"GridStateAppear","./state/concreteState/GridStateCreate":"GridStateCreate","./state/concreteState/GridStateCrossBomb":"GridStateCrossBomb","./state/concreteState/GridStateDisappear":"GridStateDisappear","./state/concreteState/GridStateForceClean":"GridStateForceClean","./state/concreteState/GridStateForceSwap":"GridStateForceSwap","./state/concreteState/GridStateLaunchGears":"GridStateLaunchGears","./state/concreteState/GridStateNull":"GridStateNull","./state/concreteState/GridStateSwapNeighbour":"GridStateSwapNeighbour"}],GridCommandPair:[function(t,e,o){"use strict";cc._RF.push(e,"c1893kWHI9KhrvOxry/Pjxh","GridCommandPair"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o,n){this.targetPos=cc.Vec2.ZERO,this.delayTime=0,this.command=null,this.index=0,this.targetPos=t,this.command=e,this.delayTime=o,this.index=n}return t.create=function(e,o,n,i){return new t(e,o,n,i)},t}();o.default=n,cc._RF.pop()},{}],GridCommand:[function(t,e,o){"use strict";cc._RF.push(e,"18b91epMD5MjY4qCCjvnsXt","GridCommand"),Object.defineProperty(o,"__esModule",{value:!0}),o.GridCommandType=void 0;var n,i=t("../defines/EntityID"),r=t("../entity/item/color/bomb/ItemBombBase"),a=t("../defines/CollectionID");(function(t){t[t.None=-1]="None",t[t.DoubleTabbed=0]="DoubleTabbed",t[t.NeighbourSwap=1]="NeighbourSwap",t[t.ForceSwap=2]="ForceSwap",t[t.CheckMatch=3]="CheckMatch",t[t.Change=4]="Change",t[t.Charge=5]="Charge",t[t.BombClean=6]="BombClean",t[t.MatchClean=7]="MatchClean",t[t.NeighborClean=8]="NeighborClean",t[t.FloorClean=9]="FloorClean",t[t.PopsicleClean=10]="PopsicleClean",t[t.SuicideClean=11]="SuicideClean",t[t.ActivateClean=12]="ActivateClean",t[t.LayoutGrass=13]="LayoutGrass",t[t.TerminateClean=14]="TerminateClean"})(n=o.GridCommandType||(o.GridCommandType={}));var s=function(){function t(t){this.type=n.None,this.swapPos=cc.Vec2.ZERO,this.cleanRoot=cc.Vec2.ZERO,this.cleanColor=i.EntityColor.None,this.ignoreImmunity=!1,this.createBombType=r.ItemBombType.None,this.hitNeighbour=!1,this.hitFloor=!1,this.layoutGrass=!1,this.targetID=i.EntityID.None,this.collectOld=!1,this.chargeID=a.CollectionID.None,this.chargeAmount=0,this._priority=0,this._priority=t}return t.DoubleTabbed=function(){var e=new t(2004);return e.type=n.DoubleTabbed,e},t.NeighbourSwap=function(e){var o=new t(2003);return o.type=n.NeighbourSwap,o.swapPos=e,o},t.ForceSwap=function(e){var o=new t(2002);return o.type=n.ForceSwap,o.swapPos=e,o},t.CheckMatch=function(){var e=new t(2001);return e.type=n.CheckMatch,e},t.Change=function(e,o){var i=new t(2001);return i.type=n.Change,i.targetID=e,i.collectOld=o,i},t.Charge=function(e,o){var i=new t(2001);return i.type=n.Charge,i.chargeID=e,i.chargeAmount=o,i},t.MatchClean=function(e,o,i){var r=new t(1101);return r.type=n.MatchClean,r.cleanRoot=e,r.createBombType=o,r.hitNeighbour=!0,r.hitFloor=!0,r.layoutGrass=i,r},t.LayoutGrass=function(){var e=new t(1004);return e.type=n.LayoutGrass,e.layoutGrass=!0,e},t.BombClean=function(e,o,i,r){void 0===r&&(r=!1);var a=new t(1003);return a.type=n.BombClean,a.cleanRoot=e,a.cleanColor=o,a.ignoreImmunity=r,a.layoutGrass=i,a.hitNeighbour=!1,a.hitFloor=!0,a},t.ActivateClean=function(e){var o=new t(1003);return o.type=n.ActivateClean,o.cleanRoot=e,o.cleanColor=i.EntityColor.None,o.hitNeighbour=!1,o.hitFloor=!1,o.layoutGrass=!1,o},t.SuicideClean=function(e,o,i){var r=new t(1003);return r.type=n.SuicideClean,r.cleanRoot=e,r.cleanColor=o,r.hitNeighbour=!0,r.hitFloor=!0,r.layoutGrass=i,r},t.NeighborClean=function(e,o){var i=new t(1001);return i.type=n.NeighborClean,i.cleanRoot=e,i.cleanColor=o,i},t.FloorClean=function(){var e=new t(1003);return e.type=n.FloorClean,e},t.PopsicleClean=function(){var e=new t(1002);return e.type=n.PopsicleClean,e},t.TerminateClean=function(e,o,i){var r=new t(1003);return r.type=n.TerminateClean,r.cleanRoot=e,r.cleanColor=o,r.layoutGrass=i,r},t.prototype.getPriority=function(){return this._priority},t}();o.default=s,cc._RF.pop()},{"../defines/CollectionID":"CollectionID","../defines/EntityID":"EntityID","../entity/item/color/bomb/ItemBombBase":"ItemBombBase"}],GridStateAppear:[function(t,e,o){"use strict";cc._RF.push(e,"5c808Y/gQZIm4ZX34/6PeFd","GridStateAppear");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateDrop"),a=function(t){function e(){return t.call(this,i.GridState.Appear)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){this.appear(t)},e.prototype.update=function(t,e){if(t.isObstructsEmpty()&&t.isCommandListEmpty()){for(var o=t.getGridSize(),n=[],i=0;i<o.height;i++)for(var a=0;a<o.width;a++)n.push(cc.v2(a,i));t.setCurrentState(r.default.create(n))}},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStateDrop":"GridStateDrop"}],GridStateAutoActivateBomb:[function(t,e,o){"use strict";cc._RF.push(e,"07a25W59x5HO7Z1h7K43j2S","GridStateAutoActivateBomb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../defines/PowerID"),r=t("../GridStateBase"),a=t("./GridStateCollection"),s=t("./GridStateMatch"),c=function(t){function e(){return t.call(this,r.GridState.AutoActivatedBomb)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.getPowerAmount(i.PowerID.ActivateBomb)>0?t.setCurrentState(s.default.create()):t.setCurrentState(a.default.create())},e}(r.default);o.default=c,cc._RF.pop()},{"../../../defines/PowerID":"PowerID","../GridStateBase":"GridStateBase","./GridStateCollection":"GridStateCollection","./GridStateMatch":"GridStateMatch"}],GridStateBase:[function(t,e,o){"use strict";cc._RF.push(e,"aabd2wUqalH8JFkBE2ZCFVX","GridStateBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.GridState=void 0;var n,i=t("../../../../base/Pair"),r=t("../../../../extend/utils/GameMath"),a=t("../../commond/GridCommand"),s=t("../../defines/EntityID"),c=t("../../entity/fence/FencePos"),l=t("../../entity/item/color/bomb/ItemBombBase"),p=t("../../entity/item/ItemBase"),u=t("../availableSwapInfo/AvailableSwapInfo");(function(t){t[t.None=-1]="None",t[t.Null=0]="Null",t[t.Global=1]="Global",t[t.Stalemate=2]="Stalemate",t[t.NoMoreStep=3]="NoMoreStep",t[t.Congratulation=4]="Congratulation",t[t.Create=5]="Create",t[t.Appear=6]="Appear",t[t.Disappear=7]="Disappear",t[t.DropItem=8]="DropItem",t[t.DropItemTest=9]="DropItemTest",t[t.SwapNeighbour=10]="SwapNeighbour",t[t.ForceClean=11]="ForceClean",t[t.ForceSwap=12]="ForceSwap",t[t.CrossBomb=13]="CrossBomb",t[t.MatchItem=14]="MatchItem",t[t.Shuffle=15]="Shuffle",t[t.AutoActivatedBomb=16]="AutoActivatedBomb",t[t.LaunchGears=17]="LaunchGears",t[t.LaunchResidentGear=18]="LaunchResidentGear",t[t.GenerateRecordSupply=19]="GenerateRecordSupply",t[t.ChangeColor=20]="ChangeColor",t[t.Collection=21]="Collection",t[t.Conveyer=22]="Conveyer",t[t.MagicCrystal=23]="MagicCrystal",t[t.Complete=24]="Complete",t[t.CleanGridForReplay=25]="CleanGridForReplay",t[t.Prepare=26]="Prepare",t[t.CompleteBanner=27]="CompleteBanner",t[t.Honey=28]="Honey",t[t.BousTime=29]="BousTime",t[t.ComobWord=30]="ComobWord",t[t.Fail=31]="Fail",t[t.FailSummary=32]="FailSummary"})(n=o.GridState||(o.GridState={}));var y=function(){function t(t){this._state=n.None,this._state=t}return t.prototype.enter=function(t){},t.prototype.update=function(t,e){},t.prototype.exit=function(t){},t.prototype.onTapBegan=function(t,e){},t.prototype.onTapMoved=function(t,e){},t.prototype.onTapEnded=function(t,e){},t.prototype.onEvent=function(t,e){},t.prototype.onRespone=function(t,e){},t.prototype.canChangeState=function(){return!1},t.prototype.canPause=function(){return!1},t.prototype.canSwapItem=function(t,e,o){if(1!=o.sub(e).magSqr())return!1;var n=c.default.create(e,o);if(t.getFenceAtFencePos(n))return!1;var i=t.getItemAtLogicalPos(e),r=t.getItemAtLogicalPos(o);return!!(i&&r&&i.canSwap()&&r.canSwap())},t.prototype.getAvailableSwapInfo=function(t,e,o){var n=u.default.create();if(this.canSwapItem(t,e,o)){var c=t.getItemAtLogicalPos(e),y=t.getItemAtLogicalPos(o);if(t.swapItem(e,o),c.getItemType()==p.ItemType.EffectBomb&&y.getItemType()==p.ItemType.EffectBomb){if(c.canExcuteCommand(a.default.NeighbourSwap(e))||y.canExcuteCommand(a.default.NeighbourSwap(o))){n.swapPair=new i.Pair(e,o);var h=u.AvailableSwapBaseValue.MatchBomb,m=y;h+=1e5*(c.getBombType()+m.getBombType()),n.value=h}}else if(n.linkedPositions=c.getLinkedPositions(),n.linkedPositions.length>0){n.swapPair=new i.Pair(e,o);var f=r.default.getCreateBombType(n.linkedPositions);if(f!=l.ItemBombType.None){h=u.AvailableSwapBaseValue.MergerBomb;h+=1e5*f,h+=1e3*n.linkedPositions.length,h+=(t.getGridSize().width-e.x)*(t.getGridSize().height-e.y),n.value=h}else{h=u.AvailableSwapBaseValue.MatchColor;h+=1e3*n.linkedPositions.length,h+=(t.getGridSize().width-e.x)*(t.getGridSize().height-e.y),n.value=h}for(var d=0,_=n.linkedPositions;d<_.length;d++){var g=_[d];t.getItemAtLogicalPos(g).getItemType()==p.ItemType.EffectBomb&&(n.value+=1e4)}}else c.getEntityID()==s.EntityID.ItemBombRainbow&&y.getEntityColor()!=s.EntityColor.None||y.getEntityID()==s.EntityID.ItemBombRainbow&&c.getEntityColor()!=s.EntityColor.None?(n.swapPair=new i.Pair(e,o),n.value=Math.max(n.value-1e5,1)):n.value=0;if(t.swapItem(e,o),n.value>0)return n}return null},t.prototype.hasAvailableSwap=function(t){var e=t.getItemsMap(),o=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)],n=[];for(var i in e){var r=e[i];n.push(r.getLogicalPos())}for(var a=0,s=n;a<s.length;a++)for(var c=s[a],l=0,p=o;l<p.length;l++){var u=p[l],y=c.add(u);if(this.getAvailableSwapInfo(t,c,y))return!0}return!1},t.prototype.shuffleGrid=function(t,e,o,n,a){void 0===o&&(o=!0),void 0===n&&(n=!0),void 0===a&&(a=!1);var s=[],c=t.getItemsMap(),l=[],p=[],u=[];for(var y in c){var h=(B=c[y]).getLogicalPos(),m=!1;-1!=r.default.indexOf(e,h)&&(a?B.canShuffleWhenCreate()&&(m=!0):B.canShuffle()&&(m=!0)),m&&(l.push({item:B,pos:h}),p.push(h),u.push(h))}for(var f=0;;){var d=!1;r.default.shuffleArray(u);for(var _=p.length,g=0;g<_;g++){for(var I=p[g],C=g;C<_;C++){var P=u[C];if(!P.equals(I)){t.swapItem(I,P);var D=t.getItemAtLogicalPos(I),v=t.getItemAtLogicalPos(P);if(0==D.getLinkedPositions().length&&0==v.getLinkedPositions().length){var b=u[g];u[g]=u[C],u[C]=b;break}t.swapItem(I,P)}}if(C>=_){d=!0;break}}if(0==d){if(!n)break;if(this.hasAvailableSwap(t))break}if(++f>=50)break}if(f<50){var E=t.getItemsMap();for(var y in E){var B;h=(B=E[y]).getLogicalPos();if(-1!=r.default.indexOf(e,h))for(var T=0,F=l;T<F.length;T++){var M=F[T];if(M.item===B){var G=new i.Pair(M.pos,B.getLogicalPos()),S=new i.Pair(B,G);s.push(S)}}}}return s},t.prototype.disappear=function(t){t.disappearUI();for(var e=[s.EntityType.Frame,s.EntityType.Cell,s.EntityType.Floor,s.EntityType.Rug,s.EntityType.Popsicle,s.EntityType.Item,s.EntityType.Parasite,s.EntityType.Marker],o=[],n=t.getGridSize(),i=t.getCellSize(),a=cc.v2(.5*t.node.getContentSize().width,.5*t.node.getContentSize().height),c=1/(.5*n.width+.5*n.height+5),l=-1;l<n.height+1;l++)for(var p=-1;p<n.width+1;p++)for(var u=cc.v2(p,l),y=function(e){var n=t.getEntity(e,u);if(n&&-1==r.default.indexOf(o,n)){var s=n.node.getPosition().sub(a);n.removeFromGridAndAddToEffect();var l=[],p=s.mag()/i.width*c;p>0&&l.push(cc.delayTime(p)),l.push(cc.fadeOut(3*c).easing(cc.easeIn(2))),l.push(cc.callFunc(function(){t.removeObstructs(n),n.node.destroy()})),t.addObstructs(n),n.runAction(cc.sequence(l)),n.getLogicalSize().width*n.getLogicalSize().height>1&&r.default.insertAsSet(o,n)}},h=0,m=e;h<m.length;h++){y(m[h])}var f=[],d=t.getFencesMap();for(var _ in d){var g=d[_];f.push(g)}for(var I=function(e){var o=e.node.getPosition().sub(a);e.removeFromGridAndAddToEffect();var n=[],r=o.mag()/i.width*c;r>0&&n.push(cc.delayTime(r)),n.push(cc.fadeOut(3*c).easing(cc.easeIn(2))),n.push(cc.callFunc(function(){t.removeObstructs(e),e.node.destroy()})),t.addObstructs(e),e.runAction(cc.sequence(n))},C=0,P=f;C<P.length;C++){I(g=P[C])}},t.prototype.appear=function(t){t.appearUI();for(var e=[s.EntityType.Frame,s.EntityType.Cell,s.EntityType.Floor,s.EntityType.Rug,s.EntityType.Popsicle,s.EntityType.Item,s.EntityType.Parasite,s.EntityType.Marker],o=t.getGridSize(),n=t.getCellSize(),i=[cc.v2(-1,-1),cc.v2(-1,o.height+1),cc.v2(o.width+1,-1),cc.v2(o.width+1,o.height+1)],a=[],c=1/(.5*o.width+.5*o.height+5),l=-1;l<o.height+1;l++)for(var p=-1;p<o.width+1;p++){for(var u=cc.v2(p,l),y=i[0],h=0,m=i;h<m.length;h++){var f=m[h];r.default.getDistanceSQ(u,f)<r.default.getDistanceSQ(u,y)&&(y=f)}for(var d=function(e){var o=t.getEntity(e,u);if(o&&-1==r.default.indexOf(a,o)&&o.getVisible()){var i=o.node.getPosition().sub(t.getPixelPosFromLogicalPos(y));t.addObstructs(o);var s=[],l=i.mag()/n.width*c;l>0&&s.push(cc.delayTime(l)),o.node.opacity=0,s.push(cc.fadeIn(3*c).easing(cc.easeIn(2))),s.push(cc.callFunc(function(){t.removeObstructs(o),o.node.opacity=255})),o.runAction(cc.sequence(s)),o.getLogicalSize().width*o.getLogicalSize().height>1&&r.default.insertAsSet(a,o)}},_=0,g=e;_<g.length;_++){d(g[_])}}var I=t.getFencesMap(),C=function(e){var o=I[e];if(o.getVisible()){for(var a=i[0],s=o.getFencePos().posA,l=0,p=i;l<p.length;l++){var u=p[l];r.default.getDistanceSQ(s,u)<r.default.getDistanceSQ(s,a)&&(a=u)}var y=o.node.getPosition().sub(t.getPixelPosFromLogicalPos(a));t.addObstructs(o);var h=[],m=y.mag()/n.width*c;m>0&&h.push(cc.delayTime(m)),o.node.opacity=0,h.push(cc.fadeIn(3*c).easing(cc.easeIn(2))),h.push(cc.callFunc(function(){t.removeObstructs(o),o.node.opacity=255})),o.runAction(cc.sequence(h))}};for(var P in I)C(P)},t.checkArrangeInfo={"{1, 0}":[[cc.v2(2,0),cc.v2(3,0)],[cc.v2(1,1),cc.v2(1,2)],[cc.v2(1,-1),cc.v2(1,-2)],[cc.v2(1,1),cc.v2(2,1),cc.v2(2,0)],[cc.v2(1,-1),cc.v2(2,-1),cc.v2(2,0)]],"{-1, 0}":[[cc.v2(-2,0),cc.v2(-3,0)],[cc.v2(-1,1),cc.v2(-1,2)],[cc.v2(-1,-1),cc.v2(-1,-2)],[cc.v2(-1,1),cc.v2(-2,1),cc.v2(-2,0)],[cc.v2(-1,-1),cc.v2(-2,-1),cc.v2(-2,0)]],"{0, 1}":[[cc.v2(0,2),cc.v2(0,3)],[cc.v2(-1,1),cc.v2(-2,1)],[cc.v2(1,1),cc.v2(2,1)],[cc.v2(-1,1),cc.v2(-1,2),cc.v2(0,2)],[cc.v2(1,1),cc.v2(1,2),cc.v2(0,2)]],"{0, -1}":[[cc.v2(0,-2),cc.v2(0,-3)],[cc.v2(-1,-1),cc.v2(-2,-1)],[cc.v2(1,-1),cc.v2(2,-1)],[cc.v2(-1,-1),cc.v2(-1,-2),cc.v2(0,-2)],[cc.v2(1,-1),cc.v2(1,-2),cc.v2(0,-2)]]},t}();o.default=y,cc._RF.pop()},{"../../../../base/Pair":"Pair","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../entity/fence/FencePos":"FencePos","../../entity/item/ItemBase":"ItemBase","../../entity/item/color/bomb/ItemBombBase":"ItemBombBase","../availableSwapInfo/AvailableSwapInfo":"AvailableSwapInfo"}],GridStateBousTime:[function(t,e,o){"use strict";cc._RF.push(e,"ccae8HUVQ9Dfqqb7dm1vA5F","GridStateBousTime");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("../../../defines/PowerID"),a=t("../../../commond/GridCommand"),s=t("./GridStateDrop"),c=t("../../../entity/item/state/ItemStateReplace"),l=t("../../../entity/item/color/bomb/ItemBombBase"),p=t("../../../defines/EntityID"),u=t("../../../entity/item/ItemFactory"),y=t("./GridStateComplete"),h=t("../../../../../extend/utils/GameMath"),m=t("../../../../../base/IGame"),f=t("../../../defines/IdentifierManager"),d=function(t){function e(){var e=t.call(this,i.GridState.BousTime)||this;return e._curGrid=null,e._boomItems=[],e._isSendBoomMsg=!1,e._delayTime=0,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){this._curGrid=t,t.canGetBonusFromLeftStep()?(this.initAllBoomItem(),this._boomItems.length>0?this.sendBoomMsg():t.getPowerAmount(r.PowerID.AvailableSwap)>0?this.stepNumberToBoom():this.onBousTimeDone()):this.onBousTimeDone()},e.prototype.update=function(t,e){if(this._isSendBoomMsg&&(this._delayTime+=e,this._delayTime>=.2))if(this.initAllBoomItem(),this._boomItems.length>0){var o=this._boomItems[0].getLogicalPos();this._curGrid.dispatchCommand(o,a.default.ActivateClean(o),0),this._delayTime=0}else t.isObstructsEmpty()&&t.isCommandListEmpty()&&this._isSendBoomMsg&&this._boomItems.length<=0&&(this._isSendBoomMsg=!1,this._curGrid.setCurrentState(s.default.create()))},e.prototype.exit=function(t){this._curGrid=null,this._boomItems=null},e.prototype.initAllBoomItem=function(){this._boomItems=[];var t=this._curGrid.getItemsMap();for(var e in t){var o=t[e];if(o.canCleanByActivate()){this._boomItems.push(o);break}}},e.prototype.sendBoomMsg=function(){this._isSendBoomMsg=!0},e.prototype.stepNumberToBoom=function(){var t=this,e=this._curGrid,o=e.getPowerAmount(r.PowerID.AvailableSwap),n=[],i=e.getItemsMap();for(var a in i){var s=i[a];s&&s.canUpgradeByRainbow()&&n.push(s)}h.default.shuffleArray(n);for(var l=n.length,p=function(i){if(!(i<l))return"break";var a=u.getOneRandBoom();if(a){e.gainBonusStepCount(1),a.node.setPosition(e.node.convertToNodeSpace(e.getWorldPosForStep())),e.node.addChild(a.node,e.getTopZOrder(a.getEntityType(),n[i].getLogicalPos()));var s=Math.min(1e3*e.getBonusStepCount()+1e3,5e3);a.setCurrentState(c.default.create(n[i].getLogicalPos(),.2*i,s,{})),a.setVisible(!1),a.runAction(cc.sequence(cc.delayTime(.2*i),cc.callFunc(function(){m.default.playAudio(f.default.getInstance().getMatchAudioFilePath("bonus")),a.setVisible(!0),e.updateStepBarUIWithDelta(-1),e.lossPower(r.PowerID.AvailableSwap,1),i==Math.min(o,l)-1&&(t.initAllBoomItem(),t.sendBoomMsg())})))}},u=this,y=0;y<o;y++){if("break"===p(y))break}},e.prototype.getOneRandBoom=function(){var t=[];t.push(l.ItemBombType.Row),t.push(l.ItemBombType.Column),h.default.shuffleArray(t);var e=[];e.push(p.EntityColor.Red),e.push(p.EntityColor.Green),e.push(p.EntityColor.Blue),e.push(p.EntityColor.Yellow),e.push(p.EntityColor.Orange),e.push(p.EntityColor.Purple),h.default.shuffleArray(e);var o=u.default.generateEffectBombItem(this._curGrid,t[0],e[0]);return o||null},e.prototype.onBousTimeDone=function(){this._curGrid.setCurrentState(y.default.create())},e}(i.default);o.default=d,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../extend/utils/GameMath":"GameMath","../../../commond/GridCommand":"GridCommand","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/PowerID":"PowerID","../../../entity/item/ItemFactory":"ItemFactory","../../../entity/item/color/bomb/ItemBombBase":"ItemBombBase","../../../entity/item/state/ItemStateReplace":"ItemStateReplace","../GridStateBase":"GridStateBase","./GridStateComplete":"GridStateComplete","./GridStateDrop":"GridStateDrop"}],GridStateChanger:[function(t,e,o){"use strict";cc._RF.push(e,"6227cz7DV5Px7SLpnBRDN4A","GridStateChanger");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateHoney"),a=t("./GridStateMatch"),s=t("../../../defines/PowerID"),c=t("../../../entity/floor/FloorBase"),l=t("../../../entity/item/state/ItemStateChangeColor"),p=function(t){function e(){var e=t.call(this,i.GridState.ChangeColor)||this;return e._changeItems=[],e}return n(e,t),e.create=function(){return new e},e.prototype.setChangerPowerPoints=function(t,e){t.setPowerAmount(s.PowerID.DyeingItem,e)},e.prototype.getChangerPowerPoints=function(t){return t.getPowerAmount(s.PowerID.DyeingItem)},e.prototype.checkGoToNextState=function(t){this.getChangerPowerPoints(t)>0?this.changeCurrentItemColor(t):t.setCurrentState(a.default.create(this._changeItems))},e.prototype.changeCurrentItemColor=function(t){var e=t.getFloorsMap();for(var o in e){var n=e[o];if(n.getFloorType()==c.FloorType.Changer){var i=n.getLogicalPos(),r=t.getItemAtLogicalPos(i);r&&r.canChangeColor()&&r.getEntityColor()!=n.getEntityColor()&&(r.setCurrentState(l.default.create(n.getEntityColor())),this._changeItems.push(r.getLogicalPos()))}}this.setChangerPowerPoints(t,0)},e.prototype.enter=function(t){this.getChangerPowerPoints(t)>0?this.changeCurrentItemColor(t):(this.setChangerPowerPoints(t,0),t.setCurrentState(r.default.create()))},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&this.checkGoToNextState(t)},e.prototype.exit=function(t){this._changeItems=null},e}(i.default);o.default=p,cc._RF.pop()},{"../../../defines/PowerID":"PowerID","../../../entity/floor/FloorBase":"FloorBase","../../../entity/item/state/ItemStateChangeColor":"ItemStateChangeColor","../GridStateBase":"GridStateBase","./GridStateHoney":"GridStateHoney","./GridStateMatch":"GridStateMatch"}],GridStateCollection:[function(t,e,o){"use strict";cc._RF.push(e,"697e7BF/tZFKYPobitcjvqr","GridStateCollection");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../commond/GridCommand"),r=t("../../../defines/EntityID"),a=t("../../../defines/PowerID"),s=t("../../../entity/floor/FloorBase"),c=t("../../../entity/floor/FloorRoad"),l=t("../../../entity/item/ItemBase"),p=t("../../../entity/item/special/ItemPuppy"),u=t("../../../entity/item/state/ItemStateSwap"),y=t("../../GridBase"),h=t("../GridStateBase"),m=t("./GridStateDrop"),f=t("./GridStateMagicCrystal"),d=t("../../../../../base/IGame"),_=t("../../../defines/IdentifierManager"),g=t("../../../commond/GridCommandPair"),I=function(t){function e(){var e=t.call(this,h.GridState.Collection)||this;return e._walkedItemPos=[],e}return n(e,t),e.create=function(){return new e},e.setCurDogPawCount=function(t,e){t.setPowerAmount(a.PowerID.PuppyVitality,e)},e.getCurDogPawCount=function(t){return t.getPowerAmount(a.PowerID.PuppyVitality)},e.prototype.enter=function(t){e.getCurDogPawCount(t)>0?this.moveToNextItem(t):(e.setCurDogPawCount(t,0),t.setCurrentState(f.GridStateMagicCrystal.create()))},e.prototype.update=function(t,o){t.isObstructsEmpty()&&t.isCommandListEmpty()&&(e.getCurDogPawCount(t)>0?this.moveToNextItem(t):this.CollectionDone(t))},e.prototype.exit=function(t){this._walkedItemPos=null},e.prototype.moveToItem=function(t,o,n){e.setCurDogPawCount(t,Math.max(e.getCurDogPawCount(t)-1,0));var i=t.getItemAtLogicalPos(o),r=t.getItemAtLogicalPos(n);t.swapItem(o,n),i.setCurrentState(u.default.create(o,n,.5)),r&&r.setCurrentState(u.default.create(n,o)),this._walkedItemPos.push(o),this._walkedItemPos.push(n),t.gainPower(a.PowerID.PuppyMovedStep,1)},e.prototype.attackPosition=function(t,o){e.setCurDogPawCount(t,Math.max(e.getCurDogPawCount(t)-1,0)),this._walkedItemPos.push(o),t.dispatchCommand(o,i.default.BombClean(o,r.EntityColor.None,!1),.3);var n=this.getCurDogItem(t);if(n){t.addObstructs(n);var a=cc.callFunc(function(){var e=t.getFloorAtLogicalPos(n.getLogicalPos());if(e||e.getType()==s.FloorType.Road){var o=e,i=p.PuppyDirection.None;switch(o.getOutDirection()){case c.FloorRoadDirection.Up:i=p.PuppyDirection.Back;break;case c.FloorRoadDirection.Right:i=p.PuppyDirection.Right;break;case c.FloorRoadDirection.Down:i=p.PuppyDirection.Front;break;case c.FloorRoadDirection.Left:i=p.PuppyDirection.Left}n.attack(i)}}),l=cc.sequence(a,cc.delayTime(.5),cc.callFunc(function(){t.removeObstructs(n)}));n.runAction(l)}},e.prototype.getCurDogItem=function(t){var e=t.getItemsMap();for(var o in e){var n=e[o];if(n.getItemType()==l.ItemType.Puppy)return n}return null},e.prototype.moveToNextItem=function(t){var o=this,n=this.getCurDogItem(t);if(n){var i=this.findNextRoadFloorItem(t);if(i){var c=t.getItemAtLogicalPos(i.getLogicalPos()),p=t.getParasiteAtLogicalPos(i.getLogicalPos());if(p&&c)p.hostCanSwap()&&c.canSwap()?this.moveToItem(t,n.getLogicalPos(),i.getLogicalPos()):(p.setImmuneDamage(!1),p.canCleanByBomb(r.EntityColor.None)?this.attackPosition(t,i.getLogicalPos()):this.CollectionDone(t));else if(p&&!c)p.hostCanSwap()?this.moveToItem(t,n.getLogicalPos(),i.getLogicalPos()):(p.setImmuneDamage(!1),p.canCleanByBomb(r.EntityColor.None)?this.attackPosition(t,i.getLogicalPos()):this.CollectionDone(t));else if(!p&&c)if(c.getItemType()==l.ItemType.DogHouse){t.addObstructs(n);var u=cc.sequence(cc.moveTo(1,i.node.getPosition()),cc.callFunc(function(){e.setCurDogPawCount(t,0),n.node.setPosition(0,0),n.removeFromGrid();c.node.getContentSize();n.node.parent=c.node,n.win(),t.removeObstructs(n),t.setCurrentState(m.default.create(o._walkedItemPos)),t.gainPower(a.PowerID.PuppyMovedStep,1)}));n.node.zIndex=y.default.ZORDER_EFFECT,n.runAction(u),n.onCollected()}else if(c.getItemType()==l.ItemType.Balloon){var h=t.getFloorAtLogicalPos(c.getCurPostal());h&&h.getType()==s.FloorType.Road||this.CollectionDone(t),t.addObstructs(n),n.node.zIndex=y.default.ZORDER_EFFECT;u=cc.sequence(cc.moveTo(1,c.node.getPosition()),cc.callFunc(function(){n.fly(),d.default.playAudio(_.default.getInstance().getMatchAudioFilePath("balloon")),o.clearOneItem(t,c.getLogicalPos(),1)}),cc.moveTo(1.6,h.node.getPosition()),cc.delayTime(.2),cc.callFunc(function(){o.clearOneItem(t,h.getLogicalPos(),0),e.setCurDogPawCount(t,e.getCurDogPawCount(t)-1),t.swapItem(n.getLogicalPos(),h.getLogicalPos()),t.removeObstructs(n),n.stay(),t.gainPower(a.PowerID.PuppyMovedStep,1)}));n.runAction(u)}else c.canSwap()?this.moveToItem(t,n.getLogicalPos(),i.getLogicalPos()):(c.setImmuneDamage(!1),c.canCleanByBomb(r.EntityColor.None)?this.attackPosition(t,i.getLogicalPos()):this.CollectionDone(t));else this.moveToItem(t,n.getLogicalPos(),i.getLogicalPos())}}else this.CollectionDone(t)},e.prototype.findNextRoadFloorItem=function(t){var e=this.getCurDogItem(t);if(!e)return null;var o=t.getFloorAtLogicalPos(e.getLogicalPos());if(!o||o.getType()!=s.FloorType.Road)return null;var n=o.getLogicalPos(),i=o,r=p.PuppyDirection.None;switch(i.getOutDirection()){case c.FloorRoadDirection.Up:n=n.add(cc.v2(0,1)),r=p.PuppyDirection.Back;break;case c.FloorRoadDirection.Right:n=n.add(cc.v2(1,0)),r=p.PuppyDirection.Right;break;case c.FloorRoadDirection.Down:n=n.add(cc.v2(0,-1)),r=p.PuppyDirection.Front;break;case c.FloorRoadDirection.Left:n=n.add(cc.v2(-1,0)),r=p.PuppyDirection.Left;break;default:n=n.add(cc.v2(-1,0))}var a=t.getFloorAtLogicalPos(n);return a&&a.getType()==s.FloorType.Road?(e.move(r),a):null},e.prototype.CollectionDone=function(t){e.setCurDogPawCount(t,0);var o=this.getCurDogItem(t);o&&o.stay(),t.setCurrentState(m.default.create(this._walkedItemPos))},e.prototype.clearOneItem=function(t,e,o){this._walkedItemPos.push(e);var n=g.default.create(e,i.default.TerminateClean(e,r.EntityColor.None,!1),0,0);return t.excuteCommandPair(n),!0},e}(h.default);o.default=I,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../commond/GridCommand":"GridCommand","../../../commond/GridCommandPair":"GridCommandPair","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/PowerID":"PowerID","../../../entity/floor/FloorBase":"FloorBase","../../../entity/floor/FloorRoad":"FloorRoad","../../../entity/item/ItemBase":"ItemBase","../../../entity/item/special/ItemPuppy":"ItemPuppy","../../../entity/item/state/ItemStateSwap":"ItemStateSwap","../../GridBase":"GridBase","../GridStateBase":"GridStateBase","./GridStateDrop":"GridStateDrop","./GridStateMagicCrystal":"GridStateMagicCrystal"}],GridStateComboWord:[function(t,e,o){"use strict";cc._RF.push(e,"37934eo+atGNZKpX9CxWuBn","GridStateComboWord");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateSwapNeighbour"),a=t("../../../defines/PowerID"),s=t("../../../entity/flyer/FlyerComboWord"),c=function(t){function e(){return t.call(this,i.GridState.ComobWord)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){if(!t.hasShowCompleteBanner()){var e=t.getPowerAmount(a.PowerID.MatchCombo);if(e>=3){var o=!1;t.isComplete()?o=!0:t.isFailed()&&(o=!0);var n=s.default.create(t,e,o);t.setFlyerAtLogicalPos(n,cc.Vec2.ZERO)}}this.gainComboScore(t),t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(r.default.create())},e.prototype.gainComboScore=function(t){for(var e=t.getPowerAmount(a.PowerID.MatchCombo),o={1:500,2:500,3:500,4:750,5:750,6:750,7:1e3,8:1e3,9:1e3,10:1500},n=0,i=0;i<e-1;i++){n+=i<10?o[i+1]:1500}if(n>0){var r=t.node.getContentSize(),s=cc.v2(.5*r.width,.5*r.height+60);t.gainScoreWithPixelPos(n,s)}},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(r.default.create())},e}(i.default);o.default=c,cc._RF.pop()},{"../../../defines/PowerID":"PowerID","../../../entity/flyer/FlyerComboWord":"FlyerComboWord","../GridStateBase":"GridStateBase","./GridStateSwapNeighbour":"GridStateSwapNeighbour"}],GridStateCompleteBanner:[function(t,e,o){"use strict";cc._RF.push(e,"17638M7gtVAS7vHMFo5PsOQ","GridStateCompleteBanner");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateBousTime"),a=function(t){function e(){return t.call(this,i.GridState.CompleteBanner)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.hasShowCompleteBanner()?t.setCurrentState(r.default.create()):(t.resetDropConfig(),t.showCompleteBanner())},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.hasShowCompleteBanner()&&t.setCurrentState(r.default.create())},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStateBousTime":"GridStateBousTime"}],GridStateComplete:[function(t,e,o){"use strict";cc._RF.push(e,"dbc3eTJT45DIJnya3waCa3z","GridStateComplete");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateCongratulation"),a=function(t){function e(){var e=t.call(this,i.GridState.Complete)||this;return e._hadDisappearUI=!1,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.isFlyerObstructsEmpty()&&(this._hadDisappearUI?t.setCurrentState(r.default.create()):(this.disappear(t),this._hadDisappearUI=!0))},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStateCongratulation":"GridStateCongratulation"}],GridStateCongratulation:[function(t,e,o){"use strict";cc._RF.push(e,"48cdeELgLFMGqcG/544n7z9","GridStateCongratulation");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.Congratulation)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.congratulation()},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStateConveyer:[function(t,e,o){"use strict";cc._RF.push(e,"5e9f5IMhj5MloRZyMMnzKwj","GridStateConveyer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateChanger"),a=t("./GridStateDrop"),s=t("../../../defines/PowerID"),c=t("../../../../../extend/utils/GameMath"),l=function(t){function e(){var e=t.call(this,i.GridState.Conveyer)||this;return e._conveyerPosions=[],e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){if(t.getPowerAmount(s.PowerID.ConveyerMove)){var e=[],o=t.getCellsMap();for(var n in o){var i=o[n];e.push(i)}for(var a=0,l=e;a<l.length;a++){var p=(i=l[a]).onConvey();p.equals(c.default.INVALID_LOGICAL_POSITION)||c.default.insertAsSet(this._conveyerPosions,p)}t.lossPower(s.PowerID.ConveyerMove,1),this._conveyerPosions.length<=0&&t.setCurrentState(r.default.create())}else t.setCurrentState(r.default.create())},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(a.default.create(this._conveyerPosions))},e.prototype.exit=function(t){this._conveyerPosions=null},e}(i.default);o.default=l,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/PowerID":"PowerID","../GridStateBase":"GridStateBase","./GridStateChanger":"GridStateChanger","./GridStateDrop":"GridStateDrop"}],GridStateCreate:[function(t,e,o){"use strict";cc._RF.push(e,"ea3bb4csv5Eaoj43FRrJpaQ","GridStateCreate");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../extend/utils/GameMath"),r=t("../../../../../extend/utils/TMXJsonPhraser"),a=t("../../../defines/EntityID"),s=t("../../../defines/KindID"),c=t("../../../defines/TMXConfigInfoKeys"),l=t("../../../entity/cell/CellBase"),p=t("../../../entity/cell/CellFactory"),u=t("../../../entity/fence/FenceFactory"),y=t("../../../entity/floor/FloorBase"),h=t("../../../entity/floor/FloorFactory"),m=t("../../../entity/frame/FrameNormal"),f=t("../../../entity/item/ItemBase"),d=t("../../../entity/item/ItemFactory"),_=t("../../../entity/marker/MarkerNormal"),g=t("../../../entity/parasite/ParasiteFactory"),I=t("../../../entity/popsicle/PopsicleFactory"),C=t("../../../entity/rug/RugFactory"),P=t("../GridStateBase"),D=function(t){function e(e,o){var n=t.call(this,[],P.GridState.Create)||this;return n._viewSize=cc.Size.ZERO,n._tmxPhraser=null,n._gridSize=cc.size(9,10),n._cellSize=cc.size(75,75),n._viewSize=e,n._tmxPhraser=r.default.create(o),n._gridSize=n._tmxPhraser.getMapSize(),n._cellSize=cc.size(75,75),n}return n(e,t),e.createState=function(t,o){return new e(t,o)},e.prototype.enter=function(t){t.setGridSize(this._gridSize),t.setCellSize(this._cellSize);var e=cc.size(t.getGridSize().width*t.getCellSize().width,t.getGridSize().height*t.getCellSize().height);t.node.setContentSize(e);var o=i.default.getScaleFromViewSize(this._viewSize,cc.size(e.width+.5*t.getCellSize().width,e.height+.5*t.getCellSize().height),.5,1);t.node.setScale(o),this.initCells(t),this.initPopsicle(t),this.initFloors(t),this.initRugs(t),this.initItems(t),this.initFences(t),this.initFrames(t),this.markFences(t);var n=this.getShufflePositions();this.someItemCanDrop(t)?this.shuffleGrid(t,n,!0,!1,!0):this.shuffleGrid(t,n,!0,!0,!0),this.initParasites(t),this.initConveyer(t),this.initMarker(t),this.initPath(t)},e.prototype.update=function(t,e){},e.prototype.exit=function(t){this._viewSize=null,this._tmxPhraser=null,this._gridSize=null,this._cellSize=null},e.prototype.initCells=function(t){var e=this._tmxPhraser.getTileLayerWithName(c.default.CELLS_LAYER_KEY);if(e&&!(e.length<=0)){for(var o=this._tmxPhraser.getTileLayerWithName(c.default.CONVEYERS_LAYER_KEY),n=this._tmxPhraser.getMapSize(),r=this._tmxPhraser.getTileSize(),a=0;a<n.width;a++)for(var l=!1,u=0;u<n.height;u++){var y=e[u*n.width+a],h=o[u*n.width+a];0!=h&&(y=h);var m=this._tmxPhraser.getPropertieFromGID(y);if(m){var f=m.Kind,d=p.default.generateCellWithKindID(t,f);if(d){var _=this.getConfigMap(c.default.CELLS_LAYER_KEY,cc.v2(a,u)),g=this.getConfigMap(c.default.CONVEYERS_LAYER_KEY,cc.v2(a,u));if(!i.default.isEmptyObject(g)){for(var I in g)_[I]=g[I];_[c.default.CFG_CONVEYER_POSTAL_KEY_TYPE]=!0}0==l&&(_[c.default.CFG_DROP_KEY_IS_TOP]=!0,l=!0),t.setCellAtLogicalPos(d,cc.v2(a,n.height-1-u)),d.dealWithConfigMap(_)}}}for(var C=0,P=this._tmxPhraser.getObjectLayerWithName(c.default.MARKS_LAYER_KEY);C<P.length;C++){var D=P[C],v=this._tmxPhraser.getPropertieFromGID(D.gid);if(!i.default.isEmptyObject(v)){var b=cc.v2(D.rect.center.x,n.height*r.height-D.rect.center.y),E=cc.v2(Math.floor(b.x/r.width),Math.floor(b.y/r.height));if(f=v.Kind)switch(f){case s.KindID.MarkWormholeEntrance:var B=this.getConfigMap(c.default.MARKS_LAYER_KEY,cc.v2(E.x,n.height-1-E.y));B[c.default.CFG_WORMHOLE_KEY_TYPE]=c.default.CFG_WORMHOLE_VALUE_ENTRANCE;var T=t.getCellAtLogicalPos(E);T&&T.dealWithConfigMap(B);var F={};F[c.default.CFG_WORMHOLE_KEY_TYPE]=c.default.CFG_WORMHOLE_VALUE_EXIT,F[c.default.CFG_WORMHOLE_POSTAL_KEY_TYPE]=i.default.getConfigStringFromVec2(E);var M=B[c.default.CFG_WORMHOLE_POSTAL_KEY_TYPE],G=i.default.getVec2FromConfigString(M),S=t.getCellAtLogicalPos(G);S&&S.dealWithConfigMap(F)}}}}},e.prototype.initPopsicle=function(t){var e=c.default.POPSICLES_LAYER_KEY,o=this._tmxPhraser.getObjectLayerWithName(e);if(o&&!(o.length<=0))for(var n=this._tmxPhraser.getMapSize(),i=this._tmxPhraser.getTileSize(),r=0,a=o;r<a.length;r++){var l=a[r],p=Math.ceil(l.rect.size.width/i.width),u=Math.ceil(l.rect.size.height/i.height),y=Math.floor(l.rect.origin.x/i.width),h=Math.floor(n.height-1-l.rect.origin.y/i.height-u+1),m=l.properties[c.default.CFG_POPSICLE_KEY_TYPE],f=s.KindID.PopsicleNormal;m&&(m==c.default.CFG_POPSICLE_VALUE_LINE?f=s.KindID.PopsicleLine:m==c.default.CFG_POPSICLE_VALUE_BOOM&&(f=s.KindID.PopsicleBoom));var d=I.default.generatePopsicleWithKindID(t,p,u,f);d&&t.setPopsicleAtLogicalPos(d,cc.v2(y,h))}},e.prototype.initFloors=function(t){var e=c.default.FLOORS_LAYER_KEY,o=this._tmxPhraser.getTileLayerWithName(e);if(o&&!(o.length<=0)){for(var n=this._tmxPhraser.getMapSize(),r=!1,s=0;s<n.height;s++)for(var l=0;l<n.width;l++){var p=o[s*n.width+l],u=this._tmxPhraser.getPropertieFromGID(p);if(!i.default.isEmptyObject(u)){var y=u.Kind;if(y){var m=h.default.generateFloorWithKindID(t,y);if(m){var f=this.getConfigMap(e,cc.v2(l,s));t.setFloorAtLogicalPos(m,cc.v2(l,n.height-1-s)),m.dealWithConfigMap(f),m.getEntityID()==a.EntityID.FloorGrass&&(r=!0)}}}}if(r){var d=t.getCellsMap();for(var _ in d){d[_].setNeedGrass(!0)}}}},e.prototype.initRugs=function(t){var e=c.default.JAM_LAYER_KEY,o=this._tmxPhraser.getTileLayerWithName(e);if(o&&!(o.length<=0))for(var n=this._tmxPhraser.getMapSize(),r=0;r<n.height;r++)for(var a=0;a<n.width;a++){var s=o[r*n.width+a],l=this._tmxPhraser.getPropertieFromGID(s);if(!i.default.isEmptyObject(l)){var p=l.Kind;if(p){var u=C.default.generatePolishWithKindID(t,p);if(u){t.setRugAtLogicalPos(u,cc.v2(a,n.height-1-r));var y=this.getConfigMap(e,cc.v2(a,r));u.dealWithConfigMap(y)}}}}},e.prototype.initItems=function(t){var e=c.default.ITEMS_LAYER_KEY,o=this._tmxPhraser.getTileLayerWithName(e);if(o&&!(o.length<=0)){for(var n=this._tmxPhraser.getMapSize(),r=0;r<n.height;r++)for(var a=0;a<n.width;a++){var l=o[r*n.width+a],p=this._tmxPhraser.getPropertieFromGID(l);if(!i.default.isEmptyObject(p))if((y=t.getCellAtLogicalPos(cc.v2(a,n.height-1-r)))&&y.canHoldItem())if((h=p.Kind)&&h!=s.KindID.ItemNormalRandom){if(m=d.default.generateItemWithKindID(t,h)){t.setItemAtLogicalPos(m,cc.v2(a,n.height-1-r));var u=this.getConfigMap(e,cc.v2(a,r));m.dealWithConfigMap(u)}}else 1}for(r=0;r<n.height;r++)for(a=0;a<n.width;a++){var y,h,m;l=o[r*n.width+a],p=this._tmxPhraser.getPropertieFromGID(l);if(!i.default.isEmptyObject(p))if((y=t.getCellAtLogicalPos(cc.v2(a,n.height-1-r)))&&y.canHoldItem())if((h=p.Kind)&&h==s.KindID.ItemNormalRandom)if(m=d.default.generateItemWithKindID(t,h)){t.setItemAtLogicalPos(m,cc.v2(a,n.height-1-r));u=this.getConfigMap(e,cc.v2(a,r));m.dealWithConfigMap(u)}}}},e.prototype.initFences=function(t){var e=this._tmxPhraser.getObjectLayerWithName(c.default.MARKS_LAYER_KEY);if(e&&!(e.length<=0))for(var o=this._tmxPhraser.getMapSize(),n=this._tmxPhraser.getTileSize(),r=0,a=e;r<a.length;r++){var s=a[r],l=this._tmxPhraser.getPropertieFromGID(s.gid);if(!i.default.isEmptyObject(l)){var p=cc.v2(s.rect.center.x,o.height*n.height-s.rect.center.y),y=cc.v2(Math.floor(p.x/n.width),Math.floor(p.y/n.height)),h=l.Kind,m=u.default.generateItemWithKindID(t,y,h);m&&t.setFenceAtFencePos(m,m.getFencePos())}}},e.prototype.initParasites=function(t){var e=c.default.PARASITES_LAYER_KEY,o=this._tmxPhraser.getTileLayerWithName(e);if(o&&!(o.length<=0))for(var n=this._tmxPhraser.getMapSize(),r=0;r<n.height;r++)for(var a=0;a<n.width;a++){var s=o[r*n.width+a],l=this._tmxPhraser.getPropertieFromGID(s);if(!i.default.isEmptyObject(l)){var p=l.Kind,u=g.default.generateParasiteWithKindID(t,p);if(u){var y=this.getConfigMap(e,cc.v2(a,r));u.dealWithConfigMap(y),t.setParasiteAtLogicalPos(u,cc.v2(a,n.height-1-r))}}}},e.prototype.initFrames=function(t){for(var e=-1;e<this._gridSize.height+1;e++)for(var o=-1;o<this._gridSize.width+1;o++){var n=cc.v2(o,e),i=!1,r=t.getCellAtLogicalPos(n);if(r?r.getCellType()==l.CellType.MovablePlate&&(i=!0):i=!0,i){var a=m.default.create(t);a&&t.setFrameAtLogicalPos(a,n)}}},e.prototype.initConveyer=function(t){var e=t.getCellsMap(),o=[];for(var n in e){var i=e[n];i.getCellType()==l.CellType.Conveyer&&o.push(i.getLogicalPos())}t.setConveyerLayerVisiblePos(o)},e.prototype.initMarker=function(t){var e=this._tmxPhraser.getObjectLayerWithName(c.default.MARKS_LAYER_KEY);if(e)for(var o=this._tmxPhraser.getMapSize(),n=this._tmxPhraser.getTileSize(),r=0,a=e;r<a.length;r++){var l=a[r],p=this._tmxPhraser.getPropertieFromGID(l.gid);if(!i.default.isEmptyObject(p)){var u=cc.v2(l.rect.center.x,o.height*n.height-l.rect.center.y),y=cc.v2(Math.floor(u.x/n.width),Math.floor(u.y/n.height)),h=t.getMarkerAtLogicalPos(y);h||(h=_.default.create(t),t.setMarkerAtLogicalPos(h,y));var m=this.getConfigMap(c.default.MARKS_LAYER_KEY,cc.v2(y.x,o.height-1-y.y)),f=p.Kind;if(f)switch(f){case s.KindID.MarkBoneCollector:m[c.default.CFG_MARK_BONE_COLLECTOR_KEY_TYPE]=c.default.CFG_MARK_BONE_COLLECTOR_VALUE_DEFAULT;break;case s.KindID.MarkWormholeEntrance:m[c.default.CFG_WORM_HOLE_ENTRANCE_KEY_TYPE]=c.default.CFG_WORM_HOLE_ENTRANCE_VALUE_DEFAULT;break;case s.KindID.MarkWormholeExit:m[c.default.CFG_WORM_HOLE_EXIT_KEY_TYPE]=c.default.CFG_WORM_HOLE_EXIT_VALUE_DEFAULT}h.dealWithConfigMap(m)}}},e.prototype.initPath=function(t){var e=[],o=t.getItemsMap();for(var n in o){var i=o[n];if(i.getItemType()==f.ItemType.Puppy)e.push(i.getLogicalPos());else if(i.getItemType()==f.ItemType.DogHouse)e.push(i.getLogicalPos());else if(i.getItemType()==f.ItemType.Balloon){e.push(i.getLogicalPos());if(i){var r=i.getCurPostal();e.push(r)}}}for(var a=0,s=e;a<s.length;a++){var c=s[a],l=t.getFloorAtLogicalPos(c);if(l&&l.getFloorType()==y.FloorType.Road){l&&l.setIsStartPoint(!0)}}},e.prototype.getShufflePositions=function(){for(var t=[],e=this._tmxPhraser.getTileLayerWithName(c.default.ITEMS_LAYER_KEY),o=0;o<this._gridSize.height;o++)for(var n=0;n<this._gridSize.width;n++){var r=e[o*this._gridSize.width+n],a=this._tmxPhraser.getPropertieFromGID(r);if(!i.default.isEmptyObject(a)){var s=a.Kind;s&&d.default.isShuffleKindID(s)&&t.push(cc.v2(n,this._gridSize.height-1-o))}}return t},e.prototype.someItemCanDrop=function(t){var e=t.getItemsMap();for(var o in e){var n=e[o],i=this.tryDropItem(t,n);if(i.type!=a.EntityDropStepType.Stay)return!0;if((i=this.tryDiagonalItem(t,n)).type!=a.EntityDropStepType.Stay)return!0}var r=t.getCellsMap();for(var o in r){var s=r[o].getLogicalPos();if(null==t.getItemAtLogicalPos(s))return!0}return!1},e.prototype.getConfigMap=function(t,e){for(var o=this._tmxPhraser.getObjectInfos(t,e),n=this._tmxPhraser.getTileSize(),i=this._tmxPhraser.getMapSize(),r={},a=0,l=o;a<l.length;a++){var p=l[a];for(var u in p.properties)r[u]=p.properties[u];if(p.path.length>0){for(var y=[],h=p.path.length,m=0;m<h;m++){var f=p.path[m];f.x=Math.floor(f.x/n.width),f.y=i.height-1-Math.floor(f.y/n.height),y.push(f)}r[c.default.CFG_MOVABLE_PLATE_PATH_KEY_TYPE]=y}}if(t==c.default.CELLS_LAYER_KEY)for(var d=0,_=this._tmxPhraser.getObjectInfos(c.default.MARKS_LAYER_KEY,e);d<_.length;d++){p=_[d];var g=this._tmxPhraser.getPropertieFromGID(p.gid).Kind;g&&g==s.KindID.MarkBoneCollector&&(r[c.default.CFG_MARK_BONE_COLLECTOR_KEY_TYPE]=c.default.CFG_MARK_BONE_COLLECTOR_VALUE_DEFAULT)}return r},e}(t("./GridStateDrop").default);o.default=D,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../../../extend/utils/TMXJsonPhraser":"TMXJsonPhraser","../../../defines/EntityID":"EntityID","../../../defines/KindID":"KindID","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../../entity/cell/CellBase":"CellBase","../../../entity/cell/CellFactory":"CellFactory","../../../entity/fence/FenceFactory":"FenceFactory","../../../entity/floor/FloorBase":"FloorBase","../../../entity/floor/FloorFactory":"FloorFactory","../../../entity/frame/FrameNormal":"FrameNormal","../../../entity/item/ItemBase":"ItemBase","../../../entity/item/ItemFactory":"ItemFactory","../../../entity/marker/MarkerNormal":"MarkerNormal","../../../entity/parasite/ParasiteFactory":"ParasiteFactory","../../../entity/popsicle/PopsicleFactory":"PopsicleFactory","../../../entity/rug/RugFactory":"RugFactory","../GridStateBase":"GridStateBase","./GridStateDrop":"GridStateDrop"}],GridStateCrossBomb:[function(t,e,o){"use strict";cc._RF.push(e,"e7ea3QjdrJEV6BnfWyNv0CW","GridStateCrossBomb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("../../GridBase"),a=t("../../../../../define/GameCurrencyType"),s=t("./GridStateMatch"),c=t("../../../defines/EntityID"),l=t("../../../../../base/Pair"),p=t("../../../entity/flyer/FlyerCannon"),u=t("../../../../../base/IGame"),y=t("../../../defines/IdentifierManager"),h=function(t){function e(){var e=t.call(this,i.GridState.CrossBomb)||this;return e._targetPos=cc.Vec2.ZERO,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){},e.prototype.exit=function(t){this._targetPos=null},e.prototype.canChangeState=function(){return!0},e.prototype.canPause=function(){return!0},e.prototype.onTapBegan=function(t,e){t.getCellAtLogicalPos(e)?(this._targetPos=e,t.requestUseGear(a.GameCurrencyType.AidBomb,1)):t.setMode(r.GridMode.Normal)},e.prototype.onRespone=function(t,e){u.default.playAudio(y.default.getInstance().getMatchAudioFilePath("prop_crossbomb"));for(var o=[new l.Pair(cc.v2(1,0),!0),new l.Pair(cc.v2(-1,0),!1),new l.Pair(cc.v2(0,1),!1),new l.Pair(cc.v2(0,-1),!1)],n=t.isGrassFloorAtLogicalPos(this._targetPos),i=0,a=o;i<a.length;i++){var h=a[i],m=p.default.create(t,c.EntityColor.None,n,this._targetPos,h.first,h.second);t.setFlyerAtLogicalPos(m,this._targetPos)}t.setCurrentState(s.default.create()),t.setMode(r.GridMode.Normal)},e}(i.default);o.default=h,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../base/Pair":"Pair","../../../../../define/GameCurrencyType":"GameCurrencyType","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../entity/flyer/FlyerCannon":"FlyerCannon","../../GridBase":"GridBase","../GridStateBase":"GridStateBase","./GridStateMatch":"GridStateMatch"}],GridStateDisappear:[function(t,e,o){"use strict";cc._RF.push(e,"3ae37rTm8lI8IkDAx1xlkcM","GridStateDisappear");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStatePrepare"),a=function(t){function e(){return t.call(this,i.GridState.Disappear)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){this.disappear(t)},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(r.default.create())},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStatePrepare":"GridStatePrepare"}],GridStateDrop:[function(t,e,o){"use strict";cc._RF.push(e,"35aeaAeihNM77iAXM+leLf1","GridStateDrop");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../extend/utils/GameMath"),r=t("../../../defines/EntityID"),a=t("../../../entity/fence/FencePos"),s=t("../../../entity/item/ItemFactory"),c=t("../../../entity/item/state/ItemStateDrop"),l=t("../../../entity/state/EntityStateBase"),p=t("../GridStateBase"),u=t("./GridStateMatch"),y=function(t){function e(e,o){void 0===o&&(o=p.GridState.DropItem);var n=t.call(this,o)||this;return n._checkMatchPositions=[],n._deadCellsPositions=[],n._livingCellsPositions=[],n._fencesPositions=[],n._fencesMap={},n._dropedItems=[],n._stepCount=0,n._finishDrop=!1,n._checkMatchPositions=e,n}return n(e,t),e.create=function(t){return void 0===t&&(t=[]),new e(t)},e.prototype.clearDeadAndLivingCellRecord=function(t){i.default.clearArray(this._deadCellsPositions),i.default.clearArray(this._livingCellsPositions)},e.prototype.isDeadCell=function(t,e){if(-1!=i.default.indexOf(this._livingCellsPositions,e))return!1;if(-1!=i.default.indexOf(this._deadCellsPositions,e))return!0;var o=t.getCellAtLogicalPos(e);if(!o)return i.default.insertAsSet(this._deadCellsPositions,e),!0;if(this.canGenerateItemAtPos(t,e))return i.default.insertAsSet(this._livingCellsPositions,e),!1;if(o.getIsWormholeExit()&&!this.isDeadCell(t,o.getWormholeSource()))return i.default.insertAsSet(this._livingCellsPositions,e),!1;for(var n=0,r=[cc.v2(0,1),cc.v2(-1,1),cc.v2(1,1)];n<r.length;n++){var a=r[n],s=e.add(a);if(this.canPassThrough(t,s,e)&&!this.isDeadCell(t,s))return i.default.insertAsSet(this._livingCellsPositions,e),!1}return i.default.insertAsSet(this._deadCellsPositions,e),!0},e.prototype.markFences=function(t){i.default.clearArray(this._fencesPositions),i.default.clearObject(this._fencesMap);var e=[cc.v2(-1,0),cc.v2(0,0),cc.v2(1,0)],o=[cc.v2(0,1),cc.v2(0,0),cc.v2(0,-1)],n=[cc.v2(0,1),cc.v2(0,-1),cc.v2(1,0),cc.v2(-1,0)],r=t.getFencesMap();for(var s in r){var c=r[s].getFencePos(),l=c.getFencePosType();switch(i.default.insertAsSet(this._fencesPositions,c),l){case a.FencePosType.Horizontal:for(var p=0,u=e;p<u.length;p++){var y=u[p],h=c.posA.add(y);if(!t.getCellAtLogicalPos(h))for(var m=0,f=n;m<f.length;m++){var d=f[m],_=a.default.create(h,h.add(d));i.default.insertAsSet(this._fencesPositions,_)}if(h=c.posB.add(y),!t.getCellAtLogicalPos(h))for(var g=0,I=n;g<I.length;g++){d=I[g],_=a.default.create(h,h.add(d));i.default.insertAsSet(this._fencesPositions,_)}}break;case a.FencePosType.Vertical:for(var C=0,P=o;C<P.length;C++){y=P[C],h=c.posA.add(y);if(!t.getCellAtLogicalPos(h))for(var D=0,v=n;D<v.length;D++){d=v[D],_=a.default.create(h,h.add(d));i.default.insertAsSet(this._fencesPositions,_)}if(h=c.posB.add(y),!t.getCellAtLogicalPos(h))for(var b=0,E=n;b<E.length;b++){d=E[b],_=a.default.create(h,h.add(d));i.default.insertAsSet(this._fencesPositions,_)}}}}},e.prototype.hasFence=function(t,e,o){var n=a.default.create(e,o);return-1!=i.default.indexOf(this._fencesPositions,n)},e.prototype.blockByFence=function(t,e,o){var n=o.sub(e);if(n.equals(cc.v2(0,1))||n.equals(cc.v2(0,-1))){if(this.hasFence(t,e,o))return!0}else if(n.equals(cc.v2(1,-1))||n.equals(cc.v2(-1,1))){var i=this.hasFence(t,e,e.add(cc.v2(0,-1))),r=this.hasFence(t,o,o.add(cc.v2(0,1)));if(i&&r)return!0;i=this.hasFence(t,e,e.add(cc.v2(1,0))),r=this.hasFence(t,o,o.add(cc.v2(-1,0)));if(i&&r)return!0;i=this.hasFence(t,e,e.add(cc.v2(1,0))),r=this.hasFence(t,e,e.add(cc.v2(0,-1)));if(i&&r)return!0;i=this.hasFence(t,o,o.add(cc.v2(0,1))),r=this.hasFence(t,o,o.add(cc.v2(-1,0)));if(i&&r)return!0}else if(n.equals(cc.v2(-1,-1))||n.equals(cc.v2(1,1))){i=this.hasFence(t,e,e.add(cc.v2(0,-1))),r=this.hasFence(t,o,o.add(cc.v2(0,1)));if(i&&r)return!0;i=this.hasFence(t,e,e.add(cc.v2(-1,0))),r=this.hasFence(t,o,o.add(cc.v2(1,0)));if(i&&r)return!0;i=this.hasFence(t,e,e.add(cc.v2(-1,0))),r=this.hasFence(t,e,e.add(cc.v2(0,-1)));if(i&&r)return!0;i=this.hasFence(t,o,o.add(cc.v2(0,1))),r=this.hasFence(t,o,o.add(cc.v2(1,0)));if(i&&r)return!0}return!1},e.prototype.canGenerateItemAtPos=function(t,e){var o=t.getCellAtLogicalPos(e);return!(!o||!o.canGenerateItem()||this.canPassThrough(t,e.add(cc.v2(0,1)),e))},e.prototype.isCellAvailableForDrop=function(t,e){if(t.getCellAtLogicalPos(e)){var o=t.getParasiteAtLogicalPos(e),n=t.getItemAtLogicalPos(e);return!(n&&!n.canDrop()||o&&!o.hostCanDrop())}return!1},e.prototype.canPassThrough=function(t,e,o){return!(Math.abs(e.x-o.x)>1)&&(!(Math.abs(e.y-o.y)>1)&&(!this.blockByFence(t,e,o)&&(!!this.isCellAvailableForDrop(t,e)&&this.isCellAvailableForDrop(t,o))))},e.prototype.canArrive=function(t,e,o){if(Math.abs(e.x-o.x)>1)return!1;if(Math.abs(e.y-o.y)>1)return!1;if(this.blockByFence(t,e,o))return!1;if(this.canGenerateItemAtPos(t,o))return!1;if(this.isCellAvailableForDrop(t,e)){var n=t.getCellAtLogicalPos(o);return!!n&&n.canPassThrough()}return!1},e.prototype.tryDropItem=function(t,e){var o=r.EntityDropStep.create(r.EntityDropStepType.Stay,e.getLogicalPos());if(e.canDrop()){var n=t.getCellAtLogicalPos(e.getLogicalPos());if(n.getIsWormholeEntrance()){var i=t.getItemAtLogicalPos(n.getWormholeDestination()),a=t.getParasiteAtLogicalPos(n.getWormholeDestination());i||a||(o.type=r.EntityDropStepType.Wormhole,o.logicalPos=n.getWormholeDestination())}else{var s=e.getLogicalPos(),c=s.add(cc.v2(0,-1));this.canArrive(t,s,c)&&(o.type=r.EntityDropStepType.Drop,o.logicalPos=c)}}return o},e.prototype.tryDiagonalItem=function(t,e){var o=r.EntityDropStep.create(r.EntityDropStepType.Stay,e.getLogicalPos()),n=this.tryDropItem(t,e);switch(n.type){case r.EntityDropStepType.Stay:for(var i=e.getLogicalPos(),a=0,s=[cc.v2(-1,-1),cc.v2(1,-1)];a<s.length;a++){var c=s[a],l=i.add(c),p=l.add(cc.v2(0,1)),u=this.isDeadCell(t,p),y=!this.canPassThrough(t,p,l);(u||y)&&this.canArrive(t,i,l)&&(o.type=r.EntityDropStepType.Drop,o.logicalPos=l)}return o;case r.EntityDropStepType.Drop:case r.EntityDropStepType.Wormhole:return o.type=n.type,o.logicalPos=n.logicalPos,o}return o},e.prototype.tryDropPos=function(t,e,o){var n=!1,a=t.getItemAtLogicalPos(e);if(!a)return n;if(!a.canDrop())return n;if(-1!=i.default.indexOf(this._dropedItems,a))return n=!0;var s=r.EntityDropStep.create(r.EntityDropStepType.Stay,a.getLogicalPos());if(0==n&&(_=t.getCellAtLogicalPos(a.getLogicalPos())).getIsWormholeEntrance()){var c=t.getCellAtLogicalPos(_.getWormholeDestination());c&&c.canPassThrough()&&(s.type=r.EntityDropStepType.Wormhole,s.logicalPos=_.getWormholeDestination(),n=!0)}if(0==n){var l=e.add(cc.v2(0,-1));if(this.canArrive(t,e,l))s.type=r.EntityDropStepType.Drop,s.logicalPos=l;else if(o)for(var p=0,u=[cc.v2(-1,-1),cc.v2(1,-1)];p<u.length;p++){var y=u[p],h=e.add(y),m=h.add(cc.v2(0,1)),f=this.isDeadCell(t,m),d=!this.canPassThrough(t,m,h);(f||d)&&this.canArrive(t,e,h)&&(s.type=r.EntityDropStepType.Drop,s.logicalPos=h)}}switch(s.type){case r.EntityDropStepType.Wormhole:case r.EntityDropStepType.Drop:t.swapItem(e,s.logicalPos),a.getPath().length<=0&&a.addStepToPath(r.EntityDropStep.create(r.EntityDropStepType.Stay,e)),a.addStepToPath(s);var _,g=a.getPath();a.setPixelPos(g[0].logicalPos),i.default.insertAsSet(this._dropedItems,a),(_=t.getCellAtLogicalPos(e)).getIsWormholeExit()&&this.tryDropPos(t,_.getWormholeSource(),o);for(var I=0,C=[cc.v2(0,1),cc.v2(-1,1),cc.v2(1,1)];I<C.length;I++){y=C[I];this.tryDropPos(t,e.add(y),o)}}return n},e.prototype.dropAllItemsByStep=function(t,e){this._dropedItems.length=0;for(var o=!1,n=t.getGridSize(),a=0;a<n.height;a++)for(var c=0;c<n.width;c++)this.tryDropPos(t,cc.v2(c,a),!1)&&(o=!0);for(a=0;a<n.height;a++)for(c=0;c<n.width;c++)this.tryDropPos(t,cc.v2(c,a),!0)&&(o=!0);var l=t.getItemsMap();for(var p in l){var u=(f=l[p]).getLogicalPos();-1==i.default.indexOf(this._dropedItems,f)&&(f.getPath().length<=0&&f.addStepToPath(r.EntityDropStep.create(r.EntityDropStepType.Stay,u)),f.addStepToPath(r.EntityDropStep.create(r.EntityDropStepType.Stay,u)))}var y=!1,h=t.getCellsMap();for(var p in h){var m=h[p];u=m.getLogicalPos();if(this.canGenerateItemAtPos(t,u)){var f;if(f=t.getItemAtLogicalPos(u))continue;var d=m.nextItemID(),_=u,g=s.default.generateItemWithEntityID(t,d);if(g){g.setVisible(!1),y=!0,t.setItemAtLogicalPos(g,_);for(var I=0;I<=e;I++)g.addStepToPath(r.EntityDropStep.create(r.EntityDropStepType.Hide,_));g.addStepToPath(r.EntityDropStep.create(r.EntityDropStepType.Born,_))}}}return o||y},e.prototype.runNextStep=function(t){this.dropAllItemsByStep(t,this._stepCount)?this._stepCount++:cc.log("Finish Drop")},e.prototype.caculatePathForItems=function(t){var e=t.getItemsMap();for(var o in e){e[o].clearPath()}this.markFences(t),this.clearDeadAndLivingCellRecord(t);for(var n=0;this.dropAllItemsByStep(t,n);)n++},e.prototype.runPathForAllItems=function(t){var e=t.getItemsMap();for(var o in e){var n=e[o],r=n.getLogicalPos();n.setCurrentState(c.default.create()),n.getCurrentStateType()!=l.EntityStateType.Wait&&i.default.insertAsSet(this._checkMatchPositions,r)}},e.prototype.tryDropItemsForStep=function(t,e){return this.dropAllItemsByStep(t,e)},e.prototype.enter=function(t){t.unimmuneAllEntities(),this.markFences(t),this.clearDeadAndLivingCellRecord(t),this._stepCount=0,this._finishDrop=!1,this.update(t,0)},e.prototype.update=function(t,e){if(0==this._finishDrop)for(var o=(new Date).getTime(),n=0;;){if((new Date).getTime()-o>20&&n>0)break;if(n+=1,this._finishDrop=!this.tryDropItemsForStep(t,this._stepCount),this._finishDrop){this.runPathForAllItems(t);break}this._stepCount++}else t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(u.default.create(this._checkMatchPositions))},e.prototype.exit=function(t){this._checkMatchPositions=null,this._deadCellsPositions=null,this._livingCellsPositions=null,this._fencesPositions=null,this._fencesMap=null,this._dropedItems=null},e}(p.default);o.default=y,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/EntityID":"EntityID","../../../entity/fence/FencePos":"FencePos","../../../entity/item/ItemFactory":"ItemFactory","../../../entity/item/state/ItemStateDrop":"ItemStateDrop","../../../entity/state/EntityStateBase":"EntityStateBase","../GridStateBase":"GridStateBase","./GridStateMatch":"GridStateMatch"}],GridStateFailSummary:[function(t,e,o){"use strict";cc._RF.push(e,"95236eCrJ1DvrhD761kmY9C","GridStateFailSummary");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.FailSummary)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.showGameFail()},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStateFail:[function(t,e,o){"use strict";cc._RF.push(e,"46976S3H51AT6MOZ94OhOjI","GridStateFail");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateFailSummary"),a=function(t){function e(){return t.call(this,i.GridState.Fail)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){this.disappear(t)},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(r.default.create())},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStateFailSummary":"GridStateFailSummary"}],GridStateForceClean:[function(t,e,o){"use strict";cc._RF.push(e,"82a20dRr7FDXqEznEEah0dc","GridStateForceClean");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../define/GameCurrencyType"),r=t("../../../commond/GridCommand"),a=t("../../../defines/EntityID"),s=t("../../GridBase"),c=t("../GridStateBase"),l=t("./GridStateMatch"),p=t("../../../entity/flyer/FlyerHammer"),u=function(t){function e(){var e=t.call(this,c.GridState.ForceClean)||this;return e._targetPos=cc.Vec2.ZERO,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){},e.prototype.exit=function(t){this._targetPos=null},e.prototype.canChangeState=function(){return!0},e.prototype.canPause=function(){return!0},e.prototype.onTapBegan=function(t,e){if(t.getCellAtLogicalPos(e)){for(var o=!1,n=0,c=[a.EntityType.Parasite,a.EntityType.Item,a.EntityType.Rug,a.EntityType.Floor,a.EntityType.Popsicle,a.EntityType.Cell];n<c.length;n++){var l=c[n],p=t.getEntity(l,e);if(p){o=p.canExcuteCommand(r.default.BombClean(e,a.EntityColor.None,!1));break}}o&&(this._targetPos=e,t.requestUseGear(i.GameCurrencyType.AidHammer,1))}else t.setMode(s.GridMode.Normal)},e.prototype.onRespone=function(t,e){var o=p.default.create(t,this._targetPos);t.setFlyerAtLogicalPos(o,cc.Vec2.ZERO),t.setCurrentState(l.default.create()),t.setMode(s.GridMode.Normal)},e}(c.default);o.default=u,cc._RF.pop()},{"../../../../../define/GameCurrencyType":"GameCurrencyType","../../../commond/GridCommand":"GridCommand","../../../defines/EntityID":"EntityID","../../../entity/flyer/FlyerHammer":"FlyerHammer","../../GridBase":"GridBase","../GridStateBase":"GridStateBase","./GridStateMatch":"GridStateMatch"}],GridStateForceSwap:[function(t,e,o){"use strict";cc._RF.push(e,"50769t0jGFL2ajqXCpuzmhL","GridStateForceSwap");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../define/GameCurrencyType"),r=t("../../../commond/GridCommand"),a=t("../../../entity/item/state/ItemStateSwap"),s=t("../../GridBase"),c=t("../GridStateBase"),l=t("./GridStateMatch"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../../entity/flyer/FlyerAnimation"),h=function(t){function e(){var e=t.call(this,c.GridState.ForceSwap)||this;return e._itemSwaped=!1,e._swapPosA=cc.Vec2.ZERO,e._swapPosB=cc.Vec2.ZERO,e._focusFrame=null,e._selectedItem=null,e._targetPos=cc.Vec2.ZERO,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){},e.prototype.canChangeState=function(){return!this._itemSwaped},e.prototype.canPause=function(){return!0},e.prototype.update=function(t,e){if(0!=this._itemSwaped&&t.isObstructsEmpty()&&t.isCommandListEmpty()){var o=r.default.ForceSwap(this._swapPosB),n=r.default.ForceSwap(this._swapPosA);t.dispatchCommand(this._swapPosA,o,0),t.dispatchCommand(this._swapPosB,n,0),t.setCurrentState(l.default.create())}},e.prototype.exit=function(t){this._selectedItem&&this._selectedItem.unselected(),this._focusFrame&&this._focusFrame.destoryWithRecycle(),this._swapPosA=null,this._swapPosB=null,this._focusFrame=null,this._targetPos=null},e.prototype.trySwapItem=function(t,e,o){var n=t.getItemAtLogicalPos(e),r=t.getItemAtLogicalPos(o);return!!(n&&r&&n.canSwap()&&r.canSwap())&&(this._swapPosA=e,this._swapPosB=o,t.requestUseGear(i.GameCurrencyType.AidSwap,1),!0)},e.prototype.onTapBegan=function(t,e){if(!this._itemSwaped){var o=t.getItemAtLogicalPos(e);o?o!=this._selectedItem&&(this._selectedItem?this.trySwapItem(t,this._selectedItem.getLogicalPos(),e):o.canForceSwap()&&(o.selected(),this._selectedItem=o,this._focusFrame||(this._focusFrame=y.default.createAnimationWithType(t,y.FlyerAnimationType.FocusFrame,!1),t.setFlyerAtLogicalPos(this._focusFrame,e)),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("prop_switch1")))):t.setMode(s.GridMode.Normal)}},e.prototype.onRespone=function(t,e){t.swapItem(this._swapPosA,this._swapPosB);var o=t.getItemAtLogicalPos(this._swapPosB),n=t.getItemAtLogicalPos(this._swapPosA);o.setCurrentState(a.default.create(this._swapPosA,this._swapPosB)),n.setCurrentState(a.default.create(this._swapPosB,this._swapPosA)),this._selectedItem.unselected(),this._selectedItem=null,this._itemSwaped=!0,t.setMode(s.GridMode.Normal),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("prop_switch2"))},e}(c.default);o.default=h,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../define/GameCurrencyType":"GameCurrencyType","../../../commond/GridCommand":"GridCommand","../../../defines/IdentifierManager":"IdentifierManager","../../../entity/flyer/FlyerAnimation":"FlyerAnimation","../../../entity/item/state/ItemStateSwap":"ItemStateSwap","../../GridBase":"GridBase","../GridStateBase":"GridStateBase","./GridStateMatch":"GridStateMatch"}],GridStateHoney:[function(t,e,o){"use strict";cc._RF.push(e,"ccf03Mprg5BqaLMSPUaFKzT","GridStateHoney");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("../../../defines/PowerID"),a=t("../../../entity/item/ItemBase"),s=t("../../../entity/parasite/ParasiteBase"),c=t("../../../../../extend/utils/GameMath"),l=t("../../../entity/parasite/ParasiteHoney"),p=t("./GridStateComboWord"),u=t("../../../entity/fence/FencePos"),y=function(t){function e(){return t.call(this,i.GridState.Honey)||this}return n(e,t),e.create=function(){return new e},e.prototype.spreadHoney=function(t){t.lossPower(r.PowerID.SpreadHoney,1);var e=t.getItemsMap(),o=[],n=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)];for(var i in e){var p=e[i],y=!1;p.getItemType()==a.ItemType.HoneyComb&&(y=!0);var h=p.getTopParasite();if(h&&h.getParasiteType()==s.ParasiteType.Honey&&(y=!0),y)for(var m=p.getLogicalPos(),f=0,d=n;f<d.length;f++){var _=d[f],g=m.add(_),I=t.getItemAtLogicalPos(g);t.getFenceAtFencePos(u.default.create(m,g))||I&&I.canCoveredByHoney()&&o.push({Source:m,Target:g})}}if(o.length>0){var C=o[c.default.randomInt(0,o.length-1)],P=C.Source,D=C.Target,v=c.default.randomInt(1,2),b=t.getItemAtLogicalPos(P),E=b.getTopParasite();if(E)v=E.getHealthPoint();else v=b.getSpreadHoneyHp();t.getItemAtLogicalPos(D);var B=l.default.create(t,v);B.grow(),t.setParasiteAtLogicalPos(B,D)}},e.prototype.enter=function(t){t.getPowerAmount(r.PowerID.SpreadHoney)>0&&t.getPowerAmount(r.PowerID.HoneyResist)<=0&&this.spreadHoney(t),t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(p.default.create())},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(p.default.create())},e}(i.default);o.default=y,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/PowerID":"PowerID","../../../entity/fence/FencePos":"FencePos","../../../entity/item/ItemBase":"ItemBase","../../../entity/parasite/ParasiteBase":"ParasiteBase","../../../entity/parasite/ParasiteHoney":"ParasiteHoney","../GridStateBase":"GridStateBase","./GridStateComboWord":"GridStateComboWord"}],GridStateLaunchGears:[function(t,e,o){"use strict";cc._RF.push(e,"5f86dMK1TtHJoSULI1Ig3y2","GridStateLaunchGears");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../defines/PowerID"),r=t("../GridStateBase"),a=t("./GridStateAutoActivateBomb"),s=t("../../../defines/EntityID"),c=t("../../../../../extend/utils/GameMath"),l=t("../../../../../define/GameCurrencyType"),p=t("../../../entity/item/color/bomb/ItemBombBase"),u=t("../../../entity/item/ItemFactory"),y=t("../../../entity/item/state/ItemStateReplace"),h=function(t){function e(){var e=t.call(this,r.GridState.LaunchGears)||this;return e._availablePositions=[],e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){if(t.getPowerAmount(i.PowerID.LaunchGears)>0){t.setPowerAmount(i.PowerID.LaunchGears,0);var e=t.getItemsMap();for(var o in e){var n=e[o];n.canUpgradeByRainbow()&&this._availablePositions.push(n.getLogicalPos())}c.default.shuffleArray(this._availablePositions);var r=t.getLaunchGearMap();for(var o in r){var s=Number(o),l=r[o];this.progressGear(t,s,l)}t.clearLaunchGears()}else t.setCurrentState(a.default.create())},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(a.default.create())},e.prototype.exit=function(t){this._availablePositions=null},e.prototype.progressGear=function(t,e,o){for(var n=0;n<o;n++)switch(e){case l.GameCurrencyType.BeginLine:case l.GameCurrencyType.InfiniteBeginLine:case l.GameCurrencyType.OneRoundBeginLine:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Column);break;case l.GameCurrencyType.BeginRange:case l.GameCurrencyType.InfiniteBeginRange:case l.GameCurrencyType.OneRoundBeginRange:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Range),this.createBomb(t,p.ItemBombType.Cross);break;case l.GameCurrencyType.BeginRainbow:case l.GameCurrencyType.InfiniteBeginRainbow:case l.GameCurrencyType.OneRoundBeginRainbow:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Rainbow);break;case l.GameCurrencyType.ExtraStep1:case l.GameCurrencyType.ExtraStep2:case l.GameCurrencyType.ExtraStep3:case l.GameCurrencyType.ExtraStep5:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createExtraStep(t,e);break;case l.GameCurrencyType.LuckyWheelRow:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Row);break;case l.GameCurrencyType.LuckyWheelColumn:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Column);break;case l.GameCurrencyType.LuckyWheelCross:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Cross);break;case l.GameCurrencyType.LuckyWheelRange:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Range);break;case l.GameCurrencyType.LuckyWheelMissile_Row:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Butterfly);break;case l.GameCurrencyType.LuckyWheelMissile_Column:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Column),this.createBomb(t,p.ItemBombType.Butterfly);break;case l.GameCurrencyType.LuckyWheelMissile_Cross:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Cross),this.createBomb(t,p.ItemBombType.Butterfly);break;case l.GameCurrencyType.LuckyWheelMissile_Range:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Range),this.createBomb(t,p.ItemBombType.Butterfly);break;case l.GameCurrencyType.LuckyWheelRow_Cross:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Cross);break;case l.GameCurrencyType.LuckyWheelColumn_Cross:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Column),this.createBomb(t,p.ItemBombType.Cross);break;case l.GameCurrencyType.LuckyWheelRow_Range:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Range);break;case l.GameCurrencyType.LuckyWheelColumn_Range:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Column),this.createBomb(t,p.ItemBombType.Range);break;case l.GameCurrencyType.LuckyWheelMissile_Row_Column:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Butterfly),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Column);break;case l.GameCurrencyType.LuckyWheelMissile_Rainbow:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Butterfly),this.createBomb(t,p.ItemBombType.Rainbow);break;case l.GameCurrencyType.LuckyWheelMissile_Row_Cross:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Butterfly),this.createBomb(t,p.ItemBombType.Row),this.createBomb(t,p.ItemBombType.Cross);break;case l.GameCurrencyType.LuckyWheelMissile_Column_Range:t.setUsedGearAmount(e,t.getUsedGearAmount(e)+1),this.createBomb(t,p.ItemBombType.Butterfly),this.createBomb(t,p.ItemBombType.Column),this.createBomb(t,p.ItemBombType.Range)}},e.prototype.createBomb=function(t,e){if(this._availablePositions.length>0){var o=this._availablePositions[0],n=s.EntityColor.None;if(e!=p.ItemBombType.Rainbow)n=t.getItemAtLogicalPos(o).getEntityColor();var i=u.default.generateEffectBombItem(t,e,n);i&&(this._availablePositions.splice(0,1),i.node.setPosition(cc.v2(-100,.5*t.node.getContentSize().height)),t.node.addChild(i.node,t.getTopZOrder(i.getEntityType(),o)),i.setCurrentState(y.default.create(o)))}},e.prototype.createExtraStep=function(t,e){var o=cc.v2(-2,Math.round(t.getGridSize().height/2));t.gainStepWithItemID(e,!0,o)},e}(r.default);o.default=h,cc._RF.pop()},{"../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../../extend/utils/GameMath":"GameMath","../../../defines/EntityID":"EntityID","../../../defines/PowerID":"PowerID","../../../entity/item/ItemFactory":"ItemFactory","../../../entity/item/color/bomb/ItemBombBase":"ItemBombBase","../../../entity/item/state/ItemStateReplace":"ItemStateReplace","../GridStateBase":"GridStateBase","./GridStateAutoActivateBomb":"GridStateAutoActivateBomb"}],GridStateLaunchResidentGear:[function(t,e,o){"use strict";cc._RF.push(e,"01715jKx8BEAKwGqRiYhqwd","GridStateLaunchResidentGear");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateLaunchGears"),a=function(t){function e(){return t.call(this,i.GridState.LaunchResidentGear)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.setCurrentState(r.default.create())},e}(i.default);o.default=a,cc._RF.pop()},{"../GridStateBase":"GridStateBase","./GridStateLaunchGears":"GridStateLaunchGears"}],GridStateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"10bcaQ/PLxEpINmLbxfZoe/","GridStateMachine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../fsm/StateMachineBase"),r=t("../GridBase"),a=t("./GridStateBase"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){return new e(t)},e.prototype.onTapBegan=function(t){if(this._currentState&&this._currentState instanceof a.default){var e=this._currentState;if(this._owner instanceof r.default){var o=this._owner;e.onTapBegan(o,t)}}if(this._globalState&&this._globalState instanceof a.default){var n=this._globalState;if(this._owner instanceof r.default){o=this._owner;n.onTapBegan(o,t)}}},e.prototype.onTapMoved=function(t){if(this._currentState&&this._currentState instanceof a.default){var e=this._currentState;if(this._owner instanceof r.default){var o=this._owner;e.onTapMoved(o,t)}}if(this._globalState&&this._globalState instanceof a.default){var n=this._globalState;if(this._owner instanceof r.default){o=this._owner;n.onTapMoved(o,t)}}},e.prototype.onTapEnded=function(t){if(this._currentState&&this._currentState instanceof a.default){var e=this._currentState;if(this._owner instanceof r.default){var o=this._owner;e.onTapEnded(o,t)}}if(this._globalState&&this._globalState instanceof a.default){var n=this._globalState;if(this._owner instanceof r.default){o=this._owner;n.onTapEnded(o,t)}}},e.prototype.onEvent=function(t){if(this._currentState&&this._currentState instanceof a.default){var e=this._currentState;if(this._owner instanceof r.default){var o=this._owner;e.onEvent(o,t)}}if(this._globalState&&this._globalState instanceof a.default){var n=this._globalState;if(this._owner instanceof r.default){o=this._owner;n.onEvent(o,t)}}},e.prototype.onRespone=function(t){if(this._currentState&&this._currentState instanceof a.default){var e=this._currentState;if(this._owner instanceof r.default){var o=this._owner;e.onRespone(o,t)}}if(this._globalState&&this._globalState instanceof a.default){var n=this._globalState;if(this._owner instanceof r.default){o=this._owner;n.onRespone(o,t)}}},e}(i.default);o.default=s,cc._RF.pop()},{"../../fsm/StateMachineBase":"StateMachineBase","../GridBase":"GridBase","./GridStateBase":"GridStateBase"}],GridStateMagicCrystal:[function(t,e,o){"use strict";cc._RF.push(e,"55515q8Ai5HzqUuvS6fJeK1","GridStateMagicCrystal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.GridStateMagicCrystal=o.AtkPointData=void 0;var i=t("../../../defines/EntityID"),r=t("../../../entity/item/ItemBase"),a=t("../../../entity/item/ItemFactory"),s=t("../../../entity/item/state/ItemStateReplace"),c=t("../GridStateBase"),l=t("./GridStateConveyer"),p=t("./GridStateMatch"),u=t("../../../../../extend/utils/GameMath"),y=t("../../../../../base/IGame"),h=t("../../../defines/IdentifierManager"),m=function(){return function(){this.priority=1,this.x=0,this.y=0,this.beAttacked=!1}}();o.AtkPointData=m;var f=function(t){function e(){var e=t.call(this,c.GridState.MagicCrystal)||this;return e._magicCrystalVec=[],e._atkPoints=[],e._changeItemPos=[],e._outputIng=!1,e._curGrid=null,e}return n(e,t),e.create=function(){return new e},e.prototype.getCurGrid=function(){return this._curGrid},e.prototype.enter=function(t){this._curGrid=t,this.initMagicCryStalItems(),this.initAtkPotins(),this._magicCrystalVec.length>0?this.doOutput():t.setCurrentState(l.default.create())},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&this._outputIng&&(this._outputIng=!1,this.onMagicCrystalDone())},e.prototype.eixt=function(t){this._magicCrystalVec=null,this._atkPoints=null,this._changeItemPos=null,this._curGrid=null},e.prototype.initMagicCryStalItems=function(){this._magicCrystalVec=[];var t=this.getCurGrid().getItemsMap();for(var e in t){var o=t[e];if(o.getItemType()==r.ItemType.MagicCrystal){var n=o;n.isCanOutput()&&this._magicCrystalVec.push(n)}}},e.prototype.initAtkPotins=function(){this._atkPoints=[];var t=this.getCurGrid().getCellsMap();for(var e in t){var o=t[e],n=new m;n.x=o.getLogicalPos().x,n.y=o.getLogicalPos().y,n.priority=o.getCrystalAttackPriority(),n.beAttacked=!1,this._atkPoints.push(n)}u.default.shuffleArray(this._atkPoints),this._atkPoints.sort(function(t,e){return t.priority<e.priority?-1:1})},e.prototype.doOutput=function(){this._outputIng=!0;for(var t=0;t<this._magicCrystalVec.length;t++){var e=this._magicCrystalVec[t];if(e){var o=cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.1,1));e.runAction(o)}for(var n=0;n<e.getAttrNum();n++){var i=a.default.generateItemWithEntityID(this.getCurGrid(),e.getOutputEntityId());if(i){var r=this.getNextAtkPoint(i.getEntityColor());if(null==r)break;this._changeItemPos.push(cc.v2(r.x,r.y)),i.node.setPosition(e.node.getPosition()),this.getCurGrid().node.addChild(i.node,this.getCurGrid().getTopZOrder(i.getEntityType(),cc.v2(r.x,r.y))),i.setCurrentState(s.default.create(cc.v2(r.x,r.y))),y.default.playAudio(h.default.getInstance().getMatchAudioFilePath("magiccrystal"))}}}},e.prototype.removeAttackedPoints=function(){for(var t=0,e=this._atkPoints.length,o=0;o<e;o++){var n=this._atkPoints[t];if(!n)break;n.beAttacked?this._atkPoints.splice(t,0):t+=1}},e.prototype.getNextAtkPoint=function(t){if(this.removeAttackedPoints(),this._atkPoints.length>0)for(var e=0;e<this._atkPoints.length;e++)if(!this._atkPoints[e].beAttacked){var o=this.getCurGrid().getItemAtLogicalPos(cc.v2(this._atkPoints[e].x,this._atkPoints[e].y));if(o&&o.canTransformByMagicCrystal()){if(t==i.EntityColor.None)return this._atkPoints[e].beAttacked=!0,this._atkPoints[e];if(o.getEntityColor()!=t)return this._atkPoints[e].beAttacked=!0,this._atkPoints[e]}}return null},e.prototype.onMagicCrystalDone=function(){this.getCurGrid().setCurrentState(p.default.create(this._changeItemPos))},e}(c.default);o.GridStateMagicCrystal=f,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../extend/utils/GameMath":"GameMath","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../entity/item/ItemBase":"ItemBase","../../../entity/item/ItemFactory":"ItemFactory","../../../entity/item/state/ItemStateReplace":"ItemStateReplace","../GridStateBase":"GridStateBase","./GridStateConveyer":"GridStateConveyer","./GridStateMatch":"GridStateMatch"}],GridStateMatch:[function(t,e,o){"use strict";cc._RF.push(e,"989e51iet5OzLi7Vp/Vjs2I","GridStateMatch");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../extend/utils/GameMath"),r=t("../../../commond/GridCommand"),a=t("../../../event/EntityEventBase"),s=t("../GridStateBase"),c=t("./GridStateDrop"),l=t("../../../defines/PowerID"),p=t("./GridStateLaunchResidentGear"),u=function(t){function e(e){var o=t.call(this,s.GridState.MatchItem)||this;return o._checkMatchPositions=[],o._checkMatchPositions=e,o}return n(e,t),e.create=function(t){return void 0===t&&(t=[]),new e(t)},e.prototype.enter=function(t){t.clearAttackedPostionRecord();for(var e=0,o=this._checkMatchPositions;e<o.length;e++){var n=o[e];t.dispatchCommand(n,r.default.CheckMatch(),0)}i.default.clearArray(this._checkMatchPositions),t.progressCommand(.001),t.isObstructsEmpty()&&t.isCommandListEmpty()?t.setCurrentState(p.default.create()):t.gainPower(l.PowerID.MatchCombo,1)},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(c.default.create(this._checkMatchPositions))},e.prototype.exit=function(t){this._checkMatchPositions=null},e.prototype.onEvent=function(t,e){if(e.getEventName()==a.default.ENTITY_EVENT_KEY&&e.getEventType()==a.EntityEventType.EntityChanged){var o=e;if(o)for(var n=o.getEntity().getLogicalPos(),r=o.getEntity().getLogicalSize(),s=0;s<r.height;s++)for(var c=0;c<r.width;c++){var l=n.add(cc.v2(c,s));i.default.insertAsSet(this._checkMatchPositions,l)}}},e}(s.default);o.default=u,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../commond/GridCommand":"GridCommand","../../../defines/PowerID":"PowerID","../../../event/EntityEventBase":"EntityEventBase","../GridStateBase":"GridStateBase","./GridStateDrop":"GridStateDrop","./GridStateLaunchResidentGear":"GridStateLaunchResidentGear"}],GridStateNoMoreStep:[function(t,e,o){"use strict";cc._RF.push(e,"1fc99ox34ZAW40tIhrgy7G6","GridStateNoMoreStep");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.NoMoreStep)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.noMoreStep()},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStateNull:[function(t,e,o){"use strict";cc._RF.push(e,"fb1ceqsLEtLBJiuW7YcZCh2","GridStateNull");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.Null)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){cc.log("onEnter")},e.prototype.update=function(t,e){cc.log("Update:")},e.prototype.exit=function(t){cc.log("Exit:")},e.prototype.onTapBegan=function(t,e){cc.log("onTapBegan:"),cc.log(e)},e.prototype.onTapMoved=function(t,e){cc.log("onTapMoved:"),cc.log(e)},e.prototype.onTapEnded=function(t,e){cc.log("onTapEnded:"),cc.log(e)},e.prototype.onEvent=function(t,e){},e.prototype.onRespone=function(t,e){},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStatePrepare:[function(t,e,o){"use strict";cc._RF.push(e,"43df47umgZJKaK1rD8ThjG9","GridStatePrepare");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.Prepare)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.showReplayPrepareUI()},e.prototype.start=function(){},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStateShuffle:[function(t,e,o){"use strict";cc._RF.push(e,"07568gxavdFzLyeO0YSUTHh","GridStateShuffle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=t("./GridStateStalemate"),a=t("../../../entity/item/state/ItemStateShuffle"),s=t("./GridStateSwapNeighbour"),c=function(t){function e(){return t.call(this,i.GridState.Shuffle)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){var e=[],o=t.getItemsMap();for(var n in o){var i=o[n];e.push(i.getLogicalPos())}var s=this.shuffleGrid(t,e);if(s.length<=0)t.setCurrentState(r.default.create());else for(var c=0,l=s;c<l.length;c++){var p=l[c],u=(i=p.first,p.second),y=u.first,h=u.second;i.setCurrentState(a.default.create(y,h))}},e.prototype.update=function(t,e){t.isObstructsEmpty()&&t.isCommandListEmpty()&&t.setCurrentState(s.default.create())},e}(i.default);o.default=c,cc._RF.pop()},{"../../../entity/item/state/ItemStateShuffle":"ItemStateShuffle","../GridStateBase":"GridStateBase","./GridStateStalemate":"GridStateStalemate","./GridStateSwapNeighbour":"GridStateSwapNeighbour"}],GridStateStalemate:[function(t,e,o){"use strict";cc._RF.push(e,"3309e86uX1D+5TIe/Jq8JyN","GridStateStalemate");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GridStateBase"),r=function(t){function e(){return t.call(this,i.GridState.Stalemate)||this}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){t.stalemate()},e}(i.default);o.default=r,cc._RF.pop()},{"../GridStateBase":"GridStateBase"}],GridStateSwapNeighbour:[function(t,e,o){"use strict";cc._RF.push(e,"19d63PdQvtL5qnikVphQ9YY","GridStateSwapNeighbour");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../base/IGame"),r=t("../../../../../define/GameConfig"),a=t("../../../../../extend/utils/GameMath"),s=t("../../../commond/GridCommand"),c=t("../../../defines/IdentifierManager"),l=t("../../../defines/PowerID"),p=t("../../../entity/item/state/ItemStateSwap"),u=t("../../GridBase"),y=t("../GridStateBase"),h=t("./GridStateCompleteBanner"),m=t("./GridStateMatch"),f=t("./GridStateNoMoreStep"),d=t("./GridStateShuffle"),_=function(t){function e(){var e=t.call(this,y.GridState.SwapNeighbour)||this;return e._AIOpratedWaitDuration=0,e._checkPositions=[],e._checkIndex=0,e._availableSwaps=[],e._availableSwapsSorted=!1,e._tipSwapIndex=0,e._swapPosA=a.default.INVALID_LOGICAL_POSITION.clone(),e._swapPosB=a.default.INVALID_LOGICAL_POSITION.clone(),e._itemSwaped=!0,e._selectedItem=null,e._touchInterval=0,e._tipInterval=0,e}return n(e,t),e.create=function(){return new e},e.prototype.enter=function(t){if(t.setPowerAmount(l.PowerID.MatchCombo,0),t.isComplete())t.setCurrentState(h.default.create());else if(t.isFailed())t.setCurrentState(f.default.create());else{var e=t.getMode();switch(e){case u.GridMode.Normal:this.hasAvailableSwap(t)?this.statisticsCheckPositions(t):t.setCurrentState(d.default.create());break;case u.GridMode.ForceClean:case u.GridMode.ForceSwap:case u.GridMode.CrossBomb:t.tryEnableMode(e)}this._itemSwaped=!1,t.beforePlayerOperated()}},e.prototype.statisticsCheckPositions=function(t){var e=t.getItemsMap();for(var o in a.default.clearArray(this._availableSwaps),e){var n=e[o];this._checkPositions.push(n.getLogicalPos())}this._checkIndex=0,this._tipSwapIndex=-1,this._tipInterval=0,this._availableSwapsSorted=!1},e.prototype.checkAvailableSwap=function(t,e){for(var o=0,n=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)];o<n.length;o++){var i=n[o],r=this.getAvailableSwapInfo(t,e,e.add(i));r&&this._availableSwaps.push(r)}},e.prototype.statisticsAvailableSwap=function(t){if(!this._itemSwaped)for(var e=(new Date).getTime(),o=0;;){if((new Date).getTime()-e>=40&&o>0)break;if(this._checkIndex>=this._checkPositions.length){this._availableSwapsSorted||(this._availableSwaps.sort(function(t,e){return t.value>e.value?-1:1}),this._availableSwapsSorted=!0);break}this.checkAvailableSwap(t,this._checkPositions[this._checkIndex]),this._checkIndex+=1,o+=1}},e.prototype.tipSwap=function(t){if(this._tipInterval=0,!(this._availableSwaps.length<=0)){i.default.playAudio(c.default.getInstance().getMatchAudioFilePath("hint"));var o=(this._tipSwapIndex+1)%e.MAX_TIP_SWAP_COUNT%this._availableSwaps.length;this.unTipSwap(t),this._tipSwapIndex=o;var n=this._availableSwaps[this._tipSwapIndex];t.getItemAtLogicalPos(n.swapPair.first).tipSlide(n.swapPair.second);for(var r=0,a=n.linkedPositions;r<a.length;r++){var s=a[r];if(!s.equals(n.swapPair.second)){var l=t.getItemAtLogicalPos(s);l&&l.shake()}}}},e.prototype.unTipSwap=function(t){if(!(this._availableSwaps.length<=0||this._tipSwapIndex<0)){var e=this._availableSwaps[this._tipSwapIndex],o=t.getItemAtLogicalPos(e.swapPair.first);o&&o.untipSlide();for(var n=0,i=e.linkedPositions;n<i.length;n++){var r=i[n];if(!r.equals(e.swapPair.second)){var a=t.getItemAtLogicalPos(r);a&&a.unshake()}}this._tipInterval=0}},e.prototype.canEliminateBySwapAtPos=function(t,e,o){var n=t.getItemAtLogicalPos(e);return!!n&&n.canExcuteCommand(s.default.NeighbourSwap(o))},e.prototype.trySwapItem=function(t,e,o){if(this._itemSwaped||!t.isObstructsEmpty())return!1;if(this.canSwapItem(t,e,o)){this.unTipSwap(t),this._swapPosA=e,this._swapPosB=o;var n=t.getItemAtLogicalPos(this._swapPosA),i=t.getItemAtLogicalPos(this._swapPosB);return t.swapItem(this._swapPosA,this._swapPosB),n.setCurrentState(p.default.create(this._swapPosA,this._swapPosB)),i.setCurrentState(p.default.create(this._swapPosB,this._swapPosA)),this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem=null),this._touchInterval=0,this._itemSwaped=!0,!0}return!1},e.prototype.afterSwap=function(t){if(this._itemSwaped)if(this.canEliminateBySwapAtPos(t,this._swapPosA,this._swapPosB)||this.canEliminateBySwapAtPos(t,this._swapPosB,this._swapPosA)){t.setPowerAmount(l.PowerID.DyeingItem,1),t.setPowerAmount(l.PowerID.SpreadHoney,1),t.setPowerAmount(l.PowerID.ConveyerMove,1),t.setPowerAmount(l.PowerID.HoneyResist,0),t.gainPower(l.PowerID.UsedSwap,1),t.updateStepBarUIWithDelta(-1),t.lossPower(l.PowerID.AvailableSwap,1);var e=s.default.NeighbourSwap(this._swapPosB),o=s.default.NeighbourSwap(this._swapPosA);t.dispatchCommand(this._swapPosB,o,0),t.dispatchCommand(this._swapPosA,e,0),t.onPlayerOperated(),t.setCurrentState(m.default.create())}else{var n=t.getItemAtLogicalPos(this._swapPosA),r=t.getItemAtLogicalPos(this._swapPosB);t.swapItem(this._swapPosA,this._swapPosB),n.setCurrentState(p.default.create(this._swapPosA,this._swapPosB)),r.setCurrentState(p.default.create(this._swapPosB,this._swapPosA)),i.default.playAudio(c.default.getInstance().getMatchAudioFilePath("prohibition_exchange")),this._selectedItem=null,this._touchInterval=0,this._itemSwaped=!1}},e.prototype.update=function(t,o){if(this.statisticsAvailableSwap(t),!this._itemSwaped&&this._tipInterval<e.TIP_SWAP_INTERVAL&&(this._tipInterval+=o,this._tipInterval>=e.TIP_SWAP_INTERVAL&&this.tipSwap(t)),this._itemSwaped&&t.isObstructsEmpty()&&this.afterSwap(t),this._AIOpratedWaitDuration+=o,this._AIOpratedWaitDuration>=0&&r.default.EnableAutoPilot&&!this._itemSwaped&&t.isObstructsEmpty()&&this._availableSwapsSorted){var n=a.default.randomInt(0,this._availableSwaps.length-1),i=this._availableSwaps[n],s=i.swapPair.first,c=i.swapPair.second;this.trySwapItem(t,s,c)}},e.prototype.exit=function(t){this._checkPositions=null,this._availableSwaps=null,this._swapPosA=null,this._swapPosB=null,this._selectedItem=null},e.prototype.onTapBegan=function(t,o){if(!this._itemSwaped&&t.isObstructsEmpty()){var n=t.getItemAtLogicalPos(o);if(n)if(n===this._selectedItem)this._touchInterval<=e.DOUBLE_CLICK_INTERVAL||(this._touchInterval=0);else if(this._selectedItem){var i=this._selectedItem.getLogicalPos();this.trySwapItem(t,i,o)||n.canSwap()&&(this._selectedItem.unselected(),n.selected(),this._selectedItem=n,this._touchInterval=0)}else n.canSwap()&&(n.selected(),this._selectedItem=n,this._touchInterval=0)}},e.prototype.onTapMoved=function(t,e){if(null!=this._selectedItem&&!this._itemSwaped&&t.isObstructsEmpty()){var o=this._selectedItem.getLogicalPos();this.trySwapItem(t,o,e)}},e.prototype.onTapEnded=function(t,e){},e.prototype.onEvent=function(t,e){},e.prototype.onRespone=function(t,e){},e.prototype.canChangeState=function(){return!0},e.prototype.canPause=function(){return!0},e.DOUBLE_CLICK_INTERVAL=.25,e.TIP_SWAP_INTERVAL=5,e.MAX_TIP_SWAP_COUNT=3,e}(y.default);o.default=_,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../define/GameConfig":"GameConfig","../../../../../extend/utils/GameMath":"GameMath","../../../commond/GridCommand":"GridCommand","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/PowerID":"PowerID","../../../entity/item/state/ItemStateSwap":"ItemStateSwap","../../GridBase":"GridBase","../GridStateBase":"GridStateBase","./GridStateCompleteBanner":"GridStateCompleteBanner","./GridStateMatch":"GridStateMatch","./GridStateNoMoreStep":"GridStateNoMoreStep","./GridStateShuffle":"GridStateShuffle"}],Heap:[function(t,e,o){"use strict";cc._RF.push(e,"05cdfc+9C5H/5CmU019ZKx0","Heap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e){this.elements=[],this.compareFunc=null,this.equalsFunc=null,this.compareFunc=t,this.equalsFunc=e}return t.prototype.getElements=function(){return this.elements},t.prototype.isEmpty=function(){return this.elements.length<=0},t.prototype.length=function(){return this.elements.length},t.prototype.peek=function(){return this.elements[0]},t.prototype.leftChildIndexFromIndex=function(t){return 2*t+1},t.prototype.rightChildIndexFromIndex=function(t){return 2*t+2},t.prototype.parentIndexFormIndex=function(t){return Math.floor((t-1)/2)},t.prototype.indexOf=function(t){return this._indexOf(t,0)},t.prototype.push=function(t){this.elements.push(t),this.shiftUpFromIndex(this.length()-1)},t.prototype.pop=function(){if(!this.isEmpty()){var t=this.elements[0];this.elements[0]=this.elements[this.length()-1],this.elements[this.length()-1]=t;var e=this.elements.pop();return this.shiftDownFormIndex(0),e}return null},t.prototype.removeAtIndex=function(t){if(t<this.length()){var e=this.elements[t];this.elements[t]=this.elements[this.length()-1],this.elements[this.length()-1]=e;var o=this.elements.pop();return this.shiftDownFormIndex(t),this.shiftUpFromIndex(t),o}return null},t.prototype._indexOf=function(t,e){if(e>=this.length())return-1;if(this.compareFunc(t,this.elements[e]))return-1;if(this.equalsFunc(t,this.elements[e]))return e;var o=this._indexOf(t,this.leftChildIndexFromIndex(e));if(-1!=o)return o;var n=this._indexOf(t,this.rightChildIndexFromIndex(e));return-1!=n?n:-1},t.prototype.shiftUpFromIndex=function(t){var e=this.parentIndexFormIndex(t);if(e>=0&&this.compareFunc(this.elements[t],this.elements[e])){var o=this.elements[t];this.elements[t]=this.elements[e],this.elements[e]=o,this.shiftUpFromIndex(e)}},t.prototype.shiftDownFormIndex=function(t){var e=t,o=this.leftChildIndexFromIndex(t);o<this.length()&&this.compareFunc(this.elements[o],this.elements[e])&&(e=o);var n=this.rightChildIndexFromIndex(t);if(n<this.length()&&this.compareFunc(this.elements[n],this.elements[e])&&(e=n),e!=t){var i=this.elements[t];this.elements[t]=this.elements[e],this.elements[e]=i,this.shiftDownFormIndex(e)}},t}();o.default=n,cc._RF.pop()},{}],IGame:[function(t,e,o){"use strict";cc._RF.push(e,"d3c53Frx6dPqrQ4s6+eC2Bo","IGame"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../extend/audio/AudioManager"),i=function(){function t(){}return t.init=function(){return!0},t.playAudio=function(t,e,o,i){return void 0===e&&(e=1),void 0===o&&(o=!1),void 0===i&&(i=null),n.default.getInstance().play(t,e,o,!1,i)},t.playAudioBGM=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=null),n.default.getInstance().play(t,1,!0,!0,o)},t.stopBGM=function(){return n.default.getInstance().stopBGM()},t.stopAudio=function(t){return n.default.getInstance().stop(t)},t.stopAudioAll=function(){return n.default.getInstance().stopAll()},t}();o.default=i,cc._RF.pop()},{"../extend/audio/AudioManager":"AudioManager"}],IdentifierManager:[function(t,e,o){"use strict";cc._RF.push(e,"7bf495j3RNPW7x3caczebUw","IdentifierManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./CollectionID"),i=t("./EntityGroupID"),r=t("./EntityID"),a=t("./ItemInfoManager"),s=t("./KindID"),c=t("./CollectionGroupID"),l=function(){function t(){n.CollectionIDManager.getInstance(),r.EntityIDManager.getInstance(),i.default.getInstance(),s.KindIDManager.getInstance(),a.default.getInstance()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getColorWithEntityColor=function(t){var e=cc.Color.WHITE;switch(t){case r.EntityColor.Red:e=cc.color(255,0,0,255);break;case r.EntityColor.Green:e=cc.color(0,255,7,255);break;case r.EntityColor.Blue:e=cc.color(0,137,255,255);break;case r.EntityColor.Yellow:e=cc.color(255,255,0,255);break;case r.EntityColor.Orange:e=cc.color(255,124,0,255);break;case r.EntityColor.Purple:e=cc.color(255,25,193,255)}return e},t.prototype.getCollectionIDFromString=function(t){return n.CollectionIDManager.getInstance().getCollectionIDFromString(t)},t.prototype.getCollectionNameFromID=function(t){return n.CollectionIDManager.getInstance().getCollectionNameFromID(t)},t.prototype.getFrameNameFromCollectionID=function(t){return n.CollectionIDManager.getInstance().getFrameNameFromCollectionID(t)},t.prototype.getCollectionGroupIDFromString=function(t){return c.default.getInstance().getCollectionGroupIDFromString(t)},t.prototype.getCollectionIDsFromCollectionGroupID=function(t){return c.default.getInstance().getCollectionIDsFromCollectionGroupID(t)},t.prototype.getEntityIDFromString=function(t){return r.EntityIDManager.getInstance().getEntityIDFromString(t)},t.prototype.getFrameNameFromEntityID=function(t){return r.EntityIDManager.getInstance().getFrameNameFromEntityID(t)},t.prototype.getHurtAnimationInfoPathFromEntityID=function(t){return r.EntityIDManager.getInstance().getHurtAnimationInfoFromEntityID(t)},t.prototype.getEntityIDFromKindID=function(t){return s.KindIDManager.getInstance().getEntityIDFromKindID(t)},t.prototype.getEntityColorWithEntityID=function(t){return r.EntityIDManager.getInstance().getEntityColorWithEntityID(t)},t.prototype.needLayoutGrassFromKindID=function(t){return s.KindIDManager.getInstance().needLayoutGrassFromKindID(t)},t.prototype.getEntityGroupIDFromString=function(t){return i.default.getInstance().getEntityGroupIDFromString(t)},t.prototype.getFrameNameFromEntityGroupID=function(t){return i.default.getInstance().getFrameNameFromEntityGroupID(t)},t.prototype.getEntityIDsFromEntityGroupID=function(t){return i.default.getInstance().getEntityIDsFromEntityGroupID(t)},t.prototype.getEntityGroupIDFromEntityID=function(t){return i.default.getInstance().getEntityGroupIDFromEntityID(t)},t.prototype.getItemInfoFromItemID=function(t){return a.default.getInstance().getItemInfoFromItemID(t)},t.prototype.getItemIDFromName=function(t){return a.default.getInstance().getItemIDFromName(t)},t.prototype.getDefaultButterflyPriorityFromEntityID=function(t){return r.EntityIDManager.getInstance().getDefaultButterflyPriorityFromEntityID(t)},t.prototype.getCorrespondingNormlaEntityID=function(t){return r.EntityIDManager.getInstance().getCorrespondingNormlaEntityID(t)},t.prototype.phraseTokens=function(t){return t.split("|")},t.prototype.phraseKeyValuePairs=function(t,e){for(var o={},n=this.phraseTokens(t),i=this.phraseTokens(e),r=n.length,a=0;a<r;a++){var s=n[a],c=i[a];o[s]=c}return o},t.prototype.getMatchAudioFilePath=function(t){return"audio/match/"+t},t.instance=null,t}();o.default=l,cc._RF.pop()},{"./CollectionGroupID":"CollectionGroupID","./CollectionID":"CollectionID","./EntityGroupID":"EntityGroupID","./EntityID":"EntityID","./ItemInfoManager":"ItemInfoManager","./KindID":"KindID"}],IdentifyNodeManager:[function(t,e,o){"use strict";cc._RF.push(e,"fff94U8ONpAL4qXm7LeXCIc","IdentifyNodeManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.IdentifyNodeRegistData=o.NodeID=void 0;var n=function(){function t(){}return t.WholeWindow="WholeWindow",t.Common_CurrencyBar="Common_CurrencyBar",t.MainScene_PrepareButton="MainScene_PrepareButton",t.MainScene_PetTrainBar="MainScene_PetTrainBar",t.MainScene_FeedButton="MainScene_FeedButton",t.MainScene_BathButton="MainScene_BathButton",t.MainScene_SleepButton="MainScene_SleepButton",t.MainScene_DigGoldButton="MainScene_DigGoldButton",t.MainScene_PetInformationPanel="MainScene_PetInformationPanel",t.MainScene_UpgradeButton="MainScene_UpgradeButton",t.MainScene_PetHouseButton="MainScene_PetHouseButton",t.PetListPanel_FeedButton="PetListPanel_FeedButton",t.PetListPanel_BathButton="PetListPanel_BathButton",t.PetListPanel_SleepButton="PetListPanel_SleepButton",t.PetListPanel_CloseButton="PetListPanel_CloseButton",t.StartGamePanel_StartButton="StartGamePanel_StartButton",t.StartGamePanel_PowerupBeginLine="StartGamePanel_PowerupBeginLine",t.StartGamePanel_PowerupBeginRange="StartGamePanel_PowerupBeginRange",t.StartGamePanel_PowerupBeginRainbow="StartGamePanel_PowerupBeginRainbow",t.MatchScene_HammerButton="MatchScene_HammerButton",t.MatchScene_BombButton="MatchScene_BombButton",t.MatchScene_SwapButton="MatchScene_SwapButton",t.MatchScene_TargetBar="MatchScene_TargetBar",t.MatchScene_FoodIcon="MatchScene_FoodIcon",t.MatchScene_SoapIcon="MatchScene_SoapIcon",t.MatchScene_EyepatchIcon="MatchScene_EyepatchIcon",t.MatchScene_HoeIcon="MatchScene_HoeIcon",t.MatchScene_CoinIcon="MatchScene_CoinIcon",t.MatchScene_SoapAndEyepatchIcon="MatchScene_SoapAndEyepatchIcon",t.FeedScene_QuitButton="FeedScene_QuitButton",t.FeedScene_PetInformationPanel="FeedScene_PetInformationPanel",t.BathScene_QuitButton="BathScene_QuitButton",t.BathScene_PetInformationPanel="BathScene_PetInformationPanel",t.SleepScene_QuitButton="SleepScene_QuitButton",t.SleepScene_PetInformationPanel="SleepScene_PetInformationPanel",t.DigGoldScene_HoeAmountBar="DigGoldScene_HoeAmountBar",t.DigGoldScene_GoldListItem1="DigGoldScene_GoldListItem1",t.DigGoldScene_DogListItem1="DigGoldScene_DogListItem1",t.DigGoldScene_SelectDogCostBar="DigGoldScene_SelectDogCostBar",t.DigGoldScene_SelectDogDigButton="DigGoldScene_SelectDogDigButton",t.DigGoldScene_QuitButton="DigGoldScene_QuitButton",t.DigGoldScene_ReceiveRewardButton="DigGoldScene_ReceiveRewardButton",t.UpgradePanel_PropertyBar="UpgradePanel_PropertyBar",t.UpgradePanel_TerminateButton="UpgradePanel_TerminateButton",t}();o.NodeID=n;var i=function(){function t(){this.retainCount=0,this.node=null}return t.create=function(e,o){var n=new t;return n.retainCount=e,n.node=o,n},t}();o.IdentifyNodeRegistData=i;var r=function(){function t(){this._nodeMap={}}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.regist=function(t,e){t&&""!=t&&(this._nodeMap.hasOwnProperty(t)?this._nodeMap[t].retainCount+=1:this._nodeMap[t]=i.create(1,e))},t.prototype.logout=function(t){if(""!=t){var e=this._nodeMap[t];e&&(e.retainCount-=1,e.retainCount<=0&&delete this._nodeMap[t])}},t.prototype.getNode=function(t){if(t==n.WholeWindow)return cc.find("Canvas");var e=this._nodeMap[t];return e?e.node:null},t.instance=null,t}();o.default=r,cc._RF.pop()},{}],ItemBalloon:[function(t,e,o){"use strict";cc._RF.push(e,"00c0ahqnctKfpfTcYU7wJpp","ItemBalloon");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../extend/utils/GameMath"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../defines/TMXConfigInfoKeys"),l=t("../ItemBase"),p=t("../../EntityPrefabNodePool"),u=t("../../flyer/FlyerAnimation"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curPostal=cc.v2(-1,-1),e._nextLevelId="",e}var o;return n(e,t),o=e,e.create=function(t){var e=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBalloon","ItemBalloon");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.setCurPostal=function(t){this._curPostal=t},e.prototype.getCurPostal=function(){return this._curPostal},e.prototype.setNextLevelId=function(t){this._nextLevelId=t},e.prototype.getNextLevelId=function(){return this._nextLevelId},e.prototype.getProducedTrainSupplyMaps=function(){return{}},e.prototype.getCollectionID=function(){return a.CollectionID.ItemBalloon},e.prototype.getEntityID=function(){return s.EntityID.ItemBalloon},e.prototype.getScore=function(){return 100},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e),e[c.default.CFG_POSTAL_VEC]&&this.setCurPostal(r.default.getVec2FromConfigString(e[c.default.CFG_POSTAL_VEC])),e[c.default.CFG_NEXT_MAP_ID]&&this.setNextLevelId(e[c.default.CFG_NEXT_MAP_ID])},e.prototype.init=function(e){t.prototype.initItem.call(this,e,l.ItemType.Balloon),this._curPostal=cc.v2(-1,-1),this._nextLevelId=""},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByNeighbour=function(t){return!1},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canCleanByTerminate=function(t){return!0},e.prototype._onClean=function(t){this.getGrid().gainScoreWithEntity(this),this.setVisible(!1),this.progressDeathWish(t),this.selfDestory();var e=u.default.createAnimationWithType(this.getGrid(),u.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(e,this.getLogicalPos()),e.node.zIndex=this.getTopZOrder()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._curPostal=null,this._nextLevelId=null},e=o=i([h],e)}(l.default));o.default=m,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemBase:[function(t,e,o){"use strict";cc._RF.push(e,"230ac7U2dhLT4DxqpsZGMn+","ItemBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemType=void 0;var r,a=t("../../../../extend/utils/GameMath"),s=t("../../commond/GridCommand"),c=t("../../defines/EntityID"),l=t("../EntityBase"),p=t("../../defines/CollectionID"),u=t("./color/bomb/ItemBombBase"),y=t("../../../../define/GameCurrencyType");(function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.EffectBomb=2]="EffectBomb",t[t.Block=3]="Block",t[t.Doughnut=4]="Doughnut",t[t.MagicCrystal=5]="MagicCrystal",t[t.Bone=6]="Bone",t[t.Mower=7]="Mower",t[t.Chestnut=8]="Chestnut",t[t.Puppy=9]="Puppy",t[t.DogHouse=10]="DogHouse",t[t.DogPaw=11]="DogPaw",t[t.Balloon=12]="Balloon",t[t.HoneyComb=13]="HoneyComb",t[t.JamBottle=14]="JamBottle",t[t.ItemWatermelon=15]="ItemWatermelon",t[t.ItemFireWormBottle=16]="ItemFireWormBottle",t[t.FruitCake=17]="FruitCake",t[t.Fireworks=18]="Fireworks",t[t.Statue=19]="Statue"})(r=o.ItemType||(o.ItemType={}));var h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._itemType=r.None,e._targetCount=0,e._chargeCount=0,e._willChargeCount=0,e._chargePriority=999,e._chargetCollectionID=p.CollectionID.None,e}return n(e,t),e.prototype.getItemType=function(){return this._itemType},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[y.GameCurrencyType.GoldCoin]=1,t},e.prototype.getButterflyPriority=function(e,o){var n=this.getGrid();if(n.isTargetCollectionID(p.CollectionID.ItemBone)&&this.canCleanByBomb(e))for(var i=this.getLogicalPos().clone();;){var a=n.getCellAtLogicalPos(i);if(!a)break;a.getIsWormholeExit()?i=a.getWormholeSource().clone():i.addSelf(cc.v2(0,1));var s=n.getItemAtLogicalPos(i);if(s&&s.getItemType()==r.Bone)return 1}return t.prototype.getButterflyPriority.call(this,e,o)},e.prototype.getTopParasite=function(){for(var t=this.getGrid(),e=this.getOccupyArea(),o=e.yMin;o<e.yMax;o++)for(var n=e.xMin;n<e.xMax;n++){var i=t.getParasiteAtLogicalPos(cc.v2(n,o));if(i)return i}return null},e.prototype.canLink=function(t){if(!t)return!1;if(!t.canMatch())return!1;if(!this.canMatch())return!1;var e=this.getEntityColor();return e>=c.EntityColor.Begin&&e<=c.EntityColor.End&&t.getEntityColor()==e},e.prototype.getLinkedPositions=function(){if(!this.canMatch())return[];for(var t=[this.getLogicalPos()],e=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)],o=this.getGrid(),n=0;n<t.length;n++)for(var i=t[n],r=0,s=e;r<s.length;r++){var c=s[r],l=i.add(c);if(-1==a.default.indexOf(t,l)){var p=o.getItemAtLogicalPos(l);p&&this.canLink(p)&&t.push(l)}}return t.sort(function(t,e){return a.default.vec2Less(t,e)?-1:1}),a.default.filterInvalidMathPositions(t),t},e.prototype.canDrop=function(){var t=this.getTopParasite();return t?t.hostCanDrop():this._canDrop()},e.prototype._canDrop=function(){return!1},e.prototype.canSwap=function(){var t=this.getTopParasite();return t?t.hostCanSwap():this._canSwap()},e.prototype._canSwap=function(){return!1},e.prototype.canMatch=function(){var t=this.getTopParasite();return t?t.hostCanMatch():this._canMatch()},e.prototype._canMatch=function(){return!1},e.prototype.canShuffle=function(){return!!this.canSwap()&&this._canShuffle()},e.prototype._canShuffle=function(){return!1},e.prototype.canShuffleWhenCreate=function(){return!!this.canSwap()&&this._canShuffleWhenCreate()},e.prototype._canShuffleWhenCreate=function(){return!1},e.prototype.canForceSwap=function(){return this.canSwap()},e.prototype.canChange=function(){return!this.getTopParasite()&&this._canChange()},e.prototype._canChange=function(){return!1},e.prototype.canCharge=function(t){return!this.getTopParasite()&&this._canCharge(t)},e.prototype.onCharge=function(t){this._onCharge(t)},e.prototype._onCharge=function(t){},e.prototype.canWillCharge=function(t){return!this.getTopParasite()&&this._canWillCharge(t)},e.prototype._canCharge=function(t){return this._chargeCount<this._targetCount&&this.getChargeID()==t},e.prototype._canWillCharge=function(t){return this._chargeCount+this._willChargeCount<this._targetCount&&this.getChargeID()==t},e.prototype.getChargePriority=function(){return this._chargePriority},e.prototype.getChargeID=function(){return this._chargetCollectionID},e.prototype.setChargeID=function(t){this._chargetCollectionID=t},e.prototype.absorbWillChargeAmount=function(t,e){if(this.getChargeID()==t){var o=Math.min(e,this._willChargeCount);this.setWillChargeAmount(this.getWillChargeAmount()-o),this.setChargeAmount(this.getChargeAmount()+o)}},e.prototype.getChargeAmount=function(){return this._chargeCount},e.prototype.setChargeAmount=function(t){this._chargeCount=t},e.prototype.getWillChargeAmount=function(){return this._willChargeCount},e.prototype.setWillChargeAmount=function(t){this._willChargeCount=t},e.prototype.getChargeTargetAmount=function(){return this._targetCount},e.prototype.setChargeTargetAmount=function(t){this._targetCount=t},e.prototype.haveEnoughEnergy=function(){return this.getChargeAmount()>=this.getChargeTargetAmount()},e.prototype.canTransformByMagicCrystal=function(){return!this.getTopParasite()&&this._canTransformByMagicCrystal()},e.prototype._canTransformByMagicCrystal=function(){return!1},e.prototype.canUpgradeByRainbow=function(){return!this.getTopParasite()&&this._canUpgradeByRainbow()},e.prototype._canUpgradeByRainbow=function(){return!1},e.prototype.canChangeColor=function(){return!this.getTopParasite()&&this._canChangeColor()},e.prototype._canChangeColor=function(){return!1},e.prototype.canCoveredByHoney=function(){return!this.getTopParasite()&&this._canCoveredByHoney()},e.prototype._canCoveredByHoney=function(){return this._canDrop()},e.prototype.canBlockBombRay=function(){return!this.getTopParasite()&&this._canBlockBombRay()},e.prototype._canBlockBombRay=function(){return!1},e.prototype.canCleanByBomb=function(t){var e=this.getTopParasite();return e?e.canCleanByBomb(t):!this.getImmuneDamage()&&this._canCleanByBomb(t)},e.prototype._canCleanByBomb=function(t){return!1},e.prototype.canCleanByActivate=function(){return!this.getTopParasite()&&this._canCleanByActivate()},e.prototype._canCleanByActivate=function(){return!1},e.prototype.canCleanByMatch=function(){var t=this.getTopParasite();return t?t.canCleanByMatch():!this.getImmuneDamage()&&this._canCleanByMatch()},e.prototype._canCleanByMatch=function(){return!1},e.prototype.canCleanByNeighbour=function(t){var e=this.getTopParasite();return e?e.canCleanByNeighbour(t):!this.getImmuneDamage()&&this._canCleanByNeighbour(t)},e.prototype._canCleanByNeighbour=function(t){return!1},e.prototype.canCleanBySuicide=function(){return!this.getTopParasite()&&this._canCleanBySuicide()},e.prototype._canCleanBySuicide=function(){return!1},e.prototype.canCleanByTerminate=function(t){var e=this.getTopParasite();return e?e.canCleanByTerminate(t):this._canCleanByTerminate(t)},e.prototype._canCleanByTerminate=function(t){return this._canCleanByBomb(t)},e.prototype.coverUnderForever=function(){return this._converUnderForever()},e.prototype._converUnderForever=function(){return!1},e.prototype.canActivatedByDoubleTabbed=function(){return!this.getTopParasite()&&this._canActivatedByDoubleTabbed()},e.prototype._canActivatedByDoubleTabbed=function(){return!1},e.prototype.onActivatedByDoubleTabbed=function(){this.getTopParasite()||this._onActivatedByDoubleTabbed()},e.prototype._onActivatedByDoubleTabbed=function(){},e.prototype.satisfyMatch=function(){return this._satisfyMatch()},e.prototype._satisfyMatch=function(){return this.getLinkedPositions().length>0},e.prototype.onSatisfyMatch=function(){this._onSatisfyMatch(0)},e.prototype._onSatisfyMatch=function(t){var e=this.getLinkedPositions();if(e.length>0){for(var o=[],n=0,i=e;n<i.length;n++){if((d=i[n]).equals(this.getLogicalPos()))o.push(t);else{var r=0,c=this.getGrid().getItemAtLogicalPos(d);c&&null!=c.getTopParasite()&&(r=1e4),o.push(r)}}var l=a.default.getMergePos(e,o),p=a.default.getCreateBombType(e);this.getGrid().canGenerateBomb()||(p=u.ItemBombType.None);for(var y=this.getGrid(),h=!1,m=0,f=e;m<f.length;m++){var d=f[m];if(y.isGrassFloorAtLogicalPos(d)){h=!0;break}}for(var _=0,g=e;_<g.length;_++){d=g[_];y.dispatchCommand(d,s.default.MatchClean(l,p,h),0)}}},e.prototype.canMatchWithNeighbourSwap=function(t){return this._canMatchWithNeighbourSwap(t)},e.prototype._canMatchWithNeighbourSwap=function(t){var e=this.getGrid().getItemAtLogicalPos(t);return!(!e||e.getEntityID()==c.EntityID.ItemBombRainbow)&&this._satisfyMatch()},e.prototype.onMatchWithNeighbourSwap=function(t){this._onMatchWithNeighbourSwap(t)},e.prototype._onMatchWithNeighbourSwap=function(t){var e=this.getGrid().getItemAtLogicalPos(t);e&&e.getEntityID()!=c.EntityID.ItemBombRainbow&&this._onSatisfyMatch(-1e3)},e.prototype.canMatchWithForceSwap=function(t){return this._canMatchWithForceSwap(t)},e.prototype._canMatchWithForceSwap=function(t){return this._satisfyMatch()},e.prototype.onMatchWithForceSwap=function(t){this._onMatchWithForceSwap(t)},e.prototype._onMatchWithForceSwap=function(t){this._onSatisfyMatch(-1e3)},e.prototype.canLayoutGrass=function(){return!this.getTopParasite()&&this._canLayoutGrass()},e.prototype._canLayoutGrass=function(){return this._canHitFloor()},e.prototype._onLayourGrass=function(){this.getGrid().dispatchCommand(this.getLogicalPos(),s.default.LayoutGrass(),0)},e.prototype._canHitNeighbour=function(){return this._canMatch()},e.prototype._onHitNeighbour=function(){for(var t=this.getGrid(),e=[cc.v2(1,0),cc.v2(-1,0),cc.v2(0,1),cc.v2(0,-1)],o=this.getLogicalPos(),n=0,i=e;n<i.length;n++){var r=i[n];t.dispatchCommand(o.add(r),s.default.NeighborClean(o,this.getEntityColor()),0)}},e.prototype._canHitFloor=function(){return this._canMatch()},e.prototype._onHitFloor=function(){this.getGrid().dispatchCommand(this.getLogicalPos(),s.default.FloorClean(),0)},e.prototype.progressDeathWish=function(t){this.onCollected(),t.hitFloor&&this._canHitFloor()&&this._onHitFloor(),t.hitNeighbour&&this._canHitNeighbour()&&this._onHitNeighbour(),t.layoutGrass&&this._canLayoutGrass()&&this._onLayourGrass(),this.getLogicalPos().equals(t.cleanRoot)&&this.getGrid().generateBomb(t.cleanRoot,t.createBombType,this.getEntityColor())},e.prototype.onClean=function(t){var e=this.getTopParasite();e?e.onClean(t):(this._onClean(t),this._canImmuneDamageAfterHurt()&&this.setImmuneDamage(!0))},e.prototype._onClean=function(t){},e.prototype._canImmuneDamageAfterHurt=function(){return!0},e.prototype.onChange=function(t){this._onChange(t)},e.prototype._onChange=function(t){},e.prototype.canExcuteCommand=function(t){switch(t.type){case s.GridCommandType.DoubleTabbed:return this.canActivatedByDoubleTabbed();case s.GridCommandType.NeighbourSwap:return this.canMatchWithNeighbourSwap(t.swapPos);case s.GridCommandType.ForceSwap:return this.canMatchWithForceSwap(t.swapPos);case s.GridCommandType.CheckMatch:return this.satisfyMatch();case s.GridCommandType.BombClean:return this.canCleanByBomb(t.cleanColor);case s.GridCommandType.ActivateClean:return this.canCleanByActivate();case s.GridCommandType.MatchClean:return this.canCleanByMatch();case s.GridCommandType.NeighborClean:return this.canCleanByNeighbour(t.cleanColor);case s.GridCommandType.SuicideClean:return this.canCleanBySuicide();case s.GridCommandType.TerminateClean:return this.canCleanByTerminate(t.cleanColor);case s.GridCommandType.Change:return this.canChange();case s.GridCommandType.Charge:return this.canCharge(t.chargeID)}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case s.GridCommandType.DoubleTabbed:this.onActivatedByDoubleTabbed();break;case s.GridCommandType.NeighbourSwap:this.onMatchWithNeighbourSwap(t.swapPos);break;case s.GridCommandType.ForceSwap:this.onMatchWithForceSwap(t.swapPos);break;case s.GridCommandType.CheckMatch:this.onSatisfyMatch();break;case s.GridCommandType.BombClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Bomb,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.ActivateClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Activate,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.MatchClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Match,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.NeighborClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Neighbor,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.SuicideClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Suicide,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.TerminateClean:this.onClean(c.EntityCleanOption.create(c.EntityCleanType.Terminate,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case s.GridCommandType.Change:this.onChange(c.EntityChangeOption.create(t.targetID,t.collectOld));break;case s.GridCommandType.Charge:this.onCharge(c.EntityChargeOption.create(t.chargeID,t.chargeAmount))}},e.prototype.selected=function(){this.node.angle=0,this.node.scale=1;var t=cc.scaleTo(.2,1.05).easing(cc.easeOut(2)),e=cc.scaleTo(.15,1).easing(cc.easeIn(2)),o=cc.scaleTo(.15,.95).easing(cc.easeOut(2)),n=cc.scaleTo(.5,1).easing(cc.easeIn(2)),i=cc.sequence(t,e,o,n).repeatForever();i.setTag(1001),this._puppet.runAction(i),this.node.zIndex=this.getTopZOrder()},e.prototype.unselected=function(){this._puppet.stopActionByTag(1001),this._puppet.angle=0,this._puppet.scale=1,this._puppet.setPosition(cc.Vec2.ZERO),this.node.zIndex=this.getBottomZOrder()},e.prototype.shake=function(){var t=this;this.node.angle=0,this.node.scale=1;var e=cc.spawn(cc.callFunc(function(){t.getGrid().highlightedCell(t.getLogicalPos())}),cc.rotateTo(.2,3).easing(cc.easeOut(2)),cc.scaleTo(.2,1.05).easing(cc.easeOut(2))),o=cc.spawn(cc.rotateTo(.15,1.5).easing(cc.easeIn(2)),cc.scaleTo(.15,1.025).easing(cc.easeIn(2))),n=cc.spawn(cc.rotateTo(.15,3).easing(cc.easeOut(2)),cc.scaleTo(.15,1.05).easing(cc.easeOut(2))),i=cc.spawn(cc.rotateTo(.5,0).easing(cc.easeIn(2)),cc.scaleTo(.5,1).easing(cc.easeIn(2))),r=cc.sequence(e,o,n,i).repeat(2);r.setTag(1002),this._puppet.runAction(r),this.node.zIndex=this.getTopZOrder()},e.prototype.unshake=function(){this._puppet.stopActionByTag(1002),this._puppet.angle=0,this._puppet.scale=1,this._puppet.setPosition(cc.Vec2.ZERO),this.node.zIndex=this.getBottomZOrder()},e.prototype.tipSlide=function(t){var e=this;this.setPixelPos(this.getLogicalPos());var o=this.getGrid().getPixelPosFromLogicalPos(this.getLogicalPos()),n=this.getGrid().getPixelPosFromLogicalPos(t).sub(o).mul(.1),i=cc.Vec2.ZERO,r=cc.spawn(cc.callFunc(function(){e.getGrid().highlightedCell(e.getLogicalPos())}),cc.moveTo(.2,i.add(n)).easing(cc.easeOut(2)),cc.scaleTo(.2,1.05).easing(cc.easeOut(2))),a=cc.spawn(cc.moveTo(.15,i.add(n.mul(.5))).easing(cc.easeIn(2)),cc.scaleTo(.15,1.025).easing(cc.easeIn(2))),s=cc.spawn(cc.moveTo(.15,i.add(n)).easing(cc.easeOut(2)),cc.scaleTo(.15,1.05).easing(cc.easeOut(2))),c=cc.spawn(cc.moveTo(.5,i).easing(cc.easeIn(2)),cc.scaleTo(.5,1).easing(cc.easeIn(2))),l=cc.sequence(r,a,s,c).repeat(2);l.setTag(1003),this._puppet.runAction(l),this.node.zIndex=this.getTopZOrder()},e.prototype.untipSlide=function(){this._puppet.stopActionByTag(1003),this._puppet.angle=0,this._puppet.scale=1,this._puppet.setPosition(cc.Vec2.ZERO),this.node.zIndex=this.getBottomZOrder()},e.prototype.bounce=function(){return null},e.prototype.initItem=function(e,o,n,i){void 0===n&&(n=1),void 0===i&&(i=1),t.prototype.initEntity.call(this,e,c.EntityType.Item,n,i),this._itemType=o,this._targetCount=0,this._chargeCount=0,this._willChargeCount=0,this._chargePriority=999,this._chargetCollectionID=p.CollectionID.None},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e=i([m],e)}(l.default));o.default=f,cc._RF.pop()},{"../../../../define/GameCurrencyType":"GameCurrencyType","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../EntityBase":"EntityBase","./color/bomb/ItemBombBase":"ItemBombBase"}],ItemBlock:[function(t,e,o){"use strict";cc._RF.push(e,"c64cdxqeAxJRbFoHmkKt5Ml","ItemBlock");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../defines/IdentifierManager"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBlock","ItemBlock");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,r.ItemType.Block),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.getCollectionID=function(){return a.CollectionID.ItemBlock},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.ItemBlockHp1;break;case 2:t=s.EntityID.ItemBlockHp2;break;case 3:t=s.EntityID.ItemBlockHp3;break;case 4:t=s.EntityID.ItemBlockHp4;break;case 5:t=s.EntityID.ItemBlockHp5;break;case 6:t=s.EntityID.ItemBlockHp6}return t},e.prototype.getScore=function(){return 100},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(c.default.getInstance().getMatchAudioFilePath("block"))}this.progressDeathWish(t),this.setVisible(!1),this.selfDestory()}else{this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt(),p.default.playAudio(c.default.getInstance().getMatchAudioFilePath("eliminate_0"));o=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),o.node.zIndex=this.getTopZOrder()}},e=o=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemBombBase:[function(t,e,o){"use strict";cc._RF.push(e,"592c9ZxpgRIhYut/sQhPAMT","ItemBombBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemBombType=void 0;var r,a=t("../../../../../../base/IGame"),s=t("../../../../../../base/Pair"),c=t("../../../../defines/EntityID"),l=t("../../../../defines/IdentifierManager"),p=t("../../../flyer/FlyerBomb"),u=t("../../../flyer/FlyerCannon"),y=t("../../../flyer/FlyerMissile"),h=t("../../ItemBase");(function(t){t[t.None=0]="None",t[t.Butterfly=1]="Butterfly",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Cross=4]="Cross",t[t.Range=5]="Range",t[t.Rainbow=6]="Rainbow"})(r=o.ItemBombType||(o.ItemBombType={}));var m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bombType=r.None,e._isDud=!1,e._selfDestructIndex=!1,e._isGrassBomb=!1,e}return n(e,t),e.prototype.getBombType=function(){return this._bombType},e.prototype.getIsDud=function(){return this._isDud},e.prototype.setIsDud=function(t){this._isDud=t},e.prototype.getSelfDestructIndex=function(){return this._selfDestructIndex},e.prototype.setSelfDestructIndex=function(t){this._selfDestructIndex=t},e.prototype.getIsGrassBomb=function(){return this._isGrassBomb},e.prototype.setIsGrassBomb=function(t){this._isGrassBomb=t},e.prototype.getShouldLayoutGrass=function(){return this.getIsGrassBomb()||this.getGrid().isGrassFloorAtLogicalPos(this.getLogicalPos())},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canMatch=function(){return!0},e.prototype._canChangeColor=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByMatch=function(){return!0},e.prototype._canCleanByActivate=function(){return!0},e.prototype._canShuffleWhenCreate=function(){return!0},e.prototype._canBombCombineWithNeighbour=function(t){var e=this.getGrid().getItemAtLogicalPos(t);return!(!e||!e.canMatch()||e.getItemType()!=h.ItemType.EffectBomb)},e.prototype._onBombCombineWithNeighbour=function(t){var e=this.getGrid().getItemAtLogicalPos(t);e&&this._onBombCombine(e)},e.prototype._onBombCombine=function(t){var e=this.getBombType(),o=t.getBombType(),n=Math.min(e,o),i=100*Math.max(e,o)+n,h=this.getShouldLayoutGrass()||t.getShouldLayoutGrass(),m=this.getGrid(),f=this.getEntityColor(),d=this.getLogicalPos();switch(i){case 101:for(var _=0;_<3;_++){var g=y.default.create(m,y.FlyerMissileType.Dot,f,h);m.setFlyerAtLogicalPos(g,d)}break;case 201:for(var I=[new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(-1,0),!1)],C=this.getGrid(),P=0,D=I;P<D.length;P++){var v=D[P],b=u.default.create(C,f,h,d,v.first,v.second);C.setFlyerAtLogicalPos(b,d)}g=y.default.create(C,y.FlyerMissileType.Row,f,h);C.setFlyerAtLogicalPos(g,d);break;case 301:I=[new s.Pair(cc.v2(0,1),!0),new s.Pair(cc.v2(0,-1),!1)];for(var E=this.getGrid(),B=0,T=I;B<T.length;B++){v=T[B],b=u.default.create(E,f,h,d,v.first,v.second);E.setFlyerAtLogicalPos(b,d)}g=y.default.create(E,y.FlyerMissileType.Column,f,h);E.setFlyerAtLogicalPos(g,d);break;case 401:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_cross"));for(var F=0,M=I=[new s.Pair(cc.v2(1,1),!0),new s.Pair(cc.v2(-1,-1),!1),new s.Pair(cc.v2(1,-1),!1),new s.Pair(cc.v2(-1,1),!1)];F<M.length;F++){v=M[F],b=u.default.create(m,f,h,d,v.first,v.second);m.setFlyerAtLogicalPos(b,d)}g=y.default.create(m,y.FlyerMissileType.Cross,f,h);m.setFlyerAtLogicalPos(g,d);break;case 501:var G=p.default.create(m,f,h,d,2);m.setFlyerAtLogicalPos(G,d);g=y.default.create(m,y.FlyerMissileType.Range,f,h);m.setFlyerAtLogicalPos(g,d);break;case 202:case 302:case 303:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_colorline"));for(var S=0,R=I=[new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(-1,0),!1),new s.Pair(cc.v2(0,1),!1),new s.Pair(cc.v2(0,-1),!1)];S<R.length;S++){v=R[S],b=u.default.create(m,f,h,d,v.first,v.second);m.setFlyerAtLogicalPos(b,d)}break;case 402:case 403:case 404:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_linecross"));for(var w=0,O=I=[new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(-1,0),!1),new s.Pair(cc.v2(0,1),!1),new s.Pair(cc.v2(0,-1),!1),new s.Pair(cc.v2(1,1),!1),new s.Pair(cc.v2(-1,-1),!1),new s.Pair(cc.v2(-1,1),!1),new s.Pair(cc.v2(1,-1),!1)];w<O.length;w++){v=O[w],b=u.default.create(m,f,h,d,v.first,v.second);m.setFlyerAtLogicalPos(b,d)}break;case 502:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_linebomb"));I=[new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(-1,0),!1)];for(var A=0,N=[cc.v2(0,1),cc.v2(0,0),cc.v2(0,-1)];A<N.length;A++)for(var L=N[A],k=0,x=I;k<x.length;k++){v=x[k],b=u.default.create(m,f,h,d.add(L),v.first,v.second);m.setFlyerAtLogicalPos(b,d.add(L))}break;case 503:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_linebomb"));I=[new s.Pair(cc.v2(0,1),!0),new s.Pair(cc.v2(0,-1),!1)];for(var H=0,j=[cc.v2(1,0),cc.v2(0,0),cc.v2(-1,0)];H<j.length;H++){L=j[H];for(var W=0,U=I;W<U.length;W++){v=U[W],b=u.default.create(m,f,h,d.add(L),v.first,v.second);m.setFlyerAtLogicalPos(b,d.add(L))}}break;case 504:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_bombcross"));for(var Y=0,K=[new s.Pair(cc.v2(0,0),!0),new s.Pair(cc.v2(-1,0),!0),new s.Pair(cc.v2(0,-1),!0)];Y<K.length;Y++){v=K[Y];var V=d.add(v.first);b=u.default.create(m,f,h,V,cc.v2(-1,-1),v.second);m.setFlyerAtLogicalPos(b,V)}for(var z=0,Z=[new s.Pair(cc.v2(0,0),!1),new s.Pair(cc.v2(1,0),!0),new s.Pair(cc.v2(0,1),!0)];z<Z.length;z++){v=Z[z],V=d.add(v.first),b=u.default.create(m,f,h,V,cc.v2(1,1),v.second);m.setFlyerAtLogicalPos(b,V)}for(var q=0,J=[new s.Pair(cc.v2(0,0),!1),new s.Pair(cc.v2(1,0),!1),new s.Pair(cc.v2(0,-1),!1)];q<J.length;q++){v=J[q],V=d.add(v.first),b=u.default.create(m,f,h,V,cc.v2(1,-1),v.second);m.setFlyerAtLogicalPos(b,V)}for(var X=0,Q=[new s.Pair(cc.v2(0,0),!1),new s.Pair(cc.v2(-1,0),!1),new s.Pair(cc.v2(0,1),!1)];X<Q.length;X++){v=Q[X],V=d.add(v.first),b=u.default.create(m,f,h,V,cc.v2(-1,1),v.second);m.setFlyerAtLogicalPos(b,V)}break;case 505:a.default.playAudio(l.default.getInstance().getMatchAudioFilePath("eliminate_special_bombbomb"));G=p.default.create(m,f,h,d,3);m.setFlyerAtLogicalPos(G,d)}this.setIsDud(!0),this._satisfyMatch()?this._onSatisfyMatch(-1e3):this._onClean(c.EntityCleanOption.create(c.EntityCleanType.Match,this.getLogicalPos(),c.EntityColor.None,r.None,!0,!0,h)),t.setIsDud(!0),t._satisfyMatch()?t._onSatisfyMatch(-1e3):t._onClean(c.EntityCleanOption.create(c.EntityCleanType.Match,t.getLogicalPos(),c.EntityColor.None,r.None,!0,!0,h))},e.prototype._canMatchWithNeighbourSwap=function(e){return!!this._canBombCombineWithNeighbour(e)||t.prototype._canMatchWithNeighbourSwap.call(this,e)},e.prototype._onMatchWithNeighbourSwap=function(e){this._canBombCombineWithNeighbour(e)?this._onBombCombineWithNeighbour(e):t.prototype._onMatchWithNeighbourSwap.call(this,e)},e.prototype._onClean=function(t){this.setVisible(!1),t.layoutGrass&&this.setIsGrassBomb(!0),this.progressDeathWish(t),this.selfDestory()},e.prototype.initBomb=function(e,o){t.prototype.initItem.call(this,e,h.ItemType.EffectBomb),this._bombType=o,this.setIsDud(!1),this._selfDestructIndex=!1,this._isGrassBomb=!1},e=i([f],e)}(h.default));o.default=d,cc._RF.pop()},{"../../../../../../base/IGame":"IGame","../../../../../../base/Pair":"Pair","../../../../defines/EntityID":"EntityID","../../../../defines/IdentifierManager":"IdentifierManager","../../../flyer/FlyerBomb":"FlyerBomb","../../../flyer/FlyerCannon":"FlyerCannon","../../../flyer/FlyerMissile":"FlyerMissile","../../ItemBase":"ItemBase"}],ItemBombButterfly:[function(t,e,o){"use strict";cc._RF.push(e,"dd8a9suQ0JJKrF63p7gKdhJ","ItemBombButterfly");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../defines/CollectionID"),a=t("../../../../defines/EntityID"),s=t("../../../flyer/FlyerMissile"),c=t("./ItemBombBase"),l=t("../../../EntityPrefabNodePool"),p=t("../../../../../../define/GameCurrencyType"),u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=r.CollectionID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=r.CollectionID.ItemBombButterflyRed;break;case a.EntityColor.Green:t=r.CollectionID.ItemBombButterflyGreen;break;case a.EntityColor.Blue:t=r.CollectionID.ItemBombButterflyBlue;break;case a.EntityColor.Yellow:t=r.CollectionID.ItemBombButterflyYellow;break;case a.EntityColor.Orange:t=r.CollectionID.ItemBombButterflyOrange;break;case a.EntityColor.Purple:t=r.CollectionID.ItemBombButterflyPurple}return t},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=a.EntityID.ItemBombButterflyRed;break;case a.EntityColor.Green:t=a.EntityID.ItemBombButterflyGreen;break;case a.EntityColor.Blue:t=a.EntityID.ItemBombButterflyBlue;break;case a.EntityColor.Yellow:t=a.EntityID.ItemBombButterflyYellow;break;case a.EntityColor.Orange:t=a.EntityID.ItemBombButterflyOrange;break;case a.EntityColor.Purple:t=a.EntityID.ItemBombButterflyPurple}return t},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[p.GameCurrencyType.GoldCoin]=1,t[p.GameCurrencyType.TrainFood]=1,t},e.prototype.getScore=function(){return 200},e.prototype._onClean=function(e){if(t.prototype._onClean.call(this,e),this.getGrid().gainScoreWithEntity(this),!this.getIsDud()){var o=this.getGrid(),n=s.default.create(o,s.FlyerMissileType.Dot,this.getEntityColor(),this.getShouldLayoutGrass());o.setFlyerAtLogicalPos(n,this.getLogicalPos()),this.setVisible(!1)}},e.create=function(t,e){var o=l.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombButterfly","ItemBombButterfly");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initBomb.call(this,e,c.ItemBombType.Butterfly),this.setEntityColor(o)},e.prototype.start=function(){},e=o=i([y],e)}(c.default));o.default=h,cc._RF.pop()},{"../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerMissile":"FlyerMissile","./ItemBombBase":"ItemBombBase"}],ItemBombColumn:[function(t,e,o){"use strict";cc._RF.push(e,"5a8bdieQRFFM6Z+DFFwQ8tB","ItemBombColumn");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../../base/Pair"),a=t("../../../../defines/CollectionID"),s=t("../../../../defines/EntityID"),c=t("../../../flyer/FlyerCannon"),l=t("./ItemBombBase"),p=t("../../../../../../base/IGame"),u=t("../../../../defines/IdentifierManager"),y=t("../../../EntityPrefabNodePool"),h=t("../../../../../../define/GameCurrencyType"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=a.CollectionID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=a.CollectionID.ItemBombColumnRed;break;case s.EntityColor.Green:t=a.CollectionID.ItemBombColumnGreen;break;case s.EntityColor.Blue:t=a.CollectionID.ItemBombColumnBlue;break;case s.EntityColor.Yellow:t=a.CollectionID.ItemBombColumnYellow;break;case s.EntityColor.Orange:t=a.CollectionID.ItemBombColumnOrange;break;case s.EntityColor.Purple:t=a.CollectionID.ItemBombColumnPurple}return t},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=s.EntityID.ItemBombColumnRed;break;case s.EntityColor.Green:t=s.EntityID.ItemBombColumnGreen;break;case s.EntityColor.Blue:t=s.EntityID.ItemBombColumnBlue;break;case s.EntityColor.Yellow:t=s.EntityID.ItemBombColumnYellow;break;case s.EntityColor.Orange:t=s.EntityID.ItemBombColumnOrange;break;case s.EntityColor.Purple:t=s.EntityID.ItemBombColumnPurple}return t},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[h.GameCurrencyType.GoldCoin]=1,t[h.GameCurrencyType.TrainEyepatch]=1,t},e.prototype.getScore=function(){return 300},e.prototype._onClean=function(e){if(t.prototype._onClean.call(this,e),this.getGrid().gainScoreWithEntity(this),!this.getIsDud()){p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_special_line"));for(var o=[new r.Pair(cc.v2(0,1),!0),new r.Pair(cc.v2(0,-1),!1)],n=this.getGrid(),i=0,a=o;i<a.length;i++){var s=a[i],l=c.default.create(n,this.getEntityColor(),this.getShouldLayoutGrass(),this.getLogicalPos(),s.first,s.second);n.setFlyerAtLogicalPos(l,this.getLogicalPos())}this.setVisible(!1)}},e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombColumn","ItemBombColumn");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initBomb.call(this,e,l.ItemBombType.Column),this.setEntityColor(o)},e.prototype.start=function(){},e=o=i([f],e)}(l.default));o.default=d,cc._RF.pop()},{"../../../../../../base/IGame":"IGame","../../../../../../base/Pair":"Pair","../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../../defines/IdentifierManager":"IdentifierManager","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerCannon":"FlyerCannon","./ItemBombBase":"ItemBombBase"}],ItemBombCross:[function(t,e,o){"use strict";cc._RF.push(e,"ce5775OqmtK76ElclAfSGzL","ItemBombCross");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../../base/Pair"),a=t("../../../../defines/CollectionID"),s=t("../../../../defines/EntityID"),c=t("../../../flyer/FlyerCannon"),l=t("./ItemBombBase"),p=t("../../../../../../base/IGame"),u=t("../../../../defines/IdentifierManager"),y=t("../../../EntityPrefabNodePool"),h=t("../../../../../../define/GameCurrencyType"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=a.CollectionID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=a.CollectionID.ItemBombCrossRed;break;case s.EntityColor.Green:t=a.CollectionID.ItemBombCrossGreen;break;case s.EntityColor.Blue:t=a.CollectionID.ItemBombCrossBlue;break;case s.EntityColor.Yellow:t=a.CollectionID.ItemBombCrossYellow;break;case s.EntityColor.Orange:t=a.CollectionID.ItemBombCrossOrange;break;case s.EntityColor.Purple:t=a.CollectionID.ItemBombCrossPurple}return t},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=s.EntityID.ItemBombCrossRed;break;case s.EntityColor.Green:t=s.EntityID.ItemBombCrossGreen;break;case s.EntityColor.Blue:t=s.EntityID.ItemBombCrossBlue;break;case s.EntityColor.Yellow:t=s.EntityID.ItemBombCrossYellow;break;case s.EntityColor.Orange:t=s.EntityID.ItemBombCrossOrange;break;case s.EntityColor.Purple:t=s.EntityID.ItemBombCrossPurple}return t},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[h.GameCurrencyType.GoldCoin]=1,t[h.GameCurrencyType.TrainHoe]=1,t},e.prototype.getScore=function(){return 400},e.prototype._onClean=function(e){if(t.prototype._onClean.call(this,e),this.getGrid().gainScoreWithEntity(this),!this.getIsDud()){p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_special_cross"));for(var o=[new r.Pair(cc.v2(1,1),!0),new r.Pair(cc.v2(-1,-1),!1),new r.Pair(cc.v2(1,-1),!1),new r.Pair(cc.v2(-1,1),!1)],n=this.getGrid(),i=0,a=o;i<a.length;i++){var s=a[i],l=c.default.create(n,this.getEntityColor(),this.getShouldLayoutGrass(),this.getLogicalPos(),s.first,s.second);n.setFlyerAtLogicalPos(l,this.getLogicalPos())}this.setVisible(!1)}},e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombCross","ItemBombCross");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initBomb.call(this,e,l.ItemBombType.Cross),this.setEntityColor(o)},e.prototype.start=function(){},e=o=i([f],e)}(l.default));o.default=d,cc._RF.pop()},{"../../../../../../base/IGame":"IGame","../../../../../../base/Pair":"Pair","../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../../defines/IdentifierManager":"IdentifierManager","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerCannon":"FlyerCannon","./ItemBombBase":"ItemBombBase"}],ItemBombRainbow:[function(t,e,o){"use strict";cc._RF.push(e,"7f2a5M56zxKC4rM8ySirQk2","ItemBombRainbow");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../../extend/utils/GameMath"),a=t("../../../../defines/CollectionID"),s=t("../../../../defines/EntityID"),c=t("../../../flyer/FlyerLaser"),l=t("../../../flyer/FlyerNuclear"),p=t("../../ItemBase"),u=t("./ItemBombBase"),y=t("../../../EntityPrefabNodePool"),h=t("../../../../../../define/GameCurrencyType"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cleanOption=s.EntityCleanOption.create(s.EntityCleanType.None,cc.Vec2.ZERO,s.EntityColor.None,u.ItemBombType.None,!1,!1,!1),e}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){return a.CollectionID.ItemBombRainbow},e.prototype.getEntityID=function(){return s.EntityID.ItemBombRainbow},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[h.GameCurrencyType.GoldCoin]=1,t},e.prototype.getScore=function(){return 1e3},e.prototype.selfDestory=function(){this.getGrid().gainScoreWithEntity(this),this.getGrid().canGenerateTrainSupply()&&this.getGrid().gainStepWithItemID(h.GameCurrencyType.ExtraStep1,!0,this.getLogicalPos()),this.getGrid().getEntity(this.getEntityType(),this.getLogicalPos())==this&&this.removeFromGridAndAddToEffect(),this.getGrid().addObstructs(this),this.progressDeathWish(this._cleanOption);var t=cc.spawn(cc.scaleTo(.15,0),cc.fadeOut(.15)),e=cc.sequence(t,cc.callFunc(function(){this.getGrid().removeObstructs(this),this.destoryWithRecycle(!0)},this));this.runAction(e)},e.prototype._canMatch=function(){return!1},e.prototype._canHitFloor=function(){return!0},e.prototype._canHitNeighbour=function(){return!0},e.prototype._canLayoutGrass=function(){return!0},e.prototype._canChangeColor=function(){return!1},e.prototype._canCleanBySuicide=function(){return!0},e.prototype._canCleanByMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canCleanByTerminate=function(t){return!0},e.prototype._canCleanByActivate=function(){return!0},e.prototype.getCleanOption=function(){return this._cleanOption},e.prototype.setCleanOption=function(t){this._cleanOption=t},e.prototype._canMatchWithNeighbourSwap=function(t){if(this._canBombCombineWithNeighbour(t))return!0;var e=this.getGrid().getItemAtLogicalPos(t);return!!(e&&e.canMatch()&&e.getEntityColor()>=s.EntityColor.Begin&&e.getEntityColor()<=s.EntityColor.End)},e.prototype._onMatchWithNeighbourSwap=function(t){var e=s.EntityColor.None,o=u.ItemBombType.None,n=this.getShouldLayoutGrass()||this.getGrid().isGrassFloorAtLogicalPos(t),i=this.getGrid().getItemAtLogicalPos(t);if(i&&(e=i.getEntityColor()),this._canBombCombineWithNeighbour(t)){var r=i;if(o=r.getBombType(),r.getBombType()==u.ItemBombType.Rainbow){var a=this.getGrid(),c=l.default.create(this.getGrid(),n,this.getLogicalPos());a.setFlyerAtLogicalPos(c,this.getLogicalPos()),this.setIsDud(!0),this._cleanOption=s.EntityCleanOption.create(s.EntityCleanType.Match,this.getLogicalPos(),s.EntityColor.None,u.ItemBombType.None,!0,!0,n),this.selfDestory();var p=r;p&&(p.setIsDud(!0),p.setCleanOption(s.EntityCleanOption.create(s.EntityCleanType.Match,this.getLogicalPos(),s.EntityColor.None,u.ItemBombType.None,!0,!0,n)),p.selfDestory())}else this._launchLaser(e,o,n)}else this._launchLaser(e,o,n)},e.prototype._canBombCombineWithNeighbour=function(t){var e=this.getGrid().getItemAtLogicalPos(t);return!(0!=this.getIsDud()||null!=this.getTopParasite()||!e||null!=e.getTopParasite()||e.getItemType()!=p.ItemType.EffectBomb)},e.prototype._onClean=function(t){if(t.layoutGrass&&this.setIsGrassBomb(!0),this.getIsDud())this.selfDestory();else{this.setIsDud(!0);var e=[],o=this.getGrid().getItemsMap();for(var n in o){var i=o[n];if(i.canMatch()){var a=i.getEntityColor();a!=s.EntityColor.None&&r.default.insertAsSet(e,a)}}if(e.length>0){var c=e[r.default.randomInt(0,e.length-1)];this._launchLaser(c,u.ItemBombType.None,this.getShouldLayoutGrass())}}},e.prototype._launchLaser=function(t,e,o){this.setIsDud(!0),this._cleanOption=s.EntityCleanOption.create(s.EntityCleanType.Match,this.getLogicalPos(),t,u.ItemBombType.None,!0,!0,o),this.removeFromGridAndAddToEffect();var n=this.getGrid(),i=c.default.create(n,this,this.getLogicalPos(),t,e,o);n.setFlyerAtLogicalPos(i,this.getLogicalPos())},e.create=function(t){var e=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombRainbow","ItemBombRainbow");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.init=function(e){t.prototype.initBomb.call(this,e,u.ItemBombType.Rainbow),this.setEntityColor(s.EntityColor.None),this._cleanOption=s.EntityCleanOption.create(s.EntityCleanType.None,cc.Vec2.ZERO,s.EntityColor.None,u.ItemBombType.None,!1,!1,!1)},e.prototype.start=function(){},e=o=i([f],e)}(u.default));o.default=d,cc._RF.pop()},{"../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../../../extend/utils/GameMath":"GameMath","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerLaser":"FlyerLaser","../../../flyer/FlyerNuclear":"FlyerNuclear","../../ItemBase":"ItemBase","./ItemBombBase":"ItemBombBase"}],ItemBombRange:[function(t,e,o){"use strict";cc._RF.push(e,"3f8f6qsTIpDhrXiOPrAyKnD","ItemBombRange");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../defines/CollectionID"),a=t("../../../../defines/EntityID"),s=t("../../../flyer/FlyerBomb"),c=t("./ItemBombBase"),l=t("../../../../../../base/IGame"),p=t("../../../../defines/IdentifierManager"),u=t("../../../EntityPrefabNodePool"),y=t("../../../../../../define/GameCurrencyType"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=r.CollectionID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=r.CollectionID.ItemBombRangeRed;break;case a.EntityColor.Green:t=r.CollectionID.ItemBombRangeGreen;break;case a.EntityColor.Blue:t=r.CollectionID.ItemBombRangeBlue;break;case a.EntityColor.Yellow:t=r.CollectionID.ItemBombRangeYellow;break;case a.EntityColor.Orange:t=r.CollectionID.ItemBombRangeOrange;break;case a.EntityColor.Purple:t=r.CollectionID.ItemBombRangePurple}return t},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=a.EntityID.ItemBombRangeRed;break;case a.EntityColor.Green:t=a.EntityID.ItemBombRangeGreen;break;case a.EntityColor.Blue:t=a.EntityID.ItemBombRangeBlue;break;case a.EntityColor.Yellow:t=a.EntityID.ItemBombRangeYellow;break;case a.EntityColor.Orange:t=a.EntityID.ItemBombRangeOrange;break;case a.EntityColor.Purple:t=a.EntityID.ItemBombRangePurple}return t},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[y.GameCurrencyType.GoldCoin]=1,t[y.GameCurrencyType.TrainHoe]=1,t},e.prototype.getScore=function(){return 500},e.prototype._onClean=function(e){if(t.prototype._onClean.call(this,e),this.getGrid().gainScoreWithEntity(this),!this.getIsDud()){l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("eliminate_special_bomb"));var o=this.getGrid(),n=s.default.create(o,this.getEntityColor(),this.getShouldLayoutGrass(),this.getLogicalPos(),2);o.setFlyerAtLogicalPos(n,this.getLogicalPos()),this.setVisible(!1)}},e.create=function(t,e){var o=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombRange","ItemBombRange");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initBomb.call(this,e,c.ItemBombType.Range),this.setEntityColor(o)},e.prototype.start=function(){},e=o=i([m],e)}(c.default));o.default=f,cc._RF.pop()},{"../../../../../../base/IGame":"IGame","../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../../defines/IdentifierManager":"IdentifierManager","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerBomb":"FlyerBomb","./ItemBombBase":"ItemBombBase"}],ItemBombRow:[function(t,e,o){"use strict";cc._RF.push(e,"a24cbU8cjlClboxTgH8QM0f","ItemBombRow");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../../base/Pair"),a=t("../../../../defines/CollectionID"),s=t("../../../../defines/EntityID"),c=t("../../../flyer/FlyerCannon"),l=t("./ItemBombBase"),p=t("../../../../../../base/IGame"),u=t("../../../../defines/IdentifierManager"),y=t("../../../EntityPrefabNodePool"),h=t("../../../../../../define/GameCurrencyType"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=a.CollectionID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=a.CollectionID.ItemBombRowRed;break;case s.EntityColor.Green:t=a.CollectionID.ItemBombRowGreen;break;case s.EntityColor.Blue:t=a.CollectionID.ItemBombRowBlue;break;case s.EntityColor.Yellow:t=a.CollectionID.ItemBombRowYellow;break;case s.EntityColor.Orange:t=a.CollectionID.ItemBombRowOrange;break;case s.EntityColor.Purple:t=a.CollectionID.ItemBombRowPurple}return t},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getEntityColor()){case s.EntityColor.Red:t=s.EntityID.ItemBombRowRed;break;case s.EntityColor.Green:t=s.EntityID.ItemBombRowGreen;break;case s.EntityColor.Blue:t=s.EntityID.ItemBombRowBlue;break;case s.EntityColor.Yellow:t=s.EntityID.ItemBombRowYellow;break;case s.EntityColor.Orange:t=s.EntityID.ItemBombRowOrange;break;case s.EntityColor.Purple:t=s.EntityID.ItemBombRowPurple}return t},e.prototype.getProducedTrainSupplyMaps=function(){var t={};return t[h.GameCurrencyType.GoldCoin]=1,t[h.GameCurrencyType.TrainSoap]=1,t},e.prototype.getScore=function(){return 300},e.prototype._onClean=function(e){if(t.prototype._onClean.call(this,e),this.getGrid().gainScoreWithEntity(this),!this.getIsDud()){p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_special_line"));for(var o=[new r.Pair(cc.v2(1,0),!0),new r.Pair(cc.v2(-1,0),!1)],n=this.getGrid(),i=0,a=o;i<a.length;i++){var s=a[i],l=c.default.create(n,this.getEntityColor(),this.getShouldLayoutGrass(),this.getLogicalPos(),s.first,s.second);n.setFlyerAtLogicalPos(l,this.getLogicalPos())}this.setVisible(!1)}},e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBombRow","ItemBombRow");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initBomb.call(this,e,l.ItemBombType.Row),this.setEntityColor(o)},e.prototype.start=function(){},e=o=i([f],e)}(l.default));o.default=d,cc._RF.pop()},{"../../../../../../base/IGame":"IGame","../../../../../../base/Pair":"Pair","../../../../../../define/GameCurrencyType":"GameCurrencyType","../../../../defines/CollectionID":"CollectionID","../../../../defines/EntityID":"EntityID","../../../../defines/IdentifierManager":"IdentifierManager","../../../EntityPrefabNodePool":"EntityPrefabNodePool","../../../flyer/FlyerCannon":"FlyerCannon","./ItemBombBase":"ItemBombBase"}],ItemBone:[function(t,e,o){"use strict";cc._RF.push(e,"7d476kXhRBMI76wbPId2lGt","ItemBone");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../commond/GridCommand"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemBone","ItemBone");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return a.CollectionID.ItemBone},e.prototype.getEntityID=function(){return s.EntityID.ItemBone},e.prototype.getScore=function(){return 500},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.Bone)},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canMatch=function(){return!1},e.prototype._canCleanBySuicide=function(){return!0},e.prototype._satisfyMatch=function(){var t=this.getGrid().getCellAtLogicalPos(this.getLogicalPos());return!(!t||!t.getIsBoneCollector())},e.prototype._onSatisfyMatch=function(t){this.getGrid().dispatchCommand(this.getLogicalPos(),c.default.SuicideClean(this.getLogicalPos(),s.EntityColor.None,!1),0)},e.prototype._canMatchWithNeighbourSwap=function(t){var e=this.getGrid().getItemAtLogicalPos(t);if(e){if(e.getEntityID()==s.EntityID.ItemBone)return!1;if(e.getEntityID()==s.EntityID.ItemBombRainbow||e.canExcuteCommand(c.default.NeighbourSwap(this.getLogicalPos())))return this._satisfyMatch()}return!1},e.prototype._onMatchWithNeighbourSwap=function(t){this.getGrid().dispatchCommand(this.getLogicalPos(),c.default.SuicideClean(this.getLogicalPos(),s.EntityColor.None,!1),0)},e.prototype._onClean=function(t){this.setVisible(!1),this.getGrid().gainScoreWithEntity(this),this.progressDeathWish(t),this.selfDestory(!0);var e=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(e,this.getLogicalPos()),e.node.zIndex=this.getTopZOrder(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("bone"))},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../commond/GridCommand":"GridCommand","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemChestnut:[function(t,e,o){"use strict";cc._RF.push(e,"da5b6zM5o9MY55D20uGtNon","ItemChestnut");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../flyer/FlyerAnimation"),l=t("../../../../../base/IGame"),p=t("../../../defines/IdentifierManager"),u=t("../../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemChestnut","ItemChestnut");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return a.CollectionID.ItemChestnut},e.prototype.getEntityID=function(){return s.EntityID.ItemChestnut},e.prototype.getScore=function(){return 150},e.prototype.getButterflyPriority=function(e,o){return this.getGrid().isTargetCollectionID(this.getCollectionID())?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.Chestnut)},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canBlockBombRay=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){if(this.getGrid().gainScoreWithEntity(this),!this.isTargetCollection()){var e=c.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(e,this.getLogicalPos()),l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("nut"))}this.setVisible(!1),this.progressDeathWish(t),this.selfDestory(!0)},e=o=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemDogHouse:[function(t,e,o){"use strict";cc._RF.push(e,"ef13dbK3idGv415WZNpClz4","ItemDogHouse");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../defines/CollectionID"),a=t("../../../defines/EntityID"),s=t("../ItemBase"),c=t("../../EntityPrefabNodePool"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemDogHouse","ItemDogHouse");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return r.CollectionID.ItemDogHouse},e.prototype.getEntityID=function(){return a.EntityID.ItemDogHouse},e.prototype.init=function(e){t.prototype.initItem.call(this,e,s.ItemType.DogHouse)},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._converUnderForever=function(){return!0},e=o=i([p],e)}(s.default));o.default=u,cc._RF.pop()},{"../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../EntityPrefabNodePool":"EntityPrefabNodePool","../ItemBase":"ItemBase"}],ItemDogPaw:[function(t,e,o){"use strict";cc._RF.push(e,"b3014JsLrZCVYkSoIOUSPEL","ItemDogPaw");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../defines/CollectionID"),a=t("../../../defines/EntityID"),s=t("../../../defines/PowerID"),c=t("../../../grid/GridBase"),l=t("../ItemBase"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../EntityPrefabNodePool"),h=t("../../../../../extend/utils/GameMath"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemDogPaw","ItemDogPaw");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,l.ItemType.DogPaw),this.setEntityColor(o)},e.prototype.getCollectionID=function(){var t=r.CollectionID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=r.CollectionID.ItemPawRed;break;case a.EntityColor.Green:t=r.CollectionID.ItemPawGreen;break;case a.EntityColor.Blue:t=r.CollectionID.ItemPawBlue;break;case a.EntityColor.Yellow:t=r.CollectionID.ItemPawYellow;break;case a.EntityColor.Orange:t=r.CollectionID.ItemPawOrange;break;case a.EntityColor.Purple:t=r.CollectionID.ItemPawPurple}return t},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=a.EntityID.ItemPawRed;break;case a.EntityColor.Green:t=a.EntityID.ItemPawGreen;break;case a.EntityColor.Blue:t=a.EntityID.ItemPawBlue;break;case a.EntityColor.Yellow:t=a.EntityID.ItemPawYellow;break;case a.EntityColor.Orange:t=a.EntityID.ItemPawOrange;break;case a.EntityColor.Purple:t=a.EntityID.ItemPawPurple}return t},e.prototype.getPowerID=function(){return s.PowerID.PuppyVitality},e.prototype.getScore=function(){return 100},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canMatch=function(){return!0},e.prototype._canChangeColor=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByMatch=function(){return!0},e.prototype._canShuffleWhenCreate=function(){return!0},e.prototype._onClean=function(t){var e=this;this.progressDeathWish(t);var o=this.playAnimation("matched");if(o){this.removeFromGridAndAddToEffect(),this.node.zIndex=c.default.ZORDER_PUPPY_TOP,this.getGrid().addObstructs(this);var n=cc.sequence(cc.delayTime(o.duration),cc.callFunc(function(){e._flyToDog()}));this.runAction(n)}else this.selfDestory(!0);if(this.getGrid().gainScoreWithEntity(this),t.cleanType==a.EntityCleanType.Match){var i="eliminate_0";switch(this.getGrid().getPowerAmount(s.PowerID.MatchCombo)){case 0:i="eliminate_0";break;case 1:i="eliminate_1";break;case 2:i="eliminate_2";break;case 3:i="eliminate_3";break;case 4:i="eliminate_4";break;case 5:i="eliminate_5";break;case 6:i="eliminate_6";break;case 7:i="eliminate_7";break;case 8:default:i="eliminate_8"}p.default.playAudio(u.default.getInstance().getMatchAudioFilePath(i))}},e.prototype._flyToDog=function(){var t=this;if(this.getGrid().isTargetCollectionID(r.CollectionID.ItemPuppy)){var e=cc.Vec2.ZERO,o=this.getGrid().getItemsMap();for(var n in o){var i=o[n];if(i.getEntityID()==a.EntityID.ItemPuppy){e=i.getLogicalPos();break}}var s=h.default.getDistance(this.node.position,this.getPixelPos(e))/1e3,c=cc.sequence(cc.spawn(cc.moveTo(s,this.getPixelPos(e)),cc.scaleTo(s,.5)),cc.callFunc(function(){t.getGrid().bombCell(e),t.getGrid().removeObstructs(t),t.destoryWithRecycle(!0)}));this.runAction(c)}else this.selfDestory(!0)},e=o=i([f],e)}(l.default));o.default=d,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../extend/utils/GameMath":"GameMath","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/PowerID":"PowerID","../../../grid/GridBase":"GridBase","../../EntityPrefabNodePool":"EntityPrefabNodePool","../ItemBase":"ItemBase"}],ItemDoughnut:[function(t,e,o){"use strict";cc._RF.push(e,"a1008d1EBtKPJeLWe9CZdlJ","ItemDoughnut");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../defines/IdentifierManager"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemDoughnut","ItemDoughnut");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getCollectionID=function(){return a.CollectionID.ItemDoughnut},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.ItemDoughnutHp1;break;case 2:t=s.EntityID.ItemDoughnutHp2;break;case 3:t=s.EntityID.ItemDoughnutHp3}return t},e.prototype.getScore=function(){return 100},e.prototype.getButterflyPriority=function(e,o){return this.getGrid().isTargetCollectionID(this.getCollectionID())?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,r.ItemType.Doughnut),this.setHealthPoint(o)},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(c.default.getInstance().getMatchAudioFilePath("doughnut"))}this.setVisible(!1),this.progressDeathWish(t),this.selfDestory(!0)}else{this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt(),p.default.playAudio(c.default.getInstance().getMatchAudioFilePath("eliminate_0"));o=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),o.node.zIndex=this.getTopZOrder()}},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e=o=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemFactory:[function(t,e,o){"use strict";cc._RF.push(e,"68828C8uZ5BZbjT3gNOHYmL","ItemFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../extend/utils/GameMath"),i=t("../../defines/EntityID"),r=t("../../defines/IdentifierManager"),a=t("../../defines/KindID"),s=t("./color/bomb/ItemBombBase"),c=t("./color/bomb/ItemBombButterfly"),l=t("./color/bomb/ItemBombColumn"),p=t("./color/bomb/ItemBombCross"),u=t("./color/bomb/ItemBombRainbow"),y=t("./color/bomb/ItemBombRange"),h=t("./color/bomb/ItemBombRow"),m=t("./color/ItemDogPaw"),f=t("./color/ItemNormal"),d=t("./special/ItemBalloon"),_=t("./special/ItemDogHouse"),g=t("./special/ItemMagicCrystal"),I=t("./special/ItemPuppy"),C=t("./special/ItemBlock"),P=t("./special/ItemBone"),D=t("./special/ItemWatermelon"),v=t("./special/ItemDoughnut"),b=t("./special/ItemFireWormBottle"),E=t("./special/ItemJamBottle"),B=t("./special/ItemFruitCake"),T=t("./special/ItemChestnut"),F=t("./special/ItemHoneyComb"),M=t("./special/ItemMower"),G=t("./special/ItemFireworks"),S=t("./special/ItemStatue"),R=t("../../defines/EntityGroupID"),w=function(){function t(){}return t.generateItemWithEntityID=function(t,e){var o=null;switch(e){case i.EntityID.ItemNormalRed:case i.EntityID.ItemNormalGreen:case i.EntityID.ItemNormalBlue:case i.EntityID.ItemNormalYellow:case i.EntityID.ItemNormalOrange:case i.EntityID.ItemNormalPurple:var n=e-i.EntityID.ItemNormalRed+i.EntityColor.Red;o=f.default.create(t,n);break;case i.EntityID.ItemBombButterflyRed:case i.EntityID.ItemBombButterflyGreen:case i.EntityID.ItemBombButterflyBlue:case i.EntityID.ItemBombButterflyYellow:case i.EntityID.ItemBombButterflyOrange:case i.EntityID.ItemBombButterflyPurple:n=e-i.EntityID.ItemBombButterflyRed+i.EntityColor.Red;o=c.default.create(t,n);break;case i.EntityID.ItemBombRowRed:case i.EntityID.ItemBombRowGreen:case i.EntityID.ItemBombRowBlue:case i.EntityID.ItemBombRowYellow:case i.EntityID.ItemBombRowOrange:case i.EntityID.ItemBombRowPurple:n=e-i.EntityID.ItemBombRowRed+i.EntityColor.Red;o=h.default.create(t,n);break;case i.EntityID.ItemBombColumnRed:case i.EntityID.ItemBombColumnGreen:case i.EntityID.ItemBombColumnBlue:case i.EntityID.ItemBombColumnYellow:case i.EntityID.ItemBombColumnOrange:case i.EntityID.ItemBombColumnPurple:n=e-i.EntityID.ItemBombColumnRed+i.EntityColor.Red;o=l.default.create(t,n);break;case i.EntityID.ItemBombCrossRed:case i.EntityID.ItemBombCrossGreen:case i.EntityID.ItemBombCrossBlue:case i.EntityID.ItemBombCrossYellow:case i.EntityID.ItemBombCrossOrange:case i.EntityID.ItemBombCrossPurple:n=e-i.EntityID.ItemBombCrossRed+i.EntityColor.Red;o=p.default.create(t,n);break;case i.EntityID.ItemBombRangeRed:case i.EntityID.ItemBombRangeGreen:case i.EntityID.ItemBombRangeBlue:case i.EntityID.ItemBombRangeYellow:case i.EntityID.ItemBombRangeOrange:case i.EntityID.ItemBombRangePurple:n=e-i.EntityID.ItemBombRangeRed+i.EntityColor.Red;o=y.default.create(t,n);break;case i.EntityID.ItemPawRed:case i.EntityID.ItemPawGreen:case i.EntityID.ItemPawBlue:case i.EntityID.ItemPawYellow:case i.EntityID.ItemPawOrange:case i.EntityID.ItemPawPurple:n=e-i.EntityID.ItemPawRed+i.EntityColor.Red;o=m.default.create(t,n);break;case i.EntityID.ItemBombRainbow:o=u.default.create(t);break;case i.EntityID.ItemDoughnutHp1:case i.EntityID.ItemDoughnutHp2:case i.EntityID.ItemDoughnutHp3:var r=e-i.EntityID.ItemDoughnutHp1+1;o=v.default.create(t,r);break;case i.EntityID.ItemBlockHp1:case i.EntityID.ItemBlockHp2:case i.EntityID.ItemBlockHp3:case i.EntityID.ItemBlockHp4:case i.EntityID.ItemBlockHp5:case i.EntityID.ItemBlockHp6:r=e-i.EntityID.ItemBlockHp1+1;o=C.default.create(t,r);break;case i.EntityID.ItemMagicCrystal:o=g.default.create(t);break;case i.EntityID.ItemMowerUp:case i.EntityID.ItemMowerRight:case i.EntityID.ItemMowerDown:case i.EntityID.ItemMowerLeft:var a=e-i.EntityID.ItemMowerUp+M.ItemMowerDirection.Up;o=M.default.create(t,a);break;case i.EntityID.ItemBone:o=P.default.create(t);break;case i.EntityID.ItemChestnut:o=T.default.create(t);break;case i.EntityID.ItemPuppy:o=I.default.create(t);break;case i.EntityID.ItemDogHouse:o=_.default.create(t);break;case i.EntityID.ItemBalloon:o=d.default.create(t);break;case i.EntityID.ItemHoneyComb:o=F.default.create(t);break;case i.EntityID.ItemJamBottle:o=E.default.create(t);break;case i.EntityID.ItemWatermelon:o=D.default.create(t);break;case i.EntityID.ItemFruitCake:o=B.default.create(t);break;case i.EntityID.ItemFireWormBottle:o=b.default.create(t);break;case i.EntityID.ItemFireworksHp1:case i.EntityID.ItemFireworksHp2:case i.EntityID.ItemFireworksHp3:case i.EntityID.ItemFireworksHp4:r=e-i.EntityID.ItemFireworksHp1+1;o=G.default.create(t,r);break;case i.EntityID.ItemStatueHp1:case i.EntityID.ItemStatueHp2:case i.EntityID.ItemStatueHp3:r=e-i.EntityID.ItemStatueHp1+1;o=S.default.create(t,r)}return o||(o=this.generateNormalRandomItem(t)),o},t.generateNormalRandomItem=function(e){var o=e.getDropEntityMap(),n={},i=r.default.getInstance().getEntityIDsFromEntityGroupID(R.EntityGroupID.ItemNormal),a=r.default.getInstance().getEntityIDsFromEntityGroupID(R.EntityGroupID.ItemPaw);for(var s in o){var c=o[s],l=Number(s);-1==i.indexOf(l)&&-1==a.indexOf(l)||(n[l]=c)}var p=e.getRandomEntityID(n,e.getLimitedEntityMap(),e.getLimitedGroupMap(),!0);return t.generateItemWithEntityID(e,p)},t.generateRandomItemWithGroupIDs=function(e,o){for(var n=o.getDropEntityMap(),i={},a=0,s=e;a<s.length;a++)for(var c=s[a],l=0,p=r.default.getInstance().getEntityIDsFromEntityGroupID(c);l<p.length;l++){var u=p[l],y=n[r.default.getInstance().getCorrespondingNormlaEntityID(u)];y&&(i[u]=y)}var h=o.getRandomEntityID(i,{},{});return t.generateItemWithEntityID(o,h)},t.generateItemWithKindID=function(e,o){var n=null;switch(o){case a.KindID.ItemNormalRandom:n=t.generateNormalRandomItem(e);break;case a.KindID.ItemBombButterflyRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemBombButterfly],e);break;case a.KindID.ItemBombRowRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemBombRow],e);break;case a.KindID.ItemBombColumnRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemBombColumn],e);break;case a.KindID.ItemBombCrossRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemBombCross],e);break;case a.KindID.ItemBombRangeRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemBombRange],e);break;case a.KindID.ItemPawRandom:n=t.generateRandomItemWithGroupIDs([R.EntityGroupID.ItemPaw],e);break;default:var i=r.default.getInstance().getEntityIDFromKindID(o);n=t.generateItemWithEntityID(e,i)}return n},t.generateGlobalRandomItem=function(t){var e=[i.EntityID.ItemNormalRed,i.EntityID.ItemNormalGreen,i.EntityID.ItemNormalBlue,i.EntityID.ItemNormalYellow,i.EntityID.ItemNormalOrange,i.EntityID.ItemNormalPurple,i.EntityID.ItemPawRed,i.EntityID.ItemPawGreen,i.EntityID.ItemPawBlue,i.EntityID.ItemPawYellow,i.EntityID.ItemPawOrange,i.EntityID.ItemPawPurple],o={},r=t.getDropEntityMap();for(var a in r){var s=r[a];-1!=n.default.indexOf(e,a)&&(o[a]=s)}var c=t.getRandomEntityID(e,t.getLimitedEntityMap(),t.getLimitedGroupMap());return this.generateItemWithEntityID(t,c)},t.generateEffectBombItem=function(t,e,o){var n=null;switch(e){case s.ItemBombType.Rainbow:n=u.default.create(t);break;case s.ItemBombType.Range:n=y.default.create(t,o);break;case s.ItemBombType.Cross:n=p.default.create(t,o);break;case s.ItemBombType.Row:n=h.default.create(t,o);break;case s.ItemBombType.Column:n=l.default.create(t,o);break;case s.ItemBombType.Butterfly:n=c.default.create(t,o)}return n},t.generateItemWithName=function(t,e){var o=r.default.getInstance().getEntityIDFromString(e);return this.generateItemWithEntityID(t,o)},t.isShuffleKindID=function(t){return t==a.KindID.ItemNormalRandom},t}();o.default=w,cc._RF.pop()},{"../../../../extend/utils/GameMath":"GameMath","../../defines/EntityGroupID":"EntityGroupID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../defines/KindID":"KindID","./color/ItemDogPaw":"ItemDogPaw","./color/ItemNormal":"ItemNormal","./color/bomb/ItemBombBase":"ItemBombBase","./color/bomb/ItemBombButterfly":"ItemBombButterfly","./color/bomb/ItemBombColumn":"ItemBombColumn","./color/bomb/ItemBombCross":"ItemBombCross","./color/bomb/ItemBombRainbow":"ItemBombRainbow","./color/bomb/ItemBombRange":"ItemBombRange","./color/bomb/ItemBombRow":"ItemBombRow","./special/ItemBalloon":"ItemBalloon","./special/ItemBlock":"ItemBlock","./special/ItemBone":"ItemBone","./special/ItemChestnut":"ItemChestnut","./special/ItemDogHouse":"ItemDogHouse","./special/ItemDoughnut":"ItemDoughnut","./special/ItemFireWormBottle":"ItemFireWormBottle","./special/ItemFireworks":"ItemFireworks","./special/ItemFruitCake":"ItemFruitCake","./special/ItemHoneyComb":"ItemHoneyComb","./special/ItemJamBottle":"ItemJamBottle","./special/ItemMagicCrystal":"ItemMagicCrystal","./special/ItemMower":"ItemMower","./special/ItemPuppy":"ItemPuppy","./special/ItemStatue":"ItemStatue","./special/ItemWatermelon":"ItemWatermelon"}],ItemFireWormBottle:[function(t,e,o){"use strict";cc._RF.push(e,"f00e9pvQiFFvbbI+SEWGvmW","ItemFireWormBottle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../defines/TMXConfigInfoKeys"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e._fireWorms=[],e}var o;return n(e,t),o=e,e.create=function(t){var e=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemFireWormBottle","ItemFireWormBottle");return e?(e.init(t),e):null},e.prototype.clone=function(){var t=o.create(this.getGrid());return t.setHealthPoint(this.getHealthPoint()),t},e.prototype.getCollectionID=function(){return a.CollectionID.FlyerFireWorm},e.prototype.getEntityID=function(){return s.EntityID.ItemFireWormBottle},e.prototype.getScore=function(){return 100},e.prototype.getButterflyPriority=function(e,o){return this.getGrid().isTargetCollectionID(a.CollectionID.FlyerFireWorm)?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e),e[c.default.CFG_FIREWORM_BOTTLE_MAX]&&(this._healthPoint=e[c.default.CFG_FIREWORM_BOTTLE_MAX]),this.setHealthPoint(this._healthPoint)},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.ItemFireWormBottle);for(var o=0;o<5;o++){var n="FireWorm"+o,i=this._puppet.getChildByName(n);i&&this._fireWorms.push(i)}},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate){e=this.getHealthPoint();for(var o=this.getHealthPoint();o>1;o--)this.onCollected();this.setHealthPoint(1)}if(this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){this.setVisible(!1),this.progressDeathWish(t),this.selfDestory();var n=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(n,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("firewormfly")),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("firewormbottle"))}else{this.onCollected(),this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt();n=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(n,this.getLogicalPos()),n.node.zIndex=this.getTopZOrder(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("firewormfly"))}},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet();for(var e=0;e<5;e++){var o=this._fireWorms[e];o&&(o.active=e<this._healthPoint)}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fireWorms=null},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemFireworks:[function(t,e,o){"use strict";cc._RF.push(e,"792aa/ckuFGjrU+HMjXGGwn","ItemFireworks");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../EntityPrefabNodePool"),l=t("../../../../../base/IGame"),p=t("../../../defines/IdentifierManager"),u=t("../../flyer/FlyerAnimation"),y=t("../../flyer/FlyerFireworksMissile"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=c.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemFireworks","ItemFireworks");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,r.ItemType.Fireworks),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.ItemFireworksHp1;break;case 2:t=s.EntityID.ItemFireworksHp2;break;case 3:t=s.EntityID.ItemFireworksHp3;break;case 4:t=s.EntityID.ItemFireworksHp4}return t},e.prototype.getCollectionID=function(){return a.CollectionID.ItemFireworks},e.prototype.getScore=function(){return 100},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){if(t.cleanType==s.EntityCleanType.Terminate&&this.setHealthPoint(1),this.getGrid().gainScoreWithEntity(this,1),this.getHealthPoint()<=1){this.progressDeathWish(t),this.setVisible(!1),this.selfDestory();for(var e=this.getGrid(),o=this.getGrid().isGrassFloorAtLogicalPos(this.getLogicalPos()),n=0;n<3;n++){var i=y.default.create(e,o);e.setFlyerAtLogicalPos(i,this.getLogicalPos())}}else{this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt(),l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("eliminate_0"));var r=u.default.createAnimationWithType(this.getGrid(),u.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(r,this.getLogicalPos()),r.node.zIndex=this.getTopZOrder()}},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../../flyer/FlyerFireworksMissile":"FlyerFireworksMissile","../ItemBase":"ItemBase"}],ItemFruitCake:[function(t,e,o){"use strict";cc._RF.push(e,"f4023mj+QFHWa40hreFYCNC","ItemFruitCake");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../../../extend/utils/GameMath"),l=t("../../../../../base/Pair"),p=t("../../flyer/FlyerNuclear"),u=t("../../../defines/IdentifierManager"),y=t("../../../../../base/IGame"),h=t("../../EntityPrefabNodePool"),m=t("../../EntityBase"),f=cc._decorator,d=f.ccclass,_=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pieces=[],e}return n(e,t),e.create=function(t){var e=h.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemFruitCake","ItemFruitCake");return e?(e.init(t),e):null},e.prototype.getCollectionID=function(){return a.CollectionID.ItemFruitCake},e.prototype.getEntityID=function(){return s.EntityID.ItemFruitCake},e.prototype.getScore=function(){return 200},e.prototype.getButterflyPriority=function(e,o){for(var n=!1,i=0,r=this._pieces;i<r.length;i++){if(r[i].first==e){n=!0;break}}return n?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.FruitCake,2,2),this._pieces.length=0;for(var o=e.getAvailableColors(),n=o.length,i=0,a=0,s=o;a<s.length;a++){var c=s[a],p=this.createPiece(n,c);if(p){p.setAnchorPoint(cc.v2(.5,.5)),this._puppet.addChild(p);var u=360/n;p.angle=-(u*i-90),i++;var y=new l.Pair(c,p);this._pieces.push(y)}}},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._canImmuneDamageAfterHurt=function(){return!1},e.prototype._onClean=function(t){var e=this,o=c.default.indexOf(this._pieces,t,0,function(e){return e.first==t.cleanColor});if(-1!=o){if(this.getGrid().gainScoreWithEntity(this),this._pieces.length<=1){this.progressDeathWish(t),this.removeFromGridAndAddToEffect(),this.getGrid().addObstructs(this);var n=cc.sequence(cc.scaleTo(.25,1.2).easing(cc.easeInOut(2)),cc.scaleTo(.25,1).easing(cc.easeInOut(2)),cc.delayTime(.25),cc.callFunc(function(){for(var t=e.getOccupyArea(),o=!1,n=0;n<t.size.height;n++){for(var i=0;i<t.size.width;i++)if(e.getGrid().isGrassFloorAtLogicalPos(t.origin.add(cc.v2(i,n)))){o=!0;break}if(o)break}var r=p.default.create(e.getGrid(),o,e.getLogicalPos());e.getGrid().setFlyerAtLogicalPos(r,e.getLogicalPos()),r.node.setPosition(e.node.getPosition()),r.launch(),y.default.playAudio(u.default.getInstance().getMatchAudioFilePath("fruitCake")),e.selfDestory()}));this.runAction(n)}else this.selfHurt();var i=this._pieces[o].second,r=cc.sequence(cc.fadeOut(.33).easing(cc.easeOut(2)),cc.callFunc(function(){i.removeFromParent()}));i.runAction(r),this._pieces.splice(o,1)}},e.prototype.createPiece=function(t,e){var o=new cc.Node,n=u.default.getInstance().getFrameNameFromEntityID(s.EntityID.ItemFruitCake);if(""!=n){n=n+"_"+t+"_"+(e+1);var i=o.addComponent(cc.Sprite);i.sizeMode=cc.Sprite.SizeMode.RAW,i.trim=!1,i.spriteFrame=m.default.getEntitySpriteFarme(n)}return o},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._pieces=null},e=i([d],e)}(r.default));o.default=_,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../../../base/Pair":"Pair","../../../../../extend/utils/GameMath":"GameMath","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityBase":"EntityBase","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerNuclear":"FlyerNuclear","../ItemBase":"ItemBase"}],ItemHoneyComb:[function(t,e,o){"use strict";cc._RF.push(e,"176abjJ4blNpqUOYFV9f9iG","ItemHoneyComb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/EntityID"),s=t("../../../defines/CollectionID"),c=t("../../../../../extend/utils/GameMath"),l=t("../../../defines/TMXConfigInfoKeys"),p=t("../../../defines/IdentifierManager"),u=t("../../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spreadHoneyIDs=[],e}var o;return n(e,t),o=e,e.create=function(t){var e=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemHoneyComb","ItemHoneyComb");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.HoneyComb),this._spreadHoneyIDs.length=0},e.prototype.getSpreadHoneyHp=function(){var t=1;if(this._spreadHoneyIDs.length>0){var e=c.default.randomInt(0,this._spreadHoneyIDs.length-1);t=this._spreadHoneyIDs[e]-a.EntityID.ParasiteHoneyHp1+1}return t},e.prototype.getEntityID=function(){return a.EntityID.ItemHoneyComb},e.prototype.getCollectionID=function(){return s.CollectionID.ItemHoneyComb},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e);var o=e[l.default.CFG_HONEY_COMB_OUTPUT];if(o)for(var n=0,i=o.split("|");n<i.length;n++){var r=i[n],s=p.default.getInstance().getEntityIDFromString(r);s!=a.EntityID.ParasiteHoneyHp1&&s!=a.EntityID.ParasiteHoneyHp2||this._spreadHoneyIDs.push(s)}},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canCleanByNeighbour=function(t){return!1},e.prototype._converUnderForever=function(){return!0},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._spreadHoneyIDs=null},e=o=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityPrefabNodePool":"EntityPrefabNodePool","../ItemBase":"ItemBase"}],ItemInfoManager:[function(t,e,o){"use strict";cc._RF.push(e,"174cenp7wxAvJakfI76jy0d","ItemInfoManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../define/GameCurrencyType"),i=t("./ItemInfo"),r=t("../../../define/GameConfig"),a=function(){function t(){this.ItemID_To_FrameName_Map={},this.Name_To_ItemID_Map={},this.initItemID_To_FrameName_Map(),this.initName_To_ItemID_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initItemID_To_FrameName_Map=function(){this.ItemID_To_FrameName_Map[n.GameCurrencyType.DiamondCoin]=i.default.create("diamondcoin","itemName_1","itemDepict_1",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.StarCoin]=i.default.create("starcoin","itemName_2","itemDepict_2",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.GoldCoin]=i.default.create("goldcoin","itemName_3","itemDepict_3",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LifeHeart]=i.default.create("lifeheart","itemName_4","itemDepict_4",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.ExtraStep1]=i.default.create("jiabu_1","itemName_10011","itemDepict_10011",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.ExtraStep2]=i.default.create("jiabu_2","itemName_10013","itemDepict_10013",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.ExtraStep3]=i.default.create("jiabu_3","itemName_10012","itemDepict_10012",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.ExtraStep5]=i.default.create("jiabu_5","itemName_10010","itemDepict_10010",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.BeginLine]=i.default.create("beginline","itemName_10020","itemDepict_10020",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.BeginRange]=i.default.create("beginrange","itemName_10030","itemDepict_10030",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.BeginRainbow]=i.default.create("beginrainbow","itemName_10040","itemDepict_10040",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.AidHammer]=i.default.create("aidhammer","itemName_10050","itemDepict_10050",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.AidBomb]=i.default.create("aidbomb","itemName_10060","itemDepict_10060",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.AidSwap]=i.default.create("aidswap","itemName_10070","itemDepict_10070",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedAidHammer]=i.default.create("aidhammer","itemName_10051","itemDepict_10051",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedAidBomb]=i.default.create("aidbomb","itemName_10061","itemDepict_10061",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedAidSwap]=i.default.create("aidswap","itemName_10071","itemDepict_10071",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LifeAddOnePoint]=i.default.create("lifeaddonepoint","itemName_10080","itemDepict_10080",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LifeEverOneHour]=i.default.create("lifeeveronehour","itemName_10090","itemDepict_10090",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LifeEverTwoHour]=i.default.create("lifeevertwohour","itemName_10100","itemDepict_10100",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TrainFood]=i.default.create("food","itemName_10110","itemDepict_10110",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TrainSoap]=i.default.create("soap","itemName_10120","itemDepict_10120",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TrainEyepatch]=i.default.create("eyepatch","itemName_10130","itemDepict_10130",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TrainHoe]=i.default.create("hoe","itemName_10140","itemDepict_10140",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.VirtualCoin]=i.default.create("virtualcoin","LocalizationItemVirtualCoinName","LocalizationItemVirtualCoinDetail",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.InfiniteBeginLine]=i.default.create("beginline","itemName_10022","itemDepict_10022",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.InfiniteBeginRange]=i.default.create("beginrange","itemName_10032","itemDepict_10032",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.InfiniteBeginRainbow]=i.default.create("beginrainbow","itemName_10042","itemDepict_10042",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedBeginLine]=i.default.create("beginline","itemName_10021","itemDepict_10021",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedBeginRange]=i.default.create("beginrange","itemName_10031","itemDepict_10031",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.TimeLimitedBeginRainbow]=i.default.create("beginrainbow","itemName_10041","itemDepict_10041",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.OneRoundBeginLine]=i.default.create("beginline","itemName_10023","itemDepict_10023",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.OneRoundBeginRange]=i.default.create("beginrange","itemName_10033","itemDepict_10033",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.OneRoundBeginRainbow]=i.default.create("beginrainbow","itemName_10043","itemDepict_10043",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.AddSpeed]=i.default.create("speed","itemName_10150","itemDepict_10150",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelRow]=i.default.create("hline","itemName_13020","itemDepict_13020",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelColumn]=i.default.create("vline","itemName_13030","itemDepict_13030",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelCross]=i.default.create("cross","itemName_13040","itemDepict_13040",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelRange]=i.default.create("range","itemName_13050","itemDepict_13050",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Row]=i.default.create("hline_missile","itemName_13060","itemDepict_13060",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Column]=i.default.create("vline_missile","itemName_13070","itemDepict_13070",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Cross]=i.default.create("cross_missile","itemName_13080","itemDepict_13080",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Range]=i.default.create("range_missile","itemName_13090","itemDepict_13090",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelRow_Cross]=i.default.create("item_13100","itemName_13100","itemDepict_13100",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelColumn_Cross]=i.default.create("item_13110","itemName_13110","itemDepict_13110",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelRow_Range]=i.default.create("item_13120","itemName_13120","itemDepict_13120",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelColumn_Range]=i.default.create("item_13130","itemName_13130","itemDepict_13130",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Row_Column]=i.default.create("item_13140","itemName_13140","itemDepict_13140",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Rainbow]=i.default.create("item_13150","itemName_13150","itemDepict_13150",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Row_Cross]=i.default.create("item_13160","itemName_13160","itemDepict_13160",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.LuckyWheelMissile_Column_Range]=i.default.create("item_13170","itemName_13170","itemDepict_13170",!1),this.ItemID_To_FrameName_Map[n.GameCurrencyType.PetKeJi]=i.default.create("kejiquan","itemName_20010","itemDepict_20010",!1)},t.prototype.initName_To_ItemID_Map=function(){this.Name_To_ItemID_Map[1]=n.GameCurrencyType.DiamondCoin,this.Name_To_ItemID_Map[2]=n.GameCurrencyType.StarCoin,this.Name_To_ItemID_Map[3]=n.GameCurrencyType.GoldCoin,this.Name_To_ItemID_Map[4]=n.GameCurrencyType.LifeHeart,this.Name_To_ItemID_Map[5]=n.GameCurrencyType.VirtualCoin,this.Name_To_ItemID_Map[7]=n.GameCurrencyType.RedPacket,this.Name_To_ItemID_Map[10010]=n.GameCurrencyType.ExtraStep5,this.Name_To_ItemID_Map[10011]=n.GameCurrencyType.ExtraStep1,this.Name_To_ItemID_Map[10012]=n.GameCurrencyType.ExtraStep3,this.Name_To_ItemID_Map[10013]=n.GameCurrencyType.ExtraStep2,this.Name_To_ItemID_Map[10020]=n.GameCurrencyType.BeginLine,this.Name_To_ItemID_Map[10030]=n.GameCurrencyType.BeginRange,this.Name_To_ItemID_Map[10040]=n.GameCurrencyType.BeginRainbow,this.Name_To_ItemID_Map[10021]=n.GameCurrencyType.TimeLimitedBeginLine,this.Name_To_ItemID_Map[10031]=n.GameCurrencyType.TimeLimitedBeginRange,this.Name_To_ItemID_Map[10041]=n.GameCurrencyType.TimeLimitedBeginRainbow,this.Name_To_ItemID_Map[10022]=n.GameCurrencyType.InfiniteBeginLine,this.Name_To_ItemID_Map[10032]=n.GameCurrencyType.InfiniteBeginRange,this.Name_To_ItemID_Map[10042]=n.GameCurrencyType.InfiniteBeginRainbow,this.Name_To_ItemID_Map[10023]=n.GameCurrencyType.OneRoundBeginLine,this.Name_To_ItemID_Map[10033]=n.GameCurrencyType.OneRoundBeginRange,this.Name_To_ItemID_Map[10043]=n.GameCurrencyType.OneRoundBeginRainbow,this.Name_To_ItemID_Map[13020]=n.GameCurrencyType.LuckyWheelRow,this.Name_To_ItemID_Map[13030]=n.GameCurrencyType.LuckyWheelColumn,this.Name_To_ItemID_Map[13040]=n.GameCurrencyType.LuckyWheelCross,this.Name_To_ItemID_Map[13050]=n.GameCurrencyType.LuckyWheelRange,this.Name_To_ItemID_Map[13060]=n.GameCurrencyType.LuckyWheelMissile_Row,this.Name_To_ItemID_Map[13070]=n.GameCurrencyType.LuckyWheelMissile_Column,this.Name_To_ItemID_Map[13080]=n.GameCurrencyType.LuckyWheelMissile_Cross,this.Name_To_ItemID_Map[13090]=n.GameCurrencyType.LuckyWheelMissile_Range,this.Name_To_ItemID_Map[13100]=n.GameCurrencyType.LuckyWheelRow_Cross,this.Name_To_ItemID_Map[13110]=n.GameCurrencyType.LuckyWheelColumn_Cross,this.Name_To_ItemID_Map[13120]=n.GameCurrencyType.LuckyWheelRow_Range,this.Name_To_ItemID_Map[13130]=n.GameCurrencyType.LuckyWheelColumn_Range,this.Name_To_ItemID_Map[13140]=n.GameCurrencyType.LuckyWheelMissile_Row_Column,this.Name_To_ItemID_Map[13150]=n.GameCurrencyType.LuckyWheelMissile_Rainbow,this.Name_To_ItemID_Map[13160]=n.GameCurrencyType.LuckyWheelMissile_Row_Cross,this.Name_To_ItemID_Map[13170]=n.GameCurrencyType.LuckyWheelMissile_Column_Range,this.Name_To_ItemID_Map[10050]=n.GameCurrencyType.AidHammer,this.Name_To_ItemID_Map[10060]=n.GameCurrencyType.AidBomb,this.Name_To_ItemID_Map[10070]=n.GameCurrencyType.AidSwap,this.Name_To_ItemID_Map[10051]=n.GameCurrencyType.TimeLimitedAidHammer,this.Name_To_ItemID_Map[10061]=n.GameCurrencyType.TimeLimitedAidBomb,this.Name_To_ItemID_Map[10071]=n.GameCurrencyType.TimeLimitedAidSwap,this.Name_To_ItemID_Map[10080]=n.GameCurrencyType.LifeAddOnePoint,this.Name_To_ItemID_Map[10090]=n.GameCurrencyType.LifeEverOneHour,this.Name_To_ItemID_Map[10100]=n.GameCurrencyType.LifeEverTwoHour,this.Name_To_ItemID_Map[10110]=n.GameCurrencyType.TrainFood,this.Name_To_ItemID_Map[10120]=n.GameCurrencyType.TrainSoap,this.Name_To_ItemID_Map[10130]=n.GameCurrencyType.TrainEyepatch,this.Name_To_ItemID_Map[10140]=n.GameCurrencyType.TrainHoe,this.Name_To_ItemID_Map[10150]=n.GameCurrencyType.AddSpeed,this.Name_To_ItemID_Map[20010]=n.GameCurrencyType.PetKeJi},t.prototype.getItemIDFromName=function(t){var e=this.Name_To_ItemID_Map[t];return e||n.GameCurrencyType.NoneType},t.prototype.getItemInfoFromItemID=function(t){var e=this.ItemID_To_FrameName_Map[t];return e?(10140==t&&(r.default.DigRedPacket||(e.description="itemDepict_10140_fix")),i.default.create("texture/icons/item/"+e.frameName,e.localization,e.description,e.isUnlimited,e.scaleX,e.scaleY)):null},t.prototype.getUnlimitedItemIDs=function(){return[n.GameCurrencyType.InfiniteBeginLine,n.GameCurrencyType.InfiniteBeginRange,n.GameCurrencyType.InfiniteBeginRainbow]},t.instance=null,t}();o.default=a,cc._RF.pop()},{"../../../define/GameConfig":"GameConfig","../../../define/GameCurrencyType":"GameCurrencyType","./ItemInfo":"ItemInfo"}],ItemInfo:[function(t,e,o){"use strict";cc._RF.push(e,"5ab1cWG0j5HLoCs5zofJ7wL","ItemInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o,n,i,r){this.frameName="",this.localization="",this.description="",this.isUnlimited=!1,this.scaleX=1,this.scaleY=1,this.frameName=t,this.localization=e,this.description=o,this.isUnlimited=n,this.scaleX=i,this.scaleY=r}return t.create=function(e,o,n,i,r,a){return void 0===e&&(e=""),void 0===o&&(o=""),void 0===n&&(n=""),void 0===i&&(i=!1),void 0===r&&(r=1),void 0===a&&(a=1),new t(e,o,n,i,r,a)},t}();o.default=n,cc._RF.pop()},{}],ItemJamBottle:[function(t,e,o){"use strict";cc._RF.push(e,"b30a0z30BpGkacmuYcBU4TX","ItemJamBottle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../rug/RugJam"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemJamBottle","ItemJamBottle");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return a.CollectionID.ItemJamBottle},e.prototype.getEntityID=function(){return s.EntityID.ItemJamBottle},e.prototype.getScore=function(){return 200},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.JamBottle)},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){this.getGrid().gainScoreWithEntity(this),this.setVisible(!1),this.progressDeathWish(t),this.selfDestory(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("jambottle"));var e=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(e,this.getLogicalPos());for(var o=0,n=[cc.v2(-1,-1),cc.v2(0,-1),cc.v2(1,-1),cc.v2(-1,0),cc.v2(0,0),cc.v2(1,0),cc.v2(-1,1),cc.v2(0,1),cc.v2(1,1)];o<n.length;o++){var i=n[o],r=this.getLogicalPos().add(i),a=this.getGrid().getCellAtLogicalPos(r);if(a&&a.canHoldItem()){var s=this.getGrid().getItemAtLogicalPos(r);if(s&&s.coverUnderForever())continue;if(!this.getGrid().getRugAtLogicalPos(r)){var y=c.default.create(this.getGrid());y.setImmuneDamage(!0),y.grow(),this.getGrid().setRugAtLogicalPos(y,r)}}}},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../../rug/RugJam":"RugJam","../ItemBase":"ItemBase"}],ItemMagicCrystal:[function(t,e,o){"use strict";cc._RF.push(e,"219b0PWNThCCLcOH34ZzKxt","ItemMagicCrystal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../defines/CollectionID"),a=t("../../../defines/EntityID"),s=t("../../../defines/IdentifierManager"),c=t("../../../defines/TMXConfigInfoKeys"),l=t("../ItemBase"),p=t("../../EntityPrefabNodePool"),u=t("../../EntityBase"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curAttackCount=0,e._attrOutput="",e._attrNum=1,e._attrMax=1,e._attrStatus=0,e._itemNode=null,e}var o;return n(e,t),o=e,e.create=function(t){var e=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemMagicCrystal","ItemMagicCrystal");return e?(e.init(t),e):null},e.prototype.clone=function(){var t=o.create(this.getGrid());return t.initMagicItemImg(this._attrOutput),t},e.prototype.init=function(e){t.prototype.initItem.call(this,e,l.ItemType.MagicCrystal),this._itemNode=this._puppet.getChildByName("item_sprite"),this._curAttackCount=0,this._attrOutput="",this._attrNum=1,this._attrMax=1,this._attrStatus=0},e.prototype.getAttrNum=function(){return this._attrNum},e.prototype.getEntityID=function(){return a.EntityID.ItemMagicCrystal},e.prototype.getCollectionID=function(){return r.CollectionID.ItemMagicCrystal},e.prototype.getScore=function(){return 50},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e),e[c.default.CFG_MATIC_CRYSTAL_OUTPUT]&&(this._attrOutput=e[c.default.CFG_MATIC_CRYSTAL_OUTPUT]),e[c.default.CFG_MATIC_CRYSTAL_NUM]&&(this._attrNum=Number(e[c.default.CFG_MATIC_CRYSTAL_NUM])),e[c.default.CFG_MATIC_CRYSTAL_MAX]&&(this._attrMax=Number(e[c.default.CFG_MATIC_CRYSTAL_MAX])-1),e[c.default.CFG_MATIC_CRYSTAL_STATUS]?(this._attrStatus=Number(e[c.default.CFG_MATIC_CRYSTAL_STATUS])-1,this._curAttackCount=this._attrStatus,this._curAttackCount>this._attrMax&&(this._curAttackCount=this._attrMax,this._attrStatus=this._curAttackCount)):this._curAttackCount=0,this.updateProgress(),this.initMagicItemImg(this._attrOutput)},e.prototype.getOutputEntityId=function(){var t=a.EntityID.None;if((t=s.default.getInstance().getEntityIDFromString(this._attrOutput))!=a.EntityID.None)return t;var e=s.default.getInstance().getEntityGroupIDFromString(this._attrOutput),o=s.default.getInstance().getEntityIDsFromEntityGroupID(e);if(o.length<=0)return t;for(var n={},i=this.getGrid().getDropEntityMap(),r=0;r<o.length;r++){var c=s.default.getInstance().getCorrespondingNormlaEntityID(o[r]);i[c]&&(n[o[r]]=i[c])}return t=this.getGrid().getRandomEntityID(n,{},{})},e.prototype.isCanOutput=function(){return!this.getGrid().hasShowCompleteBanner()&&(this._curAttackCount>=this._attrMax&&(this._curAttackCount=0,this.updateProgress(),!0))},e.prototype.initMagicItemImg=function(t){this._attrOutput=t;var e="",o=a.EntityID.None;if((o=s.default.getInstance().getEntityIDFromString(t))!=a.EntityID.None&&(e=s.default.getInstance().getFrameNameFromEntityID(o)),""==e){var n=s.default.getInstance().getEntityGroupIDFromString(t);e=s.default.getInstance().getFrameNameFromEntityGroupID(n)}if(""!=e&&this._itemNode){new cc.Node;this._itemNode.getComponent(cc.Sprite).spriteFrame=u.default.getEntitySpriteFarme(e)}},e.prototype.updateProgress=function(){var t=this._curAttackCount/this._attrMax;t>1&&(t=1),this._puppet.getChildByName("magic_crystal_bottom").scaleY=t},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._converUnderForever=function(){return!0},e.prototype._onClean=function(t){if(this._curAttackCount<this._attrMax){var e=1;t.cleanType==a.EntityCleanType.Terminate&&(e=this._attrMax-this._curAttackCount,this._curAttackCount=this._attrMax),this.getGrid().gainScoreWithEntity(this,e),this._curAttackCount+=1,this.updateProgress()}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._attrOutput=null,this._itemNode=null},e=o=i([h],e)}(l.default));o.default=m,cc._RF.pop()},{"../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityBase":"EntityBase","../../EntityPrefabNodePool":"EntityPrefabNodePool","../ItemBase":"ItemBase"}],ItemMower:[function(t,e,o){"use strict";cc._RF.push(e,"23978ZrCcRI4aIHHc8vV2gC","ItemMower");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemMowerDirection=void 0;var r,a=t("../../../../../component/UISpriteExt"),s=t("../../../defines/CollectionID"),c=t("../../../defines/EntityID"),l=t("../../../defines/IdentifierManager"),p=t("../../../defines/TMXConfigInfoKeys"),u=t("../../EntityPrefabNodePool"),y=t("../../flyer/FlyerMower"),h=t("../ItemBase");(function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"})(r=o.ItemMowerDirection||(o.ItemMowerDirection={}));var m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._direction=r.Up,e._targetIcon=null,e._targetFrame=null,e._targetLabel=null,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemMower","ItemMower");return o?(o.init(t,e),o):null},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,h.ItemType.Mower),this._targetIcon=this._puppet.getChildByName("targetIcon").getComponent(cc.Sprite),this._targetFrame=this._puppet.getChildByName("targetFrame"),this._targetLabel=this._targetFrame.getChildByName("targetAmountLabel").getComponent(cc.Label),this.setDirection(o),this.setChargeTargetAmount(0)},e.prototype.dealWithConfigMap=function(e){if(t.prototype.dealWithConfigMap.call(this,e),e[p.default.CFG_MOWER_CHARGE_TARGET]){var o=e[p.default.CFG_MOWER_CHARGE_TARGET],n=l.default.getInstance().getCollectionIDFromString(o);n!=s.CollectionID.None&&this.setChargeID(n);var i=e[p.default.CFG_MOWER_CHARGE_COUNT];i&&this.setChargeTargetAmount(Number(i));var r=e[p.default.CFG_MOWER_CHARGE_PRIORITY];r&&(this._chargePriority=r)}},e.prototype.setChargeID=function(e){t.prototype.setChargeID.call(this,e);var o=l.default.getInstance().getFrameNameFromCollectionID(this._chargetCollectionID),n=this._targetIcon.getComponent(a.default);n&&(n.src=o)},e.prototype.setChargeAmount=function(e){t.prototype.setChargeAmount.call(this,e),this.updateTargetAmount()},e.prototype.setChargeTargetAmount=function(e){t.prototype.setChargeTargetAmount.call(this,e),this.updateTargetAmount()},e.prototype.updateTargetAmount=function(){var t=Math.max(this._targetCount-this._chargeCount,0);this._targetLabel.string=t.toString()},e.prototype.getDirection=function(){return this._direction},e.prototype.setDirection=function(t){this._direction=t,this.updatePuppet();var e=o.targetFramePositions[this._direction];e&&this._targetFrame.setPosition(e)},e.prototype.clone=function(){return o.create(this.getGrid(),this.getDirection())},e.prototype.getCollectionID=function(){return s.CollectionID.ItemMower},e.prototype.getEntityID=function(){var t=c.EntityID.None;switch(this._direction){case r.Up:t=c.EntityID.ItemMowerUp;break;case r.Right:t=c.EntityID.ItemMowerRight;break;case r.Down:t=c.EntityID.ItemMowerDown;break;case r.Left:t=c.EntityID.ItemMowerLeft}return t},e.prototype.getScore=function(){return 50*this.getChargeTargetAmount()},e.prototype._onCharge=function(t){if(this.absorbWillChargeAmount(t.chargeID,t.chargeAmount),this.getChargeAmount()>=this.getChargeTargetAmount()){this.getGrid().gainScoreWithEntity(this),this.setVisible(!1),this.selfDestory();var e=this.getGrid().isGrassFloorAtLogicalPos(this.getLogicalPos()),o=y.FlyerMowerDirection.Up;switch(this._direction){case r.Up:o=y.FlyerMowerDirection.Up;break;case r.Right:o=y.FlyerMowerDirection.Right;break;case r.Down:o=y.FlyerMowerDirection.Down;break;case r.Left:o=y.FlyerMowerDirection.Left}var n=y.default.create(this.getGrid(),e,this.getLogicalPos(),o);this.getGrid().setFlyerAtLogicalPos(n,this.getLogicalPos())}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._targetIcon=null,this._targetFrame=null,this._targetLabel=null},e.targetFramePositions={0:cc.v2(20,-25),1:cc.v2(-25,-20),2:cc.v2(-20,25),3:cc.v2(25,20)},e=o=i([f],e)}(h.default));o.default=d,cc._RF.pop()},{"../../../../../component/UISpriteExt":"UISpriteExt","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerMower":"FlyerMower","../ItemBase":"ItemBase"}],ItemNormal:[function(t,e,o){"use strict";cc._RF.push(e,"11079pg8CtFUJUSSpSzn6AO","ItemNormal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../defines/CollectionID"),a=t("../../../defines/EntityID"),s=t("../ItemBase"),c=t("./bomb/ItemBombBase"),l=t("../ItemFactory"),p=t("../../flyer/FlyerAnimation"),u=t("../../../../../base/IGame"),y=t("../../../defines/PowerID"),h=t("../../../defines/IdentifierManager"),m=t("../../EntityPrefabNodePool"),f=cc._decorator,d=f.ccclass,_=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){var t=r.CollectionID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=r.CollectionID.ItemNormalRed;break;case a.EntityColor.Green:t=r.CollectionID.ItemNormalGreen;break;case a.EntityColor.Blue:t=r.CollectionID.ItemNormalBlue;break;case a.EntityColor.Yellow:t=r.CollectionID.ItemNormalYellow;break;case a.EntityColor.Orange:t=r.CollectionID.ItemNormalOrange;break;case a.EntityColor.Purple:t=r.CollectionID.ItemNormalPurple}return t},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getEntityColor()){case a.EntityColor.Red:t=a.EntityID.ItemNormalRed;break;case a.EntityColor.Green:t=a.EntityID.ItemNormalGreen;break;case a.EntityColor.Blue:t=a.EntityID.ItemNormalBlue;break;case a.EntityColor.Yellow:t=a.EntityID.ItemNormalYellow;break;case a.EntityColor.Orange:t=a.EntityID.ItemNormalOrange;break;case a.EntityColor.Purple:t=a.EntityID.ItemNormalPurple}return t},e.prototype.getScore=function(){return 30},e.prototype.getButterflyPriority=function(e,o){return this.getGrid().isTargetCollectionID(this.getCollectionID())?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype._canDrop=function(){return!0},e.prototype._canSwap=function(){return!0},e.prototype._canMatch=function(){return!0},e.prototype._canChange=function(){return!0},e.prototype._canShuffle=function(){return!0},e.prototype._canShuffleWhenCreate=function(){return!0},e.prototype._canTransformByMagicCrystal=function(){return!this.getGrid().isTargetCollectionID(this.getCollectionID())},e.prototype._canUpgradeByRainbow=function(){return!0},e.prototype._canChangeColor=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByMatch=function(){return!0},e.prototype._onClean=function(t){if(this.setVisible(!1),this.getGrid().gainScoreWithEntity(this),t.createBombType!=c.ItemBombType.None){this.removeFromGridAndAddToEffect(),this.getGrid().addObstructs(this),this.setVisible(!this.isTargetCollection()),this.progressDeathWish(t);var e=this.getPixelPos(t.cleanRoot),o=cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.getGrid().removeObstructs(this)},this));this.runAction(o);var n=cc.sequence(cc.spawn(cc.scaleTo(.3,0),cc.moveTo(.15,e)),cc.callFunc(function(){this.getGrid().removeObstructs(this),this.destoryWithRecycle(!0)},this));this.runAction(n)}else{if(this.selfDestory(!0),!this.isTargetCollection()){var i=p.default.createDieAnimation(this.getGrid(),this.getEntityID());if(this.getGrid().setFlyerAtLogicalPos(i,this.getLogicalPos()),t.cleanType==a.EntityCleanType.Match){var r="eliminate_0";switch(this.getGrid().getPowerAmount(y.PowerID.MatchCombo)){case 0:r="eliminate_0";break;case 1:r="eliminate_1";break;case 2:r="eliminate_2";break;case 3:r="eliminate_3";break;case 4:r="eliminate_4";break;case 5:r="eliminate_5";break;case 6:r="eliminate_6";break;case 7:r="eliminate_7";break;case 8:default:r="eliminate_8"}u.default.playAudio(h.default.getInstance().getMatchAudioFilePath(r))}}this.progressDeathWish(t)}},e.prototype._onChange=function(t){t.collectOld&&this.onCollected();var e=this.getGrid(),o=l.default.generateItemWithEntityID(e,t.targetID);o&&e.setEntity(o,this.getLogicalPos())},e.prototype.bounce=function(){var t=this.playAnimation("bounce");return u.default.playAudio(h.default.getInstance().getMatchAudioFilePath("fall_back")),t},e.create=function(t,e){var o=m.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemNormal","ItemNormal");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getEntityColor())},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,s.ItemType.Normal),this.setEntityColor(o)},e=o=i([d],e)}(s.default));o.default=_,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/PowerID":"PowerID","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase","../ItemFactory":"ItemFactory","./bomb/ItemBombBase":"ItemBombBase"}],ItemPuppy:[function(t,e,o){"use strict";cc._RF.push(e,"a1e16XIHylLv77yRAwEmds6","ItemPuppy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PuppyDirection=void 0;var r,a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../grid/GridBase"),l=t("../ItemBase"),p=t("../../EntityPrefabNodePool");(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Front=3]="Front",t[t.Back=4]="Back"})(r=o.PuppyDirection||(o.PuppyDirection={}));var u=cc._decorator,y=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemPuppy","ItemPuppy");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getTopZOrder=function(){return c.default.ZORDER_PUPPY_TOP},e.prototype.getBottomZOrder=function(){return c.default.ZORDER_PUPPY_BOTTOM},e.prototype.getCollectionID=function(){return a.CollectionID.ItemPuppy},e.prototype.getEntityID=function(){return s.EntityID.ItemPuppy},e.prototype.setLogicalPos=function(e){t.prototype.setLogicalPos.call(this,e),this.node.zIndex=c.default.ZORDER_PUPPY_BOTTOM},e.prototype.onCollected=function(){this.getGrid().isTargetCollectionID(this.getCollectionID())&&this.getGrid().updateTargetBarUIWithDelta(this.getCollectionID(),-1),this.getGrid().collectEntity(this)},e.prototype.init=function(e){t.prototype.initItem.call(this,e,l.ItemType.Puppy)},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype.stay=function(){this.playAnimation("item_puppy_idle")},e.prototype.attack=function(t){var e="item_puppy_idle";switch(t){case r.Left:e="item_puppy_attack_left";break;case r.Right:e="item_puppy_attack_right";break;case r.Front:e="item_puppy_attack_front";break;case r.Back:e="item_puppy_attack_back"}this.playAnimation(e)},e.prototype.move=function(t){var e="item_puppy_idle";switch(t){case r.Left:e="item_puppy_move_left";break;case r.Right:e="item_puppy_move_right";break;case r.Front:e="item_puppy_move_front";break;case r.Back:e="item_puppy_move_back"}this.getCurrentAnimationClipName()!=e&&this.playAnimation(e)},e.prototype.fly=function(){this.playAnimation("item_puppy_fly")},e.prototype.win=function(){this.playAnimation("item_puppy_win")},e=o=i([y],e)}(l.default));o.default=h,cc._RF.pop()},{"../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../grid/GridBase":"GridBase","../../EntityPrefabNodePool":"EntityPrefabNodePool","../ItemBase":"ItemBase"}],ItemStateChangeColor:[function(t,e,o){"use strict";cc._RF.push(e,"7b10aJceXBGJLeWyUC2Azxu","ItemStateChangeColor");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../state/EntityStateBase"),r=t("../../state/concreteState/EntityStateWait"),a=function(t){function e(e){var o=t.call(this,i.EntityStateType.ChangeColor)||this;return o._targetColor=null,o._targetColor=e,o}return n(e,t),e.create=function(t){return new e(t)},e.prototype.enter=function(t){var e=this,o=t.getGrid();o.addObstructs(t);var n=cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){t.setEntityColor(e._targetColor)}),cc.fadeIn(.1)),i=cc.callFunc(function(){t.setCurrentState(r.default.create()),o.removeObstructs(t)});t.runAction(cc.sequence(n,i))},e.prototype.update=function(t,e){},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e}(i.default);o.default=a,cc._RF.pop()},{"../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStateDrop:[function(t,e,o){"use strict";cc._RF.push(e,"6c45dwvw1lL37MFT1zv0lWt","ItemStateDrop");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../extend/utils/GameMath"),r=t("../../../defines/EntityID"),a=t("../../state/concreteState/EntityStateWait"),s=t("../../state/EntityStateBase"),c=function(t){function e(){var e=t.call(this,s.EntityStateType.Drop)||this;return e._pathIndex=0,e._pathCount=0,e._timeDelta=0,e._stepDuraton=0,e}return n(e,t),e.create=function(){return new e},e.prototype.initDropPath=function(t){var o=t.getGrid(),n=t.getPath();if(n.length<2)return t.setCurrentState(a.default.create()),void t.clearPath();for(var i=n.length-1;i>=0&&n[i].type==r.EntityDropStepType.Stay;i--);if(i<0)return t.setCurrentState(a.default.create()),void t.clearPath();o.addObstructs(t);var s=n[0];t.setPixelPos(s.logicalPos),t.setVisible(s.type!=r.EntityDropStepType.Hide),this._pathCount=i+1,this._pathIndex=1,this._timeDelta=0,this._stepDuraton=e.MAX_DROP_DRUATION},e.prototype.updatePath=function(t,o){for(this._timeDelta+=o;;){var n=!1;if(this._pathIndex>=this._pathCount){t.bounce(),t.getGrid().removeObstructs(t),t.clearPath(),t.setCurrentState(a.default.create());break}var s=t.getPath(),c=s[this._pathIndex];switch(c.type){case r.EntityDropStepType.Hide:t.setVisible(!1),this._timeDelta>=e.MAX_DROP_DRUATION&&(this._timeDelta-=e.MAX_DROP_DRUATION,this._pathIndex+=1,n=!0,this._stepDuraton=e.MAX_DROP_DRUATION);break;case r.EntityDropStepType.Born:t.setVisible(!0);var l=t.getPixelPos(c.logicalPos).add(cc.v2(0,.5*t.getContentSize().height)),p=cc.v2(0,.5*-t.getContentSize().height),u=0,y=1,h=Math.min(this._timeDelta/e.MAX_DROP_DRUATION,1);t.node.setPosition(l.add(p.mul(h))),t.node.setScale(u+y*h),this._timeDelta>=e.MAX_DROP_DRUATION&&(this._timeDelta-=e.MAX_DROP_DRUATION,this._pathIndex+=1,n=!0,this._stepDuraton=e.MAX_DROP_DRUATION);break;case r.EntityDropStepType.Stay:t.setVisible(!0),this._timeDelta>=e.MAX_DROP_DRUATION&&(this._timeDelta-=e.MAX_DROP_DRUATION,this._pathIndex+=1,n=!0,this._stepDuraton=e.MAX_DROP_DRUATION);break;case r.EntityDropStepType.Drop:l=t.getPixelPos(s[this._pathIndex-1].logicalPos),p=t.getPixelPos(c.logicalPos).sub(l),h=Math.min(this._timeDelta/this._stepDuraton,1);if(t.node.setPosition(l.add(p.mul(h))),this._timeDelta>=this._stepDuraton){this._timeDelta-=this._stepDuraton,this._pathIndex+=1,n=!0;var m=this._stepDuraton*e.DROP_DRUATION_DECAY_FACTOR;this._stepDuraton=i.default.clamp(m,e.MIN_DROP_DRUATION,e.MAX_DROP_DRUATION)}break;case r.EntityDropStepType.Wormhole:if((h=Math.min(this._timeDelta/this._stepDuraton,1))<=.5){h/=.5;l=t.getPixelPos(s[this._pathIndex-1].logicalPos),p=cc.v2(0,.5*-t.getContentSize().height),u=1,y=-1;t.node.setPosition(l.add(p.mul(h))),t.node.setScale(u+y*h)}else{h=Math.min((h-.5)/.5,1);l=t.getPixelPos(c.logicalPos).add(cc.v2(0,.5*t.getContentSize().height)),p=cc.v2(0,.5*-t.getContentSize().height),u=0,y=1;t.node.setPosition(l.add(p.mul(h))),t.node.setScale(u+y*h)}if(this._timeDelta>=e.MAX_DROP_DRUATION){this._timeDelta-=e.MAX_DROP_DRUATION,this._pathIndex+=1,n=!0;m=this._stepDuraton*e.DROP_DRUATION_DECAY_FACTOR;this._stepDuraton=i.default.clamp(m,e.MIN_DROP_DRUATION,e.MAX_DROP_DRUATION)}}if(0==n)break}},e.prototype.enter=function(t){this.initDropPath(t)},e.prototype.update=function(t,e){this.updatePath(t,e*cc.director.getScheduler().getTimeScale())},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e.MAX_DROP_DRUATION=.125,e.MIN_DROP_DRUATION=.065,e.DROP_DRUATION_DECAY_FACTOR=.9,e}(s.default);o.default=c,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../defines/EntityID":"EntityID","../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStateGenerate:[function(t,e,o){"use strict";cc._RF.push(e,"16874H13NpAF5/Q8wK/wJJ8","ItemStateGenerate");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../state/EntityStateBase"),r=t("../../state/concreteState/EntityStateWait"),a=t("../../../event/EntityEventChanged"),s=t("../../../grid/GridBase"),c=t("../../flyer/FlyerAnimation"),l=function(t){function e(e){var o=t.call(this,i.EntityStateType.Generate)||this;return o._targetPos=cc.Vec2.ZERO,o._targetPos=e,o}return n(e,t),e.create=function(t){return new e(t)},e.prototype.enter=function(t){var e=this,o=t.getGrid(),n=t.getPixelPos(this._targetPos);t.node.setPosition(n),t.node.setScale(0),o.addObstructs(t),t.node.zIndex=t.getTopZOrder();var i=c.default.createAnimationWithType(t.getGrid(),c.FlyerAnimationType.CommonHurt);o.setFlyerAtLogicalPos(i,this._targetPos),i.node.zIndex=t.getBottomZOrder()-499;var l=cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(function(){o.setEntity(t,e._targetPos),t.setCurrentState(r.default.create());var n=a.default.create(t);t.node.dispatchEvent(n),t.getGrid().removeObstructs(t),t.node.zIndex=s.default.ZORDER_ITEM_BOTTOM}));t.runAction(l)},e.prototype.update=function(t,e){},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e}(i.default);o.default=l,cc._RF.pop()},{"../../../event/EntityEventChanged":"EntityEventChanged","../../../grid/GridBase":"GridBase","../../flyer/FlyerAnimation":"FlyerAnimation","../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStateReplace:[function(t,e,o){"use strict";cc._RF.push(e,"2082eUUHYBNbKoESdV5X70m","ItemStateReplace");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../state/EntityStateBase"),r=t("../../state/concreteState/EntityStateWait"),a=t("../../../../../extend/action/CurveToAction"),s=t("../../../grid/GridBase"),c=function(t){function e(e,o,n,r){var a=t.call(this,i.EntityStateType.Replace)||this;return a._delayTime=0,a._targetPos=null,a._gainScore=0,a._supplys={},a._targetPos=e,a._delayTime=o,a._gainScore=n,a._supplys=r,a}return n(e,t),e.create=function(t,o,n,i){return void 0===o&&(o=0),void 0===n&&(n=0),void 0===i&&(i={}),new e(t,o,n,i)},e.prototype.enter=function(t){var e=this,o=t.getGrid(),n=t.getPixelPos(this._targetPos);o.addObstructs(t),t.node.zIndex=s.default.ZORDER_EFFECT,t.shiftToEffectLayer();var i=[];this._delayTime>0&&i.push(cc.delayTime(this._delayTime));i.push(a.default.create(1,t.node.getPosition(),n));var c=cc.callFunc(function(){for(var t in e._gainScore>0&&o.gainScoreWithPixelPos(e._gainScore,n,!0),e._supplys){var i=Number(t),r=e._supplys[t];o.gainCollectedSupply(i,r)}});i.push(c);var l=cc.callFunc(function(){o.setEntity(t,e._targetPos),t.setCurrentState(r.default.create()),o.removeObstructs(t)});i.push(l),t.runAction(cc.sequence(i))},e.prototype.update=function(t,e){},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e}(i.default);o.default=c,cc._RF.pop()},{"../../../../../extend/action/CurveToAction":"CurveToAction","../../../grid/GridBase":"GridBase","../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStateShuffle:[function(t,e,o){"use strict";cc._RF.push(e,"973eb3MzOJJk5v6obDm82Al","ItemStateShuffle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../state/EntityStateBase"),r=t("../../../../../extend/utils/GameMath"),a=t("../../state/concreteState/EntityStateWait"),s=t("../../../grid/GridBase"),c=function(t){function e(o,n,a){var s=t.call(this,i.EntityStateType.Shuffle)||this;return s._fromPos=r.default.INVALID_LOGICAL_POSITION.clone(),s._toPos=r.default.INVALID_LOGICAL_POSITION.clone(),s._duration=e.SHUFFLE_DRUATION,s._fromPos=o,s._toPos=n,s._duration=a,s}return n(e,t),e.create=function(t,o,n){return void 0===n&&(n=e.SHUFFLE_DRUATION),new e(t,o,n)},e.prototype.enter=function(t){var e=t.getGrid();e.addObstructs(t);var o=e.getCellSize(),n=t.getPixelPos(this._fromPos);t.node.setPosition(n),t.node.zIndex=s.default.ZORDER_EFFECT,t.shiftToEffectLayer();var i=this._duration+r.default.random(-.5*this._duration,.5*this._duration),c=cc.spawn(cc.moveTo(.33*i,n.add(cc.v2(0,.75*o.height))),cc.scaleTo(.33*i,1.2)),l=cc.delayTime(.34*i),p=cc.spawn(cc.moveTo(.33*i,t.getPixelPos(this._toPos)),cc.scaleTo(i,1)),u=cc.callFunc(function(){e.setEntity(t,t.getLogicalPos()),t.setCurrentState(a.default.create())},this);t.runAction(cc.sequence(c,l,p,u))},e.prototype.update=function(t,e){},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e.SHUFFLE_DRUATION=1,e}(i.default);o.default=c,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../grid/GridBase":"GridBase","../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStateSwap:[function(t,e,o){"use strict";cc._RF.push(e,"1462c9fSeZCFrVCnwVGRlyy","ItemStateSwap");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../extend/utils/GameMath"),r=t("../../state/concreteState/EntityStateWait"),a=t("../../state/EntityStateBase"),s=t("../../../grid/GridBase"),c=function(t){function e(o,n,r){var s=t.call(this,a.EntityStateType.Swap)||this;return s._fromPos=i.default.INVALID_LOGICAL_POSITION.clone(),s._toPos=i.default.INVALID_LOGICAL_POSITION.clone(),s._duration=e.SWAP_DRUATION,s._timePast=0,s._fromPos=o,s._toPos=n,s._duration=r,s._timePast=0,s}return n(e,t),e.create=function(t,o,n){return void 0===n&&(n=e.SWAP_DRUATION),new e(t,o,n)},e.prototype.enter=function(t){t.getGrid().addObstructs(t),t.setPixelPos(this._fromPos),t.node.zIndex=s.default.ZORDER_EFFECT;var e=cc.moveTo(this._duration,t.getPixelPos(this._toPos)),o=cc.callFunc(function(){t.setCurrentState(r.default.create()),t.node.zIndex=t.getBottomZOrder()},this);t.runAction(cc.sequence(e,o)),this._timePast=0},e.prototype.update=function(t,e){this._timePast+=e,this._timePast>=this._duration+.1&&(t.node.stopAllActions(),t.setPixelPos(this._toPos),t.setCurrentState(r.default.create()))},e.prototype.exit=function(t){t.getGrid().removeObstructs(t)},e.SWAP_DRUATION=.15,e}(a.default);o.default=c,cc._RF.pop()},{"../../../../../extend/utils/GameMath":"GameMath","../../../grid/GridBase":"GridBase","../../state/EntityStateBase":"EntityStateBase","../../state/concreteState/EntityStateWait":"EntityStateWait"}],ItemStatue:[function(t,e,o){"use strict";cc._RF.push(e,"bc521mULhdPj5svR5zOWzNp","ItemStatue");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../EntityPrefabNodePool"),s=t("../../../defines/CollectionID"),c=t("../../../defines/EntityID"),l=t("../../flyer/FlyerAnimation"),p=t("../../../defines/IdentifierManager"),u=t("../../../../../base/IGame"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=a.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemStatue","ItemStatue");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.init=function(e,o){t.prototype.initItem.call(this,e,r.ItemType.Statue),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.getCollectionID=function(){return s.CollectionID.ItemStatue},e.prototype.getEntityID=function(){var t=c.EntityID.None;switch(this.getHealthPoint()){case 1:t=c.EntityID.ItemStatueHp1;break;case 2:t=c.EntityID.ItemStatueHp2;break;case 3:t=c.EntityID.ItemStatueHp3}return t},e.prototype.getScore=function(){return 150},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!1},e.prototype._onClean=function(t){var e=1;if(t.cleanType==c.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos())}this.progressDeathWish(t),this.setVisible(!1),this.selfDestory(),u.default.playAudio(p.default.getInstance().getMatchAudioFilePath("statue"))}else{u.default.playAudio(p.default.getInstance().getMatchAudioFilePath("eliminate_0")),this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt();o=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),o.node.zIndex=this.getTopZOrder()}},e=o=i([h],e)}(r.default));o.default=m,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],ItemWatermelon:[function(t,e,o){"use strict";cc._RF.push(e,"fc3d48kJINKQYOEoGZfPziZ","ItemWatermelon");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../ItemBase"),a=t("../../../defines/CollectionID"),s=t("../../../defines/EntityID"),c=t("../../../defines/TMXConfigInfoKeys"),l=t("../../flyer/FlyerAnimation"),p=t("../../../../../base/IGame"),u=t("../../../defines/IdentifierManager"),y=t("../../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.piecesNode=[],e._healthPoint=1,e}var o;return n(e,t),o=e,e.create=function(t){var e=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/item/ItemWatermelon","ItemWatermelon");return e?(e.init(t),e):null},e.prototype.clone=function(){var t=o.create(this.getGrid());return t.setHealthPoint(this.getHealthPoint()),t},e.prototype.getCollectionID=function(){return a.CollectionID.ItemWatermelon},e.prototype.getEntityID=function(){return s.EntityID.ItemWatermelon},e.prototype.getScore=function(){return 100},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e),e[c.default.CFG_WATERMELON_MAX]&&(this._healthPoint=Number(e[c.default.CFG_WATERMELON_MAX])),this.setHealthPoint(this._healthPoint)},e.prototype.init=function(e){t.prototype.initItem.call(this,e,r.ItemType.ItemWatermelon,2,2)},e.prototype._canDrop=function(){return!1},e.prototype._canSwap=function(){return!1},e.prototype._canMatch=function(){return!1},e.prototype._canCleanByTerminate=function(t){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=this;if(this.getGrid().gainScoreWithEntity(this),this.getHealthPoint()<=1){this.progressDeathWish(t),this.removeFromGridAndAddToEffect(),this.getGrid().addObstructs(this);var o=cc.view.getVisibleSize(),n=cc.v2(o.width+2e3,-500),i=this.getGrid().node.convertToNodeSpace(n),r=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e.getGrid().removeObstructs(e)})),a=cc.sequence(cc.spawn(cc.moveTo(1,i),cc.fadeOut(1)),cc.callFunc(function(){e.getGrid().removeObstructs(e),e.node.removeFromParent()})),s=cc.spawn(r,a);this.runAction(s);var c=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(c,this.getLogicalPos()),c.node.setPosition(this.node.getPosition()),c.node.zIndex=this.getTopZOrder(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("watermelon")),this.setHealthPoint(0)}else{this.onCollected(),this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt();c=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(c,this.getLogicalPos()),c.node.setPosition(this.node.getPosition()),c.node.zIndex=this.getTopZOrder(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("watermelon"))}},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.updatePuppet=function(){for(var t=0;t<8;t++)this.piecesNode[t].active=t<this._healthPoint},i([f([cc.Node])],e.prototype,"piecesNode",void 0),e=o=i([m],e)}(r.default);o.default=d,cc._RF.pop()},{"../../../../../base/IGame":"IGame","../../../defines/CollectionID":"CollectionID","../../../defines/EntityID":"EntityID","../../../defines/IdentifierManager":"IdentifierManager","../../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../EntityPrefabNodePool":"EntityPrefabNodePool","../../flyer/FlyerAnimation":"FlyerAnimation","../ItemBase":"ItemBase"}],KindID:[function(t,e,o){"use strict";cc._RF.push(e,"9a5c4D4APpBipzqGU+5sKSS","KindID"),Object.defineProperty(o,"__esModule",{value:!0}),o.KindIDManager=o.KindID=void 0;var n,i=t("./EntityID");(function(t){t[t.CellNormal=10101]="CellNormal",t[t.CellConveyerD2U=20101]="CellConveyerD2U",t[t.CellConveyerL2R=20102]="CellConveyerL2R",t[t.CellConveyerU2D=20103]="CellConveyerU2D",t[t.CellConveyerR2L=20104]="CellConveyerR2L",t[t.CellConveyerD2L=20105]="CellConveyerD2L",t[t.CellConveyerL2U=20106]="CellConveyerL2U",t[t.CellConveyerU2R=20107]="CellConveyerU2R",t[t.CellConveyerR2D=20108]="CellConveyerR2D",t[t.CellConveyerD2R=20109]="CellConveyerD2R",t[t.CellConveyerR2U=20110]="CellConveyerR2U",t[t.CellConveyerU2L=20111]="CellConveyerU2L",t[t.CellConveyerL2D=20112]="CellConveyerL2D",t[t.CellMovablePlate=20201]="CellMovablePlate",t[t.PopsicleNormal=30101]="PopsicleNormal",t[t.PopsicleBoom=30201]="PopsicleBoom",t[t.PopsicleLine=30301]="PopsicleLine",t[t.FloorGrass=40101]="FloorGrass",t[t.FloorIceHp1=40201]="FloorIceHp1",t[t.FloorIceHp2=40202]="FloorIceHp2",t[t.FloorIceHp3=40203]="FloorIceHp3",t[t.FloorIceHp4=40204]="FloorIceHp4",t[t.FloorChangerRed=40301]="FloorChangerRed",t[t.FloorChangerGreen=40302]="FloorChangerGreen",t[t.FloorChangerBlue=40303]="FloorChangerBlue",t[t.FloorChangerYellow=40304]="FloorChangerYellow",t[t.FloorChangerOrange=40305]="FloorChangerOrange",t[t.FloorChangerPurple=40306]="FloorChangerPurple",t[t.FloorDouble=40401]="FloorDouble",t[t.FloorRoadLineVU=40501]="FloorRoadLineVU",t[t.FloorRoadLineHR=40502]="FloorRoadLineHR",t[t.FloorRoadLineVD=40503]="FloorRoadLineVD",t[t.FloorRoadLineHL=40504]="FloorRoadLineHL",t[t.FloorRoadTurnLdD=40505]="FloorRoadTurnLdD",t[t.FloorRoadTurnLuL=40506]="FloorRoadTurnLuL",t[t.FloorRoadTurnRuU=40507]="FloorRoadTurnRuU",t[t.FloorRoadTurnRdR=40508]="FloorRoadTurnRdR",t[t.FloorRoadTurnRdD=40509]="FloorRoadTurnRdD",t[t.FloorRoadTurnRuR=40510]="FloorRoadTurnRuR",t[t.FloorRoadTurnLuU=40511]="FloorRoadTurnLuU",t[t.FloorRoadTurnLdL=40512]="FloorRoadTurnLdL",t[t.PolishJam=50101]="PolishJam",t[t.ItemNormalRed=60101]="ItemNormalRed",t[t.ItemNormalGreen=60102]="ItemNormalGreen",t[t.ItemNormalBlue=60103]="ItemNormalBlue",t[t.ItemNormalYellow=60104]="ItemNormalYellow",t[t.ItemNormalOrange=60105]="ItemNormalOrange",t[t.ItemNormalPurple=60106]="ItemNormalPurple",t[t.ItemBombButterflyRed=60201]="ItemBombButterflyRed",t[t.ItemBombButterflyGreen=60202]="ItemBombButterflyGreen",t[t.ItemBombButterflyBlue=60203]="ItemBombButterflyBlue",t[t.ItemBombButterflyYellow=60204]="ItemBombButterflyYellow",t[t.ItemBombButterflyOrange=60205]="ItemBombButterflyOrange",t[t.ItemBombButterflyPurple=60206]="ItemBombButterflyPurple",t[t.ItemBombRowRed=60301]="ItemBombRowRed",t[t.ItemBombRowGreen=60302]="ItemBombRowGreen",t[t.ItemBombRowBlue=60303]="ItemBombRowBlue",t[t.ItemBombRowYellow=60304]="ItemBombRowYellow",t[t.ItemBombRowOrange=60305]="ItemBombRowOrange",t[t.ItemBombRowPurple=60306]="ItemBombRowPurple",t[t.ItemBombColumnRed=60401]="ItemBombColumnRed",t[t.ItemBombColumnGreen=60402]="ItemBombColumnGreen",t[t.ItemBombColumnBlue=60403]="ItemBombColumnBlue",t[t.ItemBombColumnYellow=60404]="ItemBombColumnYellow",t[t.ItemBombColumnOrange=60405]="ItemBombColumnOrange",t[t.ItemBombColumnPurple=60406]="ItemBombColumnPurple",t[t.ItemBombCrossRed=60501]="ItemBombCrossRed",t[t.ItemBombCrossGreen=60502]="ItemBombCrossGreen",t[t.ItemBombCrossBlue=60503]="ItemBombCrossBlue",t[t.ItemBombCrossYellow=60504]="ItemBombCrossYellow",t[t.ItemBombCrossOrange=60505]="ItemBombCrossOrange",t[t.ItemBombCrossPurple=60506]="ItemBombCrossPurple",t[t.ItemBombRangeRed=60601]="ItemBombRangeRed",t[t.ItemBombRangeGreen=60602]="ItemBombRangeGreen",t[t.ItemBombRangeBlue=60603]="ItemBombRangeBlue",t[t.ItemBombRangeYellow=60604]="ItemBombRangeYellow",t[t.ItemBombRangeOrange=60605]="ItemBombRangeOrange",t[t.ItemBombRangePurple=60606]="ItemBombRangePurple",t[t.ItemBombRainbow=60701]="ItemBombRainbow",t[t.ItemBlock_Begin=60801]="ItemBlock_Begin",t[t.ItemBlock_HP1=60801]="ItemBlock_HP1",t[t.ItemBlock_HP2=60802]="ItemBlock_HP2",t[t.ItemBlock_HP3=60803]="ItemBlock_HP3",t[t.ItemBlock_HP4=60804]="ItemBlock_HP4",t[t.ItemBlock_HP5=60805]="ItemBlock_HP5",t[t.ItemBlock_HP6=60806]="ItemBlock_HP6",t[t.ItemDoughnut_Begin=60901]="ItemDoughnut_Begin",t[t.ItemDoughnut_HP1=60901]="ItemDoughnut_HP1",t[t.ItemDoughnut_HP2=60902]="ItemDoughnut_HP2",t[t.ItemDoughnut_HP3=60903]="ItemDoughnut_HP3",t[t.ItemMagicCrystal=61001]="ItemMagicCrystal",t[t.ItemWatermelon=61101]="ItemWatermelon",t[t.ItemFruitCake=61201]="ItemFruitCake",t[t.ItemFireWormBottle=61301]="ItemFireWormBottle",t[t.ItemMowerUp=61401]="ItemMowerUp",t[t.ItemMowerRight=61402]="ItemMowerRight",t[t.ItemMowerDown=61403]="ItemMowerDown",t[t.ItemMowerLeft=61404]="ItemMowerLeft",t[t.ItemBone=61501]="ItemBone",t[t.ItemChestnut=61601]="ItemChestnut",t[t.ItemFireworksHp1=61701]="ItemFireworksHp1",t[t.ItemFireworksHp2=61702]="ItemFireworksHp2",t[t.ItemFireworksHp3=61703]="ItemFireworksHp3",t[t.ItemFireworksHp4=61704]="ItemFireworksHp4",t[t.ItemPuppy=62001]="ItemPuppy",t[t.ItemDogPaw_Red=62101]="ItemDogPaw_Red",t[t.ItemDogPaw_Green=62102]="ItemDogPaw_Green",t[t.ItemDogPaw_Blue=62103]="ItemDogPaw_Blue",t[t.ItemDogPaw_Yellow=62104]="ItemDogPaw_Yellow",t[t.ItemDogPaw_Orange=62105]="ItemDogPaw_Orange",t[t.ItemDogPaw_Purple=62106]="ItemDogPaw_Purple",t[t.ItemBalloon=62201]="ItemBalloon",t[t.ItemDogHouse=62301]="ItemDogHouse",t[t.ItemJamBottle=62401]="ItemJamBottle",t[t.ItemNormalRandom=62501]="ItemNormalRandom",t[t.ItemHoneyComb=62601]="ItemHoneyComb",t[t.ItemBombButterflyRandom=62701]="ItemBombButterflyRandom",t[t.ItemBombRowRandom=62702]="ItemBombRowRandom",t[t.ItemBombColumnRandom=62703]="ItemBombColumnRandom",t[t.ItemBombCrossRandom=62704]="ItemBombCrossRandom",t[t.ItemBombRangeRandom=62705]="ItemBombRangeRandom",t[t.ItemPawRandom=62708]="ItemPawRandom",t[t.ItemStatueHp1=62801]="ItemStatueHp1",t[t.ItemStatueHp2=62802]="ItemStatueHp2",t[t.ItemStatueHp3=62803]="ItemStatueHp3",t[t.ParasiteIceCubeHp1=70101]="ParasiteIceCubeHp1",t[t.ParasiteIceCubeHp2=70102]="ParasiteIceCubeHp2",t[t.ParasiteIceCubeHp3=70103]="ParasiteIceCubeHp3",t[t.ParasiteIceCubeHp4=70104]="ParasiteIceCubeHp4",t[t.ParasiteIceCubeHp5=70105]="ParasiteIceCubeHp5",t[t.ParasiteIceCubeHp6=70106]="ParasiteIceCubeHp6",t[t.ParasiteShackleHp1=70201]="ParasiteShackleHp1",t[t.ParasiteShackleHp2=70202]="ParasiteShackleHp2",t[t.ParasiteShackleHp3=70203]="ParasiteShackleHp3",t[t.ParasiteHoneyHp1=70301]="ParasiteHoneyHp1",t[t.ParasiteHoneyHp2=70302]="ParasiteHoneyHp2",t[t.ParasiteGiftBoxRed=70401]="ParasiteGiftBoxRed",t[t.ParasiteGiftBoxGreen=70402]="ParasiteGiftBoxGreen",t[t.ParasiteGiftBoxBlue=70403]="ParasiteGiftBoxBlue",t[t.ParasiteGiftBoxYellow=70404]="ParasiteGiftBoxYellow",t[t.ParasiteGiftBoxOrange=70405]="ParasiteGiftBoxOrange",t[t.ParasiteGiftBoxPurple=70406]="ParasiteGiftBoxPurple",t[t.MarkBoneCollector=80101]="MarkBoneCollector",t[t.MarkWormholeEntrance=80201]="MarkWormholeEntrance",t[t.MarkWormholeExit=80301]="MarkWormholeExit",t[t.FenceVineVertical=80401]="FenceVineVertical",t[t.FenceVineHorizontal=80501]="FenceVineHorizontal",t[t.MarkDropMachine=80801]="MarkDropMachine"})(n=o.KindID||(o.KindID={}));var r=function(){function t(){this.KindID_To_EntityID_Map={},this.initKindID_To_EntityID_Map()}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initKindID_To_EntityID_Map=function(){this.KindID_To_EntityID_Map[n.CellNormal]=i.EntityID.CellNormal,this.KindID_To_EntityID_Map[n.CellConveyerL2R]=i.EntityID.CellConveyerL2R,this.KindID_To_EntityID_Map[n.CellConveyerL2U]=i.EntityID.CellConveyerL2U,this.KindID_To_EntityID_Map[n.CellConveyerL2D]=i.EntityID.CellConveyerL2D,this.KindID_To_EntityID_Map[n.CellConveyerR2L]=i.EntityID.CellConveyerR2L,this.KindID_To_EntityID_Map[n.CellConveyerR2U]=i.EntityID.CellConveyerR2U,this.KindID_To_EntityID_Map[n.CellConveyerR2D]=i.EntityID.CellConveyerR2D,this.KindID_To_EntityID_Map[n.CellConveyerU2L]=i.EntityID.CellConveyerU2L,this.KindID_To_EntityID_Map[n.CellConveyerU2R]=i.EntityID.CellConveyerU2R,this.KindID_To_EntityID_Map[n.CellConveyerU2D]=i.EntityID.CellConveyerU2D,this.KindID_To_EntityID_Map[n.CellConveyerD2L]=i.EntityID.CellConveyerD2L,this.KindID_To_EntityID_Map[n.CellConveyerD2R]=i.EntityID.CellConveyerD2R,this.KindID_To_EntityID_Map[n.CellConveyerD2U]=i.EntityID.CellConveyerD2U,this.KindID_To_EntityID_Map[n.CellMovablePlate]=i.EntityID.CellMovablePlate,this.KindID_To_EntityID_Map[n.PopsicleNormal]=i.EntityID.PopsicleNormal,this.KindID_To_EntityID_Map[n.PopsicleLine]=i.EntityID.PopsicleLine,this.KindID_To_EntityID_Map[n.PopsicleBoom]=i.EntityID.PopsicleBoom,this.KindID_To_EntityID_Map[n.FloorGrass]=i.EntityID.FloorGrass,this.KindID_To_EntityID_Map[n.FloorDouble]=i.EntityID.FloorDouble,this.KindID_To_EntityID_Map[n.FloorIceHp1]=i.EntityID.FloorIceHp1,this.KindID_To_EntityID_Map[n.FloorIceHp2]=i.EntityID.FloorIceHp2,this.KindID_To_EntityID_Map[n.FloorIceHp3]=i.EntityID.FloorIceHp3,this.KindID_To_EntityID_Map[n.FloorIceHp4]=i.EntityID.FloorIceHp4,this.KindID_To_EntityID_Map[n.FloorChangerRed]=i.EntityID.FloorChangerRed,this.KindID_To_EntityID_Map[n.FloorChangerGreen]=i.EntityID.FloorChangerGreen,this.KindID_To_EntityID_Map[n.FloorChangerBlue]=i.EntityID.FloorChangerBlue,this.KindID_To_EntityID_Map[n.FloorChangerYellow]=i.EntityID.FloorChangerYellow,this.KindID_To_EntityID_Map[n.FloorChangerOrange]=i.EntityID.FloorChangerOrange,this.KindID_To_EntityID_Map[n.FloorChangerPurple]=i.EntityID.FloorChangerPurple,this.KindID_To_EntityID_Map[n.FloorRoadLineVU]=i.EntityID.FloorRoadLineVU,this.KindID_To_EntityID_Map[n.FloorRoadLineHR]=i.EntityID.FloorRoadLineHR,this.KindID_To_EntityID_Map[n.FloorRoadLineVD]=i.EntityID.FloorRoadLineVD,this.KindID_To_EntityID_Map[n.FloorRoadLineHL]=i.EntityID.FloorRoadLineHL,this.KindID_To_EntityID_Map[n.FloorRoadTurnLdD]=i.EntityID.FloorRoadTurnLdD,this.KindID_To_EntityID_Map[n.FloorRoadTurnLuL]=i.EntityID.FloorRoadTurnLuL,this.KindID_To_EntityID_Map[n.FloorRoadTurnRuU]=i.EntityID.FloorRoadTurnRuU,this.KindID_To_EntityID_Map[n.FloorRoadTurnRdR]=i.EntityID.FloorRoadTurnRdR,this.KindID_To_EntityID_Map[n.FloorRoadTurnRdD]=i.EntityID.FloorRoadTurnRdD,this.KindID_To_EntityID_Map[n.FloorRoadTurnRuR]=i.EntityID.FloorRoadTurnRuR,this.KindID_To_EntityID_Map[n.FloorRoadTurnLuU]=i.EntityID.FloorRoadTurnLuU,this.KindID_To_EntityID_Map[n.FloorRoadTurnLdL]=i.EntityID.FloorRoadTurnLdL,this.KindID_To_EntityID_Map[n.PolishJam]=i.EntityID.RugJam,this.KindID_To_EntityID_Map[n.ItemNormalRed]=i.EntityID.ItemNormalRed,this.KindID_To_EntityID_Map[n.ItemNormalGreen]=i.EntityID.ItemNormalGreen,this.KindID_To_EntityID_Map[n.ItemNormalBlue]=i.EntityID.ItemNormalBlue,this.KindID_To_EntityID_Map[n.ItemNormalYellow]=i.EntityID.ItemNormalYellow,this.KindID_To_EntityID_Map[n.ItemNormalOrange]=i.EntityID.ItemNormalOrange,this.KindID_To_EntityID_Map[n.ItemNormalPurple]=i.EntityID.ItemNormalPurple,this.KindID_To_EntityID_Map[n.ItemBombButterflyRed]=i.EntityID.ItemBombButterflyRed,this.KindID_To_EntityID_Map[n.ItemBombButterflyGreen]=i.EntityID.ItemBombButterflyGreen,this.KindID_To_EntityID_Map[n.ItemBombButterflyBlue]=i.EntityID.ItemBombButterflyBlue,this.KindID_To_EntityID_Map[n.ItemBombButterflyYellow]=i.EntityID.ItemBombButterflyYellow,this.KindID_To_EntityID_Map[n.ItemBombButterflyOrange]=i.EntityID.ItemBombButterflyOrange,this.KindID_To_EntityID_Map[n.ItemBombButterflyPurple]=i.EntityID.ItemBombButterflyPurple,this.KindID_To_EntityID_Map[n.ItemBombRowRed]=i.EntityID.ItemBombRowRed,this.KindID_To_EntityID_Map[n.ItemBombRowGreen]=i.EntityID.ItemBombRowGreen,this.KindID_To_EntityID_Map[n.ItemBombRowBlue]=i.EntityID.ItemBombRowBlue,this.KindID_To_EntityID_Map[n.ItemBombRowYellow]=i.EntityID.ItemBombRowYellow,this.KindID_To_EntityID_Map[n.ItemBombRowOrange]=i.EntityID.ItemBombRowOrange,this.KindID_To_EntityID_Map[n.ItemBombRowPurple]=i.EntityID.ItemBombRowPurple,this.KindID_To_EntityID_Map[n.ItemBombColumnRed]=i.EntityID.ItemBombColumnRed,this.KindID_To_EntityID_Map[n.ItemBombColumnGreen]=i.EntityID.ItemBombColumnGreen,this.KindID_To_EntityID_Map[n.ItemBombColumnBlue]=i.EntityID.ItemBombColumnBlue,this.KindID_To_EntityID_Map[n.ItemBombColumnYellow]=i.EntityID.ItemBombColumnYellow,this.KindID_To_EntityID_Map[n.ItemBombColumnOrange]=i.EntityID.ItemBombColumnOrange,this.KindID_To_EntityID_Map[n.ItemBombColumnPurple]=i.EntityID.ItemBombColumnPurple,this.KindID_To_EntityID_Map[n.ItemBombCrossRed]=i.EntityID.ItemBombCrossRed,this.KindID_To_EntityID_Map[n.ItemBombCrossGreen]=i.EntityID.ItemBombCrossGreen,this.KindID_To_EntityID_Map[n.ItemBombCrossBlue]=i.EntityID.ItemBombCrossBlue,this.KindID_To_EntityID_Map[n.ItemBombCrossYellow]=i.EntityID.ItemBombCrossYellow,this.KindID_To_EntityID_Map[n.ItemBombCrossOrange]=i.EntityID.ItemBombCrossOrange,this.KindID_To_EntityID_Map[n.ItemBombCrossPurple]=i.EntityID.ItemBombCrossPurple,this.KindID_To_EntityID_Map[n.ItemBombRangeRed]=i.EntityID.ItemBombRangeRed,this.KindID_To_EntityID_Map[n.ItemBombRangeGreen]=i.EntityID.ItemBombRangeGreen,this.KindID_To_EntityID_Map[n.ItemBombRangeBlue]=i.EntityID.ItemBombRangeBlue,this.KindID_To_EntityID_Map[n.ItemBombRangeYellow]=i.EntityID.ItemBombRangeYellow,this.KindID_To_EntityID_Map[n.ItemBombRangeOrange]=i.EntityID.ItemBombRangeOrange,this.KindID_To_EntityID_Map[n.ItemBombRangePurple]=i.EntityID.ItemBombRangePurple,this.KindID_To_EntityID_Map[n.ItemBombRainbow]=i.EntityID.ItemBombRainbow,this.KindID_To_EntityID_Map[n.ItemBlock_HP1]=i.EntityID.ItemBlockHp1,this.KindID_To_EntityID_Map[n.ItemBlock_HP2]=i.EntityID.ItemBlockHp2,this.KindID_To_EntityID_Map[n.ItemBlock_HP3]=i.EntityID.ItemBlockHp3,this.KindID_To_EntityID_Map[n.ItemBlock_HP4]=i.EntityID.ItemBlockHp4,this.KindID_To_EntityID_Map[n.ItemBlock_HP5]=i.EntityID.ItemBlockHp5,this.KindID_To_EntityID_Map[n.ItemBlock_HP6]=i.EntityID.ItemBlockHp6,this.KindID_To_EntityID_Map[n.ItemDoughnut_HP1]=i.EntityID.ItemDoughnutHp1,this.KindID_To_EntityID_Map[n.ItemDoughnut_HP2]=i.EntityID.ItemDoughnutHp2,this.KindID_To_EntityID_Map[n.ItemDoughnut_HP3]=i.EntityID.ItemDoughnutHp3,this.KindID_To_EntityID_Map[n.ItemMagicCrystal]=i.EntityID.ItemMagicCrystal,this.KindID_To_EntityID_Map[n.ItemWatermelon]=i.EntityID.ItemWatermelon,this.KindID_To_EntityID_Map[n.ItemFruitCake]=i.EntityID.ItemFruitCake,this.KindID_To_EntityID_Map[n.ItemMowerUp]=i.EntityID.ItemMowerUp,this.KindID_To_EntityID_Map[n.ItemMowerRight]=i.EntityID.ItemMowerRight,this.KindID_To_EntityID_Map[n.ItemMowerDown]=i.EntityID.ItemMowerDown,this.KindID_To_EntityID_Map[n.ItemMowerLeft]=i.EntityID.ItemMowerLeft,this.KindID_To_EntityID_Map[n.ItemBone]=i.EntityID.ItemBone,this.KindID_To_EntityID_Map[n.ItemChestnut]=i.EntityID.ItemChestnut,this.KindID_To_EntityID_Map[n.ItemFireWormBottle]=i.EntityID.ItemFireWormBottle,this.KindID_To_EntityID_Map[n.ItemPuppy]=i.EntityID.ItemPuppy,this.KindID_To_EntityID_Map[n.ItemDogPaw_Red]=i.EntityID.ItemPawRed,this.KindID_To_EntityID_Map[n.ItemDogPaw_Green]=i.EntityID.ItemPawGreen,this.KindID_To_EntityID_Map[n.ItemDogPaw_Blue]=i.EntityID.ItemPawBlue,this.KindID_To_EntityID_Map[n.ItemDogPaw_Yellow]=i.EntityID.ItemPawYellow,this.KindID_To_EntityID_Map[n.ItemDogPaw_Orange]=i.EntityID.ItemPawOrange,this.KindID_To_EntityID_Map[n.ItemDogPaw_Purple]=i.EntityID.ItemPawPurple,this.KindID_To_EntityID_Map[n.ItemBalloon]=i.EntityID.ItemBalloon,this.KindID_To_EntityID_Map[n.ItemDogHouse]=i.EntityID.ItemDogHouse,this.KindID_To_EntityID_Map[n.ItemJamBottle]=i.EntityID.ItemJamBottle,this.KindID_To_EntityID_Map[n.ItemHoneyComb]=i.EntityID.ItemHoneyComb,this.KindID_To_EntityID_Map[n.ItemStatueHp1]=i.EntityID.ItemStatueHp1,this.KindID_To_EntityID_Map[n.ItemStatueHp2]=i.EntityID.ItemStatueHp2,this.KindID_To_EntityID_Map[n.ItemStatueHp3]=i.EntityID.ItemStatueHp3,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp1]=i.EntityID.ParasiteIceCubeHp1,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp2]=i.EntityID.ParasiteIceCubeHp2,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp3]=i.EntityID.ParasiteIceCubeHp3,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp4]=i.EntityID.ParasiteIceCubeHp4,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp5]=i.EntityID.ParasiteIceCubeHp5,this.KindID_To_EntityID_Map[n.ParasiteIceCubeHp6]=i.EntityID.ParasiteIceCubeHp6,this.KindID_To_EntityID_Map[n.ParasiteShackleHp1]=i.EntityID.ParasiteShackleHp1,this.KindID_To_EntityID_Map[n.ParasiteShackleHp2]=i.EntityID.ParasiteShackleHp2,this.KindID_To_EntityID_Map[n.ParasiteShackleHp3]=i.EntityID.ParasiteShackleHp3,this.KindID_To_EntityID_Map[n.ParasiteHoneyHp1]=i.EntityID.ParasiteHoneyHp1,this.KindID_To_EntityID_Map[n.ParasiteHoneyHp2]=i.EntityID.ParasiteHoneyHp2,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxRed]=i.EntityID.ParasiteGiftBoxRed,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxGreen]=i.EntityID.ParasiteGiftBoxGreen,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxBlue]=i.EntityID.ParasiteGiftBoxBlue,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxYellow]=i.EntityID.ParasiteGiftBoxYellow,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxOrange]=i.EntityID.ParasiteGiftBoxOrange,this.KindID_To_EntityID_Map[n.ParasiteGiftBoxPurple]=i.EntityID.ParasiteGiftBoxPurple,this.KindID_To_EntityID_Map[n.MarkBoneCollector]=i.EntityID.MarkBoneCollector,this.KindID_To_EntityID_Map[n.MarkWormholeEntrance]=i.EntityID.MarkWormholeEntrance,this.KindID_To_EntityID_Map[n.MarkWormholeExit]=i.EntityID.MarkWormholeExit,this.KindID_To_EntityID_Map[n.FenceVineHorizontal]=i.EntityID.FenceVineHorizontal,this.KindID_To_EntityID_Map[n.FenceVineVertical]=i.EntityID.FenceVineVertical,this.KindID_To_EntityID_Map[n.MarkDropMachine]=i.EntityID.MarkDropMachine,this.KindID_To_EntityID_Map[n.ItemFireworksHp1]=i.EntityID.ItemFireworksHp1,this.KindID_To_EntityID_Map[n.ItemFireworksHp2]=i.EntityID.ItemFireworksHp2,this.KindID_To_EntityID_Map[n.ItemFireworksHp3]=i.EntityID.ItemFireworksHp3,this.KindID_To_EntityID_Map[n.ItemFireworksHp4]=i.EntityID.ItemFireworksHp4},t.prototype.getEntityIDFromKindID=function(t){var e=this.KindID_To_EntityID_Map[t];return e||i.EntityID.None},t.prototype.needLayoutGrassFromKindID=function(t){var e=!1;switch(this.getEntityIDFromKindID(t)){case i.EntityID.CellNormal:case i.EntityID.CellMovablePlate:e=!0}return e},t.instance=null,t}();o.KindIDManager=r,cc._RF.pop()},{"./EntityID":"EntityID"}],LevelSelectorPanel:[function(t,e,o){"use strict";cc._RF.push(e,"cf97d7U8zlDPpzt0EdL+QHB","LevelSelectorPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../GameSceneBase"),a=t("../../../extend/utils/GameMath"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.frame=null,e.drawer=null,e.previous=null,e.next=null,e.editBox=null,e.updateCfgBtn=null,e.speedUpButton=null,e.speedEditBox=null,e.speedDownButton=null,e._gameScene=null,e._levelConfig=null,e._speed=1,e}var o;return n(e,t),o=e,e.create=function(){var t=cc.loader.getRes("match_scene/prefab/userInterface/LevelSelectorPanel",cc.Prefab);if(t){var e=cc.instantiate(t);if(e){var n=e.getComponent(o);return n&&n.init(),n}}},e.prototype.init=function(){this.drawer.on("touchend",this.onPull,this),this.previous.on("touchend",this.onPrevious,this),this.next.on("touchend",this.onNext,this),this.updateCfgBtn.on("touchend",this.onUpdateCfgBtnClick,this),this.mask.active=!1,this.editBox.inputMode=cc.EditBox.InputMode.NUMERIC,this.editBox.maxLength=20,this.editBox.placeholder="1",this.editBox.node.on("editing-did-began",this.levelTextDidBegan,this),this.editBox.node.on("editing-did-ended",this.levelTextDidEnded,this),this.editBox.node.on("text-changed",this.levelTextChanged,this),this.speedUpButton.on("touchend",this.onSpeedUp,this),this.speedDownButton.on("touchend",this.onSpeedDown,this),this.speedEditBox.node.on("editing-did-began",this.speedTextDidBegan,this),this.speedEditBox.node.on("editing-did-ended",this.speedTextDidEnded,this),this.speedEditBox.node.on("text-changed",this.speedTextChanged,this);var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(r.default))},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.mask=null,this.frame=null,this.drawer=null,this.previous=null,this.next=null,this.editBox=null,this._gameScene=null,this._levelConfig=null,cc.director.getScheduler().setTimeScale(1)},e.prototype.onPull=function(t){var e=this.node.getContentSize(),o=this.frame.getContentSize(),n=cc.v2(-o.width-.5*(e.width-this.frame.width),this.frame.position.y);this.frame.stopAllActions();var i=Math.abs(this.frame.position.x-n.x)/1e3*cc.director.getScheduler().getTimeScale(),r=cc.moveTo(i,n).easing(cc.easeBackInOut());this.frame.runAction(r),this.node.on("touchend",this.onPush,this),this.drawer.setPosition(-1e3,this.drawer.position.y),this.mask.active=!0},e.prototype.onPush=function(t){var e=cc.v2(0,this.frame.position.y);this.frame.stopAllActions();var o=Math.abs(this.frame.position.x-e.x)/1e3*cc.director.getScheduler().getTimeScale(),n=cc.moveTo(o,e).easing(cc.easeBackInOut());this.frame.runAction(n),this.node.off("touchend",this.onPush,this),this.drawer.setPosition(-20,this.drawer.position.y),this.mask.active=!1},e.prototype.onPrevious=function(t){this._gameScene.cheatGameWithLevel(this._gameScene.getLevel()-1),this.onPush(null)},e.prototype.onNext=function(t){var e=Number(this.editBox.string);e?this._gameScene.cheatGameWithLevel(e):this._gameScene.cheatGameWithLevel(this._gameScene.getLevel()+1),this.onPush(null)},e.prototype.onUpdateCfgBtnClick=function(t){cc.log("onUpdateCfgBtnClick")},e.prototype.restartGame=function(){this._gameScene.cheatGameWithLevel(this._gameScene.getLevel()),this.onPush(null)},e.prototype.levelTextDidBegan=function(t){cc.log("levelTextDidBegan:"+this.editBox.string)},e.prototype.levelTextChanged=function(t){cc.log("levelTextChanged:"+this.editBox.string)},e.prototype.levelTextDidEnded=function(t){cc.log("levelTextDidEnded:"+this.editBox.string)},e.prototype.setSpeed=function(t){var e=a.default.clamp(t,.0625,16);this._speed=e,this.speedEditBox.string=e.toString(),cc.director.getScheduler().setTimeScale(this._speed)},e.prototype.onSpeedUp=function(t){this.setSpeed(2*this._speed)},e.prototype.onSpeedDown=function(t){this.setSpeed(.5*this._speed)},e.prototype.speedTextDidBegan=function(t){cc.log("speedTextDidBegan:"+this.speedEditBox.string)},e.prototype.speedTextChanged=function(t){cc.log("speedTextChanged:"+this.speedEditBox.string);var e=Number(this.speedEditBox.string);e&&this.setSpeed(e)},e.prototype.speedTextDidEnded=function(t){cc.log("speedTextDidEnded:"+this.speedEditBox.string)},i([l(cc.Node)],e.prototype,"mask",void 0),i([l(cc.Node)],e.prototype,"frame",void 0),i([l(cc.Node)],e.prototype,"drawer",void 0),i([l(cc.Node)],e.prototype,"previous",void 0),i([l(cc.Node)],e.prototype,"next",void 0),i([l(cc.EditBox)],e.prototype,"editBox",void 0),i([l(cc.Node)],e.prototype,"updateCfgBtn",void 0),i([l(cc.Node)],e.prototype,"speedUpButton",void 0),i([l(cc.EditBox)],e.prototype,"speedEditBox",void 0),i([l(cc.Node)],e.prototype,"speedDownButton",void 0),e=o=i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../extend/utils/GameMath":"GameMath","../GameSceneBase":"GameSceneBase"}],LoadingScene:[function(t,e,o){"use strict";cc._RF.push(e,"a8422Wc9QtEZY8pHgFDJ9qw","LoadingScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../extend/utils/GameMath"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.progressLabel=null,e}return n(e,t),e.prototype.start=function(){this.loadData()},e.prototype.getProgress=function(){return this.progressBar?this.progressBar.progress:0},e.prototype.setProgress=function(t){this.progressBar&&(this.progressBar.progress=r.default.clamp(t,0,1)),this.progressLabel&&(this.progressLabel.string=Math.floor(100*t).toString()+"%")},e.prototype.loadData=function(){var t=this;this.setProgress(0),cc.loader.loadResDir("data",function(){},function(){t.loadCommon()})},e.prototype.loadCommon=function(){this.setProgress(0),cc.loader.loadResDir("common",this.onLoadCommonProgressChanged.bind(this),this.onLoadCommonComplete.bind(this))},e.prototype.onLoadCommonProgressChanged=function(t,e,o){var n=Math.max(this.getProgress(),t/e*.5);this.setProgress(n)},e.prototype.onLoadCommonComplete=function(t,e,o){this.loadMatch()},e.prototype.loadMatch=function(){this.setProgress(0),cc.loader.loadResDir("match_scene",this.onLoadMatchProgressChanged.bind(this),this.onLoadMatchComplete.bind(this))},e.prototype.onLoadMatchProgressChanged=function(t,e,o){var n=Math.max(this.getProgress(),t/e*.5+.5);this.setProgress(n)},e.prototype.onLoadMatchComplete=function(t,e,o){cc.director.loadScene("MatchScene")},i([c(cc.ProgressBar)],e.prototype,"progressBar",void 0),i([c(cc.Label)],e.prototype,"progressLabel",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../extend/utils/GameMath":"GameMath"}],MarkerBase:[function(t,e,o){"use strict";cc._RF.push(e,"27ac0PMsFJKuJGvAVaVJsdQ","MarkerBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MarkerType=void 0;var r,a=t("../../defines/EntityID"),s=t("../EntityBase");(function(t){t[t.None=0]="None",t[t.Normal=1]="Normal"})(r=o.MarkerType||(o.MarkerType={}));var c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._markerType=r.None,e}return n(e,t),e.prototype.getMarkerType=function(){return this._markerType},e.prototype.initMarker=function(e,o,n,i){void 0===n&&(n=1),void 0===i&&(i=1),t.prototype.initEntity.call(this,e,a.EntityType.Marker,n,i),this._markerType=o},e=i([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../EntityBase":"EntityBase"}],MarkerNormal:[function(t,e,o){"use strict";cc._RF.push(e,"019eaBtOEZNCpDj/I4xJz7v","MarkerNormal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./MarkerBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../defines/TMXConfigInfoKeys"),l=t("../../defines/IdentifierManager"),p=t("../../defines/EntityGroupID"),u=t("../EntityPrefabNodePool"),y=t("../EntityBase"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._boneCollector=null,e._dropMachine=null,e._wormholeEntrance=null,e._wormholeExit=null,e}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){return a.CollectionID.MarkerNormal},e.prototype.getEntityID=function(){return s.EntityID.MarkNormal},e.prototype.dealWithConfigMap=function(e){t.prototype.dealWithConfigMap.call(this,e);var n=e[c.default.CFG_DROP_MACHINE_SHOW_KEY_TYPE];if(n){for(var i=n.split("|"),r=[],a=0,u=i;a<u.length;a++){var h=u[a],m=l.default.getInstance().getEntityIDFromString(h);if(m!=s.EntityID.None){var f=l.default.getInstance().getFrameNameFromEntityID(m);(D=(I=new cc.Node).addComponent(cc.Sprite)).spriteFrame=y.default.getEntitySpriteFarme(f),r.push(I)}}for(var d=0,_=i;d<_.length;d++){h=_[d];var g=l.default.getInstance().getEntityGroupIDFromString(h);if(g!=p.EntityGroupID.None){var I;f=l.default.getInstance().getFrameNameFromEntityGroupID(g);(D=(I=new cc.Node).addComponent(cc.Sprite)).spriteFrame=y.default.getEntitySpriteFarme(f),r.push(I)}}var C=o.DropMachineDisplayConfig[r.length.toString()];if(C)for(var P=0;P<r.length;P++){var D=r[P],v=C[P];D.position=v.Position,D.scale=v.Scale,this._dropMachine.addChild(D,-P-1)}this._dropMachine.active=!0}e[c.default.CFG_WORM_HOLE_ENTRANCE_KEY_TYPE]&&(this._wormholeEntrance.active=!0),e[c.default.CFG_WORM_HOLE_EXIT_KEY_TYPE]&&(this._wormholeExit.active=!0),e[c.default.CFG_MARK_BONE_COLLECTOR_KEY_TYPE]&&(this._boneCollector.active=!0)},e.create=function(t){var e=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/marker/MarkerNormal","MarkerNormal");return e?(e.init(t),e):null},e.prototype.init=function(e){t.prototype.initMarker.call(this,e,r.MarkerType.Normal),this._boneCollector=this._puppet.getChildByName("boneCollector"),this._boneCollector.active=!1,this._dropMachine=this._puppet.getChildByName("dropMachine"),this._dropMachine.active=!1,this._wormholeEntrance=this._puppet.getChildByName("wormholeEntrance"),this._wormholeEntrance.active=!1,this._wormholeExit=this._puppet.getChildByName("wormholeExit"),this._wormholeExit.active=!1},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._boneCollector=null,this._dropMachine=null,this._wormholeEntrance=null,this._wormholeExit=null},e.DropMachineDisplayConfig={1:[{Position:cc.v2(0,0),Scale:.5}],2:[{Position:cc.v2(-13,-2),Scale:.4},{Position:cc.v2(13,-2),Scale:.4}],3:[{Position:cc.v2(0,-2),Scale:.4},{Position:cc.v2(18,0),Scale:.3},{Position:cc.v2(-18,0),Scale:.3}]},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../defines/CollectionID":"CollectionID","../../defines/EntityGroupID":"EntityGroupID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../EntityBase":"EntityBase","../EntityPrefabNodePool":"EntityPrefabNodePool","./MarkerBase":"MarkerBase"}],MatchScene:[function(t,e,o){"use strict";cc._RF.push(e,"966dbqyP51Ch4+/u9o4NkVZ","MatchScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../define/GameCurrencyType"),a=t("./defines/PowerID"),s=t("./GameSceneBase"),c=t("./grid/state/concreteState/GridStateFail"),l=t("./grid/state/concreteState/GridStateLaunchGears"),p=t("./statistics/GameStatistics"),u=t("./userinterface/GameResultPanel/GameResultBasePanel"),y=t("./userinterface/GearBar"),h=t("./userinterface/LevelSelectorPanel"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastStarsCount=0,e}return n(e,t),e.prototype.canGenerateBomb=function(){return!0},e.prototype.canGenerateTrainSupply=function(){return!0},e.prototype.canCountScore=function(){return!0},e.prototype.canGetBonusFromLeftStep=function(){return!0},e.prototype.initMatchScene=function(e){t.prototype.initGameScene.call(this,e),this.phrasePrewarData(null),this.updateLevelBar(),this.updateStepBar(),this.updateTargetBar(),this.updateGearBar(),this.updateScore(),this.updateSupplyBar(),this.showTargetBanner();var o=h.default.create();this.node.addChild(o.node,1e3),this.reportStepInit()},e.prototype.phrasePrewarData=function(t){this.gearBar.setData(y.GearBarData.createWithData(null)),this.setEndUIData(u.GameEndPanelData.createWithData(null)),this.setEventTargets(p.EventCollectTargets.createWithData(null)),this.setHistoryHighscore(0)},e.prototype.gainPowerAmount=function(e,o){if(t.prototype.gainPowerAmount.call(this,e,o),e==a.PowerID.UsedSwap){var n=this.getPowerAmount(e);this.reportStepSwap(n)}},e.prototype.isFailed=function(){return t.prototype.isFailed.call(this)},e.prototype.beforePlayerOperated=function(){t.prototype.beforePlayerOperated.call(this);var e=this.getStarsCount();e>this._lastStarsCount&&(this._lastStarsCount=e)},e.prototype.onRecevieGiftBox=function(t){var e=t.items;for(var o in e){var n=Number(o),i=e[o];n!=r.GameCurrencyType.NoneType&&i>0&&this.setPrewarGearAmount(n,i)}this.setPowerAmount(a.PowerID.LaunchGears,1),this._grid.setCurrentState(l.default.create())},e.prototype.onCancleGiftBox=function(t){},e.prototype.updateUserInterface=function(){this.updateGearBar()},e.prototype.showCompleteBanner=function(){this.setCompleteWithLastStep(0==this.getPowerAmount(a.PowerID.AvailableSwap)),t.prototype.showCompleteBanner.call(this)},e.prototype.congratulation=function(){t.prototype.congratulation.call(this);var e=this.getCompleteReward();for(var o in e){var n=e[o],i=Number(o);this.setCollectedSupplyAmount(i,this.getCollectedSupplyAmount(i)+n)}this.updateSupplyBar(),this.updateScore(),this.hideAdBanner()},e.prototype.noMoreStep=function(){},e.prototype.onNoMoreStep=function(t){var e=t.items;if(e){for(var o in e){var n=e[o],i=Number(o);i!=r.GameCurrencyType.ExtraStep1&&i!=r.GameCurrencyType.ExtraStep2&&i!=r.GameCurrencyType.ExtraStep3&&i!=r.GameCurrencyType.ExtraStep5||this.setPrewarGearAmount(i,n)}this.setPowerAmount(a.PowerID.LaunchGears,1),this.updateUserInterface(),this._grid.resumeGame()}},e.prototype.stalemate=function(){},e.prototype.showReplayPrepareUI=function(){},e.prototype.backToMainScene=function(t,e){void 0===e&&(e=!1)},e.prototype.nextGame=function(){this.reportStepNextGame(),this.backToMainScene(!0)},e.prototype.quitGame=function(){this.swallowTouchLayer.active=!0,this.reportResult(s.MatchGameEndType.GiveUp,s.MatchGameEndRewardType.None,!1,this.onQuitGameRespone,this),this.hideAdBanner()},e.prototype.onQuitGameRespone=function(t){this.endGameWithReplay(!1)},e.prototype.replayGame=function(){this.swallowTouchLayer.active=!0,this.reportResult(s.MatchGameEndType.GiveUp,s.MatchGameEndRewardType.None,!1,this.onReplayGameRespone,this),this.hideAdBanner()},e.prototype.onReplayGameRespone=function(t){this.endGameWithReplay(!0)},e.prototype.gameOver=function(){this._grid.setCurrentState(c.default.create())},e.prototype.showGameFail=function(){},e.prototype.stalemateGame=function(){this.swallowTouchLayer.active=!0,this.endGameWithReplay(!0)},e.prototype.cheatGameWithLevel=function(t){this.initMatchScene(t)},e.prototype.onPauseTabbed=function(t){this.canPauseGame()},e.prototype.requestUseGear=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=null),o.call(n,null)},e.prototype.requestBuyMoreStep=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null)},e.prototype.reportResult=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null)},e.prototype.start=function(){this.initMatchScene(1)},e=i([f],e)}(s.default));o.default=d,cc._RF.pop()},{"../../define/GameCurrencyType":"GameCurrencyType","./GameSceneBase":"GameSceneBase","./defines/PowerID":"PowerID","./grid/state/concreteState/GridStateFail":"GridStateFail","./grid/state/concreteState/GridStateLaunchGears":"GridStateLaunchGears","./statistics/GameStatistics":"GameStatistics","./userinterface/GameResultPanel/GameResultBasePanel":"GameResultBasePanel","./userinterface/GearBar":"GearBar","./userinterface/LevelSelectorPanel":"LevelSelectorPanel"}],MathUtils:[function(t,e,o){"use strict";cc._RF.push(e,"985e2RbrxZKrL38LUKm4kP9","MathUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.MathUtils=void 0;var n=function(){function t(){}return t.round=function(t){var e=Math.pow(10,3);return Math.round(t*e)/e},t.shuffle=function(t){for(var e=t.length,o=0;o<e-1;o++){var n=Math.floor(Math.random()*(e-o)),i=t[n];t[n]=t[e-o-1],t[e-o-1]=i}return t},t}();o.MathUtils=n,cc._RF.pop()},{}],NoMoreStepBasePanel:[function(t,e,o){"use strict";cc._RF.push(e,"37a7ahYHadGkbWRml/m6kMx","NoMoreStepBasePanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../defines/CollectionID"),a=t("../../defines/ItemInfoManager"),s=t("../../GameSceneBase"),c=t("../../statistics/GameStatistics"),l=t("../TargetItem"),p=cc._decorator,u=p.ccclass,y=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.targetFrame=null,e.bottomFrame=null,e.closeButton=null,e._gameScene=null,e._report={},e._unilimitedItems={},e}return n(e,t),e.prototype.onOpen=function(t){this.initPanel(t)},e.prototype.initPanel=function(t){var e=cc.find("Canvas");e&&(this._gameScene=e.getComponent(s.default)),this._report=t.report,this.closeButton.on("touchend",this.onCloseButtonTabbed,this),this.initLeftTarget(),this.initLostUnlimitedItems()},e.prototype.initLostUnlimitedItems=function(){var t=a.default.getInstance().getUnlimitedItemIDs(),e=this._report.usedGear_GN;for(var o in e){var n=Number(o),i=e[o];-1!=t.indexOf(n)&&(this._unilimitedItems[n]=i)}},e.prototype.initLeftTarget=function(){if(this._report){switch(this._report.config.LevelType){case c.GameType.Order:case c.GameType.Popsicle:this.title.string="\u4f60\u8fd8\u9700\u8981\u6536\u96c6\uff1a";break;case c.GameType.Path:this.title.string="\u4f60\u81f3\u5c11\u8fd8\u9700\u8981\u6536\u96c6\uff1a";break;case c.GameType.Grass:this.title.string="\u8fd8\u6709\u683c\u5b50\u6ca1\u94fa\u6ee1\u8349\u5730\uff1a"}var t=this._report.leftTarget_TN;for(var e in t){var o=Number(e),n=t[e];if(o!=r.CollectionID.None){var i=n,a=o;o==r.CollectionID.ItemPuppy&&(a=r.CollectionID.ItemPawChromatic,i=this._gameScene.getPuppyLeftSteps());var s=l.default.create(a,!1);s.setAmount(i),this.targetFrame.addChild(s.node)}}}},e.prototype.onAnimationDone=function(){},e.prototype.onCloseButtonTabbed=function(t){this.giveUp()},e.prototype.getLevel=function(){return this._gameScene.getLevel()},e.prototype.giveUp=function(){},e.prototype.requestBuyMoreStep=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this._gameScene.requestBuyMoreStep(t,e,o,n,i)},i([y(cc.Label)],e.prototype,"title",void 0),i([y(cc.Node)],e.prototype,"targetFrame",void 0),i([y(cc.Node)],e.prototype,"bottomFrame",void 0),i([y(cc.Node)],e.prototype,"closeButton",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../GameSceneBase":"GameSceneBase","../../defines/CollectionID":"CollectionID","../../defines/ItemInfoManager":"ItemInfoManager","../../statistics/GameStatistics":"GameStatistics","../TargetItem":"TargetItem"}],OrbitTrack:[function(t,e,o){"use strict";cc._RF.push(e,"179b2VQq8lEJJUyigbGw8Eh","OrbitTrack");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../utils/GameMath"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startPos=null,e._emitterDirection=null,e._radius=0,e._targetPos=null,e._rotateHead=!1,e._contactPos=null,e._origin=null,e._startAngle=0,e._endAngle=0,e._isClockWise=!1,e._arcAngle=0,e._arcLength=0,e._stringLength=0,e.originalTarget=null,e.target=null,e}return n(e,t),e.createWithDuration=function(t,o,n,i,r,a){var s=new e;return s.initWithDuration(t,o,n,i,r,a),s},e.createWithSpeed=function(t,o,n,i,r,a){var s=new e;return s.initWithSpeed(t,o,n,i,r,a),s},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t),this.updateWithPercentage(0)},e.prototype.update=function(t){this.updateWithPercentage(t)},e.prototype.initWithDuration=function(t,e,o,n,i,r){return this._startPos=e,this._targetPos=o,this._emitterDirection=n,this._radius=i,this._rotateHead=r,this.initPath(),cc.ActionInterval.prototype.initWithDuration.call(this,t)},e.prototype.initWithSpeed=function(t,e,o,n,i,r){this._startPos=e,this._targetPos=o,this._emitterDirection=n,this._radius=i,this._rotateHead=r;var a=this.initPath(t);return cc.ActionInterval.prototype.initWithDuration.call(this,a)},e.prototype.initPath=function(t){void 0===t&&(t=0);var e=i.default.getAngle(this._startPos,this._targetPos,this._emitterDirection,!0),o=Math.PI/2,n=0;Math.abs(e)<.5?(o=-Math.PI/2,n=1):e>.5&&e<179.5?o=Math.PI/2:Math.abs(e-180)<.5?o=Math.PI/2:e>180.5&&e<360.5&&(o=-Math.PI/2),this._isClockWise=o<0;var r=this._emitterDirection.normalize().mul(this._radius),a=cc.v2(r.x*Math.cos(o)-r.y*Math.sin(o),r.x*Math.sin(o)+r.y*Math.cos(o));this._origin=this._startPos.add(a),this._contactPos=i.default.getContactPoint(this._origin,this._radius,this._targetPos,this._isClockWise),this._startAngle=i.default.getAngle(this._origin,this._startPos,cc.v2(1,0),!1),this._endAngle=i.default.getAngle(this._origin,this._contactPos,cc.v2(1,0),!1),this._isClockWise?this._endAngle=this._endAngle+-360*n:this._endAngle=this._endAngle+360*n,this._arcAngle=0,this._isClockWise?this._arcAngle=Math.floor(this._startAngle+360-this._endAngle)%360+360*n:this._arcAngle=Math.floor(this._endAngle+360-this._startAngle)%360+360*n,this._arcLength=2*Math.PI*this._radius*this._arcAngle/360;var s=this._contactPos.sub(this._targetPos);return this._stringLength=s.mag(),t>0?(this._arcLength+this._stringLength)/t:0},e.prototype.updateWithPercentage=function(t){var e=this._arcLength+this._stringLength,o=this._arcLength/e;if(t>o){var n=(t-o)/(1-o),r=(l=this._targetPos.sub(this._contactPos)).mag(),a=l.normalize().mul(n*r).add(this._contactPos);if(this.getTarget().setPosition(a),this._rotateHead){var s=i.default.getAngle(this._contactPos,this._targetPos,cc.v2(0,1),!0);(y=this.getTarget().getChildByName("puppet"))&&(y.angle=-s)}}else{var c=this._arcAngle*t/o,l=this._startPos.sub(this._origin),p=cc.Vec2.ZERO,u=c/180*Math.PI;this._isClockWise&&(u=-c/180*Math.PI),p=cc.v2(l.x*Math.cos(u)-l.y*Math.sin(u),l.x*Math.sin(u)+l.y*Math.cos(u));a=this._origin.add(p);if(this.getTarget().setPosition(a),this._rotateHead){s=i.default.getAngle(this._origin,a,cc.v2(0,1),!0);var y,h=0;h=this._isClockWise?s+90:s-90,(y=this.getTarget().getChildByName("puppet"))&&(y.angle=-h)}}},e}(cc.ActionInterval);o.default=r,cc._RF.pop()},{"../utils/GameMath":"GameMath"}],Pair:[function(t,e,o){"use strict";cc._RF.push(e,"dbf474WEqVJOrsPAF+heohV","Pair"),Object.defineProperty(o,"__esModule",{value:!0}),o.Pair=void 0;var n=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.toString=function(){return"Pair"+this.first.toString()+this.second.toString()},t}();o.Pair=n,cc._RF.pop()},{}],ParasiteBase:[function(t,e,o){"use strict";cc._RF.push(e,"d7d2637+7hEDpvAuABRuwHt","ParasiteBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ParasiteType=void 0;var r,a=t("../../defines/EntityID"),s=t("../EntityBase"),c=t("../../commond/GridCommand");(function(t){t[t.None=0]="None",t[t.Shackle=1]="Shackle",t[t.IceCube=2]="IceCube",t[t.Honey=3]="Honey",t[t.GiftBox=4]="GiftBox"})(r=o.ParasiteType||(o.ParasiteType={}));var l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parasiteType=r.None,e}return n(e,t),e.prototype.getParasiteType=function(){return this._parasiteType},e.prototype.hostCanDrop=function(){return this._hostCanDrop()},e.prototype._hostCanDrop=function(){return!1},e.prototype.hostCanSwap=function(){return this._hostCanSwap()},e.prototype._hostCanSwap=function(){return!1},e.prototype.hostCanMatch=function(){return this._hostCanMatch()},e.prototype._hostCanMatch=function(){return!1},e.prototype.canExcuteCommand=function(t){switch(t.type){case c.GridCommandType.BombClean:return this.canCleanByBomb(t.cleanColor);case c.GridCommandType.NeighborClean:return this.canCleanByNeighbour(t.cleanColor);case c.GridCommandType.MatchClean:return this.canCleanByMatch();case c.GridCommandType.TerminateClean:return this.canCleanByTerminate(t.cleanColor)}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case c.GridCommandType.BombClean:this.onClean(a.EntityCleanOption.create(a.EntityCleanType.Bomb,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case c.GridCommandType.NeighborClean:this.onClean(a.EntityCleanOption.create(a.EntityCleanType.Neighbor,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case c.GridCommandType.MatchClean:this.onClean(a.EntityCleanOption.create(a.EntityCleanType.Match,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case c.GridCommandType.TerminateClean:this.onClean(a.EntityCleanOption.create(a.EntityCleanType.Terminate,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass))}},e.prototype.removeFromGrid=function(){this.getGrid().removeParasiteAtLogicalPos(this.getLogicalPos())},e.prototype.canCleanByBomb=function(t){return!this.getImmuneDamage()&&this._canCleanByBomb(t)},e.prototype._canCleanByBomb=function(t){return!1},e.prototype.canCleanByTerminate=function(t){return this._canCleanByTerminate(t)},e.prototype._canCleanByTerminate=function(t){return this._canCleanByBomb(t)},e.prototype.canCleanByMatch=function(){return!this.getImmuneDamage()&&this._canCleanByMatch()},e.prototype._canCleanByMatch=function(){return!1},e.prototype.canCleanByNeighbour=function(t){return!this.getImmuneDamage()&&this._canCleanByNeighbour(t)},e.prototype._canCleanByNeighbour=function(t){return!1},e.prototype.onClean=function(t){this._onClean(t),this.setImmuneDamage(!0)},e.prototype._onClean=function(t){},e.prototype.initParasite=function(e,o,n,i){void 0===n&&(n=1),void 0===i&&(i=1),t.prototype.initEntity.call(this,e,a.EntityType.Parasite,n,i),this._parasiteType=o},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e=i([p],e)}(s.default));o.default=u,cc._RF.pop()},{"../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../EntityBase":"EntityBase"}],ParasiteFactory:[function(t,e,o){"use strict";cc._RF.push(e,"cb09dKLxG1LKLJSKp/ZE/pg","ParasiteFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./ParasiteIceCube"),a=t("./ParasiteHoney"),s=t("./ParasiteShackle"),c=t("./ParasiteGiftBox"),l=function(){function t(){}return t.generateParasiteWithEntityID=function(t,e){var o=null;switch(e){case n.EntityID.ParasiteShackleHp1:case n.EntityID.ParasiteShackleHp2:case n.EntityID.ParasiteShackleHp3:var i=e-n.EntityID.ParasiteShackleHp1+1;o=s.default.create(t,i);break;case n.EntityID.ParasiteIceCubeHp1:case n.EntityID.ParasiteIceCubeHp2:case n.EntityID.ParasiteIceCubeHp3:case n.EntityID.ParasiteIceCubeHp4:case n.EntityID.ParasiteIceCubeHp5:case n.EntityID.ParasiteIceCubeHp6:i=e-n.EntityID.ParasiteIceCubeHp1+1;o=r.default.create(t,i);break;case n.EntityID.ParasiteHoneyHp1:case n.EntityID.ParasiteHoneyHp2:i=e-n.EntityID.ParasiteHoneyHp1+1;o=a.default.create(t,i);break;case n.EntityID.ParasiteGiftBoxRed:case n.EntityID.ParasiteGiftBoxGreen:case n.EntityID.ParasiteGiftBoxBlue:case n.EntityID.ParasiteGiftBoxYellow:case n.EntityID.ParasiteGiftBoxOrange:case n.EntityID.ParasiteGiftBoxPurple:var l=e-n.EntityID.ParasiteGiftBoxRed+n.EntityColor.Red;o=c.default.create(t,l)}return o},t.generateParasiteWithKindID=function(t,e){var o=i.default.getInstance().getEntityIDFromKindID(e);return this.generateParasiteWithEntityID(t,o)},t}();o.default=l,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./ParasiteGiftBox":"ParasiteGiftBox","./ParasiteHoney":"ParasiteHoney","./ParasiteIceCube":"ParasiteIceCube","./ParasiteShackle":"ParasiteShackle"}],ParasiteGiftBox:[function(t,e,o){"use strict";cc._RF.push(e,"991e1dS6ltNnoVf5HUHHCa0","ParasiteGiftBox");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./ParasiteBase"),a=t("../EntityPrefabNodePool"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../flyer/FlyerAnimation"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../../event/EntityEventChanged"),h=t("../../defines/TMXConfigInfoKeys"),m=t("../EntityBase"),f=cc._decorator,d=f.ccclass,_=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.partsNode=[],e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e,o){void 0===o&&(o=1);var n=a.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/parasite/ParasiteGiftBox","ParasiteGiftBox");return n?(n.init(t,e,o),n):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getButterflyPriority=function(e,o){return e==this.getEntityColor()?t.prototype.getButterflyPriority.call(this,e,o):m.default.DEFAULT_MISSILE_PRIORITY},e.prototype.getCollectionID=function(){var t=s.CollectionID.None;switch(this.getEntityColor()){case c.EntityColor.Red:t=s.CollectionID.ParasiteGiftBoxRed;break;case c.EntityColor.Green:t=s.CollectionID.ParasiteGiftBoxGreen;break;case c.EntityColor.Blue:t=s.CollectionID.ParasiteGiftBoxBlue;break;case c.EntityColor.Yellow:t=s.CollectionID.ParasiteGiftBoxYellow;break;case c.EntityColor.Orange:t=s.CollectionID.ParasiteGiftBoxOrange;break;case c.EntityColor.Purple:t=s.CollectionID.ParasiteGiftBoxPurple}return t},e.prototype.getEntityID=function(){var t=c.EntityID.None;switch(this.getEntityColor()){case c.EntityColor.Red:t=c.EntityID.ParasiteGiftBoxRed;break;case c.EntityColor.Green:t=c.EntityID.ParasiteGiftBoxGreen;break;case c.EntityColor.Blue:t=c.EntityID.ParasiteGiftBoxBlue;break;case c.EntityColor.Yellow:t=c.EntityID.ParasiteGiftBoxYellow;break;case c.EntityColor.Orange:t=c.EntityID.ParasiteGiftBoxOrange;break;case c.EntityColor.Purple:t=c.EntityID.ParasiteGiftBoxPurple}return t},e.prototype.getScore=function(){return 200},e.prototype.dealWithConfigMap=function(e){if(t.prototype.dealWithConfigMap.call(this,e),e[h.default.CFG_GIFT_BOX_MAX]){var o=e[h.default.CFG_GIFT_BOX_MAX];this.setHealthPoint(o)}},e.prototype._hostCanDrop=function(){return!1},e.prototype._hostCanSwap=function(){return!1},e.prototype._hostCanMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return t==this.getEntityColor()},e.prototype._canCleanByNeighbour=function(t){return t==this.getEntityColor()},e.prototype._onClean=function(t){if(t.cleanColor==this.getEntityColor()){var e=this.getGrid();if(e.gainScoreWithEntity(this),this.getHealthPoint()<=1){for(var o=this.getLogicalPos(),n=this.getLogicalSize(),i=0;i<n.height;i++)for(var r=0;r<n.width;r++){var a=o.add(cc.v2(r,i)),s=e.getItemAtLogicalPos(a);s&&s.setImmuneDamage(!0)}if(!this.isTargetCollection()){var c=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(c,this.getLogicalPos()),c.node.setPosition(this.getPixelPos(this.getLogicalPos())),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("giftbox"))}this.setVisible(!1);var h=y.default.create(this);this.node.dispatchEvent(h),this.onCollected(),this.selfDestory()}else{h=y.default.create(this);this.node.dispatchEvent(h),this.selfHurt(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_0")),this.setHealthPoint(this.getHealthPoint()-1);c=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(c,this.getLogicalPos()),c.node.setPosition(this.getPixelPos(this.getLogicalPos())),c.node.zIndex=this.getTopZOrder()}}},e.prototype.init=function(e,o,n){t.prototype.initParasite.call(this,e,r.ParasiteType.GiftBox,2,2),this.setEntityColor(o),this.setHealthPoint(n)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.updatePuppet=function(){t.prototype.updatePuppet.call(this);for(var e=0;e<4;e++)this.partsNode[e].active=e<this._healthPoint-1},i([_([cc.Node])],e.prototype,"partsNode",void 0),e=o=i([d],e)}(r.default);o.default=g,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../defines/TMXConfigInfoKeys":"TMXConfigInfoKeys","../../event/EntityEventChanged":"EntityEventChanged","../EntityBase":"EntityBase","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./ParasiteBase":"ParasiteBase"}],ParasiteHoney:[function(t,e,o){"use strict";cc._RF.push(e,"25586wiLvpFoJ4BxXy1fP3/","ParasiteHoney");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./ParasiteBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../defines/PowerID"),l=t("../flyer/FlyerAnimation"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../../event/EntityEventChanged"),h=t("../EntityPrefabNodePool"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=h.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/parasite/ParasiteHoney","ParasiteHoney");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getCollectionID=function(){return a.CollectionID.ParasiteHoney},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.ParasiteHoneyHp1;break;case 2:t=s.EntityID.ParasiteHoneyHp2}return t},e.prototype.getPowerID=function(){return c.PowerID.HoneyResist},e.prototype.getScore=function(){return 100},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e.prototype.grow=function(){this.playAnimation("grow"),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("honeycreate"))},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(this.setVisible(!1),!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("honey"))}var n=y.default.create(this);this.node.dispatchEvent(n),this.onCollected(),this.selfDestory(!0)}else{this.setHealthPoint(this.getHealthPoint()-1),this.selfHurt(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_0")),this.getGrid().gainPower(this.getPowerID(),1);o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("honey")),o.node.zIndex=this.getTopZOrder()}},e.prototype.init=function(e,o){t.prototype.initParasite.call(this,e,r.ParasiteType.Honey),this.setHealthPoint(o)},e=o=i([f],e)}(r.default));o.default=d,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../defines/PowerID":"PowerID","../../event/EntityEventChanged":"EntityEventChanged","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./ParasiteBase":"ParasiteBase"}],ParasiteIceCube:[function(t,e,o){"use strict";cc._RF.push(e,"896f1PHivVKyL2t2sA2Z4oc","ParasiteIceCube");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./ParasiteBase"),a=t("../../defines/EntityID"),s=t("../../defines/CollectionID"),c=t("../flyer/FlyerAnimation"),l=t("../../../../base/IGame"),p=t("../../defines/IdentifierManager"),u=t("../../event/EntityEventChanged"),y=t("../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/parasite/ParasiteIceCube","ParasiteIceCube");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getEntityID=function(){var t=a.EntityID.None;switch(this.getHealthPoint()){case 1:t=a.EntityID.ParasiteIceCubeHp1;break;case 2:t=a.EntityID.ParasiteIceCubeHp2;break;case 3:t=a.EntityID.ParasiteIceCubeHp3;break;case 4:t=a.EntityID.ParasiteIceCubeHp4;break;case 5:t=a.EntityID.ParasiteIceCubeHp5;break;case 6:t=a.EntityID.ParasiteIceCubeHp6}return t},e.prototype.getCollectionID=function(){return s.CollectionID.ParasiteIceCube},e.prototype.getScore=function(){return 100},e.prototype.getButterflyPriority=function(t,e){return 1},e.prototype._hostCanDrop=function(){return!1},e.prototype._hostCanSwap=function(){return!1},e.prototype._hostCanMatch=function(){return!1},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByNeighbour=function(t){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==a.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(this.setVisible(!1),!this.isTargetCollection()){var o=c.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("icecube"))}var n=u.default.create(this);this.node.dispatchEvent(n),this.onCollected(),this.selfDestory()}else{this.selfHurt(),l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("eliminate_0")),this.setHealthPoint(this.getHealthPoint()-1);o=c.default.createAnimationWithType(this.getGrid(),c.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),o.node.zIndex=this.getTopZOrder()}},e.prototype.init=function(e,o){t.prototype.initParasite.call(this,e,r.ParasiteType.IceCube),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../event/EntityEventChanged":"EntityEventChanged","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./ParasiteBase":"ParasiteBase"}],ParasiteShackle:[function(t,e,o){"use strict";cc._RF.push(e,"fbd5eF+eXlP3aFSx+Wo0nrH","ParasiteShackle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./ParasiteBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../../event/EntityEventChanged"),l=t("../flyer/FlyerAnimation"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._healthPoint=0,e}var o;return n(e,t),o=e,e.create=function(t,e){var o=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/parasite/ParasiteShackle","ParasiteShackle");return o?(o.init(t,e),o):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getHealthPoint())},e.prototype.getCollectionID=function(){return a.CollectionID.ParasiteShackle},e.prototype.getEntityID=function(){var t=s.EntityID.None;switch(this.getHealthPoint()){case 1:t=s.EntityID.ParasiteShackleHp1;break;case 2:t=s.EntityID.ParasiteShackleHp2;break;case 3:t=s.EntityID.ParasiteShackleHp3}return t},e.prototype.getScore=function(){return 100},e.prototype._hostCanDrop=function(){return!1},e.prototype._hostCanSwap=function(){return!1},e.prototype._hostCanMatch=function(){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canCleanByMatch=function(){return!0},e.prototype._onClean=function(t){var e=1;if(t.cleanType==s.EntityCleanType.Terminate&&(e=this.getHealthPoint(),this.setHealthPoint(1)),this.getGrid().gainScoreWithEntity(this,e),this.getHealthPoint()<=1){if(!this.isTargetCollection()){var o=l.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("chain"))}this.setVisible(!1);var n=c.default.create(this);this.node.dispatchEvent(n),this.onCollected(),this.selfDestory()}else{n=c.default.create(this);this.node.dispatchEvent(n),this.selfHurt(),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("eliminate_0")),this.setHealthPoint(this.getHealthPoint()-1);o=l.default.createAnimationWithType(this.getGrid(),l.FlyerAnimationType.CommonHurt);this.getGrid().setFlyerAtLogicalPos(o,this.getLogicalPos()),o.node.zIndex=this.getTopZOrder()}},e.prototype.init=function(e,o){t.prototype.initParasite.call(this,e,r.ParasiteType.Shackle),this.setHealthPoint(o)},e.prototype.getHealthPoint=function(){return this._healthPoint},e.prototype.setHealthPoint=function(t){this._healthPoint=t,this.updatePuppet()},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../../event/EntityEventChanged":"EntityEventChanged","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./ParasiteBase":"ParasiteBase"}],PopsicleBase:[function(t,e,o){"use strict";cc._RF.push(e,"f40ebQ+O/JA3oakvqroFPrN","PopsicleBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PopsicleType=void 0;var r,a=t("../EntityBase"),s=t("../../commond/GridCommand"),c=t("../../grid/GridBase"),l=t("../../defines/EntityID"),p=t("../../../../extend/action/CurveToAction"),u=t("../../../../extend/utils/GameMath");(function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Line=2]="Line",t[t.Range=3]="Range"})(r=o.PopsicleType||(o.PopsicleType={}));var y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._popsicleType=r.None,e}return n(e,t),e.prototype.getPopsicleType=function(){return this._popsicleType},e.prototype._canBePopsicleClean=function(){for(var t=this.getOccupyArea(),e=this.getGrid(),o=0;o<t.height;o++)for(var n=0;n<t.width;n++){var i=t.origin.add(cc.v2(n,o));if(e.getFloorAtLogicalPos(i))return!1}return!0},e.prototype._onBePopsicleClean=function(){var t=this;this.removeFromGridAndAddToEffect(),this.node.zIndex=c.default.ZORDER_EFFECT,this.shiftToEffectLayer(),this.getGrid().addObstructs(this);var e=this.playAnimation("die");if(e){var o=this._puppet.angle;o=o>=0?-15:o<0?15:-15;var n=e.duration,i=cc.sequence(cc.rotateTo(.25*n,o).easing(cc.easeInOut(2)),cc.rotateTo(.25*n,.5*-o).easing(cc.easeInOut(2)),cc.rotateTo(.25*n,.25*o).easing(cc.easeInOut(2)),cc.rotateTo(.25*n,0).easing(cc.easeInOut(2)),cc.callFunc(function(){t.onDidClean()}));this.getPuppet().runAction(i)}},e.prototype.onDidClean=function(){var t=this;if(this.getGrid().isTargetCollectionID(this.getCollectionID())){var e=this.node.position,o=this.node.parent.convertToNodeSpaceAR(this.getGrid().getWorldPosForTarget(this.getCollectionID())),n=u.default.getDistance(e,cc.v2(o.x,o.y))/1e3,i=this.getLogicalSize(),r=cc.spawn(p.default.create(n,e,cc.v2(o.x,o.y)),cc.scaleTo(.5*n,.75/Math.min(i.width,i.height),.75/Math.max(i.width,i.height))),a=cc.callFunc(function(){t.getGrid().updateTargetBarUIWithDelta(t.getCollectionID(),-1),t.destoryWithRecycle()}),s=cc.sequence(r,a);this.runAction(s)}else this.selfDestory();this.getGrid().collectEntity(this),this.getGrid().removeObstructs(this)},e.prototype.canExcuteCommand=function(t){switch(t.type){case s.GridCommandType.PopsicleClean:return this._canBePopsicleClean()}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case s.GridCommandType.PopsicleClean:this._onBePopsicleClean()}},e.prototype.onCollected=function(){},e.prototype.initPopsicle=function(e,o,n,i){t.prototype.initEntity.call(this,e,l.EntityType.Popsicle,o,n),this._popsicleType=i},e=i([h],e)}(a.default));o.default=m,cc._RF.pop()},{"../../../../extend/action/CurveToAction":"CurveToAction","../../../../extend/utils/GameMath":"GameMath","../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../../grid/GridBase":"GridBase","../EntityBase":"EntityBase"}],PopsicleFactory:[function(t,e,o){"use strict";cc._RF.push(e,"c900dgP2ndKS6wmb56wMYxr","PopsicleFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./PopsicleNormal"),a=t("./PopsicleLine"),s=t("./PopsicleRange"),c=function(){function t(){}return t.generatePopsicleWithEntityID=function(t,e,o,i){var c=null;switch(i){case n.EntityID.PopsicleNormal:c=r.default.create(t,e,o);break;case n.EntityID.PopsicleLine:c=a.default.create(t,e,o);break;case n.EntityID.PopsicleBoom:c=s.default.create(t,e,o)}return c},t.generatePopsicleWithKindID=function(t,e,o,n){var r=i.default.getInstance().getEntityIDFromKindID(n);return this.generatePopsicleWithEntityID(t,e,o,r)},t}();o.default=c,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./PopsicleLine":"PopsicleLine","./PopsicleNormal":"PopsicleNormal","./PopsicleRange":"PopsicleRange"}],PopsicleLine:[function(t,e,o){"use strict";cc._RF.push(e,"7d1f1diCsxNDLusDybIFKmd","PopsicleLine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PopsicleBase"),a=t("../../defines/EntityID"),s=t("../../defines/CollectionID"),c=t("../../../../extend/utils/GameMath"),l=t("../../../../base/Pair"),p=t("../flyer/FlyerPopsicleLine"),u=t("../../../../base/IGame"),y=t("../../defines/IdentifierManager"),h=t("../EntityPrefabNodePool"),m=cc._decorator,f=m.ccclass,d=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getEntityInfoWithSize=function(t){var e="{"+t.width+", "+t.height+"}";return this.SizeToEntityInfoMap[e]},e.prototype.getCollectionID=function(){return s.CollectionID.PopsicleLine},e.prototype.getEntityID=function(){return a.EntityID.PopsicleLine},e.prototype.getScore=function(){var t=this.getLogicalSize();return 100*t.width*t.height},e.prototype.updatePopsicle=function(){t.prototype.updatePuppet.call(this);var e=0,n=o.getEntityInfoWithSize(this.getLogicalSize());n&&(n.NeedRotate&&(e=c.default.randomInt(0,100)<50?-90:90));this._puppet.angle=-e},e.prototype._onBePopsicleClean=function(){t.prototype._onBePopsicleClean.call(this),this.getGrid().gainScoreWithEntity(this);var e=[],o=this.getLogicalSize();2==o.width?(e.push(new l.Pair(cc.v2(1,0),!0)),e.push(new l.Pair(cc.v2(-1,0),!1))):2==o.height&&(e.push(new l.Pair(cc.v2(0,1),!0)),e.push(new l.Pair(cc.v2(0,-1),!1)));for(var n=this.getGrid(),i=0,r=e;i<r.length;i++){var a=r[i],s=p.default.create(n,this.getEntityColor(),!1,this.getLogicalPos(),a.first,a.second);n.setFlyerAtLogicalPos(s,this.getLogicalPos())}u.default.playAudio(y.default.getInstance().getMatchAudioFilePath("popsiclesline"))},e.prototype.init=function(e,o,n){t.prototype.initPopsicle.call(this,e,o,n,r.PopsicleType.Line),this.updatePopsicle()},e.create=function(t,e,o){var n=h.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/popsicle/PopsicleLine","PopsicleLine");return n?(n.init(t,e,o),n):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getLogicalSize().width,this.getLogicalSize().height)},e.prototype.start=function(){},e.SizeToEntityInfoMap={"{1, 2}":{EntityID:a.EntityID.PopsicleLine,NeedRotate:!1},"{2, 1}":{EntityID:a.EntityID.PopsicleLine,NeedRotate:!0}},e=o=i([f],e)}(r.default));o.default=d,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../base/Pair":"Pair","../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerPopsicleLine":"FlyerPopsicleLine","./PopsicleBase":"PopsicleBase"}],PopsicleNormal:[function(t,e,o){"use strict";cc._RF.push(e,"90137rYOp9EZZFTw62YsTN8","PopsicleNormal");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../base/IGame"),a=t("../../../../extend/utils/GameMath"),s=t("../../defines/CollectionID"),c=t("../../defines/EntityID"),l=t("../../defines/IdentifierManager"),p=t("../EntityPrefabNodePool"),u=t("./PopsicleBase"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getEntityInfoWithSize=function(t){var e="{"+t.width+", "+t.height+"}";return this.SizeToEntityInfoMap[e]},e.prototype.getCollectionID=function(){return s.CollectionID.PopsicleNormal},e.prototype.getEntityID=function(){var t=o.getEntityInfoWithSize(this.getLogicalSize());return t?t.EntityID:c.EntityID.None},e.prototype.getScore=function(){var t=this.getLogicalSize();return 50*t.width*t.height},e.prototype.updatePopsicle=function(){t.prototype.updatePuppet.call(this);var e=0,n=o.getEntityInfoWithSize(this.getLogicalSize());n&&(n.NeedRotate&&(e=a.default.randomInt(0,100)<50?-90:90));this._puppet.angle=-e},e.prototype._onBePopsicleClean=function(){t.prototype._onBePopsicleClean.call(this),this.getGrid().gainScoreWithEntity(this),r.default.playAudio(l.default.getInstance().getMatchAudioFilePath("popsicles"))},e.prototype.init=function(e,o,n){t.prototype.initPopsicle.call(this,e,o,n,u.PopsicleType.Normal),this.updatePopsicle()},e.create=function(t,e,o){var n=p.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/popsicle/PopsicleNormal","PopsicleNormal");return n?(n.init(t,e,o),n):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getLogicalSize().width,this.getLogicalSize().height)},e.prototype.start=function(){},e.SizeToEntityInfoMap={"{1, 1}":{EntityID:c.EntityID.PopsicleNormal_1x1,NeedRotate:!1},"{1, 2}":{EntityID:c.EntityID.PopsicleNormal_1x2,NeedRotate:!1},"{2, 1}":{EntityID:c.EntityID.PopsicleNormal_1x2,NeedRotate:!0},"{2, 2}":{EntityID:c.EntityID.PopsicleNormal_2x2,NeedRotate:!1},"{2, 3}":{EntityID:c.EntityID.PopsicleNormal_2x3,NeedRotate:!1},"{3, 2}":{EntityID:c.EntityID.PopsicleNormal_2x3,NeedRotate:!0},"{3, 3}":{EntityID:c.EntityID.PopsicleNormal_3x3,NeedRotate:!1},"{3, 4}":{EntityID:c.EntityID.PopsicleNormal_3x4,NeedRotate:!1},"{4, 3}":{EntityID:c.EntityID.PopsicleNormal_3x4,NeedRotate:!0}},e=o=i([h],e)}(u.default));o.default=m,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","./PopsicleBase":"PopsicleBase"}],PopsicleRange:[function(t,e,o){"use strict";cc._RF.push(e,"5dc7ast4hxAGb7kkT9erbse","PopsicleRange");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PopsicleBase"),a=t("../../defines/EntityID"),s=t("../../defines/CollectionID"),c=t("../../../../extend/utils/GameMath"),l=t("../flyer/FlyerPopsicleBomb"),p=t("../../../../base/IGame"),u=t("../../defines/IdentifierManager"),y=t("../EntityPrefabNodePool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getEntityInfoWithSize=function(t){var e="{"+t.width+", "+t.height+"}";return this.SizeToEntityInfoMap[e]},e.prototype.getCollectionID=function(){return s.CollectionID.PopsicleBoom},e.prototype.getEntityID=function(){var t=o.getEntityInfoWithSize(this.getLogicalSize());return t?t.EntityID:a.EntityID.None},e.prototype.getScore=function(){var t=this.getLogicalSize();return 100*t.width*t.height},e.prototype.updatePopsicle=function(){t.prototype.updatePuppet.call(this);var e=0,n=o.getEntityInfoWithSize(this.getLogicalSize());n&&(n.NeedRotate&&(e=c.default.randomInt(0,100)<50?-90:90));this._puppet.angle=-e},e.prototype._onBePopsicleClean=function(){t.prototype._onBePopsicleClean.call(this),this.getGrid().gainScoreWithEntity(this);var e=o.getEntityInfoWithSize(this.getLogicalSize()).ClearPosition,n=l.default.create(this.getGrid(),this.getEntityColor(),this.getLogicalPos(),!1,e);this.getGrid().setFlyerAtLogicalPos(n,this.getLogicalPos()),n.node.position=this.node.position,this.getLogicalSize().equals(cc.size(1,1))&&(n.node.scale=.666),p.default.playAudio(u.default.getInstance().getMatchAudioFilePath("popsiclesboom"))},e.prototype.init=function(e,o,n){t.prototype.initPopsicle.call(this,e,o,n,r.PopsicleType.Range),this.updatePopsicle()},e.create=function(t,e,o){var n=y.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/popsicle/PopsicleRange","PopsicleRange");return n?(n.init(t,e,o),n):null},e.prototype.clone=function(){return o.create(this.getGrid(),this.getLogicalSize().width,this.getLogicalSize().height)},e.prototype.start=function(){},e.SizeToEntityInfoMap={"{1, 1}":{EntityID:a.EntityID.PopsicleBoom_1x1,NeedRotate:!1,ClearPosition:[cc.v2(-1,-1),cc.v2(0,-1),cc.v2(1,-1),cc.v2(-1,0),cc.v2(0,0),cc.v2(1,0),cc.v2(-1,1),cc.v2(0,1),cc.v2(1,1)]},"{2, 2}":{EntityID:a.EntityID.PopsicleBoom_2x2,NeedRotate:!1,ClearPosition:[cc.v2(0,0),cc.v2(1,0),cc.v2(0,1),cc.v2(1,1),cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(-1,2),cc.v2(0,0),cc.v2(1,2),cc.v2(0,-1),cc.v2(1,-1),cc.v2(2,2),cc.v2(2,1),cc.v2(2,0),cc.v2(2,-1)]}},e=o=i([m],e)}(r.default));o.default=f,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../../../extend/utils/GameMath":"GameMath","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerPopsicleBomb":"FlyerPopsicleBomb","./PopsicleBase":"PopsicleBase"}],PowerID:[function(t,e,o){"use strict";cc._RF.push(e,"0d8c23hE59N07uQOIdXu4VC","PowerID"),Object.defineProperty(o,"__esModule",{value:!0}),o.PowerID=void 0,function(t){t[t.None=0]="None",t[t.PuppyVitality=10001]="PuppyVitality",t[t.HoneyResist=10002]="HoneyResist",t[t.DyeingItem=10101]="DyeingItem",t[t.SpreadHoney=10102]="SpreadHoney",t[t.ActivateBomb=10103]="ActivateBomb",t[t.ConveyerMove=10104]="ConveyerMove",t[t.AvailableSwap=10201]="AvailableSwap",t[t.UsedSwap=10202]="UsedSwap",t[t.PuppyMovedStep=10203]="PuppyMovedStep",t[t.MatchCombo=10301]="MatchCombo",t[t.LaunchGears=10302]="LaunchGears",t[t.LaunchResidentGears=10303]="LaunchResidentGears"}(o.PowerID||(o.PowerID={})),cc._RF.pop()},{}],PowerupItem:[function(t,e,o){"use strict";cc._RF.push(e,"677b6b9PblJgJ7IJtoNSR1+","PowerupItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../define/GameCurrencyType"),a=t("../defines/IdentifierManager"),s=t("../../../component/UISpriteExt"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.frame=null,e.unlimitedIcon=null,e._itemID=r.GameCurrencyType.NoneType,e}var o;return n(e,t),o=e,e.create=function(t){var e=cc.loader.getRes("match_scene/prefab/userInterface/PowerupItem",cc.Prefab);if(e){var n=cc.instantiate(e);if(n){var i=n.getComponent(o);if(i)return i.init(t),i}}return null},e.prototype.init=function(t){this.setItemID(t)},e.prototype.getItemID=function(){return this._itemID},e.prototype.setItemID=function(t){this._itemID=t;var e=a.default.getInstance().getItemInfoFromItemID(this._itemID);this.icon.src=e.frameName,this.unlimitedIcon.active=e.isUnlimited,e.isUnlimited?this.frame.src="texture/start_game/unrelease/start_game_btn_yuan2":this.frame.src="texture/start_game/unrelease/start_game_btn_yuan"},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){},i([p(s.default)],e.prototype,"icon",void 0),i([p(s.default)],e.prototype,"frame",void 0),i([p(cc.Node)],e.prototype,"unlimitedIcon",void 0),e=o=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../component/UISpriteExt":"UISpriteExt","../../../define/GameCurrencyType":"GameCurrencyType","../defines/IdentifierManager":"IdentifierManager"}],RectangleClipper:[function(t,e,o){"use strict";cc._RF.push(e,"82d386tqS9F9blT9sDLKyh8","RectangleClipper");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clipAreas=[],e}return n(e,t),e.prototype.setCropRectangles=function(t){this._clipAreas=t,this._updateGraphics()},e.prototype._updateGraphics=function(){var t=this._graphics;if(t){t.clear(!1);for(var e=0;e<this._clipAreas.length;e++){var o=this._clipAreas[e];t.rect(o.x,o.y,o.width,o.height)}cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?t.stroke():t.fill()}},e=i([a],e)}(cc.Mask));o.default=s,cc._RF.pop()},{}],RugBase:[function(t,e,o){"use strict";cc._RF.push(e,"c98ac+Pb0JD3ZADU8hS9tSM","RugBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RugBase=o.RugType=void 0;var r=t("../EntityBase"),a=t("../../commond/GridCommand"),s=t("../../defines/EntityID");(function(t){t[t.Jam=0]="Jam"})(o.RugType||(o.RugType={}));var c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=null,e}return n(e,t),e.prototype.removeFromGrid=function(){this.getGrid().removeRugAtLogicalPos(this.getLogicalPos())},e.prototype.getType=function(){return this._type},e.prototype.canExcuteCommand=function(t){switch(t.type){case a.GridCommandType.BombClean:return this.canCleanByBomb(t.cleanColor);case a.GridCommandType.FloorClean:return this.canBeFloorClean();case a.GridCommandType.TerminateClean:return this.canCleanByTerminate(t.cleanColor)}return!1},e.prototype.excuteCommand=function(t){if(this.canExcuteCommand(t))switch(t.type){case a.GridCommandType.BombClean:this.onClean(new s.EntityCleanOption(s.EntityCleanType.Bomb,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case a.GridCommandType.FloorClean:this.onClean(new s.EntityCleanOption(s.EntityCleanType.Floor,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass));break;case a.GridCommandType.TerminateClean:this.onClean(new s.EntityCleanOption(s.EntityCleanType.Terminate,t.cleanRoot,t.cleanColor,t.createBombType,t.hitNeighbour,t.hitFloor,t.layoutGrass))}},e.prototype.canCleanByTerminate=function(t){return this._canCleanByTerminate(t)},e.prototype.canCleanByBomb=function(t){return!this.getImmuneDamage()&&this._canCleanByBomb(t)},e.prototype.canBeFloorClean=function(){if(!this.getImmuneDamage())return this._canBeFloorClean()},e.prototype.onClean=function(t){this._onClean(t),this.setImmuneDamage(!0)},e.prototype._canCleanByTerminate=function(t){return!1},e.prototype._canCleanByBomb=function(t){return!1},e.prototype._canBeFloorClean=function(){return!1},e.prototype._onClean=function(t){},e.prototype.initRug=function(e,o){t.prototype.initEntity.call(this,e,s.EntityType.Rug,1,1),this._type=o},e=i([l],e)}(r.default));o.RugBase=p,cc._RF.pop()},{"../../commond/GridCommand":"GridCommand","../../defines/EntityID":"EntityID","../EntityBase":"EntityBase"}],RugFactory:[function(t,e,o){"use strict";cc._RF.push(e,"428d95GSQVFlIG4dZfXeM2a","RugFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../defines/EntityID"),i=t("../../defines/IdentifierManager"),r=t("./RugJam"),a=function(){function t(){}return t.generatePolishWithEntityID=function(t,e){var o=null;switch(e){case n.EntityID.RugJam:o=r.default.create(t)}return o},t.generatePolishWithKindID=function(t,e){var o=i.default.getInstance().getEntityIDFromKindID(e);return this.generatePolishWithEntityID(t,o)},t}();o.default=a,cc._RF.pop()},{"../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","./RugJam":"RugJam"}],RugJam:[function(t,e,o){"use strict";cc._RF.push(e,"9bfb3FWoQNAjaGHOCRK49gS","RugJam");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./RugBase"),a=t("../../defines/CollectionID"),s=t("../../defines/EntityID"),c=t("../flyer/FlyerAnimation"),l=t("../../../../base/IGame"),p=t("../../defines/IdentifierManager"),u=t("../EntityPrefabNodePool"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){var e=u.default.getInstance().getPrefabNodeWithFileNameAndClassName("match_scene/prefab/entity/rug/RugJam","RugJam");return e?(e.init(t),e):null},e.prototype.clone=function(){return o.create(this.getGrid())},e.prototype.getCollectionID=function(){return a.CollectionID.RugJam},e.prototype.getEntityID=function(){return s.EntityID.RugJam},e.prototype.getScore=function(){return 100},e.prototype.getButterflyPriority=function(e,o){return this.getGrid().isTargetCollectionID(a.CollectionID.RugJam)?1:t.prototype.getButterflyPriority.call(this,e,o)},e.prototype._canCleanByTerminate=function(t){return!0},e.prototype._canCleanByBomb=function(t){return!0},e.prototype._canBeFloorClean=function(){return!0},e.prototype._onClean=function(t){if(this.getGrid().gainScoreWithEntity(this),!this.isTargetCollection()){var e=c.default.createDieAnimation(this.getGrid(),this.getEntityID());this.getGrid().setFlyerAtLogicalPos(e,this.getLogicalPos()),l.default.playAudio(p.default.getInstance().getMatchAudioFilePath("jam"))}this.setVisible(!1),this.onCollected(),this.selfDestory(!0)},e.prototype.grow=function(){this.playAnimation("grow")},e.prototype.init=function(e){t.prototype.initRug.call(this,e,r.RugType.Jam)},e=o=i([h],e)}(r.RugBase));o.default=m,cc._RF.pop()},{"../../../../base/IGame":"IGame","../../defines/CollectionID":"CollectionID","../../defines/EntityID":"EntityID","../../defines/IdentifierManager":"IdentifierManager","../EntityPrefabNodePool":"EntityPrefabNodePool","../flyer/FlyerAnimation":"FlyerAnimation","./RugBase":"RugBase"}],ScoreBar:[function(t,e,o){"use strict";cc._RF.push(e,"2556aN17LhENoC3iiVSOFb4","ScoreBar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../GameSceneBase"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.pointer=null,e.pointerHead=null,e.scoreLabel=null,e.stars=[],e._currentScore=0,e._score=0,e._completeScore=0,e._gameScene=null,e._starScores=[35600,49100,60600,66350],e._starProgress=[.444444444444444,.650793650793651,.873015873015873,1],e._rotateStart=103,e._rotateEnd=-10,e._lastStarCount=0,e._lockScore=!1,e}return n(e,t),e.prototype.getIsLockScore=function(){return this._lockScore},e.prototype.setIsLockScore=function(t){this._lockScore=t},e.prototype.getScore=function(){return this._score},e.prototype.setScore=function(t){this._score=Math.min(this._gameScene.getTotalScore(),t)},e.prototype.setCurrentScore=function(t){t>this._score&&(t=this._score),this._currentScore=t,this.scoreLabel.string=this._currentScore.toString();for(var e=0,o=0,n=0,i=0,r=0,a=this.stars;r<a.length;r++){var s=a[r];this.setStarState(s,!0)}for(var c=0;c<this._starScores.length;c++){if(this._currentScore<=this._starScores[c]){n=this._starScores[c],i=this._starProgress[c],c<this.stars.length&&(this._currentScore>=n?this.setStarState(this.stars[c],!1):this.setStarState(this.stars[c],!0));break}c<this.stars.length&&this.setStarState(this.stars[c],!1),e=this._starScores[c],o=this._starProgress[c]}0==n&&(n=this._starScores[this._starScores.length-1],i=this._starProgress[this._starProgress.length-1],e=this._starScores[this._starScores.length-2],o=this._starProgress[this._starProgress.length-2]);var l=(this._currentScore-e)/(n-e);l=Math.min((i-o)*l+o,1),this.progressBar.progress=l,this.pointer.angle=-((this._rotateEnd-this._rotateStart)*l+this._rotateStart)},e.prototype.setStarState=function(t,e){t.spriteFrame=e?cc.loader.getRes("match_scene/texture/userInterface/match_star_slot",cc.SpriteFrame):cc.loader.getRes("match_scene/texture/userInterface/match_star_small",cc.SpriteFrame)},e.prototype.getCompleteScore=function(){return this._completeScore},e.prototype.setCompleteScore=function(t){this._completeScore=t},e.prototype.updateScore=function(){if(this._gameScene){var t=this._gameScene.getStarScores();this._starScores.length=0;for(var e=0,o=t;e<o.length;e++){var n=o[e];this._starScores.push(n)}for(;this._starScores.length<4;){var i=this._starScores[this._starScores.length-1],r=.5*(i-this._starScores[this._starScores.length-2]);this._starScores.push(r+i)}var a=this._gameScene.getTotalScore();this.setScore(a),this.setCurrentScore(a);var s=this._gameScene.getCompleteScore();this.setCompleteScore(s)}},e.prototype.gainScore=function(t){this._lockScore||this.setScore(this.getScore()+t)},e.prototype.getWorldPos=function(){return this.pointerHead.parent.convertToWorldSpaceAR(this.pointerHead.getPosition())},e.prototype.getWorldPosForStar=function(t){if(t<this.stars.length){var e=this.stars[t];return e.node.parent.convertToWorldSpaceAR(e.node.getPosition())}return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},e.prototype.onLoad=function(){var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(r.default))},e.prototype.start=function(){},e.prototype.update=function(t){var e=this._score-this._currentScore;e>0&&(e=Math.max(Math.floor(e/5),1),this.setCurrentScore(Math.min(this._currentScore+e,this._score)))},i([c(cc.ProgressBar)],e.prototype,"progressBar",void 0),i([c(cc.Node)],e.prototype,"pointer",void 0),i([c(cc.Node)],e.prototype,"pointerHead",void 0),i([c(cc.Label)],e.prototype,"scoreLabel",void 0),i([c([cc.Sprite])],e.prototype,"stars",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../GameSceneBase":"GameSceneBase"}],ShinningStar:[function(t,e,o){"use strict";cc._RF.push(e,"0be45upoYhPxpFwju4d3plG","ShinningStar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(){var t=cc.loader.getRes("match_scene/prefab/userInterface/ShinningStar",cc.Prefab);if(t){var e=cc.instantiate(t);if(e){var n=e.getComponent(o);if(n)return n}}return null},e.prototype.appear=function(){var t=this.getComponent(cc.Animation);return t?t.play("appear"):null},e.prototype.fly=function(){var t=this.getComponent(cc.Animation);return t?t.play("fly"):null},e.prototype.start=function(){},e=o=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],StarAndScoreFrame:[function(t,e,o){"use strict";cc._RF.push(e,"f4e7bPLDAlOXZLq7xW81VRC","StarAndScoreFrame");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.StarAndScoreFrameData=void 0;var r=function(){function t(){this.starCount=0,this.score=0,this.highscore=0}return t.create=function(e,o,n){var i=new t;return i.starCount=e,i.score=o,i.highscore=n,i},t}();o.StarAndScoreFrameData=r;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._starCount=0,e._score=0,e._highscore=0,e.starsNode=[],e.scoreLabel=null,e.highscoreLabel=null,e}return n(e,t),e.prototype.getStarCount=function(){return this._starCount},e.prototype.setStarCount=function(t){this._starCount=t;for(var e=0;e<this.starsNode.length;e++){this.starsNode[e].active=e<this._starCount}},e.prototype.getScore=function(){return this._score},e.prototype.setScore=function(t){this._score=t,this.scoreLabel.string=this._score.toString()},e.prototype.getHighscore=function(){return this._highscore},e.prototype.setHighscore=function(t){this._highscore=t,this.highscoreLabel.string=this._highscore.toString()},e.prototype.setData=function(t){this.setStarCount(t.starCount),this.setScore(t.score),this.setHighscore(t.highscore)},e.prototype.appear=function(){var t=this,e=this.getComponent(cc.Animation);if(e){var o=e.play("appear");if(o){var n=cc.delayTime(o.duration),i=cc.callFunc(function(){t.shine()});this.node.runAction(cc.sequence(n,i))}}},e.prototype.shine=function(){var t=this.getComponent(cc.Animation);t&&t.play("shine")},e.prototype.start=function(){},i([c([cc.Node])],e.prototype,"starsNode",void 0),i([c(cc.Label)],e.prototype,"scoreLabel",void 0),i([c(cc.Label)],e.prototype,"highscoreLabel",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],StateBase:[function(t,e,o){"use strict";cc._RF.push(e,"9ed9eMaM/NFiaLBvO1T81HT","StateBase"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],StateMachineBase:[function(t,e,o){"use strict";cc._RF.push(e,"61efc+MPOFAba7xPqktoa3y","StateMachineBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._owner=null,this._currentState=null,this._globalState=null,this._owner=t}return t.prototype.setCurrentState=function(t){this._currentState!==t&&(this._currentState&&this._currentState.exit(this._owner),this._currentState=t,this._currentState&&this._currentState.enter(this._owner))},t.prototype.getCurrentState=function(){return this._currentState},t.prototype.setGlobalState=function(t){this._globalState!==t&&(this._globalState&&this._globalState.exit(this._owner),this._globalState=t,this._globalState&&this._globalState.enter(this._owner))},t.prototype.getGlobalState=function(){return this._globalState},t.prototype.update=function(t){this._currentState&&this._currentState.update(this._owner,t),this._globalState&&this._globalState.update(this._owner,t)},t}();o.default=n,cc._RF.pop()},{}],StepBar:[function(t,e,o){"use strict";cc._RF.push(e,"4f2b4DLb1RESaYZOVpmg6N8","StepBar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../GameSceneBase"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e._gameScene=null,e._amount=0,e}return n(e,t),e.prototype.getAmount=function(){return this._amount},e.prototype.setAmount=function(t){var e=this._amount;if(this._amount=t,e<this._amount){this.label.node.stopActionByTag(1001),this.label.node.scale=1;var o=cc.sequence(cc.scaleTo(.1,1.33).easing(cc.easeIn(2)),cc.scaleTo(.3,1).easing(cc.easeOut(2)));o.setTag(1001),this.label.node.runAction(o)}else this.label.node.scale=1;if(this.label.string=this._amount.toString(),this._amount<=5){if(!this.label.node.getActionByTag(1)){var n=cc.sequence(cc.scaleTo(.25,.9).easing(cc.easeOut(2)),cc.scaleTo(.25,.95).easing(cc.easeIn(2)),cc.scaleTo(.25,1).easing(cc.easeOut(2)),cc.scaleTo(.25,.95).easing(cc.easeIn(2))).repeatForever();n.setTag(1),this.label.node.runAction(n),this.label.node.color=cc.color(255,130,98,255)}}else this.label.node.stopActionByTag(1),this.label.node.setScale(1),this.label.node.color=cc.Color.WHITE},e.prototype.getWorldPos=function(){return this.label.node.parent.convertToWorldSpaceAR(this.label.node.getPosition())},e.prototype.onLoad=function(){var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(r.default))},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.label=null,this._gameScene=null},i([c(cc.Label)],e.prototype,"label",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../GameSceneBase":"GameSceneBase"}],StringUtil:[function(t,e,o){"use strict";cc._RF.push(e,"fdfcb1/QbZEZYkUrIWhDug3","StringUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.StringUtil=void 0;var n=function(){function t(){}return t.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.adjustFontByLength=function(t,e){if(this.getStringLength(t)<=e)return t;for(var o=t.length-2;o>1;o--)if(this.getStringLength(t.substring(0,o))<=e-1)return t.substring(0,o)+"..."},t.sliceStringByLength=function(t,e){for(var o=t.split(""),n=0,i="",r=0;r<t.length;r++){var a=o[r];if(i+=a,this.isChinese(a)?n+=2:n+=1,n>=e)break}return i},t.getStringLength=function(t){for(var e=t.split(""),o=0,n=0;n<e.length;n++){var i=e[n];this.isChinese(i)?o+=2:this.isMW(i)?o+=2:o+=1}return o},t.getStringLength_CH=function(t){for(var e=t.split(""),o=0,n=0;n<e.length;n++){var i=e[n];this.isChinese(i)?o+=2:o+=1}return o},t.isChinese=function(t){return!!/^[\u4E00-\u9FA5]+$/.test(t)},t.getClassName=function(t){var e=t.toString();return/function\s*(\w*)/gi.exec(e)[1]},t.isMW=function(t){return!!/^[MW]+$/.test(t)},t.replaceByPos=function(t,e,o){return e>t.length?t:t.substr(0,e-1)+o+t.substring(e,t.length)},t.format=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=t;if(e.length<1)return n;for(var i in e){var r=e[i];void 0!=r&&(n=n.replace("{"+i+"}",r))}return n},t.contain=function(t,e){return t.indexOf(e)>=0},t.fill=function(t,e,o){for(void 0===o&&(o="0");t.length<e;)t=o+t;return t},t.saleParseJson=function(t){try{var e=JSON.parse(t);if("object"==typeof e)return e}catch(t){}return null},t}();o.StringUtil=n,cc._RF.pop()},{}],TMXConfigInfoKeys:[function(t,e,o){"use strict";cc._RF.push(e,"4cd1ehZDOJIWIhf9QnBbpYL","TMXConfigInfoKeys"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.CELLS_LAYER_KEY="Cells",t.CONVEYERS_LAYER_KEY="Conveyers",t.POPSICLES_LAYER_KEY="Popsicles",t.FLOORS_LAYER_KEY="Floors",t.JAM_LAYER_KEY="Jam",t.ITEMS_LAYER_KEY="Items",t.PARASITES_LAYER_KEY="Parasites",t.MARKS_LAYER_KEY="Marks",t.CFG_DROP_KEY_IS_TOP="isTop",t.CFG_DROP_KEY_TYPE="dropType",t.CFG_DROP_VALUE_TYPE_DEFAULT="default",t.CFG_DROP_VALUE_TYPE_NOT="not",t.CFG_DROP_VALUE_TYPE_PROB="prob",t.CFG_DROP_VALUE_TYPE_LIST="list",t.CFG_DROP_KEY_BOX="dropBox",t.CFG_DROP_KEY_PROB="dropProb",t.CFG_DROP_KEY_NUM="dropNum",t.CFG_POSTAL_VEC="postal",t.CFG_NEXT_MAP_ID="nextMap",t.CFG_POPSICLE_KEY_TYPE="type",t.CFG_POPSICLE_VALUE_NORMAL="popsicle",t.CFG_POPSICLE_VALUE_LINE="popsiclesLine",t.CFG_POPSICLE_VALUE_BOOM="popsiclesBoom",t.CFG_MATIC_CRYSTAL_ATK_POINT="atkPoint",t.CFG_MATIC_CRYSTAL_OUTPUT="output",t.CFG_MATIC_CRYSTAL_NUM="num",t.CFG_MATIC_CRYSTAL_MAX="max",t.CFG_MATIC_CRYSTAL_STATUS="status",t.CFG_FIREWORM_BOTTLE_MAX="max",t.CFG_WATERMELON_MAX="max",t.CFG_CONVEYER_POSTAL_KEY_TYPE="conveyer",t.CFG_CONVEYER_POSTAL_VALUE_KEY="postal",t.CFG_WORMHOLE_KEY_TYPE="wormholeType",t.CFG_WORMHOLE_VALUE_NONE="none",t.CFG_WORMHOLE_VALUE_ENTRANCE="entrance",t.CFG_WORMHOLE_VALUE_EXIT="exit",t.CFG_WORMHOLE_POSTAL_KEY_TYPE="postal",t.CFG_WORM_HOLE_ENTRANCE_KEY_TYPE="wormHoleEntrance",t.CFG_WORM_HOLE_ENTRANCE_VALUE_DEFAULT="default",t.CFG_WORM_HOLE_EXIT_KEY_TYPE="wormHoleExit",t.CFG_WORM_HOLE_EXIT_VALUE_DEFAULT="default",t.CFG_MOVABLE_PLATE_PATH_KEY_TYPE="path",t.CFG_MOVABLE_PLATE_PATH_MOVE_TYPE="move",t.CFG_MOVABLE_PLATE_PATH_STEP_TYPE="step",t.CFG_MOVABLE_PLATE_PATH_FIRST_MOVE_TYPE="firstMove",t.CFG_MOVABLE_PLATE_PATH_FIRST_STEP_TYPE="firstStep",t.CFG_MARK_BONE_COLLECTOR_KEY_TYPE="boneCollectorType",t.CFG_MARK_BONE_COLLECTOR_VALUE_DEFAULT="default",t.CFG_DROP_MACHINE_KEY_TYPE="dropMachine",t.CFG_DROP_MACHINE_VALUE_DEFAULT="default",t.CFG_DROP_MACHINE_SHOW_KEY_TYPE="show",t.CFG_HONEY_COMB_OUTPUT="output",t.CFG_MOWER_CHARGE_TARGET="collection",t.CFG_MOWER_CHARGE_COUNT="num",t.CFG_MOWER_CHARGE_PRIORITY="priority",t.CFG_FIREWORK_ATTACKED_PRIORITY="atkPointF",t.CFG_MISSILE_ATTACKED_PRIORITY="atkPointR",t.CFG_GIFT_BOX_MAX="max",t}();o.default=n,cc._RF.pop()},{}],TMXJsonPhraser:[function(t,e,o){"use strict";cc._RF.push(e,"c7db8aQmw9Ai7gbJBaDfFbi","TMXJsonPhraser"),Object.defineProperty(o,"__esModule",{value:!0}),o.TMXJsonObjectInfo=void 0;var n=t("../../config/CFGTripleMapTileset"),i=t("./GameMath"),r=function(){return function(){this.gid=0,this.id=0,this.nane="",this.type="",this.rect=null,this.properties={},this.path=[]}}();o.TMXJsonObjectInfo=r;var a=function(){function t(t){this._mapSize=null,this._tileSize=null,this._tileLayers={},this._objectLayers={},this._tileProperties={},this.initMapInfo(t),this.initLayers(t),this.initTileProperties(t)}return t.create=function(e){return new t(e)},t.prototype.getMapSize=function(){return this._mapSize},t.prototype.getTileSize=function(){return this._tileSize},t.prototype.getTileLayerWithName=function(t){return this._tileLayers[t]?this._tileLayers[t]:null},t.prototype.getObjectLayerWithName=function(t){return this._objectLayers[t]?this._objectLayers[t]:null},t.prototype.getObjectInfos=function(t,e){var o=[],n=this.getObjectLayerWithName(t);if(n)for(var r=cc.rect(e.x*this._tileSize.width+1,e.y*this._tileSize.height+1,this._tileSize.width-2,this._tileSize.height-2),a=0,s=n;a<s.length;a++){var c=s[a];i.default.rectIntersectsRect(c.rect,r)&&o.push(c)}return o},t.prototype.getPropertieFromGID=function(t){return this._tileProperties[t]?this._tileProperties[t]:null},t.prototype.initMapInfo=function(t){t.hasOwnProperty("width")&&t.hasOwnProperty("height")&&t.hasOwnProperty("tilewidth")&&t.hasOwnProperty("tilewidth")?(this._mapSize=cc.size(t.width,t.height),this._tileSize=cc.size(t.tilewidth,t.tilewidth)):cc.error("initMapInfo error")},t.prototype.initLayers=function(t){if(this._tileLayers={},t.hasOwnProperty("layers")){var e=t.layers;for(var o in e){var n=e[o],i=n.type;if("tilelayer"==i){for(var a=[],s=0,c=u=n.data;s<c.length;s++){var l=c[s];a.push(l)}var p=n.name;this._tileLayers[p]=a}else if("objectgroup"==i){a=[];var u=n.objects;for(var y in u){var h=u[y],m=new r;if(m.id=h.id,m.nane=h.name,m.type=h.type,m.rect=cc.rect(h.x,h.y,h.width,h.height),m.gid=0,h.hasOwnProperty("gid")&&(m.gid=h.gid,m.rect.y=m.rect.y-m.rect.height),h.hasOwnProperty("properties")&&h.hasOwnProperty("propertytypes")){var f=h.properties;for(var d in f){var _=f[d];m.properties[d]=_}}if(h.hasOwnProperty("polyline")){var g=m.rect.origin,I=(this._tileSize,h.polyline);for(var C in I){var P=I[C];m.path.push(g.add(cc.v2(P.x,P.y)))}}a.push(m)}p=n.name;this._objectLayers[p]=a}}}else cc.error("No Layers")},t.prototype.initTileProperties=function(t){this._tileProperties={};for(var e=0,o=t.tilesets;e<o.length;e++){var n=o[e],i=n.firstgid;if(n.hasOwnProperty("source")){var r,a=n.source,s=a.lastIndexOf("/"),c=a.lastIndexOf(".");r=a.substr(s+1,c-s-1);var l=this.getTilesetJsonString(r),p=this.getTileProperties(l,i);for(var u in p)this._tileProperties[u]=p[u]}else{var y=n.tilecount;if(!n.hasOwnProperty("tileproperties"))continue;for(var h=n.tileproperties,m=0;m<y;m++){u=m.toString();if(h.hasOwnProperty(u)){var f=h[u];this._tileProperties[i+m]=f}}}}},t.prototype.getTilesetJsonString=function(t){var e="",o=(new n.CFGTripleMapTileset).getTilesetByName(t);return o&&(e=JSON.parse(o.Properties)),e},t.prototype.getTileProperties=function(t,e){var o={};if(t.hasOwnProperty("tileproperties")){var n=0;t.hasOwnProperty("tilecount")&&(n=t.tilecount);for(var i=t.tileproperties,r=0;r<n;r++){var a=r.toString();if(i.hasOwnProperty(a)){var s=i[a];o[e+r]=s}}}return o},t}();o.default=a,cc._RF.pop()},{"../../config/CFGTripleMapTileset":"CFGTripleMapTileset","./GameMath":"GameMath"}],TargetBanner:[function(t,e,o){"use strict";cc._RF.push(e,"18611AsG21HdLrEpbca9/Oh","TargetBanner");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../extend/action/CurveToAction"),a=t("../GameSceneBase"),s=t("./TargetItem"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskView=null,e.title=null,e.targetFrame=null,e._displayDuraion=0,e._gameScene=null,e._targetItems=[],e}var o;return n(e,t),o=e,e.create=function(t,e){var n=cc.loader.getRes("match_scene/prefab/userInterface/TargetBanner",cc.Prefab);if(n){var i=cc.instantiate(n);if(i){var r=i.getComponent(o);return r&&r.init(t,e),r}}},e.prototype.init=function(t,e){for(var o in this.title.string="\u7b2c"+t.toString()+"\u5173",e){var n=e[o],i=Number(o);if(i){var r=n,c=s.default.create(i);c.setAmount(r,!1),this.targetFrame.addChild(c.node),this._targetItems.push(c)}}var l=cc.find("Canvas");l&&(this._gameScene=l.getComponent(a.default))},e.prototype.start=function(){this.node.getComponent(cc.Animation).play("appear")},e.prototype.didAppear=function(){this._displayDuraion=1.5,this._gameScene.createGrid(),this.maskView.on("touchstart",this.onTouchStart,this)},e.prototype.update=function(t){t*=cc.director.getScheduler().getTimeScale(),this._displayDuraion>0&&(this._displayDuraion-=t,this._displayDuraion<=0&&this.onDisappear())},e.prototype.onDestroy=function(){this.maskView=null,this.title=null,this.targetFrame=null,this._gameScene=null,this._targetItems=null},e.prototype.didDisappear=function(){this._gameScene.runGame(),this.node.destroy()},e.prototype.onTouchStart=function(t){this._displayDuraion>0&&(this._displayDuraion=0,this.onDisappear())},e.prototype.onDisappear=function(){var t=this,e=function(e){var n=o._targetItems[e];if(o._gameScene){var i=cc.instantiate(n.node).getComponent("TargetItem");i.node.parent=o._gameScene.node,i.node.zIndex=o.node.zIndex+1;var a=n.node.parent.convertToWorldSpaceAR(n.node.position),s=i.node.parent.convertToNodeSpaceAR(a);i.node.position=s,n.hideIco(),i.hideFrame(!1);var c=o._gameScene.targetBar.getItemWithCollectionID(n.getCollectionID());c.hideIco();var l=o._gameScene.getWorldPosForTarget(n.getCollectionID()),p=i.node.parent.convertToNodeSpaceAR(l),u=cc.sequence(cc.spawn(cc.scaleTo(.3,1.2,.8),cc.moveBy(.3,cc.v2(0,-30))),cc.spawn(cc.scaleTo(.2,1,1),r.default.createNotRandom(.8,cc.v2(s.x,s.y-30),p)),cc.sequence(cc.delayTime(0),cc.callFunc(function(){c.showIco(),c.node.getComponent(cc.Animation).play("bling"),i.node.active=!1,i.node.destroy()})));i.node.runAction(u)}o.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){t.node.getComponent(cc.Animation).play("disappear")})))},o=this;for(var n in this._targetItems)e(n)},i([p(cc.Node)],e.prototype,"maskView",void 0),i([p(cc.Label)],e.prototype,"title",void 0),i([p(cc.Node)],e.prototype,"targetFrame",void 0),e=o=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../extend/action/CurveToAction":"CurveToAction","../GameSceneBase":"GameSceneBase","./TargetItem":"TargetItem"}],TargetBar:[function(t,e,o){"use strict";cc._RF.push(e,"65ffdBK1NNNbolpzsnARDwo","TargetBar");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./TargetItem"),a=t("../GameSceneBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._gameScene=null,e._targetItems=[],e}return n(e,t),e.prototype.hideAll=function(){for(var t=0,e=this._targetItems;t<e.length;t++){e[t].hideIco()}},e.prototype.setTargetData=function(t){for(var e in t){var o=t[e],n=Number(e);if(n){var i=this.getItemWithCollectionID(n);i&&i.setAmount(o)}}},e.prototype.clearTargets=function(){for(var t=0,e=this._targetItems;t<e.length;t++){e[t].node.destroy()}this._targetItems.length=0},e.prototype.getTargetIconWorldPos=function(t){return cc.Vec2.ZERO},e.prototype.getItemWithCollectionID=function(t){for(var e=null,o=0,n=this._targetItems;o<n.length;o++){var i=n[o];if(i.getCollectionID()==t){e=i;break}}return null==e&&(e=r.default.create(t))&&(this.node.addChild(e.node),this._targetItems.push(e)),e},e.prototype.getWorldPosWithCollectionID=function(t){var e=this.getItemWithCollectionID(t);return e?e.node.parent.convertToWorldSpaceAR(e.node.position):cc.Vec2.ZERO},e.prototype.onLoad=function(){var t=cc.find("Canvas");t&&(this._gameScene=t.getComponent(a.default))},e.prototype.start=function(){},e.prototype.onDestroy=function(){this._gameScene=null,this._targetItems=null},e=i([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../GameSceneBase":"GameSceneBase","./TargetItem":"TargetItem"}],TargetItem:[function(t,e,o){"use strict";cc._RF.push(e,"c63075vdItHaZfkhTQ0hRBx","TargetItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../defines/CollectionID"),a=t("../defines/IdentifierManager"),s=t("../../../component/UISpriteExt"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frame=null,e.icon=null,e.amountLabel=null,e.checkMark=null,e._collectionID=r.CollectionID.None,e._amount=0,e}var o;return n(e,t),o=e,e.prototype.getCollectionID=function(){return this._collectionID},e.prototype.setCollectionID=function(t){this._collectionID=t;var e=a.default.getInstance().getFrameNameFromCollectionID(this._collectionID),o=this.icon.getComponent(s.default);o&&(o.src=e)},e.prototype.getAmount=function(){return this._amount},e.prototype.setAmount=function(t,e){void 0===e&&(e=!0);var o=this._amount;if(this._amount=t,this.amountLabel.string=this._amount.toString(),e&&o!=this._amount){var n=this.getComponent(cc.Animation);if(n)n.stop(),n.play("bling");else{this.amountLabel.node.stopActionByTag(1001),this.amountLabel.node.scale=1;var i=cc.sequence(cc.scaleTo(.1,1.33).easing(cc.easeIn(2)),cc.scaleTo(.3,1).easing(cc.easeOut(2)));i.setTag(1001),this.amountLabel.node.runAction(i),this.icon.node.stopActionByTag(1001),this.icon.node.scale=1;var r=cc.sequence(cc.scaleTo(.1,1.33).easing(cc.easeIn(2)),cc.scaleTo(.3,1).easing(cc.easeOut(2)));r.setTag(1001),this.icon.node.runAction(r)}}else this.amountLabel.node.scale=1,this.icon.node.scale=1;this.checkMark.active=t<=0,this.amountLabel.node.active=t>0},e.prototype.showIco=function(){this.icon.node.opacity=255,this.checkMark.opacity=255,this.amountLabel.node.opacity=255},e.prototype.hideIco=function(){this.icon.node.opacity=0,this.checkMark.opacity=0,this.amountLabel.node.opacity=0},e.prototype.showFrame=function(t){void 0===t&&(t=!0),t?(this.frame.node.opacity=255,this.frame.node.runAction(cc.scaleTo(.2,1)),this.checkMark.runAction(cc.sequence(cc.delayTime(.2),cc.fadeTo(.1,255),null)),this.amountLabel.node.runAction(cc.sequence(cc.delayTime(.2),cc.fadeTo(.1,255),null))):(this.frame.node.setScale(1),this.frame.node.opacity=255,this.checkMark.opacity=255,this.amountLabel.node.opacity=255)},e.prototype.hideFrame=function(t){if(void 0===t&&(t=!0),t){var e=cc.sequence(cc.scaleTo(.2,.5),cc.fadeTo(.1,0),null);this.frame.node.runAction(e),this.checkMark.runAction(cc.fadeTo(.1,0)),this.amountLabel.node.runAction(cc.fadeTo(.1,0))}else this.frame.node.opacity=0,this.checkMark.opacity=0,this.amountLabel.node.opacity=0},e.create=function(t,e){void 0===e&&(e=!0);var n=cc.loader.getRes("match_scene/prefab/userInterface/TargetItem",cc.Prefab);if(n){var i=cc.instantiate(n);if(i){var r=i.getComponent(o);if(r)return r.init(t,e),r}}return null},e.prototype.init=function(t,e){this.frame.node.active=e,this.setCollectionID(t),this.setAmount(0)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.frame=null,this.icon=null,this.amountLabel=null,this.checkMark=null},i([p(cc.Sprite)],e.prototype,"frame",void 0),i([p(cc.Sprite)],e.prototype,"icon",void 0),i([p(cc.Label)],e.prototype,"amountLabel",void 0),i([p(cc.Node)],e.prototype,"checkMark",void 0),e=o=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../component/UISpriteExt":"UISpriteExt","../defines/CollectionID":"CollectionID","../defines/IdentifierManager":"IdentifierManager"}],UIButtonExt:[function(t,e,o){"use strict";cc._RF.push(e,"069c1FU/nxJ6YeuYJ8bTF9J","UIButtonExt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../base/IGame"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnText=null,e.pressedScale=1.1,e.transDuration=.1,e.touchSound=!0,e.initScale=-1,e.isStopBubbleEvent=!1,e.limitTouchTime=1e3,e.touchEnable=!0,e._fontColor=null,e._outLineColor=null,e._touchendCallBackFun=null,e._touchTarget=null,e._lastTouchedTime=0,e}return n(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){-1==this.initScale&&(this.initScale=this.node.scale),this.setTouchEnable(this.touchEnable)},e.prototype.onTouchDown=function(t){if(this.touchEnable&&this.enabledInHierarchy){var e=cc.scaleTo(this.transDuration,this.pressedScale);e.setTag(1001),this.node.stopActionByTag(1001),this.node.runAction(e),this.isStopBubbleEvent&&t.stopPropagation()}},e.prototype.onTouchUp=function(t){if(this.touchEnable&&this.enabledInHierarchy){if(this._touchendCallBackFun&&this._touchTarget){var e=!1,o=(new Date).getTime();0==this._lastTouchedTime?(e=!0,this._lastTouchedTime=o):Math.abs(this._lastTouchedTime-o)>this.limitTouchTime&&(e=!0,this._lastTouchedTime=o),e&&this._touchendCallBackFun.call(this._touchTarget,t)}var n=cc.scaleTo(this.transDuration,this.initScale);n.setTag(1002),this.node.stopActionByTag(1002),this.node.runAction(n),this.touchSound&&r.default.playAudio("audio/common/common_button")}},e.prototype.onTouchCancel=function(t){if(this.touchEnable&&this.enabledInHierarchy){var e=cc.scaleTo(this.transDuration,this.initScale);e.setTag(1002),this.node.stopActionByTag(1002),this.node.runAction(e)}},e.prototype.setBtnGray=function(t){var e,o;t?((e=this.node.getComponent(cc.Sprite))&&e.setState(1),this.btnText&&(null==this._fontColor&&(this._fontColor=this.btnText.node.color),this.btnText.node.color=cc.Color.WHITE,(o=this.btnText.getComponent(cc.LabelOutline))&&(null==this._outLineColor&&(this._outLineColor=o.color),o.color=o.color.fromHEX("#333333")))):((e=this.node.getComponent(cc.Sprite))&&e.setState(0),this.btnText&&(this._fontColor&&(this.btnText.node.color=this._fontColor),this._outLineColor&&(o=this.btnText.getComponent(cc.LabelOutline))&&(o.color=this._outLineColor)))},e.prototype.setTouchEnable=function(t){this.touchEnable=t,this.touchEnable?(this.node.on("touchstart",this.onTouchDown,this),this.node.on("touchend",this.onTouchUp,this),this.node.on("touchcancel",this.onTouchCancel,this)):this.node.targetOff(this)},e.prototype.setTouchCallback=function(t,e){this._touchendCallBackFun=t,this._touchTarget=e},e.prototype.removeTouchCallBack=function(){this._touchendCallBackFun=null,this._touchTarget=null},e.prototype.clearTouchLimitTime=function(){this._lastTouchedTime=0},e.prototype.onDestroy=function(){this.node.off("touchstart",this.onTouchDown,this),this.node.off("touchend",this.onTouchUp,this),this.node.off("touchcancel",this.onTouchCancel,this),this.removeTouchCallBack()},i([c(cc.Label)],e.prototype,"btnText",void 0),i([c],e.prototype,"pressedScale",void 0),i([c],e.prototype,"transDuration",void 0),i([c],e.prototype,"touchSound",void 0),i([c],e.prototype,"initScale",void 0),i([c],e.prototype,"isStopBubbleEvent",void 0),i([c],e.prototype,"limitTouchTime",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../base/IGame":"IGame"}],UINodeIdentifier:[function(t,e,o){"use strict";cc._RF.push(e,"27f1ez202tMP7oxJ80RscXS","UINodeIdentifier");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../extend/identify/nodeIdentify/IdentifyNodeManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.identifier="",e._identifier="",e}return n(e,t),e.prototype.onLoad=function(){""==this._identifier&&this.setIdentifier(this.identifier)},e.prototype.onDestroy=function(){this.setIdentifier("")},e.prototype.setIdentifier=function(t){r.default.getInstance().logout(this._identifier),this._identifier=t,r.default.getInstance().regist(this._identifier,this.node)},e.prototype.getIdentifier=function(){return this._identifier},i([c],e.prototype,"identifier",void 0),e=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../extend/identify/nodeIdentify/IdentifyNodeManager":"IdentifyNodeManager"}],UISceneBase:[function(t,e,o){"use strict";cc._RF.push(e,"54e8aa70RNE6qCFZ3+HHMOq","UISceneBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getWorldAreas=function(t,e){return[]},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],UISpriteExt:[function(t,e,o){"use strict";cc._RF.push(e,"f41c7fUzppLL5BL0ZHlFDVT","UISpriteExt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._imageUrl=null,e._curLoadCount=0,e._spriteSize=null,e}return n(e,t),e.prototype.setSpriteSize=function(t){this._spriteSize=t},Object.defineProperty(e.prototype,"src",{get:function(){return this._imageUrl},set:function(t){var e=this,o=this.getComponent(cc.Sprite);o||(o=this.addComponent(cc.Sprite)),this._imageUrl!=t&&(this.node.active=!1),this._imageUrl=t,this._curLoadCount+=1,cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){if(t)e._curLoadCount<=3&&(e.src=e._imageUrl);else{if(!e.isValid)return;if(n&&-1==e._imageUrl.indexOf(n.name))return;o.spriteFrame=n,e.node.active=!0,e._spriteSize&&e.node.setContentSize(e._spriteSize)}})},enumerable:!1,configurable:!0}),e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"93ae8ftfbtL+6CDmvxv84R6","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","IGame","Pair","RectangleClipper","UIButtonExt","UINodeIdentifier","UISceneBase","UISpriteExt","CFGTripleLevel","CFGTripleLevelGrass","CFGTripleLevelOrder","CFGTripleLevelPath","CFGTripleLevelPopsicles","CFGTripleMap","CFGTripleMapTileset","EMatchType","EViewZIndex","GameConfig","GameCurrencyType","GearID","CurveToAction","OrbitTrack","AudioManager","BehaviourDefines","IdentifyNodeManager","GameMath","MathUtils","StringUtil","TMXJsonPhraser","LoadingScene","GameSceneBase","MatchScene","GridCommand","GridCommandPair","Heap","CollectionGroupID","CollectionID","EntityGroupID","EntityID","IdentifierManager","ItemInfo","ItemInfoManager","KindID","PowerID","TMXConfigInfoKeys","EntityBase","EntityPrefabNodePool","CellBase","CellConveyer","CellFactory","CellMovablePlate","CellNormal","FenceBase","FenceFactory","FencePos","FenceVine","FloorBase","FloorChanger","FloorDoubler","FloorFactory","FloorGrass","FloorIce","FloorRoad","FlyerAnimation","FlyerBase","FlyerBomb","FlyerBullet","FlyerCannon","FlyerChargeEntity","FlyerCollectedEntity","FlyerCollectedSupply","FlyerComboWord","FlyerFireworksMissile","FlyerHammer","FlyerLaser","FlyerMissile","FlyerMoreStep","FlyerMower","FlyerNuclear","FlyerPopsicleBomb","FlyerPopsicleLine","FlyerScore","FlyerScoreLabel","FrameBase","FrameNormal","ItemBase","ItemFactory","ItemDogPaw","ItemNormal","ItemBombBase","ItemBombButterfly","ItemBombColumn","ItemBombCross","ItemBombRainbow","ItemBombRange","ItemBombRow","ItemBalloon","ItemBlock","ItemBone","ItemChestnut","ItemDogHouse","ItemDoughnut","ItemFireWormBottle","ItemFireworks","ItemFruitCake","ItemHoneyComb","ItemJamBottle","ItemMagicCrystal","ItemMower","ItemPuppy","ItemStatue","ItemWatermelon","ItemStateChangeColor","ItemStateDrop","ItemStateGenerate","ItemStateReplace","ItemStateShuffle","ItemStateSwap","MarkerBase","MarkerNormal","ParasiteBase","ParasiteFactory","ParasiteGiftBox","ParasiteHoney","ParasiteIceCube","ParasiteShackle","PopsicleBase","PopsicleFactory","PopsicleLine","PopsicleNormal","PopsicleRange","RugBase","RugFactory","RugJam","EntityStateBase","EntityStateMachine","EntityStateWait","EntityEventBase","EntityEventChanged","StateBase","StateMachineBase","GridBase","AvailableSwapInfo","GridStateBase","GridStateMachine","GridStateAppear","GridStateAutoActivateBomb","GridStateBousTime","GridStateChanger","GridStateCollection","GridStateComboWord","GridStateComplete","GridStateCompleteBanner","GridStateCongratulation","GridStateConveyer","GridStateCreate","GridStateCrossBomb","GridStateDisappear","GridStateDrop","GridStateFail","GridStateFailSummary","GridStateForceClean","GridStateForceSwap","GridStateHoney","GridStateLaunchGears","GridStateLaunchResidentGear","GridStateMagicCrystal","GridStateMatch","GridStateNoMoreStep","GridStateNull","GridStatePrepare","GridStateShuffle","GridStateStalemate","GridStateSwapNeighbour","GameStatistics","GameTargetBase","GameTargetSingle","CollectedTrainSupplyBar","CollectedTrainSupplyItem","CompleteBanner","GameNoMoreStepPanel","GameCongratulationPanel","GameEndItem","GameOverPanel","GameResultBasePanel","StarAndScoreFrame","GameStalematePanel","GearBar","GearItem","LevelSelectorPanel","NoMoreStepBasePanel","PowerupItem","ScoreBar","ShinningStar","StepBar","TargetBanner","TargetBar","TargetItem"]);